# Combined Code Bundle

Generated: 2025-10-09 09:28:05 UTC
Root: C:\Dev\Atticus
Files: 183

## Index
- `.eslintrc.json`
- `.github/workflows/auto-fix-ruff.yml`
- `.github/workflows/eval-gate.yml`
- `.github/workflows/lint-test.yml`
- `.github/workflows/release.yml`
- `.markdownlint-cli2.yaml`
- `.pre-commit-config.yaml`
- `.prettierrc.json`
- `.vscode/extensions.json`
- `LICENSE`
- `Makefile`
- `api/Dockerfile`
- `api/__init__.py`
- `api/dependencies.py`
- `api/errors.py`
- `api/main.py`
- `api/middleware.py`
- `api/rate_limit.py`
- `api/routes/__init__.py`
- `api/routes/admin.py`
- `api/routes/chat.py`
- `api/routes/contact.py`
- `api/routes/eval.py`
- `api/routes/health.py`
- `api/routes/ingest.py`
- `api/schemas.py`
- `api/utils.py`
- `app/admin/page.tsx`
- `app/api/admin/uncertain/[id]/approve/route.ts`
- `app/api/admin/uncertain/[id]/ask-followup/route.ts`
- `app/api/admin/uncertain/[id]/escalate/route.ts`
- `app/api/admin/uncertain/route.ts`
- `app/api/ask/route.ts`
- `app/api/auth/[...nextauth]/route.ts`
- `app/api/glossary/[id]/route.ts`
- `app/api/glossary/route.ts`
- `app/api/glossary/utils.ts`
- `app/apps/page.tsx`
- `app/contact/page.tsx`
- `app/globals.css`
- `app/layout.tsx`
- `app/page.tsx`
- `app/providers.tsx`
- `app/settings/page.tsx`
- `app/signin/page.tsx`
- `app/signin/verify/page.tsx`
- `atticus/__init__.py`
- `atticus/config.py`
- `atticus/embeddings.py`
- `atticus/logging.py`
- `atticus/logging_utils.py`
- `atticus/metrics.py`
- `atticus/notify/__init__.py`
- `atticus/notify/mailer.py`
- `atticus/tokenization.py`
- `atticus/utils/__init__.py`
- `atticus/utils/hashing.py`
- `atticus/vector_db.py`
- `components/AnswerRenderer.tsx`
- `components/admin/admin-ops-console.tsx`
- `components/auth/sign-in-form.tsx`
- `components/chat/chat-panel.tsx`
- `components/glossary/admin-panel.tsx`
- `components/page-header.tsx`
- `components/site-footer.tsx`
- `components/site-header.tsx`
- `components/ui/badge.tsx`
- `components/ui/button.tsx`
- `components/ui/card.tsx`
- `components/ui/drawer.tsx`
- `components/ui/input.tsx`
- `components/ui/label.tsx`
- `components/ui/select.tsx`
- `components/ui/table.tsx`
- `components/ui/tabs.tsx`
- `components/ui/textarea.tsx`
- `config.yaml`
- `docker-compose.yml`
- `docs/api/openapi.json`
- `eval/__init__.py`
- `eval/baseline.json`
- `eval/harness/__init__.py`
- `eval/harness/test_eval.py`
- `eval/harness/test_ui.py`
- `eval/runner.py`
- `eval/runs/20251008/metrics.html`
- `eval/runs/20251008/summary.json`
- `eval/runs/ci/summary.json`
- `eval/runs/manual/summary.json`
- `ingest/__init__.py`
- `ingest/chunker.py`
- `ingest/models.py`
- `ingest/parsers/__init__.py`
- `ingest/parsers/docx.py`
- `ingest/parsers/html.py`
- `ingest/parsers/image.py`
- `ingest/parsers/pdf.py`
- `ingest/parsers/text.py`
- `ingest/parsers/xlsx.py`
- `ingest/pipeline.py`
- `knip.json`
- `lib/ask-client.ts`
- `lib/ask-contract.ts`
- `lib/auth.ts`
- `lib/chat-capture.ts`
- `lib/prisma.ts`
- `lib/rbac.ts`
- `lib/rls.ts`
- `lib/utils.ts`
- `middleware.ts`
- `next-auth.d.ts`
- `next-env.d.ts`
- `next.config.js`
- `nginx/Dockerfile`
- `package-lock.json`
- `package.json`
- `playwright.config.ts`
- `postcss.config.js`
- `prisma/migrations/20240702120000_auth_rbac/migration.sql`
- `prisma/migrations/20240708123000_pgvector_schema/migration.sql`
- `prisma/migrations/20240709150000_glossary_review_workflow/migration.sql`
- `prisma/migrations/20250201090000_fix_updated_at_trigger/migration.sql`
- `prisma/migrations/20251008090000_pgvector_bootstrap/migration.sql`
- `prisma/migrations/20251018090000_admin_ops_console/migration.sql`
- `prisma/migrations/20251019090000_pgvector_lists_guc/migration.sql`
- `prisma/migrations/20251019090500_rag_events_audit/migration.sql`
- `prisma/schema.prisma`
- `prisma/seed.ts`
- `pyproject.toml`
- `requirements.in`
- `requirements.txt`
- `retriever/__init__.py`
- `retriever/answer_format.py`
- `retriever/citation_utils.py`
- `retriever/generator.py`
- `retriever/models.py`
- `retriever/service.py`
- `retriever/vector_store.py`
- `scripts/atticus_cli.py`
- `scripts/audit_unused.py`
- `scripts/check_version_parity.py`
- `scripts/chunk_ced.py`
- `scripts/db_verify.py`
- `scripts/debug_env.py`
- `scripts/e2e_smoke.py`
- `scripts/eval_qa.py`
- `scripts/eval_run.py`
- `scripts/generate_api_docs.py`
- `scripts/generate_env.py`
- `scripts/icon-audit.mjs`
- `scripts/ingest_cli.py`
- `scripts/list_make_targets.py`
- `scripts/make_seed.py`
- `scripts/rollback.py`
- `scripts/route-audit.mjs`
- `scripts/run_ingestion.py`
- `scripts/smtp_test.py`
- `scripts/test_health.py`
- `scripts/verify_pgvector.sql`
- `seeds/seed_manifest.json`
- `tailwind.config.js`
- `tests/playwright/rbac.spec.ts`
- `tests/test_admin_route.py`
- `tests/test_api_version.py`
- `tests/test_chat_route.py`
- `tests/test_chunker.py`
- `tests/test_citation_dedupe.py`
- `tests/test_config_reload.py`
- `tests/test_contact_route.py`
- `tests/test_environment_diagnostics.py`
- `tests/test_error_schema.py`
- `tests/test_eval_runner.py`
- `tests/test_hashing.py`
- `tests/test_ingestion_retrieval_integration.py`
- `tests/test_mailer.py`
- `tests/test_seed_manifest.py`
- `tests/test_ui_route.py`
- `tests/unit/admin-uncertain-route.test.ts`
- `tests/unit/ask-client.test.ts`
- `tests/unit/glossary-route.test.ts`
- `tests/unit/rbac.test.ts`
- `tsconfig.json`
- `vitest.config.ts`


---

### .eslintrc.json

```json
{
  "root": true,
  "extends": ["next/core-web-vitals", "plugin:tailwindcss/recommended", "prettier"],
  "plugins": ["tailwindcss"],
  "settings": {
    "tailwindcss": {
      "callees": ["cn", "clsx", "cva"],
      "classRegex": ["cva\\(([^)]*)\\)", "cn\\(([^)]*)\\)", "clsx\\(([^)]*)\\)"]
    }
  },
  "rules": {
    "@next/next/no-html-link-for-pages": "off",
    "tailwindcss/classnames-order": "off"
  }
}

```

---

### .github/workflows/auto-fix-ruff.yml

```yaml
name: Auto-fix Ruff

on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: write
  pull-requests: write

concurrency:
  group: auto-fix-ruff-${{ github.head_ref }}
  cancel-in-progress: false

jobs:
  ruff-fix:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout PR head
        uses: actions/checkout@v4
        with:
          ref: ${{ github.head_ref }}
          fetch-depth: 0

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: Install ruff
        run: |
          python -m pip install --upgrade pip ruff

      - name: Apply ruff fixes
        run: |
          ruff format .
          ruff check . --fix

      - name: Commit changes (if any)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore: apply ruff auto-fixes"
          branch: ${{ github.head_ref }}

```

---

### .github/workflows/eval-gate.yml

```yaml
name: Evaluation Gate

on:
  push:
    branches: [main]
  pull_request:

jobs:
  evaluation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
          cache-dependency-path: requirements.txt

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          python -m pip install -r requirements.txt

      - name: Run evaluation
        run: python scripts/eval_run.py --json --output-dir eval/runs/ci

      - name: Upload evaluation artifacts
        uses: actions/upload-artifact@v4
        with:
          name: evaluation-ci
          path: eval/runs/ci

```

---

### .github/workflows/lint-test.yml

```yaml
name: Lint and Test

on:
  push:
    branches: [main]
  pull_request:

jobs:
  frontend-quality:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: ankane/pgvector:0.5.1
        ports:
          - 5432:5432
        env:
          POSTGRES_USER: postgres
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: atticus
        options: >-
          --health-cmd "pg_isready -U postgres -d atticus"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    strategy:
      matrix:
        node-version: ["20"]
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: "npm"

      - name: Install dependencies
        run: npm ci

      - name: Set up Python for audits
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: Install Python audit tooling
        run: python -m pip install --upgrade pip vulture

      - name: Next.js lint
        run: npm run lint

      - name: Next.js typecheck
        run: npm run typecheck

      - name: Next.js build
        run: npm run build

      - name: Prepare audit report directory
        run: mkdir -p reports/ci

      - name: Audit TypeScript usage graph
        run: |
          set -o pipefail
          npm run audit:ts -- --reporter json | tee reports/ci/knip-strict.json

      - name: Audit icon usage
        run: |
          set -o pipefail
          npm run audit:icons | tee reports/ci/icon-audit.log

      - name: Audit Next.js routes
        run: |
          set -o pipefail
          npm run audit:routes | tee reports/ci/routes.json

      - name: Audit Python unused code
        run: |
          set -o pipefail
          npm run audit:py | tee reports/ci/python-unused.json

      - name: Upload audit reports
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: frontend-audit-reports
          path: reports/ci

  lint-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"

      - name: Install project + dev tools
        run: |
          python -m pip install --upgrade pip
          # Installs your package and dev extras (ruff, mypy, pytest, pydantic, etc.)
          python -m pip install -e ".[dev]"
          python -m pip install pre-commit

      - name: Show tool versions
        run: |
          python --version
          ruff --version
          mypy --version
          pytest --version

      - name: Ruff lint
        run: ruff check .

      - name: Ruff format check
        run: ruff format --check .

      - name: Type check
        run: |
          # Grab stubs for common third-party libs if available (non-fatal)
          mypy --install-types --non-interactive || true
          # Match your mypy package set
          mypy atticus api ingest retriever eval

      - name: Tests with coverage (>=90%)
        run: |
          pytest --maxfail=1 --disable-warnings \
                 --cov=atticus --cov=api --cov=retriever \
                 --cov-report=term-missing --cov-fail-under=90 -q
      - name: Pre-commit (all files)
        run: pre-commit run --all-files --show-diff-on-failure

  pgvector-check:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: ankane/pgvector:0.5.1
        ports:
          - 5432:5432
        env:
          POSTGRES_USER: postgres
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: atticus
        options: >-
          --health-cmd "pg_isready -U postgres -d atticus"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    env:
      DATABASE_URL: postgresql://postgres:postgres@localhost:5432/atticus
      PGVECTOR_DIMENSION: 3072
      PGVECTOR_LISTS: 100
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"

      - name: Install dependencies
        run: npm ci

      - name: Install psql client
        run: |
          sudo apt-get update
          sudo apt-get install -y postgresql-client

      - name: Apply Prisma migrations
        run: npx prisma migrate deploy

      - name: Verify pgvector schema
        run: make db.verify

```

---

### .github/workflows/release.yml

```yaml
name: Release

on:
  push:
    tags:
      - "v*"

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"

      - name: Install Node.js dependencies
        run: npm ci

      - name: Next.js quality gates
        run: |
          npm run lint
          npm run typecheck
          npm run build

      - name: Runtime dependency audit (non-blocking)
        continue-on-error: true
        run: npm audit --omit=dev

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"
          cache-dependency-path: requirements.txt

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          python -m pip install -r requirements.txt

      - name: Ruff lint
        run: ruff check .

      - name: Ruff format check
        run: ruff format --check .

      - name: Type check
        run: mypy

      - name: Pytest
        run: pytest

      - name: Run evaluation
        run: python scripts/eval_run.py --json --output-dir eval/runs/release

      - name: Upload evaluation artifacts
        uses: actions/upload-artifact@v4
        with:
          name: evaluation-release
          path: eval/runs/release

      - name: Publish GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          generate_release_notes: true
          files: |
            eval/runs/release/metrics.csv
            eval/runs/release/summary.json
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

```

---

### .markdownlint-cli2.yaml

```yaml
config:
  MD013:
    line_length: 180
    heading_line_length: 0
    tables: false
    strict: false
    inner_sentence: true
    code_blocks: false
  MD029:
    style: "one_or_ordered"
  MD022: true
  MD024:
    siblings_only: true
    allow_different_nesting: true
  MD032: true
  MD033:
    allowed_elements: ["img", "p", "br", "a", "code", "em", "strong", "details", "summary"]
  MD041: true
globs:
  - "**/*.md"
ignores:
  - "CHANGELOG.md"
  - ".venv/**"
  - "**/.venv/**"
  - "node_modules/**"
  - "README.md"
  - "AGENTS.md"
  - "ToDo-Complete.md"
  - "TODO.md"
  - "CODEX_PROMPT.md"
  - "CONTRIBUTING.md"
  - "docs/README.md"
  - "REQUIREMENTS.md"
  - "SECURITY.md"
  - "content/**"
  - "scripts/rollback.md"
  - ".archive/**"
  - "tests/**"
  - "EXAMPLES_ONLY/**"

```

---

### .pre-commit-config.yaml

```yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.13.1
    hooks:
      - id: ruff
        args: ["--fix"]
        exclude: '^_tmp_.*\.py$'
      - id: ruff-format
        exclude: '^_tmp_.*\.py$'
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        additional_dependencies:
          - pydantic
          - pydantic-settings
          - types-requests
          - types-PyYAML
        args: ["--config-file=pyproject.toml"]
  - repo: local
    hooks:
      - id: eslint
        name: eslint
        entry: npx --yes eslint --max-warnings=0
        language: node
        types_or: [javascript, jsx, ts, tsx]
        additional_dependencies:
          - eslint@8.57.0
          - eslint-config-next@14.2.5
          - eslint-config-prettier@9.1.0
          - eslint-plugin-tailwindcss@3.13.0
          - typescript@5.4.5
        args: ["--fix"]
      - id: prettier
        name: prettier
        entry: npx --yes prettier --write
        language: node
        types_or: [javascript, jsx, ts, tsx, json, yaml, css, scss, less, markdown, mdx]
        additional_dependencies:
          - prettier@3.3.3
          - prettier-plugin-tailwindcss@0.5.14
      - id: markdownlint-cli2
        name: markdownlint-cli2
        entry: npx --yes markdownlint-cli2
        language: node
        pass_filenames: false
        types: [markdown]
        additional_dependencies:
          - markdownlint-cli2@0.12.0
        args: ["**/*.md", "#node_modules", "#.venv"]
      - id: forbid-tmp-files
        name: forbid tmp files (_tmp_*)
        language: python
        entry: python
        pass_filenames: false
        args:
          - -c
          - |
            import os, sys, subprocess
            try:
                out = subprocess.check_output(['git', 'ls-files', '-z'])
            except Exception as e:
                print(f'forbid-tmp: unable to list files: {e}')
                sys.exit(0)
            files = out.decode('utf-8', 'ignore').split('\0')
            bad = [p for p in files if p and (os.path.basename(p).startswith('_tmp_') or '/_tmp_' in p or '\\_tmp_' in p)]
            if bad:
                print('Forbidden tmp files found:\n' + '\n'.join(bad))
                sys.exit(1)
            sys.exit(0)

```

---

### .prettierrc.json

```json
{
  "semi": true,
  "singleQuote": false,
  "printWidth": 100,
  "tabWidth": 2,
  "trailingComma": "es5",
  "plugins": ["prettier-plugin-tailwindcss"]
}

```

---

### .vscode/extensions.json

```json
{
  "recommendations": [
    "ms-python.python",
    "charliermarsh.ruff",
    "ms-python.mypy-type-checker",
    "DavidAnson.vscode-markdownlint"
  ]
}

```

---

### LICENSE

```text
SPDX-License-Identifier: MIT

MIT License

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```

---

### Makefile

```make
# Makefile — Atticus
.PHONY: env ingest eval api e2e openapi smtp-test smoke test test.unit test.api lint format typecheck quality web-build web-start web-lint web-typecheck web-dev app-dev help \
        db.up db.down db.migrate db.seed db.verify seed web-test web-e2e web-audit

PYTHON ?= python
XDIST_AVAILABLE := $(shell $(PYTHON) -c "import importlib.util; print(1 if importlib.util.find_spec('xdist') else 0)")
PYTEST_PARALLEL := $(if $(filter 1,$(XDIST_AVAILABLE)),-n auto,)

DB_SERVICE ?= postgres
PGVECTOR_DIMENSION ?= 3072
PGVECTOR_LISTS ?= 100

env:
	$(PYTHON) scripts/generate_env.py

smtp-test:
	$(PYTHON) scripts/smtp_test.py

help:
	@echo "Available targets:"
	@python scripts/list_make_targets.py $(MAKEFILE_LIST)

api:
	$(PYTHON) -m uvicorn api.main:app --reload --port 8000


web-dev:
	@echo "Launching Next.js UI on http://localhost:3000 (expects API on :8000)"
	npm run dev

app-dev:
	@echo "Alias for web-dev; launching Next.js UI"
	$(MAKE) web-dev

db.up:
	docker compose up -d $(DB_SERVICE)

db.down:
	docker compose stop $(DB_SERVICE)

db.migrate:
	npm run prisma:generate
	npm run db:migrate

db.verify:
	$(PYTHON) scripts/db_verify.py

db.seed:
	npm run db:seed

ingest:
	$(PYTHON) scripts/ingest_cli.py

seed:
	$(PYTHON) scripts/make_seed.py

eval:
	$(PYTHON) scripts/eval_run.py

openapi:
	$(PYTHON) scripts/generate_api_docs.py

# Unified CLI dispatcher
atticus:
	$(PYTHON) scripts/atticus_cli.py --help

smoke:
	$(PYTHON) scripts/test_health.py

test.unit:
	$(PYTHON) -m pytest $(PYTEST_PARALLEL) --maxfail=1 --disable-warnings \
	tests/test_hashing.py \
	tests/test_config_reload.py \
	tests/test_mailer.py \
	tests/test_chunker.py \
	tests/test_seed_manifest.py \
	tests/test_eval_runner.py

test.api:
        $(PYTHON) -m pytest $(PYTEST_PARALLEL) --maxfail=1 --disable-warnings \
               tests/test_chat_route.py \
               tests/test_contact_route.py \
               tests/test_error_schema.py \
               tests/test_api_version.py \
               tests/test_ui_route.py

test:
	$(PYTHON) -m pytest $(PYTEST_PARALLEL) --maxfail=1 --disable-warnings \
	       --cov=atticus --cov=api --cov=retriever \
	       --cov-report=term-missing --cov-fail-under=90

web-test:
	npm run test:unit

web-e2e:
	npm run test:e2e

e2e: env ingest eval
	$(PYTHON) scripts/e2e_smoke.py

# Local quality gates (mirror CI)
lint:
	ruff check .
	ruff format --check .

format:
	ruff format .
	ruff check . --fix

typecheck:
	mypy atticus api ingest retriever eval

quality: lint typecheck test version-check web-lint web-typecheck web-test web-build web-audit web-e2e

# Full verification pass for CI / release
verify:
	@echo "Running full integration checks..."
	make env
	make lint
	make typecheck
	make test.unit
	make test.api
	make version-check
	make web-lint
	make web-typecheck
	make web-build
	make web-audit
	@echo "✅ All checks passed."
web-build:
	npm run build

web-start:
	npm run start

web-lint:
	npm run lint

web-typecheck:
	npm run typecheck

web-audit:
	npm run audit:ts
	npm run audit:icons
	npm run audit:routes
	npm run audit:py

# Ensure VERSION and package.json are aligned
version-check:
	@$(PYTHON) scripts/check_version_parity.py

```

---

### api/Dockerfile

```dockerfile
FROM python:3.12-slim AS base

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

RUN apt-get update \
    && apt-get install -y --no-install-recommends build-essential curl \
    && rm -rf /var/lib/apt/lists/*

COPY requirements.txt ./requirements.txt
RUN pip install --no-cache-dir --upgrade pip \
    && pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8000

CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000"]

```

---

### api/__init__.py

```python
"""FastAPI application factory for Atticus."""

from .main import app

__all__ = ["app"]

```

---

### api/dependencies.py

```python
"""Shared FastAPI dependencies."""

from __future__ import annotations

import logging
from functools import lru_cache
from pathlib import Path
from typing import Annotated

from fastapi import Depends, HTTPException, Request, status

from atticus.config import AppSettings, load_settings
from atticus.logging import configure_logging
from atticus.metrics import MetricsRecorder


def get_settings() -> AppSettings:
    settings = load_settings()
    settings.ensure_directories()
    return settings


SettingsDep = Annotated[AppSettings, Depends(get_settings)]


def get_logger(settings: SettingsDep) -> logging.Logger:
    return configure_logging(settings)


@lru_cache(maxsize=1)
def get_metrics(settings: SettingsDep) -> MetricsRecorder:
    recorder = MetricsRecorder(settings=settings, store_path=Path("logs/metrics/metrics.csv"))
    return recorder


LoggerDep = Annotated[logging.Logger, Depends(get_logger)]
MetricsDep = Annotated[MetricsRecorder, Depends(get_metrics)]


def require_admin_token(request: Request, settings: SettingsDep) -> None:
    token = settings.admin_api_token
    if not token:
        raise HTTPException(
            status_code=status.HTTP_503_SERVICE_UNAVAILABLE,
            detail="Admin API token not configured.",
        )
    provided = request.headers.get("X-Admin-Token")
    if not provided:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Missing X-Admin-Token header.",
        )
    if provided != token:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Invalid admin token.",
        )


AdminGuard = Annotated[None, Depends(require_admin_token)]

```

---

### api/errors.py

```python
"""Custom exception handlers returning the shared JSON error schema."""

from __future__ import annotations

from collections.abc import Iterable
from typing import Any

from fastapi import Request, status
from fastapi.exceptions import RequestValidationError
from fastapi.responses import JSONResponse
from starlette.exceptions import HTTPException as StarletteHTTPException

from atticus.logging import log_error

from .schemas import ErrorResponse

_ERROR_CODE_BY_STATUS: dict[int, str] = {
    status.HTTP_400_BAD_REQUEST: "bad_request",
    status.HTTP_401_UNAUTHORIZED: "unauthorized",
    status.HTTP_403_FORBIDDEN: "forbidden",
    status.HTTP_404_NOT_FOUND: "not_found",
    status.HTTP_409_CONFLICT: "conflict",
    status.HTTP_422_UNPROCESSABLE_ENTITY: "validation_error",
    status.HTTP_429_TOO_MANY_REQUESTS: "rate_limited",
}


def _lookup_error_code(status_code: int) -> str:
    if status_code in _ERROR_CODE_BY_STATUS:
        return _ERROR_CODE_BY_STATUS[status_code]
    if 500 <= status_code < 600:
        return "internal_error"
    return "http_error"


def _normalize_detail(detail: Any) -> str:
    if isinstance(detail, str):
        return detail
    if isinstance(detail, dict):
        return "; ".join(f"{k}: {v}" for k, v in detail.items()) or "An error occurred"
    if isinstance(detail, Iterable) and not isinstance(detail, (str, bytes)):
        return "; ".join(str(item) for item in detail)
    return str(detail) if detail is not None else "An error occurred"


def _build_response(
    request: Request,
    *,
    status_code: int,
    error: str,
    detail: str,
    fields: dict[str, str] | None = None,
) -> JSONResponse:
    request_id = getattr(request.state, "request_id", "unknown")
    payload = ErrorResponse(
        error=error,
        detail=detail,
        request_id=request_id,
        fields=fields,
    ).model_dump(exclude_none=True)
    response = JSONResponse(status_code=status_code, content=payload)
    response.headers["X-Request-ID"] = request_id
    return response


async def http_exception_handler(request: Request, exc: StarletteHTTPException) -> JSONResponse:
    error_code = _lookup_error_code(exc.status_code)
    detail = _normalize_detail(exc.detail)
    if exc.status_code >= status.HTTP_500_INTERNAL_SERVER_ERROR:
        logger = getattr(request.app.state, "logger", None)
        if logger is not None:
            log_error(
                logger,
                "http_exception",
                request_id=getattr(request.state, "request_id", "unknown"),
                status_code=exc.status_code,
                detail=detail,
            )
    return _build_response(
        request,
        status_code=exc.status_code,
        error=error_code,
        detail=detail,
    )


async def validation_exception_handler(
    request: Request, exc: RequestValidationError
) -> JSONResponse:
    fields: dict[str, str] = {}
    messages: list[str] = []
    for err in exc.errors():
        loc = err.get("loc", ())
        field_parts = [str(part) for part in loc if part not in {"body", "query"}]
        field = ".".join(field_parts) if field_parts else "payload"
        message = err.get("msg", "Invalid value")
        fields[field] = message
        messages.append(f"{field}: {message}")
    detail = "; ".join(messages) if messages else "Invalid request payload"

    logger = getattr(request.app.state, "logger", None)
    if logger is not None:
        log_error(
            logger,
            "request_validation_error",
            request_id=getattr(request.state, "request_id", "unknown"),
            detail=detail,
            fields=fields,
        )
    return _build_response(
        request,
        status_code=status.HTTP_422_UNPROCESSABLE_ENTITY,
        error=_lookup_error_code(status.HTTP_422_UNPROCESSABLE_ENTITY),
        detail=detail,
        fields=fields or None,
    )


async def unhandled_exception_handler(request: Request, exc: Exception) -> JSONResponse:
    logger = getattr(request.app.state, "logger", None)
    detail = "An internal error occurred."
    if logger is not None:
        log_error(
            logger,
            "unhandled_exception",
            request_id=getattr(request.state, "request_id", "unknown"),
            detail=str(exc),
        )
    return _build_response(
        request,
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        error="internal_error",
        detail=detail,
    )

```

---

### api/main.py

```python
"""FastAPI application for Atticus."""

from __future__ import annotations

from collections.abc import AsyncIterator
from contextlib import asynccontextmanager
from pathlib import Path

from fastapi import FastAPI
from fastapi.exceptions import RequestValidationError
from starlette.exceptions import HTTPException as StarletteHTTPException

from atticus.logging import configure_logging
from atticus.metrics import MetricsRecorder

from .dependencies import get_settings
from .errors import (
    http_exception_handler,
    unhandled_exception_handler,
    validation_exception_handler,
)
from .middleware import RequestContextMiddleware
from .rate_limit import RateLimiter
from .routes import admin, chat, contact, eval, health, ingest


@asynccontextmanager
async def lifespan(app: FastAPI) -> AsyncIterator[None]:
    settings = get_settings()
    logger = configure_logging(settings)
    metrics = MetricsRecorder(settings=settings)
    app.state.settings = settings
    app.state.logger = logger
    app.state.metrics = metrics
    app.state.rate_limiter = RateLimiter(
        limit=settings.rate_limit_requests,
        window_seconds=settings.rate_limit_window_seconds,
    )
    # Warn when critical secrets are missing (non-fatal in dev/test)
    if not (settings.openai_api_key or "").strip():
        logger.warning(
            "OPENAI_API_KEY not set; embeddings/generation may fail",
            extra={"extra_payload": {"env": ".env", "key": "OPENAI_API_KEY"}},
        )
    try:
        yield
    finally:
        metrics.flush()


def _load_version() -> str:
    """Return the semantic version recorded in the repository root."""

    version_path = Path(__file__).resolve().parents[1] / "VERSION"
    try:
        version = version_path.read_text(encoding="utf-8").strip()
    except OSError:
        return "0.0.0"
    return version or "0.0.0"


app = FastAPI(
    title="Atticus RAG API",
    version=_load_version(),
    docs_url=None,
    redoc_url=None,
    lifespan=lifespan,
)
app.add_middleware(RequestContextMiddleware)
app.add_exception_handler(StarletteHTTPException, http_exception_handler)
app.add_exception_handler(RequestValidationError, validation_exception_handler)
app.add_exception_handler(Exception, unhandled_exception_handler)
app.include_router(health.router)
app.include_router(ingest.router)
app.include_router(chat.router)
app.include_router(admin.router)
app.include_router(eval.router)
app.include_router(contact.router)

```

---

### api/middleware.py

```python
"""Custom middleware for request IDs and logging."""

from __future__ import annotations

import hashlib
import time
import uuid
from collections.abc import Awaitable, Callable

from fastapi import Request
from starlette.middleware.base import BaseHTTPMiddleware
from starlette.responses import JSONResponse, Response

from atticus.logging import log_event


class RequestContextMiddleware(BaseHTTPMiddleware):
    """Attach a request ID to each call and emit structured logs."""

    async def dispatch(
        self,
        request: Request,
        call_next: Callable[[Request], Awaitable[Response]],
    ) -> Response:
        request_id = request.headers.get("X-Request-ID") or uuid.uuid4().hex
        request.state.request_id = request_id
        request.state.trace_id = request_id

        start = time.perf_counter()
        logger = getattr(request.app.state, "logger", None)

        limiter = getattr(request.app.state, "rate_limiter", None)
        if limiter and request.url.path == "/ask":
            identifier = (
                request.headers.get("X-User-ID")
                or request.headers.get("X-Forwarded-For")
                or (request.client.host if request.client else "anonymous")
            )
            allowed, retry_after = limiter.allow(identifier)
            if not allowed:
                hashed = hashlib.sha256(identifier.encode("utf-8")).hexdigest()[:12]
                if logger is not None:
                    log_event(
                        logger,
                        "rate_limit_blocked",
                        request_id=request_id,
                        identifier_hash=hashed,
                        retry_after=retry_after,
                    )
                payload = {
                    "error": "rate_limited",
                    "detail": "Rate limit exceeded. Please retry later.",
                    "request_id": request_id,
                }
                return JSONResponse(
                    payload,
                    status_code=429,
                    headers={"Retry-After": str(retry_after), "X-Request-ID": request_id},
                )

        try:
            response = await call_next(request)
        except Exception as exc:  # pragma: no cover - runtime error path
            if logger is not None:
                log_event(
                    logger,
                    "request_error",
                    request_id=request_id,
                    method=request.method,
                    path=request.url.path,
                    error=str(exc),
                )
            raise

        elapsed_ms = (time.perf_counter() - start) * 1000
        response.headers["X-Request-ID"] = request_id

        if logger is not None:
            log_event(
                logger,
                "request_complete",
                request_id=request_id,
                method=request.method,
                path=request.url.path,
                status=response.status_code,
                latency_ms=round(elapsed_ms, 2),
            )

        metrics = getattr(request.app.state, "metrics", None)
        if (
            metrics is not None
            and request.url.path == "/ask"
            and hasattr(request.state, "confidence")
        ):
            metrics.record(
                float(request.state.confidence),
                elapsed_ms,
                bool(getattr(request.state, "escalate", False)),
                trace_id=request_id,
            )

        return response

```

---

### api/rate_limit.py

```python
"""Simple in-memory rate limiter for API requests."""

from __future__ import annotations

import time
from collections import deque
from dataclasses import dataclass, field


@dataclass(slots=True)
class RateLimiter:
    limit: int
    window_seconds: int
    blocked: int = 0
    _buckets: dict[str, deque[float]] = field(default_factory=dict)

    def allow(self, key: str) -> tuple[bool, int]:
        now = time.monotonic()
        bucket = self._buckets.setdefault(key, deque())
        cutoff = now - self.window_seconds
        while bucket and bucket[0] <= cutoff:
            bucket.popleft()
        if len(bucket) >= self.limit:
            self.blocked += 1
            retry_after = int(max(1, round(bucket[0] + self.window_seconds - now)))
            return False, retry_after
        bucket.append(now)
        return True, self.limit - len(bucket)

    def snapshot(self) -> dict[str, int]:
        return {
            "limit": self.limit,
            "window_seconds": self.window_seconds,
            "active_keys": len(self._buckets),
            "blocked": self.blocked,
        }

    def reset(self) -> None:
        self.blocked = 0
        self._buckets.clear()

```

---

### api/routes/__init__.py

```python
"""Route modules for Atticus API."""

from . import admin, chat, eval, health, ingest

__all__ = ["admin", "chat", "eval", "health", "ingest"]

```

---

### api/routes/admin.py

```python
"""Admin endpoints for dictionary and error logs."""

from __future__ import annotations

import json
from datetime import datetime

from fastapi import APIRouter, HTTPException, Query, Request
from fastapi.responses import HTMLResponse

from atticus.logging import log_event

from ..dependencies import AdminGuard, LoggerDep, MetricsDep, SettingsDep
from ..schemas import (
    DictionaryEntry,
    DictionaryPayload,
    ErrorLogEntry,
    MetricsDashboard,
    MetricsHistogram,
    SessionLogEntry,
    SessionLogResponse,
)
from ..utils import load_dictionary, load_error_logs, load_session_logs, save_dictionary

router = APIRouter(prefix="/admin")


@router.get("/dictionary", response_model=DictionaryPayload)
async def read_dictionary(_: AdminGuard, settings: SettingsDep) -> DictionaryPayload:
    try:
        entries = [DictionaryEntry(**item) for item in load_dictionary(settings.dictionary_path)]
    except ValueError as exc:  # pragma: no cover - corrupted file path
        raise HTTPException(status_code=500, detail=str(exc)) from exc
    return DictionaryPayload(entries=entries)


@router.post("/dictionary", response_model=DictionaryPayload)
async def write_dictionary(
    _: AdminGuard,
    payload: DictionaryPayload,
    settings: SettingsDep,
    logger: LoggerDep,
) -> DictionaryPayload:
    save_dictionary(settings.dictionary_path, [entry.model_dump() for entry in payload.entries])
    log_event(logger, "dictionary_updated", entries=len(payload.entries))
    return payload


@router.get("/errors", response_model=list[ErrorLogEntry])
async def get_errors(
    _: AdminGuard,
    settings: SettingsDep,
    since: str | None = Query(default=None, description="Return errors since ISO timestamp"),
) -> list[ErrorLogEntry]:
    entries = load_error_logs(settings.errors_path, limit=100)
    filtered: list[ErrorLogEntry] = []
    cutoff = None
    if since:
        try:
            cutoff = datetime.fromisoformat(since)
        except ValueError as exc:
            raise HTTPException(status_code=400, detail="Invalid ISO timestamp") from exc
    for entry in entries:
        timestamp = entry.get("time") or entry.get("timestamp")
        if cutoff and timestamp:
            try:
                entry_time = datetime.fromisoformat(str(timestamp))
            except ValueError:
                continue
            if entry_time < cutoff:
                continue
        filtered.append(
            ErrorLogEntry(
                time=str(timestamp),
                message=str(entry.get("message", "")),
                details={k: str(v) for k, v in entry.items() if k not in {"time", "message"}},
            )
        )
    return filtered


def _render_session_html(entries: list[dict[str, object]]) -> str:
    rows = []
    for entry in entries:
        filters = entry.get("filters")
        filters_str = json.dumps(filters, indent=2) if isinstance(filters, dict) else str(filters)
        rows.append(
            "<tr>"
            f"<td>{entry.get('time', '')}</td>"
            f"<td>{entry.get('request_id', '')}</td>"
            f"<td>{entry.get('method', '')}</td>"
            f"<td>{entry.get('path', '')}</td>"
            f"<td>{entry.get('status', '')}</td>"
            f"<td>{entry.get('latency_ms', '')}</td>"
            f"<td>{entry.get('confidence', '')}</td>"
            f"<td>{entry.get('escalate', '')}</td>"
            f"<td><pre>{filters_str}</pre></td>"
            "</tr>"
        )
    table_rows = "\n".join(rows)
    return (
        "<html><head><title>Session Logs</title>"
        "<style>table{border-collapse:collapse;width:100%;}"
        "th,td{border:1px solid #ccc;padding:8px;text-align:left;}"
        "pre{margin:0;white-space:pre-wrap;}</style></head><body>"
        "<h1>Recent Sessions</h1>"
        "<table>"
        "<thead><tr><th>Time</th><th>Request ID</th><th>Method</th><th>Path</th><th>Status</th>"
        "<th>Latency (ms)</th><th>Confidence</th><th>Escalate</th><th>Filters</th></tr></thead>"
        f"<tbody>{table_rows}</tbody></table></body></html>"
    )


@router.get(
    "/sessions", response_model=SessionLogResponse, responses={200: {"content": {"text/html": {}}}}
)
async def get_sessions(
    _: AdminGuard,
    settings: SettingsDep,
    format: str = Query("json", pattern="^(json|html)$", description="Return JSON or HTML"),
    limit: int = Query(20, ge=1, le=200),
) -> SessionLogResponse | HTMLResponse:
    entries = load_session_logs(settings.logs_path, limit=limit)
    if format.lower() == "html":
        html = _render_session_html(entries)
        return HTMLResponse(html)
    payload = [SessionLogEntry(**entry) for entry in entries]
    return SessionLogResponse(sessions=payload)


@router.get("/metrics", response_model=MetricsDashboard)
async def get_metrics_dashboard(
    _: AdminGuard,
    metrics: MetricsDep,
    request: Request,
) -> MetricsDashboard:
    data = metrics.dashboard()
    histogram = [
        MetricsHistogram(bucket=bucket, count=int(count))
        for bucket, count in data.get("latency_histogram", {}).items()
    ]
    limiter = getattr(request.app.state, "rate_limiter", None)
    rate_limit = limiter.snapshot() if limiter else None
    return MetricsDashboard(
        queries=int(data.get("queries", 0)),
        avg_confidence=float(data.get("avg_confidence", 0.0)),
        escalations=int(data.get("escalations", 0)),
        avg_latency_ms=float(data.get("avg_latency_ms", 0.0)),
        p95_latency_ms=float(data.get("p95_latency_ms", 0.0)),
        histogram=histogram,
        recent_trace_ids=list(data.get("recent_trace_ids", [])),
        rate_limit=rate_limit,
    )

```

---

### api/routes/chat.py

```python
"""Unified chat route returning the canonical ask response contract."""

from __future__ import annotations

import time
from collections.abc import Iterable

from fastapi import APIRouter, HTTPException, Request

from atticus.logging import log_event
from atticus.tokenization import count_tokens
from retriever import answer_question

from ..dependencies import LoggerDep, SettingsDep
from ..schemas import AskRequest, AskResponse, AskSource

router = APIRouter()
_Q_PLACEHOLDERS = {"string", "test", "example"}
_Q_MIN_LEN = 4


def _format_sources(citations: Iterable[AskSource]) -> list[str]:
    sources: list[str] = []
    for citation in citations:
        desc = citation.path
        if citation.page is not None:
            desc += f" (page {citation.page})"
        if citation.heading:
            desc += f" - {citation.heading}"
        sources.append(desc)
    return sources


@router.post("/ask", response_model=AskResponse)
async def ask_endpoint(
    payload: AskRequest,
    request: Request,
    settings: SettingsDep,
    logger: LoggerDep,
) -> AskResponse:
    start = time.perf_counter()
    question = payload.question.strip()
    if len(question) < _Q_MIN_LEN or question.lower() in _Q_PLACEHOLDERS:
        raise HTTPException(
            status_code=400,
            detail="Provide a real question (not a placeholder like 'string')",
        )

    answer = answer_question(
        question,
        settings=settings,
        filters=payload.filters,
        logger=logger,
        top_k=payload.top_k,
        context_hints=payload.context_hints,
    )

    request_id = getattr(request.state, "request_id", "unknown")
    request.state.confidence = answer.confidence
    request.state.escalate = answer.should_escalate
    elapsed_ms = (time.perf_counter() - start) * 1000

    sources = [
        AskSource(
            chunkId=item.chunk_id,
            path=item.source_path,
            page=item.page_number,
            heading=item.heading,
            score=item.score,
        )
        for item in answer.citations
    ]

    response = AskResponse(
        answer=answer.response,
        confidence=answer.confidence,
        should_escalate=answer.should_escalate,
        request_id=request_id,
        sources=sources,
    )

    log_event(
        logger,
        "ask_endpoint_complete",
        request_id=request_id,
        confidence=answer.confidence,
        escalate=answer.should_escalate,
        latency_ms=round(elapsed_ms, 2),
        filters=payload.filters or {},
    )

    if getattr(settings, "verbose_logging", False):
        try:
            user_tokens = count_tokens(question)
        except Exception:  # pragma: no cover - diagnostics only
            user_tokens = None
        try:
            answer_tokens = count_tokens(answer.response or "")
        except Exception:  # pragma: no cover - diagnostics only
            answer_tokens = None

        trace: list[str] | None = None
        if getattr(settings, "trace_logging", False):
            trace = [
                "received_question",
                f"retrieved_citations={len(answer.citations)}",
                f"confidence={float(answer.confidence):.3f}",
                "escalate=true" if answer.should_escalate else "escalate=false",
            ]

        log_event(
            logger,
            "chat_turn",
            request_id=request_id,
            question=question,
            answer=answer.response,
            sources=_format_sources(sources),
            confidence=float(answer.confidence),
            tokens={
                "question": user_tokens,
                "answer": answer_tokens,
                "total": (user_tokens or 0) + (answer_tokens or 0),
            },
            openai_key_present=bool(getattr(settings, "openai_api_key", None)),
            trace=trace,
        )

    return response

```

---

### api/routes/contact.py

```python
"""Contact escalation endpoint.

POST /contact accepts JSON payload and sends an escalation email via SMTP.
"""

from __future__ import annotations

import json

from fastapi import APIRouter, HTTPException, Request, status
from pydantic import BaseModel, Field

from atticus.config import load_settings
from atticus.logging import configure_logging, log_error, log_event
from atticus.notify.mailer import EscalationDeliveryError, send_escalation

router = APIRouter()


class TraceDocument(BaseModel):
    chunk_id: str
    score: float
    source_path: str | None = None
    page_number: int | None = None
    heading: str | None = None


class EscalationTrace(BaseModel):
    user_id: str | None = None
    chat_id: str | None = None
    message_id: str | None = None
    request_id: str | None = None
    question: str | None = None
    documents: list[TraceDocument] = Field(
        default_factory=list,
        alias="top_documents",
        description="Top retrieved documents and scores",
    )


class ContactRequest(BaseModel):
    reason: str = Field(description="Reason for contacting support/escalation")
    transcript: list[str] | str | None = Field(
        default=None,
        description="Optional chat transcript (list of lines) or a single string",
    )
    trace: EscalationTrace | None = Field(
        default=None,
        description="Optional trace payload including user/chat/document context",
    )


@router.post("/contact", status_code=status.HTTP_202_ACCEPTED)
async def contact(payload: ContactRequest, request: Request) -> dict[str, str]:
    settings = load_settings()
    logger = configure_logging(settings)

    request_id = getattr(request.state, "request_id", "unknown")
    body_lines = [f"Reason: {payload.reason}"]
    if payload.transcript:
        body_lines.append("")
        body_lines.append("Transcript:")
        if isinstance(payload.transcript, list):
            body_lines.extend(str(x) for x in payload.transcript)
        else:
            body_lines.append(str(payload.transcript))
    trace_payload: dict[str, object] | None = None
    if payload.trace:
        trace_payload = payload.trace.model_dump(by_alias=True, exclude_none=True)
        body_lines.append("")
        body_lines.append("Trace Payload:")
        body_lines.append(json.dumps(trace_payload, indent=2, ensure_ascii=False))
    body = "\n".join(body_lines)

    subject = f"Atticus escalation: {payload.reason}"[:200]
    try:
        send_escalation(subject=subject, body=body, trace=trace_payload)
    except EscalationDeliveryError as exc:
        log_error(
            logger,
            "contact_escalation_failed",
            request_id=request_id,
            reason=exc.reason,
        )
        raise HTTPException(
            status_code=status.HTTP_502_BAD_GATEWAY,
            detail="Unable to deliver escalation email. Please try again shortly.",
        ) from exc

    trace_id = None
    if trace_payload:
        trace_id = str(trace_payload.get("request_id") or request_id)

    log_event(
        logger,
        "contact_escalation_sent",
        request_id=request_id,
        has_transcript=bool(payload.transcript),
        trace_id=trace_id or request_id,
    )
    return {"status": "accepted"}

```

---

### api/routes/eval.py

```python
"""Evaluation API endpoint."""

from __future__ import annotations

from fastapi import APIRouter, HTTPException

from atticus.logging import log_event
from eval.runner import run_evaluation

from ..dependencies import LoggerDep, SettingsDep
from ..schemas import EvalResponse

router = APIRouter()


@router.post("/eval/run", response_model=EvalResponse)
async def run_eval(settings: SettingsDep, logger: LoggerDep) -> EvalResponse:
    result = run_evaluation(settings=settings)
    log_event(logger, "eval_api_complete", metrics=result.metrics, deltas=result.deltas)
    threshold = settings.eval_regression_threshold / 100.0
    if any(delta < -threshold for delta in result.deltas.values()):
        raise HTTPException(
            status_code=400, detail={"metrics": result.metrics, "deltas": result.deltas}
        )
    return EvalResponse(
        metrics=result.metrics,
        deltas=result.deltas,
        summary_csv=str(result.summary_csv),
        summary_json=str(result.summary_json),
        summary_html=str(result.summary_html),
    )

```

---

### api/routes/health.py

```python
"""Health endpoints."""

from __future__ import annotations

from fastapi import APIRouter

from atticus.config import load_manifest

from ..dependencies import SettingsDep
from ..schemas import HealthResponse

router = APIRouter()


@router.get("/health", response_model=HealthResponse)
async def health(settings: SettingsDep) -> HealthResponse:
    manifest = load_manifest(settings.manifest_path)
    return HealthResponse(
        status="ok",
        manifest_present=manifest is not None,
        document_count=manifest.document_count if manifest else 0,
        chunk_count=manifest.chunk_count if manifest else 0,
        embedding_model=(manifest.embedding_model if manifest else settings.embed_model),
        embedding_model_version=(
            manifest.embedding_model_version if manifest else settings.embedding_model_version
        ),
    )

```

---

### api/routes/ingest.py

```python
from __future__ import annotations

from fastapi import APIRouter

from atticus.logging import log_event
from ingest.pipeline import IngestionOptions, ingest_corpus

from ..dependencies import LoggerDep, SettingsDep
from ..schemas import IngestRequest, IngestResponse

router = APIRouter()


@router.post("/ingest", response_model=IngestResponse)
async def trigger_ingestion(
    payload: IngestRequest,
    settings: SettingsDep,
    logger: LoggerDep,
) -> IngestResponse:
    options = IngestionOptions(full_refresh=payload.full_refresh, paths=payload.paths)
    summary = ingest_corpus(settings=settings, options=options)
    log_event(
        logger,
        "ingest_api_complete",
        documents_processed=summary.documents_processed,
        documents_skipped=summary.documents_skipped,
        chunks_indexed=summary.chunks_indexed,
    )
    return IngestResponse(
        documents_processed=summary.documents_processed,
        documents_skipped=summary.documents_skipped,
        chunks_indexed=summary.chunks_indexed,
        elapsed_seconds=summary.elapsed_seconds,
        manifest_path=str(summary.manifest_path),
        index_path=str(summary.index_path),
        snapshot_path=str(summary.snapshot_path),
        ingested_at=summary.ingested_at,
        embedding_model=summary.embedding_model,
        embedding_model_version=summary.embedding_model_version,
    )

```

---

### api/schemas.py

```python
"""Pydantic models for API payloads."""

from __future__ import annotations

from pathlib import Path
from typing import Any

from pydantic import BaseModel, Field
from pydantic.config import ConfigDict


class HealthResponse(BaseModel):
    status: str
    manifest_present: bool
    document_count: int
    chunk_count: int
    embedding_model: str | None = None
    embedding_model_version: str | None = None


class IngestRequest(BaseModel):
    full_refresh: bool = False
    paths: list[Path] | None = None


class IngestResponse(BaseModel):
    documents_processed: int
    documents_skipped: int
    chunks_indexed: int
    elapsed_seconds: float
    manifest_path: str
    index_path: str
    snapshot_path: str
    ingested_at: str
    embedding_model: str
    embedding_model_version: str


class AskRequest(BaseModel):
    """Canonical ask request contract shared across services."""

    model_config = ConfigDict(populate_by_name=True)

    # Accept both {"question": "..."} and legacy {"query": "..."}
    question: str = Field(validation_alias="query")
    filters: dict[str, str] | None = Field(
        default=None, description="Metadata filters such as path_prefix or source_type"
    )
    context_hints: list[str] | None = Field(
        default=None,
        alias="contextHints",
        description="Optional hints supplied by the UI to bias retrieval",
    )
    top_k: int | None = Field(
        default=None,
        ge=1,
        le=32,
        alias="topK",
        description="Override for the retrieval top-k window",
    )


class AskSource(BaseModel):
    """Structured citation returned to the UI."""

    model_config = ConfigDict(populate_by_name=True)

    path: str
    page: int | None = None
    heading: str | None = None
    chunkId: str | None = None
    score: float | None = None


class AskResponse(BaseModel):
    answer: str
    confidence: float
    should_escalate: bool
    request_id: str
    sources: list[AskSource]


class EvalResponse(BaseModel):
    metrics: dict[str, float]
    deltas: dict[str, float]
    summary_csv: str
    summary_json: str
    summary_html: str


class ErrorResponse(BaseModel):
    """Standard error payload for API responses."""

    error: str
    detail: str
    request_id: str
    fields: dict[str, str] | None = None


class DictionaryEntry(BaseModel):
    term: str
    synonyms: list[str]


class DictionaryPayload(BaseModel):
    entries: list[DictionaryEntry]


class ErrorLogEntry(BaseModel):
    time: str
    message: str
    details: dict[str, str] = Field(default_factory=dict)


class SessionLogEntry(BaseModel):
    request_id: str
    method: str | None = None
    path: str | None = None
    status: int | None = None
    latency_ms: float | None = None
    time: str | None = None
    confidence: float | None = None
    escalate: bool | None = None
    filters: dict[str, Any] | None = None


class SessionLogResponse(BaseModel):
    sessions: list[SessionLogEntry]


class MetricsHistogram(BaseModel):
    bucket: str
    count: int


class MetricsDashboard(BaseModel):
    queries: int
    avg_confidence: float
    escalations: int
    avg_latency_ms: float
    p95_latency_ms: float
    histogram: list[MetricsHistogram]
    recent_trace_ids: list[str]
    rate_limit: dict[str, int] | None = None

```

---

### api/utils.py

```python
"""Utility helpers for API operations."""

from __future__ import annotations

import json
from pathlib import Path
from typing import Any


def load_dictionary(path: Path) -> list[dict[str, object]]:
    if not path.exists():
        return []
    payload = json.loads(path.read_text(encoding="utf-8"))
    if isinstance(payload, list):
        return payload
    raise ValueError("Dictionary file is malformed; expected a list of entries")


def save_dictionary(path: Path, entries: list[dict[str, object]]) -> None:
    path.parent.mkdir(parents=True, exist_ok=True)
    path.write_text(json.dumps(entries, indent=2, ensure_ascii=False) + "\n", encoding="utf-8")


def load_error_logs(path: Path, limit: int = 50) -> list[dict[str, object]]:
    if not path.exists():
        return []
    lines = path.read_text(encoding="utf-8").splitlines()
    tail = lines[-limit:]
    entries: list[dict[str, object]] = []
    for line in tail:
        try:
            entries.append(json.loads(line))
        except json.JSONDecodeError:
            continue
    return entries


def load_session_logs(path: Path, limit: int = 20) -> list[dict[str, Any]]:  # noqa: PLR0912
    if not path.exists():
        return []
    lines = path.read_text(encoding="utf-8").splitlines()
    sessions: list[dict[str, Any]] = []
    ask_metadata: dict[str, dict[str, Any]] = {}
    for line in reversed(lines):
        try:
            record = json.loads(line)
        except json.JSONDecodeError:
            continue
        message = str(record.get("message", ""))
        payload = record.copy()
        payload.pop("message", None)
        if message == "ask_endpoint_complete":
            request_id = str(payload.get("request_id", ""))
            if request_id:
                meta = ask_metadata.setdefault(request_id, {})
                for key in ("confidence", "escalate", "filters"):
                    if key in payload:
                        meta[key] = payload[key]
        if message == "chat_turn":
            request_id = str(payload.get("request_id", ""))
            if request_id:
                meta = ask_metadata.setdefault(request_id, {})
                for key in ("confidence", "tokens", "trace"):
                    if key in payload and payload[key] is not None:
                        meta[key] = payload[key]
        if message == "request_complete":
            request_id = str(payload.get("request_id", ""))
            entry: dict[str, Any] = {
                "request_id": request_id,
                "method": payload.get("method"),
                "path": payload.get("path"),
                "status": payload.get("status"),
                "latency_ms": payload.get("latency_ms"),
                "time": record.get("time"),
            }
            if request_id in ask_metadata:
                entry.update(ask_metadata[request_id])
            sessions.append(entry)
            if len(sessions) >= limit:
                break
    sessions.reverse()
    return sessions

```

---

### app/admin/page.tsx

```tsx
import type { Metadata } from "next";
import { redirect } from "next/navigation";
import { GlossaryStatus, Prisma, Role } from "@prisma/client";
import { PageHeader } from "@/components/page-header";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";
import { AdminOpsConsole, TicketSummary, UncertainChat } from "@/components/admin/admin-ops-console";
import type { GlossaryEntryDto } from "@/components/glossary/admin-panel";

export const metadata: Metadata = {
  title: "Admin - Atticus",
};

type GlossaryEntryRecord = {
  id: string;
  term: string;
  definition: string;
  synonyms: string[];
  status: GlossaryStatus;
  createdAt: Date;
  updatedAt: Date;
  reviewedAt: Date | null;
  reviewNotes: string | null;
  author: { id: string; email: string | null; name: string | null } | null;
  updatedBy: { id: string; email: string | null; name: string | null } | null;
  reviewer: { id: string; email: string | null; name: string | null } | null;
};

export default async function AdminPage() {
  const session = await getServerAuthSession();
  if (!session) {
    redirect("/signin?from=/admin");
  }
  if (session.user.role !== Role.ADMIN && session.user.role !== Role.REVIEWER) {
    redirect("/");
  }

  const { chats, tickets, glossary } = await withRlsContext(session, async (tx) => {
    const [pendingChats, ticketRows, glossaryRows] = await Promise.all([
      tx.chat.findMany({
        where: { status: "pending_review" },
        include: {
          author: { select: { id: true, email: true, name: true } },
          reviewer: { select: { id: true, email: true, name: true } },
          tickets: {
            select: { id: true, key: true, status: true, assignee: true, lastActivity: true },
          },
        },
        orderBy: { createdAt: "desc" },
      }),
      tx.ticket.findMany({
        orderBy: { updatedAt: "desc" },
        select: {
          id: true,
          key: true,
          status: true,
          assignee: true,
          lastActivity: true,
          summary: true,
        },
      }),
      tx.glossaryEntry.findMany({
        orderBy: { term: "asc" },
        include: {
          author: { select: { id: true, email: true, name: true } },
          updatedBy: { select: { id: true, email: true, name: true } },
          reviewer: { select: { id: true, email: true, name: true } },
        },
      }),
    ]);

    return { chats: pendingChats, tickets: ticketRows, glossary: glossaryRows };
  });

  const glossaryEntries: GlossaryEntryDto[] = (glossary as GlossaryEntryRecord[]).map((entry) => ({
    id: entry.id,
    term: entry.term,
    definition: entry.definition,
    synonyms: entry.synonyms,
    status: entry.status,
    createdAt: entry.createdAt.toISOString(),
    updatedAt: entry.updatedAt.toISOString(),
    reviewedAt: entry.reviewedAt ? entry.reviewedAt.toISOString() : null,
    author: entry.author,
    updatedBy: entry.updatedBy,
    reviewer: entry.reviewer,
    reviewNotes: entry.reviewNotes ?? null,
  }));

  function parseSources(value: Prisma.JsonValue | null): UncertainChat["topSources"] {
    if (!Array.isArray(value)) {
      return [];
    }
    const sources: UncertainChat["topSources"] = [];
    for (const item of value) {
      if (typeof item !== "object" || item === null) {
        continue;
      }
      const path = "path" in item && typeof item.path === "string" ? item.path : null;
      if (!path) {
        continue;
      }
      sources.push({
        path,
        score: "score" in item && typeof item.score === "number" ? item.score : null,
        page: "page" in item && typeof item.page === "number" ? item.page : null,
        heading: "heading" in item && typeof item.heading === "string" ? item.heading : null,
        chunkId: "chunkId" in item && typeof item.chunkId === "string" ? item.chunkId : null,
      });
    }
    return sources;
  }

  function parseAuditLog(value: Prisma.JsonValue | null): Record<string, unknown>[] {
    if (!Array.isArray(value)) {
      return [];
    }
    const entries: Record<string, unknown>[] = [];
    for (const item of value) {
      if (typeof item === "object" && item !== null && !Array.isArray(item)) {
        entries.push(item as Record<string, unknown>);
      }
    }
    return entries;
  }

  const uncertainChats: UncertainChat[] = chats.map((chat) => ({
    id: chat.id,
    question: chat.question,
    answer: chat.answer ?? null,
    confidence: chat.confidence,
    status: chat.status,
    requestId: chat.requestId ?? null,
    createdAt: chat.createdAt.toISOString(),
    topSources: parseSources(chat.topSources),
    author: chat.author,
    reviewer: chat.reviewer,
    tickets: chat.tickets.map((ticket) => ({
      id: ticket.id,
      key: ticket.key,
      status: ticket.status,
      assignee: ticket.assignee,
      lastActivity: ticket.lastActivity ? ticket.lastActivity.toISOString() : null,
    })),
    followUpPrompt: chat.followUpPrompt ?? null,
    auditLog: parseAuditLog(chat.auditLog),
  }));

  const ticketSummaries: TicketSummary[] = tickets.map((ticket) => ({
    id: ticket.id,
    key: ticket.key,
    status: ticket.status,
    assignee: ticket.assignee,
    lastActivity: ticket.lastActivity ? ticket.lastActivity.toISOString() : null,
    summary: ticket.summary ?? null,
  }));

  return (
    <div className="mx-auto flex w-full max-w-6xl flex-col gap-10">
      <PageHeader
        eyebrow="Admin"
        title="Operations console"
        description="Review low-confidence chats, manage ticket escalations, and curate glossary terminology."
      />
      <AdminOpsConsole
        role={session.user.role}
        uncertain={uncertainChats}
        tickets={ticketSummaries}
        glossaryEntries={glossaryEntries}
      />
    </div>
  );
}

```

---

### app/api/admin/uncertain/[id]/approve/route.ts

```ts
import { NextResponse } from "next/server";
import { Role } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";

function canApprove(role: Role | undefined): boolean {
  return role === Role.ADMIN || role === Role.REVIEWER;
}

type ApproveBody = {
  notes?: string;
};

export async function POST(request: Request, { params }: { params: { id: string } }) {
  const session = await getServerAuthSession();
  if (!session) {
    return NextResponse.json({ error: "unauthorized" }, { status: 401 });
  }
  if (!canApprove(session.user.role)) {
    return NextResponse.json({ error: "forbidden" }, { status: 403 });
  }

  const { id } = params;
  let body: ApproveBody = {};
  try {
    body = (await request.json()) as ApproveBody;
  } catch (error) {
    body = {};
  }
  const notes = typeof body.notes === "string" ? body.notes.trim() : undefined;
  const eventTimestamp = new Date().toISOString();

  try {
    const result = await withRlsContext(session, async (tx) => {
      const existing = await tx.chat.findUnique({
        where: { id },
        select: { auditLog: true, status: true, orgId: true, requestId: true },
      });
      if (!existing) {
        return null;
      }
      if (existing.status !== "pending_review") {
        return "not_pending" as const;
      }

      const auditLog = Array.isArray(existing.auditLog) ? [...existing.auditLog] : [];
      auditLog.push({
        action: "approve",
        actorId: session.user.id,
        actorRole: session.user.role,
        at: eventTimestamp,
        notes: notes ?? null,
      });

      const updated = await tx.chat.update({
        where: { id },
        data: {
          status: "reviewed",
          reviewedAt: new Date(eventTimestamp),
          reviewedById: session.user.id,
          auditLog,
        },
        select: {
          id: true,
          status: true,
          reviewedAt: true,
          reviewer: { select: { id: true, email: true, name: true } },
          auditLog: true,
          orgId: true,
          requestId: true,
        },
      });

      await tx.ragEvent.create({
        data: {
          orgId: existing.orgId,
          actorId: session.user.id,
          actorRole: session.user.role,
          action: "chat.approved",
          entity: "chat",
          chatId: updated.id,
          requestId: updated.requestId,
          after: {
            status: updated.status,
            reviewedAt: updated.reviewedAt?.toISOString() ?? null,
          },
        },
      });

      return updated;
    });

    if (result === null) {
      return NextResponse.json({ error: "not_found" }, { status: 404 });
    }
    if (result === "not_pending") {
      return NextResponse.json({ error: "invalid_status" }, { status: 409 });
    }

    return NextResponse.json({
      id: result.id,
      status: result.status,
      reviewedAt: result.reviewedAt?.toISOString() ?? null,
      reviewer: result.reviewer,
      auditLog: result.auditLog ?? [],
    });
  } catch (error) {
    return NextResponse.json({ error: "server_error" }, { status: 500 });
  }
}

```

---

### app/api/admin/uncertain/[id]/ask-followup/route.ts

```ts
import { NextResponse } from "next/server";
import { Role } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";

function canRecordFollowUp(role: Role | undefined): boolean {
  return role === Role.ADMIN || role === Role.REVIEWER;
}

type FollowUpBody = {
  prompt?: string;
};

export async function POST(request: Request, { params }: { params: { id: string } }) {
  const session = await getServerAuthSession();
  if (!session) {
    return NextResponse.json({ error: "unauthorized" }, { status: 401 });
  }
  if (!canRecordFollowUp(session.user.role)) {
    return NextResponse.json({ error: "forbidden" }, { status: 403 });
  }

  const { id } = params;
  let body: FollowUpBody;
  try {
    body = (await request.json()) as FollowUpBody;
  } catch (error) {
    body = {};
  }

  const prompt = typeof body.prompt === "string" ? body.prompt.trim() : "";
  if (!prompt) {
    return NextResponse.json(
      { error: "invalid_request", detail: "Follow-up prompt is required." },
      { status: 400 }
    );
  }

  const timestamp = new Date().toISOString();

  const result = await withRlsContext(session, async (tx) => {
    const existing = await tx.chat.findUnique({
      where: { id },
      select: { id: true, status: true, auditLog: true, orgId: true },
    });
    if (!existing) {
      return null;
    }

    const auditLog = Array.isArray(existing.auditLog) ? [...existing.auditLog] : [];
    auditLog.push({
      action: "followup",
      at: timestamp,
      actorId: session.user.id,
      actorRole: session.user.role,
      prompt,
    });

    const updated = await tx.chat.update({
      where: { id },
      data: { followUpPrompt: prompt, auditLog },
      select: {
        id: true,
        followUpPrompt: true,
        auditLog: true,
        status: true,
        requestId: true,
      },
    });

    await tx.ragEvent.create({
      data: {
        orgId: existing.orgId,
        actorId: session.user.id,
        actorRole: session.user.role,
        action: "chat.followup_recorded",
        entity: "chat",
        chatId: updated.id,
        requestId: updated.requestId,
        after: {
          status: updated.status,
          followUpPrompt: updated.followUpPrompt,
        },
      },
    });

    return updated;
  });

  if (result === null) {
    return NextResponse.json({ error: "not_found" }, { status: 404 });
  }

  return NextResponse.json({
    id: result.id,
    followUpPrompt: result.followUpPrompt,
    auditLog: result.auditLog ?? [],
  });
}

```

---

### app/api/admin/uncertain/[id]/escalate/route.ts

```ts
import { NextResponse } from "next/server";
import { Role } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";

function generateTicketKey(now: Date): string {
  const year = now.getUTCFullYear();
  const month = String(now.getUTCMonth() + 1).padStart(2, "0");
  const day = String(now.getUTCDate()).padStart(2, "0");
  const suffix = now.getUTCHours().toString().padStart(2, "0") + now.getUTCMinutes().toString().padStart(2, "0");
  return `AE-${year}${month}${day}-${suffix}`;
}

type EscalateBody = {
  summary?: string;
  assignee?: string;
};

export async function POST(request: Request, { params }: { params: { id: string } }) {
  const session = await getServerAuthSession();
  if (!session) {
    return NextResponse.json({ error: "unauthorized" }, { status: 401 });
  }
  if (session.user.role !== Role.ADMIN) {
    return NextResponse.json({ error: "forbidden" }, { status: 403 });
  }

  const { id } = params;
  let body: EscalateBody = {};
  try {
    body = (await request.json()) as EscalateBody;
  } catch (error) {
    body = {};
  }
  const now = new Date();
  const nowIso = now.toISOString();
  const summary = typeof body.summary === "string" && body.summary.trim().length > 0 ? body.summary.trim() : undefined;
  const assignee = typeof body.assignee === "string" && body.assignee.trim().length > 0 ? body.assignee.trim() : undefined;

  const result = await withRlsContext(session, async (tx) => {
    const chat = await tx.chat.findUnique({
      where: { id },
      select: {
        id: true,
        orgId: true,
        status: true,
        question: true,
        requestId: true,
        auditLog: true,
      },
    });
    if (!chat) {
      return null;
    }
    if (chat.status === "escalated") {
      return "already_escalated" as const;
    }

    const auditLog = Array.isArray(chat.auditLog) ? [...chat.auditLog] : [];
    auditLog.push({
      action: "escalate",
      actorId: session.user.id,
      actorRole: session.user.role,
      at: nowIso,
      assignee: assignee ?? null,
      summary: summary ?? chat.question,
    });

    const ticket = await tx.ticket.create({
      data: {
        orgId: chat.orgId,
        key: generateTicketKey(now),
        status: "open",
        assignee: assignee ?? null,
        lastActivity: now,
        summary: summary ?? chat.question,
        chatId: chat.id,
        auditLog: [
          {
            action: "created",
            actorId: session.user.id,
            actorRole: session.user.role,
            at: nowIso,
          },
        ],
      },
      select: {
        id: true,
        key: true,
        status: true,
        assignee: true,
        lastActivity: true,
        summary: true,
      },
    });

    await tx.chat.update({
      where: { id: chat.id },
      data: {
        status: "escalated",
        auditLog,
      },
    });

    await tx.ragEvent.create({
      data: {
        orgId: chat.orgId,
        actorId: session.user.id,
        actorRole: session.user.role,
        action: "chat.escalated",
        entity: "chat",
        chatId: chat.id,
        requestId: chat.requestId,
        after: {
          status: "escalated",
          ticketId: ticket.id,
          assignee: ticket.assignee ?? null,
        },
      },
    });

    return ticket;
  });

  if (result === null) {
    return NextResponse.json({ error: "not_found" }, { status: 404 });
  }
  if (result === "already_escalated") {
    return NextResponse.json({ error: "invalid_status" }, { status: 409 });
  }

  return NextResponse.json({
    id: result.id,
    key: result.key,
    status: result.status,
    assignee: result.assignee,
    lastActivity: result.lastActivity ? result.lastActivity.toISOString() : null,
    summary: result.summary ?? summary ?? null,
  });
}

```

---

### app/api/admin/uncertain/route.ts

```ts
import { NextResponse } from "next/server";
import { Prisma, Role } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";

function canReview(role: Role | undefined): boolean {
  return role === Role.ADMIN || role === Role.REVIEWER;
}

export async function GET() {
  const session = await getServerAuthSession();
  if (!session) {
    return NextResponse.json({ error: "unauthorized" }, { status: 401 });
  }
  if (!canReview(session.user.role)) {
    return NextResponse.json({ error: "forbidden" }, { status: 403 });
  }

  const chats = await withRlsContext(session, (tx) =>
    tx.chat.findMany({
      where: { status: "pending_review" },
      include: {
        author: { select: { id: true, email: true, name: true } },
        reviewer: { select: { id: true, email: true, name: true } },
        tickets: {
          select: {
            id: true,
            key: true,
            status: true,
            assignee: true,
            lastActivity: true,
          },
        },
      },
      orderBy: { createdAt: "desc" },
    })
  );

  const payload = chats.map((chat) => ({
    id: chat.id,
    question: chat.question,
    answer: chat.answer ?? null,
    confidence: chat.confidence,
    status: chat.status,
    createdAt: chat.createdAt.toISOString(),
    requestId: chat.requestId,
    topSources: normalizeSources(chat.topSources),
    author: chat.author,
    reviewer: chat.reviewer,
    tickets: chat.tickets.map((ticket) => ({
      id: ticket.id,
      key: ticket.key,
      status: ticket.status,
      assignee: ticket.assignee,
      lastActivity: ticket.lastActivity ? ticket.lastActivity.toISOString() : null,
    })),
    followUpPrompt: chat.followUpPrompt ?? null,
    auditLog: Array.isArray(chat.auditLog) ? chat.auditLog : [],
  }));

  return NextResponse.json(payload);
}

function normalizeSources(value: Prisma.JsonValue | null): Array<Record<string, unknown>> {
  if (!Array.isArray(value)) {
    return [];
  }
  const normalized: Array<Record<string, unknown>> = [];
  for (const item of value) {
    if (typeof item !== "object" || item === null) {
      continue;
    }
    const path = "path" in item && typeof item.path === "string" ? item.path : null;
    if (!path) {
      continue;
    }
    normalized.push({
      path,
      score: "score" in item && typeof item.score === "number" ? item.score : null,
      page: "page" in item && typeof item.page === "number" ? item.page : null,
      heading: "heading" in item && typeof item.heading === "string" ? item.heading : null,
      chunkId: "chunkId" in item && typeof item.chunkId === "string" ? item.chunkId : null,
    });
  }
  return normalized;
}

```

---

### app/api/ask/route.ts

```ts
import { randomUUID } from "node:crypto";
import { NextResponse } from "next/server";
import { askRequestSchema, askResponseSchema } from "@/lib/ask-contract";
import type { AskRequest } from "@/lib/ask-contract";
import { captureLowConfidenceChat } from "@/lib/chat-capture";

const encoder = new TextEncoder();
const decoder = new TextDecoder();

function getServiceUrl() {
  const raw = process.env.RAG_SERVICE_URL ?? process.env.ASK_SERVICE_URL ?? "http://localhost:8000";
  return raw.replace(/\/$/, "");
}

function normalizeFields(value: unknown): Record<string, string> | undefined {
  if (!value || typeof value !== "object") {
    return undefined;
  }
  const result: Record<string, string> = {};
  for (const [key, raw] of Object.entries(value)) {
    result[String(key)] = typeof raw === "string" ? raw : JSON.stringify(raw);
  }
  return Object.keys(result).length ? result : undefined;
}

function buildErrorResponse(
  status: number,
  requestId: string,
  error: string,
  detail: string,
  fields?: Record<string, string>
) {
  const payload: Record<string, unknown> = {
    error,
    detail,
    request_id: requestId,
  };
  if (fields) {
    payload.fields = fields;
  }
  return NextResponse.json(payload, {
    status,
    headers: {
      "X-Request-ID": requestId,
    },
  });
}

async function readErrorBody(response: Response, fallbackRequestId: string) {
  const contentType = response.headers.get("content-type") ?? "";
  let parsedBody: unknown = null;
  if (contentType.includes("application/json")) {
    try {
      parsedBody = await response.json();
    } catch (error) {
      return {
        status: response.status === 0 ? 502 : response.status,
        error: "upstream_error",
        detail: "Failed to parse upstream JSON response.",
        requestId: fallbackRequestId,
      } as const;
    }
  } else {
    const text = await response.text();
    parsedBody = text;
  }

  const status = response.status === 0 ? 502 : response.status;
  if (parsedBody && typeof parsedBody === "object" && !Array.isArray(parsedBody)) {
    const body = parsedBody as Record<string, unknown>;
    const requestId = typeof body.request_id === "string" ? body.request_id : fallbackRequestId;
    const error = typeof body.error === "string" ? body.error : "upstream_error";
    const detail = typeof body.detail === "string" ? body.detail : "Unknown upstream error.";
    const fields = normalizeFields(body.fields);
    return { status, error, detail, fields, requestId } as const;
  }

  const detail = typeof parsedBody === "string" && parsedBody.length ? parsedBody : "Unknown upstream error.";
  return { status, error: "upstream_error", detail, requestId: fallbackRequestId } as const;
}

export async function POST(request: Request) {
  const acceptsSse = (request.headers.get("accept") ?? "").includes("text/event-stream");
  const requestId = request.headers.get("x-request-id") ?? randomUUID();

  let parsed: AskRequest;
  try {
    const payload = await request.json();
    parsed = askRequestSchema.parse(payload);
  } catch (error) {
    const detail = error instanceof Error ? error.message : "Invalid request payload";
    return buildErrorResponse(400, requestId, "validation_error", detail);
  }

  let upstream: Response;
  try {
    upstream = await fetch(`${getServiceUrl()}/ask`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Accept: acceptsSse ? "text/event-stream" : "application/json",
        "X-Request-ID": requestId,
      },
      body: JSON.stringify({
        question: parsed.question,
        filters: parsed.filters ?? undefined,
        contextHints: parsed.contextHints ?? undefined,
        topK: parsed.topK ?? undefined,
      }),
    });
  } catch (error) {
    const detail = error instanceof Error ? error.message : "Failed to contact retrieval service.";
    return buildErrorResponse(502, requestId, "upstream_unreachable", detail);
  }

  const upstreamRequestId = upstream.headers.get("x-request-id") ?? requestId;

  if (!upstream.ok) {
    const normalized = await readErrorBody(upstream, upstreamRequestId);
    return buildErrorResponse(normalized.status, normalized.requestId, normalized.error, normalized.detail, normalized.fields);
  }

  const contentType = upstream.headers.get("content-type") ?? "";

  if (acceptsSse && contentType.includes("text/event-stream") && upstream.body) {
    const reader = upstream.body.getReader();
    let buffer = "";
    let capturePromise: Promise<void> | null = null;
    const stream = new ReadableStream<Uint8Array>({
      start(controller) {
        controller.enqueue(
          encoder.encode(`event: start\ndata: ${JSON.stringify({ request_id: upstreamRequestId })}\n\n`)
        );
      },
      async pull(controller) {
        const { done, value } = await reader.read();
        if (done) {
          if (capturePromise) {
            await capturePromise.catch(() => undefined);
          }
          controller.enqueue(
            encoder.encode(`event: end\ndata: ${JSON.stringify({ request_id: upstreamRequestId })}\n\n`)
          );
          controller.close();
          return;
        }
        if (value) {
          controller.enqueue(value);
          buffer += decoder.decode(value, { stream: true });
          let boundary = buffer.indexOf("\n\n");
          while (boundary !== -1) {
            const rawEvent = buffer.slice(0, boundary);
            buffer = buffer.slice(boundary + 2);
            boundary = buffer.indexOf("\n\n");

            let eventType = "";
            let dataPayload = "";
            for (const rawLine of rawEvent.split("\n")) {
              const line = rawLine.trim();
              if (!line) {
                continue;
              }
              if (line.startsWith("event:")) {
                eventType = line.slice(6).trim();
              } else if (line.startsWith("data:")) {
                const fragment = line.slice(5).trim();
                dataPayload = dataPayload ? `${dataPayload}${fragment}` : fragment;
              }
            }

            if (eventType === "answer" && dataPayload && !capturePromise) {
              try {
                const parsedAnswer = askResponseSchema.parse(JSON.parse(dataPayload));
                capturePromise = captureLowConfidenceChat({
                  question: parsed.question,
                  response: parsedAnswer,
                });
              } catch (error) {
                // Ignore malformed payloads; the client will handle upstream data.
              }
            }
          }
        }
      },
      cancel(reason) {
        reader.cancel(reason).catch(() => undefined);
      },
    });

    return new Response(stream, {
      status: 200,
      headers: {
        "Content-Type": "text/event-stream; charset=utf-8",
        "Cache-Control": "no-cache, no-transform",
        Connection: "keep-alive",
        "X-Request-ID": upstreamRequestId,
      },
    });
  }

  let askResponse;
  try {
    const raw = await upstream.json();
    askResponse = askResponseSchema.parse(raw);
  } catch (error) {
    const detail = error instanceof Error ? error.message : "Invalid upstream response";
    return buildErrorResponse(502, upstreamRequestId, "invalid_upstream_response", detail);
  }

  await captureLowConfidenceChat({ question: parsed.question, response: askResponse });

  if (acceptsSse) {
    const stream = new ReadableStream<Uint8Array>({
      start(controller) {
        controller.enqueue(
          encoder.encode(`event: start\ndata: ${JSON.stringify({ request_id: askResponse.request_id })}\n\n`)
        );
        controller.enqueue(
          encoder.encode(`event: answer\ndata: ${JSON.stringify(askResponse)}\n\n`)
        );
        controller.enqueue(
          encoder.encode(`event: end\ndata: ${JSON.stringify({ request_id: askResponse.request_id })}\n\n`)
        );
        controller.close();
      },
    });

    return new Response(stream, {
      status: 200,
      headers: {
        "Content-Type": "text/event-stream; charset=utf-8",
        "Cache-Control": "no-cache, no-transform",
        Connection: "keep-alive",
        "X-Request-ID": askResponse.request_id,
      },
    });
  }

  return NextResponse.json(askResponse, {
    status: 200,
    headers: {
      "X-Request-ID": askResponse.request_id,
    },
  });
}

```

---

### app/api/auth/[...nextauth]/route.ts

```ts
import NextAuth from "next-auth/next";
import { authOptions } from "@/lib/auth";

const handler = NextAuth(authOptions);

export { handler as GET, handler as POST };

```

---

### app/api/glossary/[id]/route.ts

```ts
import { NextResponse } from "next/server";
import { GlossaryStatus, Prisma } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";
import { canEditGlossary } from "@/lib/rbac";
import {
  parseStatus,
  parseSynonyms,
  serializeEntry,
  handleGlossaryError,
  snapshotEntry,
} from "@/app/api/glossary/utils";

const relationSelect = {
  author: { select: { id: true, email: true, name: true } },
  updatedBy: { select: { id: true, email: true, name: true } },
  reviewer: { select: { id: true, email: true, name: true } },
} as const;

export async function PUT(request: Request, { params }: { params: { id: string } }) {
  try {
    const session = canEditGlossary(await getServerAuthSession());
    const payload = await request.json();
    const definition = typeof payload.definition === "string" ? payload.definition.trim() : "";
    if (!definition) {
      return NextResponse.json(
        { error: "invalid_request", detail: "Definition is required." },
        { status: 400 }
      );
    }
    const term = typeof payload.term === "string" && payload.term.trim().length > 0 ? payload.term.trim() : undefined;
    const synonyms = parseSynonyms(payload.synonyms);
    const status = parseStatus(payload.status);
    const reviewNotes =
      typeof payload.reviewNotes === "string"
        ? payload.reviewNotes.trim() || null
        : payload.reviewNotes === null
        ? null
        : undefined;

    const entry = await withRlsContext(session, async (tx) => {
      const existing = await tx.glossaryEntry.findUnique({
        where: { id: params.id },
        include: relationSelect,
      });
      if (!existing) {
        return null;
      }

      const before = snapshotEntry(existing);
      const data: Record<string, unknown> = {
        definition,
        synonyms,
        status,
        updatedById: session.user.id,
      };
      if (term) {
        data.term = term;
      }
      if (reviewNotes !== undefined) {
        data.reviewNotes = reviewNotes;
      }
      if (status === GlossaryStatus.PENDING) {
        data.reviewedAt = null;
        data.reviewerId = null;
      } else {
        data.reviewedAt = new Date();
        data.reviewerId = session.user.id;
      }

      const updated = await tx.glossaryEntry.update({
        where: { id: params.id },
        data,
        include: relationSelect,
      } as any);

      await tx.ragEvent.create({
        data: {
          orgId: session.user.orgId,
          actorId: session.user.id,
          actorRole: session.user.role,
          action: "glossary.updated",
          entity: "glossary",
          glossaryId: updated.id,
          before,
          after: snapshotEntry(updated),
        },
      });

      return updated;
    });

    if (!entry) {
      return NextResponse.json({ error: "not_found" }, { status: 404 });
    }

    return NextResponse.json(serializeEntry(entry));
  } catch (error) {
    return handleGlossaryError(error);
  }
}

export async function PATCH(request: Request, ctx: { params: { id: string } }) {
  return PUT(request, ctx);
}

export async function DELETE(_: Request, { params }: { params: { id: string } }) {
  try {
    const session = canEditGlossary(await getServerAuthSession());
    const result = await withRlsContext(session, async (tx) => {
      const existing = await tx.glossaryEntry.findUnique({ where: { id: params.id } });
      if (!existing) {
        return null;
      }
      await tx.glossaryEntry.delete({ where: { id: params.id } });
      await tx.ragEvent.create({
        data: {
          orgId: session.user.orgId,
          actorId: session.user.id,
          actorRole: session.user.role,
          action: "glossary.deleted",
          entity: "glossary",
          glossaryId: existing.id,
          before: snapshotEntry(existing),
          after: Prisma.JsonNull,
        },
      });
      return true;
    });
    if (result === null) {
      return NextResponse.json({ error: "not_found" }, { status: 404 });
    }
    return NextResponse.json({ status: "ok" });
  } catch (error) {
    return handleGlossaryError(error);
  }
}

```

---

### app/api/glossary/route.ts

```ts
import { NextResponse } from "next/server";
import { GlossaryStatus, Prisma } from "@prisma/client";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";
import { canEditGlossary, canReviewGlossary } from "@/lib/rbac";
import {
  handleGlossaryError,
  parseStatus,
  parseSynonyms,
  serializeEntry,
  snapshotEntry,
} from "@/app/api/glossary/utils";

const relationSelect = {
  author: { select: { id: true, email: true, name: true } },
  updatedBy: { select: { id: true, email: true, name: true } },
  reviewer: { select: { id: true, email: true, name: true } },
} as const;

export async function GET() {
  try {
    const session = canReviewGlossary(await getServerAuthSession());
    const entries = (await withRlsContext(session, (tx) =>
      tx.glossaryEntry.findMany({
        orderBy: { term: "asc" },
        include: {
          author: { select: { id: true, email: true, name: true } },
          updatedBy: { select: { id: true, email: true, name: true } },
          reviewer: { select: { id: true, email: true, name: true } },
        },
      } as any)
    )) as unknown[];
    return NextResponse.json(entries.map(serializeEntry));
  } catch (error) {
    return handleGlossaryError(error);
  }
}

export async function POST(request: Request) {
  try {
    const session = canEditGlossary(await getServerAuthSession());
    const payload = await request.json();
    const term = typeof payload.term === "string" ? payload.term.trim() : "";
    const definition = typeof payload.definition === "string" ? payload.definition.trim() : "";
    const synonyms = parseSynonyms(payload.synonyms);
    if (!term || !definition) {
      return NextResponse.json(
        { error: "invalid_request", detail: "Both term and definition are required." },
        { status: 400 }
      );
    }

    const status = parseStatus(payload.status);
    const reviewNotes =
      typeof payload.reviewNotes === "string"
        ? payload.reviewNotes.trim() || null
        : payload.reviewNotes === null
        ? null
        : undefined;

    const result = await withRlsContext(session, async (tx) => {
      const existing = await tx.glossaryEntry.findFirst({
        where: { orgId: session.user.orgId, term },
      });

      const data: Record<string, unknown> = {
        definition,
        synonyms,
        status,
        updatedById: session.user.id,
      };
      if (reviewNotes !== undefined) {
        data.reviewNotes = reviewNotes;
      }
      if (status === GlossaryStatus.PENDING) {
        data.reviewedAt = null;
        data.reviewerId = null;
      } else {
        data.reviewedAt = new Date();
        data.reviewerId = session.user.id;
      }

      const entry = await tx.glossaryEntry.upsert({
        where: { orgId_term: { orgId: session.user.orgId, term } },
        create: {
          term,
          definition,
          synonyms,
          status,
          orgId: session.user.orgId,
          authorId: session.user.id,
          updatedById: session.user.id,
          reviewNotes: reviewNotes ?? null,
          reviewedAt: status === GlossaryStatus.PENDING ? null : new Date(),
          reviewerId: status === GlossaryStatus.PENDING ? null : session.user.id,
        },
        update: data,
        include: relationSelect,
      } as any);

      await tx.ragEvent.create({
        data: {
          orgId: session.user.orgId,
          actorId: session.user.id,
          actorRole: session.user.role,
          action: existing ? "glossary.updated" : "glossary.created",
          entity: "glossary",
          glossaryId: entry.id,
          before: existing ? snapshotEntry(existing) : Prisma.JsonNull,
          after: snapshotEntry(entry),
        },
      });

      return { entry, created: !existing };
    });

    return NextResponse.json(serializeEntry(result.entry), { status: result.created ? 201 : 200 });
  } catch (error) {
    return handleGlossaryError(error);
  }
}

```

---

### app/api/glossary/utils.ts

```ts
import { randomUUID } from "node:crypto";
import { NextResponse } from "next/server";
import { GlossaryStatus, Prisma } from "@prisma/client";
import { ForbiddenError, UnauthorizedError } from "@/lib/rbac";

function buildError(
  status: number,
  error: string,
  detail: string,
  fields?: Record<string, string>
) {
  const requestId = randomUUID();
  const payload: Record<string, unknown> = {
    error,
    detail,
    request_id: requestId,
  };
  if (fields) {
    payload.fields = fields;
  }
  const response = NextResponse.json(payload, { status });
  response.headers.set("X-Request-ID", requestId);
  return response;
}

export function parseStatus(value: unknown): GlossaryStatus {
  if (value === undefined || value === null || value === "") {
    return GlossaryStatus.PENDING;
  }
  if (typeof value !== "string") {
    throw new Error("Invalid status type");
  }
  const upper = value.toUpperCase();
  if (!(upper in GlossaryStatus)) {
    throw new Error("Unknown glossary status");
  }
  return GlossaryStatus[upper as keyof typeof GlossaryStatus];
}

export function parseSynonyms(value: unknown): string[] {
  if (!value) {
    return [];
  }
  if (Array.isArray(value)) {
    return value
      .map((item) => (typeof item === "string" ? item.trim() : ""))
      .filter((item) => item.length > 0);
  }
  if (typeof value === "string") {
    return value
      .split(",")
      .map((item) => item.trim())
      .filter((item) => item.length > 0);
  }
  throw new Error("Invalid synonyms payload");
}

export function serializeEntry(entry: any) {
  return {
    id: entry.id,
    term: entry.term,
    definition: entry.definition,
    synonyms: Array.isArray(entry.synonyms) ? entry.synonyms : [],
    status: entry.status,
    createdAt: entry.createdAt.toISOString(),
    updatedAt: entry.updatedAt.toISOString(),
    reviewedAt: entry.reviewedAt ? entry.reviewedAt.toISOString() : null,
    author: entry.author
      ? {
          id: entry.author.id,
          email: entry.author.email,
          name: entry.author.name,
        }
      : null,
    updatedBy: entry.updatedBy
      ? {
          id: entry.updatedBy.id,
          email: entry.updatedBy.email,
          name: entry.updatedBy.name,
        }
      : null,
    reviewer: entry.reviewer
      ? {
          id: entry.reviewer.id,
          email: entry.reviewer.email,
          name: entry.reviewer.name,
        }
      : null,
    reviewNotes: entry.reviewNotes ?? null,
  };
}

export function snapshotEntry(entry: any) {
  return {
    term: entry.term,
    definition: entry.definition,
    synonyms: Array.isArray(entry.synonyms) ? entry.synonyms : [],
    status: entry.status,
    reviewNotes: entry.reviewNotes ?? null,
  };
}

export function handleGlossaryError(error: unknown) {
  if (error instanceof UnauthorizedError) {
    return buildError(401, "unauthorized", error.message || "Authentication required.");
  }
  if (error instanceof ForbiddenError) {
    return buildError(403, "forbidden", error.message || "Forbidden");
  }
  if (error instanceof Prisma.PrismaClientKnownRequestError && error.code === "P2002") {
    return buildError(409, "conflict", "Term already exists for this organization.");
  }
  if (error instanceof Prisma.PrismaClientKnownRequestError && error.code === "P2025") {
    return buildError(404, "not_found", "Glossary entry not found.");
  }
  if (error instanceof Error && error.message?.toLowerCase().includes("status")) {
    return buildError(400, "invalid_request", error.message);
  }
  return buildError(500, "internal_error", "An internal error occurred.");
}

```

---

### app/apps/page.tsx

```tsx
import type { Metadata } from "next";
import Link from "next/link";
import { Calendar, FileText, KanbanSquare, Layers } from "lucide-react";
import { PageHeader } from "@/components/page-header";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const integrations = [
  {
    name: "Prisma ingestion",
    description:
      "Sync product sheets, tables, and field notes from Postgres with deterministic chunking.",
    icon: Layers,
    href: "#prisma",
  },
  {
    name: "Salesforce service cloud",
    description:
      "Escalate chat transcripts to a case queue with the full retrieval trace and request ID.",
    icon: KanbanSquare,
    href: "#salesforce",
  },
  {
    name: "SharePoint content feeds",
    description: "Monitor document libraries for updates and trigger incremental embeddings.",
    icon: FileText,
    href: "#sharepoint",
  },
  {
    name: "Teams meeting sync",
    description: "Push escalations and release notes to your customer success Teams channel.",
    icon: Calendar,
    href: "#teams",
  },
];

export const metadata: Metadata = {
  title: "Apps · Atticus",
};

export default function AppsPage() {
  return (
    <div className="mx-auto flex w-full max-w-6xl flex-col gap-10">
      <PageHeader
        eyebrow="Apps"
        title="Integrate Atticus across your stack"
        description="Connect ingest pipelines, escalation workflows, and downstream analytics in a few clicks."
      />

      <section className="grid gap-6 md:grid-cols-2">
        {integrations.map((integration) => (
          <Card
            key={integration.name}
            className="transition hover:-translate-y-1 hover:shadow-lg dark:hover:shadow-indigo-500/10"
          >
            <CardHeader className="gap-3 pb-0">
              <div className="inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-300">
                <integration.icon className="h-5 w-5" aria-hidden="true" />
              </div>
              <CardTitle>{integration.name}</CardTitle>
              <CardDescription>{integration.description}</CardDescription>
            </CardHeader>
            <CardContent className="pt-4">
              <Button asChild variant="link" className="px-0">
                <Link href={integration.href}>View setup guide</Link>
              </Button>
            </CardContent>
          </Card>
        ))}
      </section>
    </div>
  );
}

```

---

### app/contact/page.tsx

```tsx
import type { Metadata } from "next";
import { MailCheck } from "lucide-react";
import { PageHeader } from "@/components/page-header";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Textarea } from "@/components/ui/textarea";

export const metadata: Metadata = {
  title: "Contact · Atticus",
};

export default function ContactPage() {
  return (
    <div className="mx-auto flex w-full max-w-4xl flex-col gap-10">
      <PageHeader
        eyebrow="Escalations"
        title="Raise an escalation"
        description="Submit production issues or low-confidence answers and the Atticus team will receive the full trace payload."
      />

      <Card>
        <CardHeader className="pb-4">
          <CardTitle>Escalation details</CardTitle>
          <CardDescription>
            Provide enough context for the admin team to reproduce the issue and link it to an existing request.
          </CardDescription>
        </CardHeader>
        <CardContent>
          <form className="space-y-6">
            <div className="grid gap-6 md:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="name">Name</Label>
                <Input id="name" name="name" placeholder="Alex Finnegan" required />
              </div>
              <div className="space-y-2">
                <Label htmlFor="email">Work email</Label>
                <Input id="email" name="email" type="email" placeholder="alex@contoso.com" required />
              </div>
            </div>
            <div className="space-y-2">
              <Label htmlFor="summary">Issue summary</Label>
              <Input
                id="summary"
                name="summary"
                placeholder="Low confidence response for Managed Print RFP"
                required
              />
            </div>
            <div className="space-y-2">
              <Label htmlFor="details">Details</Label>
              <Textarea
                id="details"
                name="details"
                rows={5}
                placeholder="Share the question, customer, and any attachments that should be included in the follow-up."
                required
              />
            </div>
            <Button type="submit" className="inline-flex items-center gap-2 rounded-full">
              Submit escalation
              <MailCheck className="h-4 w-4" aria-hidden="true" />
            </Button>
          </form>
        </CardContent>
      </Card>
    </div>
  );
}

```

---

### app/globals.css

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light dark;
}

body {
  @apply bg-slate-50 text-slate-900 antialiased dark:bg-slate-950 dark:text-slate-100;
}

a {
  @apply text-indigo-600 transition-colors hover:text-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500;
}

button {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-950;
}

::selection {
  @apply bg-indigo-500 text-white;
}

```

---

### app/layout.tsx

```tsx
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import type { ReactNode } from "react";
import "./globals.css";
import { SiteHeader } from "@/components/site-header";
import { SiteFooter } from "@/components/site-footer";
import { Providers } from "@/app/providers";
import { getServerAuthSession } from "@/lib/auth";

const inter = Inter({ subsets: ["latin"], variable: "--font-inter", display: "swap" });

export const metadata: Metadata = {
  title: "Atticus",
  description: "Grounded AI assistance for Sales teams with enterprise guardrails.",
};

export default async function RootLayout({ children }: { children: ReactNode }) {
  const session = await getServerAuthSession();

  return (
    <html lang="en" className={inter.variable}>
      <body className="flex min-h-screen flex-col bg-slate-50 font-sans text-slate-900 dark:bg-slate-950 dark:text-slate-100">
        <Providers session={session}>
          <SiteHeader />
          <main className="flex-1 px-4 py-10 sm:px-6 lg:px-8">{children}</main>
          <SiteFooter />
        </Providers>
      </body>
    </html>
  );
}

```

---

### app/page.tsx

```tsx
import { PageHeader } from "@/components/page-header";
import { ChatPanel } from "@/components/chat/chat-panel";

export default function HomePage() {
  return (
    <div className="mx-auto flex w-full max-w-6xl flex-col gap-12">
      <PageHeader
        eyebrow="Chat"
        title="Your Atticus workspace"
        description="Respond to tenders, proposals, and in-flight escalations with grounded answers."
      />

      <ChatPanel />
    </div>
  );
}

```

---

### app/providers.tsx

```tsx
"use client";

import { SessionProvider } from "next-auth/react";
import type { ReactNode } from "react";
import type { SessionProviderProps } from "next-auth/react";

interface ProvidersProps {
  children: ReactNode;
  session?: SessionProviderProps["session"];
}

export function Providers({ children, session }: ProvidersProps) {
  return <SessionProvider session={session}>{children}</SessionProvider>;
}

```

---

### app/settings/page.tsx

```tsx
import type { Metadata } from "next";
import Link from "next/link";
import { Shield, Zap } from "lucide-react";
import { PageHeader } from "@/components/page-header";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const toggles = [
  {
    id: "escalations",
    label: "Escalate low-confidence answers",
    description:
      "Automatically open an escalation email when answer confidence drops below the policy threshold.",
    defaultChecked: true,
  },
  {
    id: "request-logging",
    label: "Attach anonymised request logs",
    description:
      "Include hashed user IDs and request IDs so admins can correlate tickets with chat sessions.",
    defaultChecked: true,
  },
  {
    id: "typing-preview",
    label: "Streaming responses",
    description: "Show tokens as they are generated for faster operator feedback.",
    defaultChecked: false,
  },
];

export const metadata: Metadata = {
  title: "Settings · Atticus",
};

export default function SettingsPage() {
  return (
    <div className="mx-auto flex w-full max-w-4xl flex-col gap-10">
      <PageHeader
        eyebrow="Settings"
        title="Workspace preferences"
        description="Configure escalation behaviour, logging guardrails, and chat defaults."
        actions={
          <Button asChild variant="outline" className="rounded-full">
            <Link href="/admin">View admin console</Link>
          </Button>
        }
      />

      <section className="space-y-6">
        <h2 className="text-sm font-semibold uppercase tracking-widest text-slate-500">Policies</h2>
        <Card>
          <CardContent className="space-y-4">
            {toggles.map((toggle) => (
              <label
                key={toggle.id}
                htmlFor={toggle.id}
                className="flex flex-col gap-2 rounded-2xl border border-transparent p-4 transition hover:border-indigo-200 dark:hover:border-indigo-500/40"
              >
                <div className="flex items-center justify-between gap-4">
                  <div>
                    <p className="text-sm font-semibold text-slate-900 dark:text-white">
                      {toggle.label}
                    </p>
                    <p
                      id={`${toggle.id}-description`}
                      className="text-xs text-slate-500 dark:text-slate-400"
                    >
                      {toggle.description}
                    </p>
                  </div>
                  <input
                    id={toggle.id}
                    type="checkbox"
                    defaultChecked={toggle.defaultChecked}
                    className="h-5 w-10 cursor-pointer appearance-none rounded-full border border-slate-300 bg-slate-200 transition before:block before:h-4 before:w-4 before:translate-x-0 before:rounded-full before:bg-white before:shadow before:transition checked:border-indigo-400 checked:bg-indigo-500 checked:before:translate-x-5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:checked:border-indigo-400 dark:checked:bg-indigo-500"
                    aria-describedby={`${toggle.id}-description`}
                  />
                </div>
              </label>
            ))}
          </CardContent>
        </Card>
      </section>

      <section className="grid gap-6 md:grid-cols-2">
        <Card>
          <CardHeader className="gap-3 pb-0">
            <div className="inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-300">
              <Shield className="h-5 w-5" aria-hidden="true" />
            </div>
            <CardTitle>Safety guardrails</CardTitle>
            <CardDescription>
              Escalation allow-lists and role-based policies ensure sensitive documents never leave
              your tenant.
            </CardDescription>
          </CardHeader>
        </Card>
        <Card>
          <CardHeader className="gap-3 pb-0">
            <div className="inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-indigo-600/10 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-300">
              <Zap className="h-5 w-5" aria-hidden="true" />
            </div>
            <CardTitle>Performance tuning</CardTitle>
            <CardDescription>
              Adjust search probes, reranker policies, and streaming defaults to match your
              team&apos;s workflow.
            </CardDescription>
          </CardHeader>
        </Card>
      </section>
    </div>
  );
}

```

---

### app/signin/page.tsx

```tsx
import type { Metadata } from "next";
import Link from "next/link";
import { SignInForm } from "@/components/auth/sign-in-form";

export const metadata: Metadata = {
  title: "Sign in · Atticus",
};

export default function SignInPage() {
  return (
    <div className="mx-auto flex w-full max-w-md flex-col gap-6 text-center">
      <div className="space-y-2">
        <p className="text-sm font-semibold uppercase tracking-widest text-indigo-500">Access</p>
        <h1 className="text-2xl font-semibold text-slate-900 dark:text-white">
          Sign in to Atticus
        </h1>
        <p className="text-sm text-slate-600 dark:text-slate-300">
          Use your company email to receive a secure, single-use magic link.
        </p>
      </div>
      <SignInForm />
      <p className="text-xs text-slate-500 dark:text-slate-400">
        Need access? Contact an administrator or{" "}
        <Link className="font-semibold text-indigo-600 hover:underline" href="/contact">
          submit a request
        </Link>
        .
      </p>
    </div>
  );
}

```

---

### app/signin/verify/page.tsx

```tsx
import type { Metadata } from "next";

export const metadata: Metadata = {
  title: "Check your inbox · Atticus",
};

export default function VerifyRequestPage() {
  return (
    <div className="mx-auto flex w-full max-w-md flex-col items-center gap-4 text-center">
      <span className="inline-flex h-14 w-14 items-center justify-center rounded-full bg-indigo-500/10 text-indigo-500">
        ✓
      </span>
      <div className="space-y-2">
        <h1 className="text-2xl font-semibold text-slate-900 dark:text-white">Magic link sent</h1>
        <p className="text-sm text-slate-600 dark:text-slate-300">
          We sent you an email with a secure link. Open it on this device to complete sign-in.
        </p>
      </div>
    </div>
  );
}

```

---

### atticus/__init__.py

```python
"""Atticus core utilities."""

from .config import AppSettings

__all__ = ["AppSettings"]

```

---

### atticus/config.py

```python
"""Configuration objects for Atticus."""

from __future__ import annotations

import hashlib
import json
import os
from dataclasses import dataclass
from datetime import UTC, datetime
from pathlib import Path
from typing import Any
from zoneinfo import ZoneInfo

import yaml
from pydantic import AliasChoices, Field
from pydantic_settings import BaseSettings, SettingsConfigDict

SECRET_FIELD_NAMES = {
    "database_url",
    "openai_api_key",
    "smtp_user",
    "smtp_pass",
    "smtp_from",
    "smtp_to",
    "smtp_allow_list_raw",
    "contact_email",
    "admin_api_token",
}


def _fingerprint_secret(value: str | None) -> str | None:
    if not value:
        return None
    return hashlib.sha256(value.encode("utf-8")).hexdigest()[:12]


class AppSettings(BaseSettings):
    """Application configuration sourced from environment variables."""

    content_dir: Path = Field(
        default=Path("content"), validation_alias=AliasChoices("CONTENT_ROOT", "CONTENT_DIR")
    )
    indices_dir: Path = Field(default=Path("indices"), validation_alias="INDICES_DIR")
    logs_path: Path = Field(default=Path("logs/app.jsonl"), validation_alias="LOG_PATH")
    errors_path: Path = Field(default=Path("logs/errors.jsonl"), validation_alias="ERROR_LOG_PATH")
    manifest_path: Path = Field(default=Path("indices/manifest.json"))
    metadata_path: Path = Field(default=Path("indices/index_metadata.json"))
    snapshots_dir: Path = Field(default=Path("indices/snapshots"))
    dictionary_path: Path = Field(default=Path("indices/dictionary.json"), alias="DICTIONARY_PATH")
    database_url: str | None = Field(default=None, alias="DATABASE_URL")
    pgvector_lists: int = Field(default=100, alias="PGVECTOR_LISTS")
    pgvector_probes: int = Field(default=4, alias="PGVECTOR_PROBES")
    chunk_size: int = Field(default=512, ge=64)
    chunk_overlap_ratio: float = Field(default=0.0, ge=0.0, lt=1.0)
    chunk_target_tokens: int = Field(default=512, alias="CHUNK_TARGET_TOKENS")
    chunk_min_tokens: int = Field(default=256, alias="CHUNK_MIN_TOKENS")
    chunk_overlap_tokens_setting: int | None = Field(
        default=None, alias="CHUNK_OVERLAP_TOKENS", ge=0
    )
    max_context_chunks: int = Field(default=10, ge=1)
    enable_reranker: bool = Field(default=False, alias="ENABLE_RERANKER")
    top_k: int = Field(default=20, ge=1)
    openai_api_key: str | None = Field(default=None, alias="OPENAI_API_KEY")
    embed_model: str = Field(default="text-embedding-3-large", alias="EMBED_MODEL")
    embedding_model_version: str = Field(
        default="text-embedding-3-large@2025-01-15",
        alias="EMBEDDING_MODEL_VERSION",
    )
    embed_dimensions: int = Field(default=3072, ge=128)
    generation_model: str = Field(default="gpt-4.1", alias="GEN_MODEL")
    confidence_threshold: float = Field(default=0.70, alias="CONFIDENCE_THRESHOLD")
    log_level: str = Field(default="INFO", alias="LOG_LEVEL")
    log_format: str = Field(default="json", alias="LOG_FORMAT")
    verbose_logging: bool = Field(default=False, alias="LOG_VERBOSE")
    trace_logging: bool = Field(default=False, alias="LOG_TRACE")
    timezone: str = Field(default="UTC", alias="TIMEZONE")
    evaluation_runs_dir: Path = Field(default=Path("eval/runs"))
    baseline_path: Path = Field(default=Path("eval/baseline.json"))
    gold_set_path: Path = Field(default=Path("eval/gold_set.csv"))
    eval_regression_threshold: float = Field(default=3.0, alias="EVAL_REGRESSION_THRESHOLD")
    config_path: Path = Field(default=Path("config.yaml"), alias="CONFIG_PATH")

    # Notification / escalation (from .env)
    contact_email: str | None = Field(default=None, alias="CONTACT_EMAIL")
    smtp_host: str | None = Field(default=None, alias="SMTP_HOST")
    smtp_port: int = Field(default=587, alias="SMTP_PORT")
    smtp_user: str | None = Field(default=None, alias="SMTP_USER")
    smtp_pass: str | None = Field(default=None, alias="SMTP_PASS")
    smtp_from: str | None = Field(default=None, alias="SMTP_FROM")
    smtp_to: str | None = Field(default=None, alias="SMTP_TO")
    smtp_dry_run: bool = Field(
        default=False, validation_alias=AliasChoices("SMTP_DRY_RUN", "EMAIL_SANDBOX")
    )
    smtp_allow_list_raw: str | list[str] | None = Field(default=None, alias="SMTP_ALLOW_LIST")
    rate_limit_requests: int = Field(default=5, alias="RATE_LIMIT_REQUESTS", ge=1)
    rate_limit_window_seconds: int = Field(default=60, alias="RATE_LIMIT_WINDOW_SECONDS", ge=1)
    admin_api_token: str | None = Field(default=None, alias="ADMIN_API_TOKEN")
    secrets_report: dict[str, dict[str, Any]] = Field(
        default_factory=dict, exclude=True, repr=False
    )

    model_config = SettingsConfigDict(env_file=".env", env_file_encoding="utf-8", extra="ignore")

    @property
    def tzinfo(self) -> ZoneInfo:
        return ZoneInfo(self.timezone)

    @property
    def chunk_overlap_tokens(self) -> int:
        if self.chunk_overlap_tokens_setting is not None:
            return max(0, self.chunk_overlap_tokens_setting)
        return max(0, int(self.chunk_size * self.chunk_overlap_ratio))

    def ensure_directories(self) -> None:
        for path in [
            self.content_dir,
            self.indices_dir,
            self.logs_path.parent,
            self.snapshots_dir,
            self.evaluation_runs_dir,
        ]:
            path.mkdir(parents=True, exist_ok=True)

    def timestamp(self) -> str:
        return datetime.now(tz=self.tzinfo).isoformat(timespec="seconds")

    def smtp_allowlist(self) -> set[str]:
        return {value.lower() for value in self.smtp_allow_list if value}

    @property
    def smtp_allow_list(self) -> list[str]:
        raw = self.smtp_allow_list_raw
        if raw is None:
            return []
        if isinstance(raw, str):
            return [item.strip() for item in raw.split(",") if item.strip()]
        return [str(item).strip() for item in raw if str(item).strip()]


@dataclass(slots=True)
class Manifest:
    """Represents a stored manifest of the active index."""

    embedding_model: str
    embedding_model_version: str
    embedding_dimensions: int
    chunk_size: int
    chunk_overlap_ratio: float
    corpus_hash: str
    document_count: int
    chunk_count: int
    created_at: str
    metadata_path: Path
    index_path: Path
    snapshot_path: Path
    documents: dict[str, dict[str, Any]]

    def to_dict(self) -> dict[str, Any]:
        return {
            "embedding_model": self.embedding_model,
            "embedding_model_version": self.embedding_model_version,
            "embedding_dimensions": self.embedding_dimensions,
            "chunk_size": self.chunk_size,
            "chunk_overlap_ratio": self.chunk_overlap_ratio,
            "corpus_hash": self.corpus_hash,
            "document_count": self.document_count,
            "chunk_count": self.chunk_count,
            "created_at": self.created_at,
            "metadata_path": str(self.metadata_path),
            "index_path": str(self.index_path),
            "snapshot_path": str(self.snapshot_path),
            "documents": self.documents,
        }


def load_manifest(path: Path) -> Manifest | None:
    if not path.exists():
        return None
    data = json.loads(path.read_text(encoding="utf-8"))
    return Manifest(
        embedding_model=data["embedding_model"],
        embedding_model_version=data.get("embedding_model_version", "unknown"),
        embedding_dimensions=int(data["embedding_dimensions"]),
        chunk_size=int(data["chunk_size"]),
        chunk_overlap_ratio=float(data["chunk_overlap_ratio"]),
        corpus_hash=data["corpus_hash"],
        document_count=int(data["document_count"]),
        chunk_count=int(data["chunk_count"]),
        created_at=data["created_at"],
        metadata_path=Path(data["metadata_path"]),
        index_path=Path(data["index_path"]),
        snapshot_path=Path(data["snapshot_path"]),
        documents={key: dict(value) for key, value in data.get("documents", {}).items()},
    )


def write_manifest(path: Path, manifest: Manifest) -> None:
    path.write_text(
        json.dumps(manifest.to_dict(), indent=2, ensure_ascii=False) + "\n", encoding="utf-8"
    )


def _load_yaml_config(path: Path) -> dict[str, Any]:
    if not path.exists():
        return {}
    data = yaml.safe_load(path.read_text(encoding="utf-8"))
    if isinstance(data, dict):
        return {str(key): value for key, value in data.items()}
    raise ValueError(f"Configuration file {path} must contain a mapping")


@dataclass(slots=True)
class _SettingsCache:
    """Mutable holder for cached settings and their provenance."""

    key: tuple[float, float, str] | None = None
    settings: AppSettings | None = None


_SETTINGS_CACHE = _SettingsCache()


def _iter_alias_strings(value: Any) -> list[str]:
    if value is None:
        return []
    if isinstance(value, str):
        return [value]
    choices = getattr(value, "choices", None)
    if choices is not None:
        return [str(item) for item in choices]
    result: list[str] = []
    try:
        for item in value:
            if isinstance(item, str):
                result.append(item)
            else:
                result.extend(_iter_alias_strings(item))
    except TypeError:
        pass
    return result


def _env_variables_fingerprint() -> str:
    keys: set[str] = set()
    for name, field in AppSettings.model_fields.items():
        keys.add(name.upper())
        alias = getattr(field, "alias", None)
        if alias:
            keys.update(_iter_alias_strings(alias))
        validation_alias = getattr(field, "validation_alias", None)
        keys.update(_iter_alias_strings(validation_alias))
    material = "|".join(f"{key}={os.environ.get(key, '')}" for key in sorted(keys))
    return hashlib.sha256(material.encode("utf-8")).hexdigest()


def _parse_env_file(path: Path) -> dict[str, str]:
    if not path.exists():
        return {}

    values: dict[str, str] = {}
    for raw_line in path.read_text(encoding="utf-8").splitlines():
        line = raw_line.strip()
        if not line or line.startswith("#"):
            continue
        if line.startswith("export "):
            line = line[len("export ") :]
        if "=" not in line:
            continue
        key, value = line.split("=", 1)
        key = key.strip()
        value = value.strip()
        if value and value[0] == value[-1] and value[0] in {"'", '"'}:
            value = value[1:-1]
        values[key] = value
    return values


def _path_metadata(path: Path) -> dict[str, Any]:
    absolute = path if path.is_absolute() else path.resolve()
    metadata = {"path": str(absolute), "exists": absolute.exists()}
    if absolute.exists():
        stat_result = absolute.stat()
        metadata["modified_at"] = datetime.fromtimestamp(stat_result.st_mtime, tz=UTC).isoformat()
        metadata["size_bytes"] = stat_result.st_size
    else:
        metadata["modified_at"] = None
        metadata["size_bytes"] = None
    return metadata


def _serialize_value(value: Any) -> Any:
    if isinstance(value, Path):
        return str(value)
    if isinstance(value, ZoneInfo):
        return value.key
    if isinstance(value, dict):
        return {str(k): _serialize_value(v) for k, v in value.items()}
    if isinstance(value, (list, tuple, set)):
        return [_serialize_value(item) for item in value]
    return value


def _resolve_env_file() -> Path | None:
    env_file = AppSettings.model_config.get("env_file")
    if isinstance(env_file, (list, tuple)):
        if not env_file:
            return None
        first = env_file[0]
        return Path(str(first))
    if isinstance(env_file, str):
        return Path(env_file)
    return None


def reset_settings_cache() -> None:
    """Clear the cached settings instance (primarily for tests)."""

    _SETTINGS_CACHE.key = None
    _SETTINGS_CACHE.settings = None


def load_settings() -> AppSettings:
    env_path = _resolve_env_file() or Path(".env")
    env_mtime = env_path.stat().st_mtime if env_path.exists() else -1.0
    env_fingerprint = _env_variables_fingerprint()

    base = AppSettings()
    config_path = base.config_path
    config_mtime = config_path.stat().st_mtime if config_path.exists() else -1.0

    cache_key = (env_mtime, config_mtime, env_fingerprint)

    if _SETTINGS_CACHE.key == cache_key and _SETTINGS_CACHE.settings is not None:
        return _SETTINGS_CACHE.settings

    config_data = _load_yaml_config(config_path)
    if config_data:
        merged: dict[str, Any] = base.model_dump()
        merged.update(config_data)
        settings = AppSettings(**merged)
    else:
        settings = base

    _SETTINGS_CACHE.key = cache_key
    _SETTINGS_CACHE.settings = settings
    return settings


def environment_diagnostics() -> dict[str, Any]:
    """Return sanitized diagnostics for environment configuration resolution."""

    env_path = _resolve_env_file() or Path(".env")
    env_values = _parse_env_file(env_path)

    settings = load_settings()
    config_path = settings.config_path
    config_data = _load_yaml_config(config_path)

    relevant_keys: set[str] = set()
    non_secret_settings: dict[str, Any] = {}
    secrets_report: dict[str, dict[str, Any]] = {}

    for name, field in AppSettings.model_fields.items():
        if name == "secrets_report":
            continue

        aliases = {name.upper()}
        aliases.update(_iter_alias_strings(getattr(field, "alias", None)))
        aliases.update(_iter_alias_strings(getattr(field, "validation_alias", None)))
        relevant_keys.update(aliases)

        env_key = next((key for key in aliases if key in os.environ), None)
        env_file_key = next((key for key in aliases if key in env_values), None)
        config_key = name if name in config_data else None

        if env_key:
            source = f"os.environ:{env_key}"
        elif env_file_key:
            source = f".env:{env_file_key}"
        elif config_key:
            source = f"config.yaml:{config_key}"
        else:
            source = "default"

        value = getattr(settings, name)

        if name in SECRET_FIELD_NAMES:
            fingerprint = _fingerprint_secret(str(value) if value is not None else None)
            secrets_report[name] = {
                "aliases": sorted(aliases),
                "defined": bool(value),
                "fingerprint": fingerprint,
                "source": source,
            }
        else:
            non_secret_settings[name] = {
                "aliases": sorted(aliases),
                "source": source,
                "value": _serialize_value(value),
            }

    settings.secrets_report = secrets_report

    env_override_keys = sorted(key for key in os.environ if key in relevant_keys)
    env_file_override_keys = sorted(key for key in env_values if key in relevant_keys)

    return {
        "generated_at": datetime.now(tz=UTC).isoformat(),
        "environment_fingerprint": _env_variables_fingerprint(),
        "env_file": _path_metadata(env_path),
        "config_file": _path_metadata(config_path),
        "overrides": {
            "environment": env_override_keys,
            ".env": env_file_override_keys,
            "config": sorted(str(key) for key in config_data.keys()),
        },
        "settings": non_secret_settings,
        "secrets": secrets_report,
    }

```

---

### atticus/embeddings.py

```python
"""Embedding helpers using OpenAI or deterministic fallback."""

from __future__ import annotations

import hashlib
import importlib
import logging
import os
from collections.abc import Iterable
from typing import Any, cast

import numpy as np

from .config import AppSettings


class EmbeddingClient:
    """Provides embeddings with deterministic offline fallback."""

    def __init__(self, settings: AppSettings, logger: logging.Logger | None = None) -> None:
        self.settings = settings
        self.logger = logger or logging.getLogger("atticus")
        self.model_name = settings.embed_model
        self.dimension = settings.embed_dimensions

        # Resolve API key and record source for diagnostics
        source = "none"
        api_key = None
        if getattr(settings, "openai_api_key", None):
            api_key = settings.openai_api_key
            source = "settings"
        elif os.getenv("OPENAI_API_KEY"):
            api_key = os.getenv("OPENAI_API_KEY")
            source = "os.environ"
        self._client: Any | None = None
        if api_key:  # pragma: no cover - requires network
            try:
                openai_module = importlib.import_module("openai")
                openai_class = cast(Any, openai_module).OpenAI
                # Pass the key explicitly so we don't rely on process env
                self._client = openai_class(api_key=api_key)
                # Safe fingerprint (sha256 prefix) for troubleshooting without leaking secrets
                try:
                    fp = hashlib.sha256(str(api_key).encode("utf-8")).hexdigest()[:12]
                except Exception:
                    fp = "unknown"
                self.logger.info(
                    "openai_client_initialized",
                    extra={
                        "extra_payload": {
                            "client": "embeddings",
                            "source": source,
                            "key_fp": fp,
                            "model": self.model_name,
                        }
                    },
                )
            except Exception as exc:  # pragma: no cover - network path
                self.logger.warning(
                    "OpenAI client initialization failed; using fallback embeddings",
                    extra={"extra_payload": {"error": str(exc)}},
                )
        else:
            self.logger.info(
                "Using deterministic embeddings because no OpenAI API key was provided"
            )

    def embed_texts(self, texts: Iterable[str]) -> list[list[float]]:
        payload = list(texts)
        if not payload:
            return []

        if self._client is not None:  # pragma: no cover - requires network
            try:
                response: Any = self._client.embeddings.create(model=self.model_name, input=payload)
                return [list(map(float, item.embedding)) for item in response.data]
            except Exception as exc:
                self.logger.error(
                    "OpenAI embedding request failed; falling back to deterministic embeddings",
                    extra={"extra_payload": {"error": str(exc), "model": self.model_name}},
                )

        return [self._deterministic_embedding(text) for text in payload]

    def _deterministic_embedding(self, text: str) -> list[float]:
        tokens = text.lower().split()
        vector = np.zeros(self.dimension, dtype=np.float32)
        for token in tokens:
            digest = hashlib.sha256(token.encode("utf-8")).digest()
            for index in range(0, len(digest), 4):
                offset = int.from_bytes(digest[index : index + 4], "little") % self.dimension
                vector[offset] += 1.0
        norm = np.linalg.norm(vector)
        if norm:
            vector /= norm
        return vector.astype(np.float32).tolist()

```

---

### atticus/logging.py

```python
"""Structured logging utilities."""

from __future__ import annotations

import json
import logging
from logging.handlers import RotatingFileHandler
from pathlib import Path
from typing import Any

from .config import AppSettings


class JsonFormatter(logging.Formatter):
    """Formats log records as JSON lines."""

    def format(self, record: logging.LogRecord) -> str:
        payload: dict[str, Any] = {
            "level": record.levelname,
            "logger": record.name,
            "message": record.getMessage(),
            "time": self.formatTime(record, datefmt="%Y-%m-%dT%H:%M:%S%z"),
        }

        extra_data = getattr(record, "extra_payload", None)
        if isinstance(extra_data, dict):
            payload.update(extra_data)

        if record.exc_info:
            payload["exc_info"] = self.formatException(record.exc_info)

        return json.dumps(payload, ensure_ascii=False)


def _build_file_handler(path: Path) -> RotatingFileHandler:
    path.parent.mkdir(parents=True, exist_ok=True)
    handler = RotatingFileHandler(path, maxBytes=5_000_000, backupCount=5, encoding="utf-8")
    handler.setFormatter(JsonFormatter())
    return handler


def configure_logging(settings: AppSettings) -> logging.Logger:
    """Return a configured root logger for the service."""

    logger = logging.getLogger("atticus")
    if not logger.handlers:
        logger.setLevel(getattr(logging, settings.log_level.upper(), logging.INFO))
        logger.addHandler(_build_file_handler(settings.logs_path))

        error_handler = _build_file_handler(settings.errors_path)
        error_handler.setLevel(logging.ERROR)
        logger.addHandler(error_handler)
        # Prevent propagation to root handlers (avoids console encoding issues on Windows)
        logger.propagate = False
    return logger


def log_event(logger: logging.Logger, event: str, **payload: Any) -> None:
    if "trace_id" not in payload and "request_id" in payload:
        payload["trace_id"] = payload["request_id"]
    logger.info(event, extra={"extra_payload": payload})


def log_error(logger: logging.Logger, event: str, **payload: Any) -> None:
    payload.setdefault("severity", "ERROR")
    if "trace_id" not in payload and "request_id" in payload:
        payload["trace_id"] = payload["request_id"]
    logger.error(event, extra={"extra_payload": payload})

```

---

### atticus/logging_utils.py

```python
from __future__ import annotations

import logging
import os
import sys
from typing import cast

import structlog
from structlog.stdlib import BoundLogger

_LEVEL = os.getenv("LOG_LEVEL", "INFO").upper()
_FORMAT = os.getenv("LOG_FORMAT", "json").lower()


def _configure_once() -> None:
    if getattr(_configure_once, "_did", False):
        return

    processors: list[structlog.types.Processor] = [
        structlog.processors.TimeStamper(fmt="iso"),
        structlog.processors.add_log_level,
        structlog.processors.StackInfoRenderer(),
        structlog.processors.format_exc_info,
    ]
    if _FORMAT == "console":
        processors.append(structlog.dev.ConsoleRenderer())
    else:
        processors.append(structlog.processors.JSONRenderer())

    level = getattr(logging, _LEVEL, logging.INFO)
    logging.basicConfig(format="%(message)s", stream=sys.stdout, level=level)

    structlog.configure(
        processors=processors,
        wrapper_class=structlog.make_filtering_bound_logger(level),
        context_class=dict,
        logger_factory=structlog.stdlib.LoggerFactory(),
        cache_logger_on_first_use=True,
    )
    _configure_once._did = True  # type: ignore[attr-defined]


def get_logger(name: str = "atticus") -> BoundLogger:
    _configure_once()
    logger = structlog.get_logger(name)
    return cast(BoundLogger, logger)

```

---

### atticus/metrics.py

```python
"""Simple metrics aggregator for Atticus."""

from __future__ import annotations

import csv
from dataclasses import dataclass, field
from datetime import datetime
from pathlib import Path

from .config import AppSettings


@dataclass(slots=True)
class MetricsRecorder:
    settings: AppSettings
    store_path: Path = field(default_factory=lambda: Path("logs/metrics/metrics.csv"))
    queries: int = 0
    total_confidence: float = 0.0
    escalations: int = 0
    total_latency_ms: float = 0.0
    latency_samples: list[float] = field(default_factory=list)
    recent_trace_ids: list[str] = field(default_factory=list)
    trace_id_limit: int = 50

    def record(
        self,
        confidence: float,
        latency_ms: float,
        escalated: bool,
        *,
        trace_id: str | None = None,
    ) -> None:
        self.queries += 1
        self.total_confidence += confidence
        self.total_latency_ms += latency_ms
        self.latency_samples.append(latency_ms)
        if len(self.latency_samples) > 500:
            self.latency_samples = self.latency_samples[-500:]
        if escalated:
            self.escalations += 1
        if trace_id:
            self.recent_trace_ids.append(trace_id)
            if len(self.recent_trace_ids) > self.trace_id_limit:
                self.recent_trace_ids = self.recent_trace_ids[-self.trace_id_limit :]

    def _latency_percentile(self, percentile: float) -> float:
        if not self.latency_samples:
            return 0.0
        ordered = sorted(self.latency_samples)
        index = int(round((percentile / 100.0) * (len(ordered) - 1)))
        return float(ordered[index])

    def latency_histogram(self) -> dict[str, int]:
        buckets = {"0-250": 0, "250-500": 0, "500-1000": 0, "1000+": 0}
        for value in self.latency_samples:
            if value < 250:
                buckets["0-250"] += 1
            elif value < 500:
                buckets["250-500"] += 1
            elif value < 1000:
                buckets["500-1000"] += 1
            else:
                buckets["1000+"] += 1
        return buckets

    def snapshot(self) -> dict[str, float | int]:
        if self.queries == 0:
            return {
                "queries": 0,
                "avg_confidence": 0.0,
                "escalations": 0,
                "avg_latency_ms": 0.0,
                "p95_latency_ms": 0.0,
            }
        return {
            "queries": self.queries,
            "avg_confidence": round(self.total_confidence / self.queries, 3),
            "escalations": self.escalations,
            "avg_latency_ms": round(self.total_latency_ms / self.queries, 2),
            "p95_latency_ms": round(self._latency_percentile(95), 2),
        }

    def dashboard(self) -> dict[str, object]:
        return {
            **self.snapshot(),
            "latency_histogram": self.latency_histogram(),
            "recent_trace_ids": list(self.recent_trace_ids),
        }

    def flush(self) -> None:
        if self.queries == 0:
            return
        snapshot = self.snapshot()
        self.store_path.parent.mkdir(parents=True, exist_ok=True)
        write_header = not self.store_path.exists()
        with self.store_path.open("a", newline="", encoding="utf-8") as handle:
            writer = csv.DictWriter(
                handle,
                fieldnames=[
                    "timestamp",
                    "queries",
                    "avg_confidence",
                    "escalations",
                    "avg_latency_ms",
                    "p95_latency_ms",
                ],
            )
            if write_header:
                writer.writeheader()
            writer.writerow(
                {
                    "timestamp": datetime.now(tz=self.settings.tzinfo).isoformat(
                        timespec="seconds"
                    ),
                    **snapshot,
                }
            )
        self.reset()

    def reset(self) -> None:
        self.queries = 0
        self.total_confidence = 0.0
        self.escalations = 0
        self.total_latency_ms = 0.0
        self.latency_samples.clear()
        self.recent_trace_ids.clear()

```

---

### atticus/notify/__init__.py

```python
"""Notification helpers (email escalation, etc.)."""

from .mailer import EscalationDeliveryError, send_escalation

__all__ = ["EscalationDeliveryError", "send_escalation"]

```

---

### atticus/notify/mailer.py

```python
"""SMTP mailer for escalation emails.

Reads SMTP_* and CONTACT_EMAIL from AppSettings (which sources .env).

Exports:
    send_escalation(subject, body, to=None)
"""

from __future__ import annotations

import json
import logging
import smtplib
from collections.abc import Iterable
from email.message import EmailMessage
from typing import Any, Literal, TypedDict

from atticus.config import load_settings
from atticus.logging import configure_logging, log_error


class EscalationDeliveryError(RuntimeError):
    """Raised when an escalation email cannot be delivered."""

    def __init__(self, message: str, *, reason: str = "unknown") -> None:
        super().__init__(message)
        self.reason = reason


class _DryRunResult(TypedDict):
    status: Literal["dry-run"]
    host: str
    port: int


def _normalise_allow_list(values: Iterable[str]) -> list[str]:
    result: list[str] = []
    for value in values:
        if not value:
            continue
        cleaned = value.strip().lower()
        if cleaned:
            result.append(cleaned)
    return result


def _address_allowed(address: str, allow_list: Iterable[str]) -> bool:
    normalised = _normalise_allow_list(allow_list)
    if not normalised:
        return True
    candidate = address.strip().lower()
    if candidate in normalised:
        return True
    if "@" in candidate:
        _, _, domain = candidate.partition("@")
        patterns = {domain, f"@{domain}", f"*@{domain}"}
        if any(pattern in normalised for pattern in patterns):
            return True
    return False


def _compose_message(
    subject: str,
    body: str,
    sender: str,
    recipient: str,
    trace: dict[str, Any] | None = None,
) -> EmailMessage:
    msg = EmailMessage()
    msg["Subject"] = subject
    msg["From"] = sender
    msg["To"] = recipient
    if trace:
        trace_dump = json.dumps(trace, indent=2, ensure_ascii=False)
        body = f"{body}\n\nTrace Payload\n--------------\n{trace_dump}"
    msg.set_content(body)
    return msg


def _log_failure(
    logger: logging.Logger, *, reason: str, host: str, port: int, exc: Exception
) -> None:
    log_error(
        logger,
        "escalation_email_failed",
        reason=reason,
        host=host,
        port=port,
        error=str(exc),
    )


def _summarize_trace(trace: dict[str, Any] | None) -> dict[str, Any] | None:
    if not trace:
        return None
    summary: dict[str, Any] = {}
    for key in ("user_id", "chat_id", "message_id", "request_id"):
        if trace.get(key):
            summary[key] = trace[key]
    question = trace.get("question")
    if isinstance(question, str) and question.strip():
        summary["question_preview"] = question.strip()[:120]
    documents = trace.get("documents") or trace.get("top_documents")
    if isinstance(documents, list) and documents:
        summary["documents"] = [
            {
                "chunk_id": item.get("chunk_id"),
                "score": item.get("score"),
                "source_path": item.get("source_path"),
            }
            for item in documents[:5]
            if isinstance(item, dict)
        ]
    return summary or None


def send_escalation(
    subject: str,
    body: str,
    to: str | None = None,
    *,
    trace: dict[str, Any] | None = None,
) -> _DryRunResult | None:
    """Send an escalation email via SMTP.

    Recipient resolution order: explicit `to` -> `SMTP_TO` -> `CONTACT_EMAIL`.
    Returns dry-run metadata when SMTP_DRY_RUN is enabled; otherwise None.
    """
    settings = load_settings()
    logger = configure_logging(settings)

    candidates = [
        (to or "").strip(),
        (settings.smtp_to or "").strip(),
        (settings.contact_email or "").strip(),
    ]
    allow_list = settings.smtp_allow_list
    recipient: str | None = None
    for candidate in candidates:
        if not candidate:
            continue
        if allow_list and not _address_allowed(candidate, allow_list):
            continue
        recipient = candidate
        break

    if recipient is None:
        if allow_list:
            raise EscalationDeliveryError(
                "Recipient not approved for escalation email.",
                reason="recipient_not_allowed",
            )
        logger.warning("No recipient configured for escalation email; skipping send")
        return None

    host = (settings.smtp_host or "").strip()
    if not host:
        logger.warning("SMTP_HOST not configured; skipping send")
        return None

    port = int(settings.smtp_port or 587)
    sender = settings.smtp_from or settings.smtp_user or f"no-reply@{host}"

    if not _address_allowed(recipient, allow_list):
        raise EscalationDeliveryError(
            "Recipient not approved for escalation email.",
            reason="recipient_not_allowed",
        )
    if sender and not _address_allowed(sender, allow_list):
        raise EscalationDeliveryError(
            "SMTP_FROM address not present in allow list.",
            reason="sender_not_allowed",
        )

    msg = _compose_message(
        subject=subject,
        body=body,
        sender=sender,
        recipient=recipient,
        trace=trace,
    )

    trace_summary = _summarize_trace(trace)

    if settings.smtp_dry_run:
        logger.info(
            "escalation_email_dry_run",
            extra={
                "extra_payload": {
                    "to": "(redacted)",
                    "host": host,
                    "port": port,
                    "trace": trace_summary,
                }
            },
        )
        return {"status": "dry-run", "host": host, "port": int(port)}

    try:
        with smtplib.SMTP(host, port, timeout=20) as client:
            client.ehlo()
            try:
                client.starttls()
            except smtplib.SMTPNotSupportedError as exc:  # pragma: no cover - legacy SMTP
                _log_failure(logger, reason="tls_not_supported", host=host, port=port, exc=exc)
                raise EscalationDeliveryError(
                    "SMTP server does not support STARTTLS; escalation email not sent.",
                    reason="tls_not_supported",
                ) from exc

            if settings.smtp_user and settings.smtp_pass:
                client.login(settings.smtp_user, settings.smtp_pass)

            try:
                client.send_message(msg)
            except AttributeError:
                client.sendmail(sender, [recipient], msg.as_string())

            logger.info(
                "escalation_email_sent",
                extra={
                    "extra_payload": {
                        "to": "(redacted)",
                        "host": host,
                        "port": port,
                        "trace": trace_summary,
                    }
                },
            )
    except smtplib.SMTPAuthenticationError as exc:
        _log_failure(logger, reason="authentication_failed", host=host, port=port, exc=exc)
        raise EscalationDeliveryError(
            "SMTP authentication failed while sending escalation email.",
            reason="authentication_failed",
        ) from exc
    except (smtplib.SMTPConnectError, OSError) as exc:
        _log_failure(logger, reason="connection_error", host=host, port=port, exc=exc)
        raise EscalationDeliveryError(
            "Unable to connect to the SMTP server for escalation email.",
            reason="connection_error",
        ) from exc
    except smtplib.SMTPException as exc:
        _log_failure(logger, reason="smtp_error", host=host, port=port, exc=exc)
        raise EscalationDeliveryError(
            "Unexpected SMTP error while sending escalation email.",
            reason="smtp_error",
        ) from exc

    return None

```

---

### atticus/tokenization.py

```python
"""Tokenization utilities for chunking."""

from __future__ import annotations

from collections.abc import Iterable, Sequence
from functools import lru_cache

import tiktoken


@lru_cache(maxsize=1)
def _encoding() -> tiktoken.Encoding:
    return tiktoken.get_encoding("cl100k_base")


def encode(text: str) -> list[int]:
    return _encoding().encode(text, disallowed_special=())


def decode(tokens: Sequence[int]) -> str:
    return _encoding().decode(list(tokens))


def count_tokens(text: str) -> int:
    return len(encode(text))


def split_tokens(tokens: Sequence[int], window: int, overlap: int) -> Iterable[tuple[int, int]]:
    if window <= 0:
        raise ValueError("window must be positive")
    if overlap >= window:
        raise ValueError("overlap must be smaller than window")

    step = max(1, window - overlap)
    total = len(tokens)
    for start in range(0, total, step):
        end = min(start + window, total)
        yield start, end
        if end == total:
            break

```

---

### atticus/utils/__init__.py

```python
"""Helper utilities for Atticus."""

from .hashing import sha256_file, sha256_text

__all__ = ["sha256_file", "sha256_text"]

```

---

### atticus/utils/hashing.py

```python
"""Utility helpers for hashing and manifest management."""

from __future__ import annotations

import hashlib
from pathlib import Path


def sha256_file(path: Path) -> str:
    digest = hashlib.sha256()
    with path.open("rb") as handle:
        for chunk in iter(lambda: handle.read(8192), b""):
            digest.update(chunk)
    return digest.hexdigest()


def sha256_text(value: str) -> str:
    return hashlib.sha256(value.encode("utf-8")).hexdigest()

```

---

### atticus/vector_db.py

```python
"""Postgres/pgvector persistence helpers."""

from __future__ import annotations

import json
import logging
from collections.abc import Iterable, Iterator, Sequence
from contextlib import contextmanager
from dataclasses import dataclass, field
from pathlib import Path
from typing import Any

import psycopg
from pgvector.psycopg import Vector, register_vector
from psycopg.rows import dict_row
from psycopg.types.json import Json

from atticus.config import AppSettings

logger = logging.getLogger(__name__)


@dataclass(slots=True)
class StoredChunk:
    """Chunk payload with embedding and metadata."""

    chunk_id: str
    document_id: str
    source_path: str
    text: str
    start_token: int
    end_token: int
    page_number: int | None
    section: str | None
    sha256: str
    embedding: Sequence[float] | None = None
    extra: dict[str, str] = field(default_factory=dict)

    def to_dict(self) -> dict[str, Any]:
        return {
            "chunk_id": self.chunk_id,
            "document_id": self.document_id,
            "source_path": self.source_path,
            "text": self.text,
            "start_token": self.start_token,
            "end_token": self.end_token,
            "page_number": self.page_number,
            "section": self.section,
            "sha256": self.sha256,
            "embedding": [float(value) for value in (self.embedding or [])],
            "extra": dict(self.extra),
        }


def save_metadata(chunks: Iterable[StoredChunk], path: Path) -> None:
    """Persist chunk metadata (including embeddings) to JSON."""

    serialised = [chunk.to_dict() for chunk in chunks]
    path.parent.mkdir(parents=True, exist_ok=True)
    payload = json.dumps(serialised, indent=2, ensure_ascii=False) + "\n"
    path.write_text(payload, encoding="utf-8")


def load_metadata(path: Path) -> list[StoredChunk]:
    """Load chunk metadata from JSON snapshots."""

    if not path.exists():
        return []
    payload = json.loads(path.read_text(encoding="utf-8"))
    result: list[StoredChunk] = []
    for item in payload:
        extra = item.get("extra", {}) or {}
        extra_str = {str(k): str(v) for k, v in extra.items()}
        embedding = item.get("embedding")
        sha_value = str(item.get("sha256", ""))
        result.append(
            StoredChunk(
                chunk_id=str(item["chunk_id"]),
                document_id=str(item["document_id"]),
                source_path=str(item["source_path"]),
                text=str(item.get("text", "")),
                start_token=int(item.get("start_token", 0)),
                end_token=int(item.get("end_token", 0)),
                page_number=item.get("page_number"),
                section=item.get("section"),
                sha256=sha_value,
                embedding=list(map(float, embedding)) if embedding is not None else None,
                extra=extra_str,
            )
        )
    return result


class PgVectorRepository:
    """Wrapper around psycopg/pgvector for chunk storage and retrieval."""

    def __init__(self, settings: AppSettings) -> None:
        if not settings.database_url:
            raise ValueError("DATABASE_URL must be configured for pgvector usage")
        self.settings = settings

    @contextmanager
    def connection(self, *, autocommit: bool = False) -> Iterator[psycopg.Connection]:
        conn = psycopg.connect(
            self.settings.database_url,
            autocommit=autocommit,
            row_factory=dict_row,
        )
        register_vector(conn)
        try:
            yield conn
            if not autocommit:
                conn.commit()
        except Exception:
            if not autocommit:
                conn.rollback()
            raise
        finally:
            conn.close()

    def ensure_schema(self) -> None:
        """Create pgvector extension, tables, and indexes if they do not exist."""

        lists = max(1, int(self.settings.pgvector_lists))
        dimension = int(self.settings.embed_dimensions)
        ann_supported = dimension <= 2000
        with self.connection(autocommit=True) as conn:
            conn.execute("CREATE EXTENSION IF NOT EXISTS vector")
            conn.execute(
                """
                CREATE TABLE IF NOT EXISTS atticus_documents (
                    document_id TEXT PRIMARY KEY,
                    source_path TEXT UNIQUE NOT NULL,
                    sha256 TEXT NOT NULL,
                    source_type TEXT,
                    metadata JSONB DEFAULT '{}'::jsonb,
                    chunk_count INTEGER DEFAULT 0,
                    ingested_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
                    updated_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
                )
                """
            )
            conn.execute(
                f"""
                CREATE TABLE IF NOT EXISTS atticus_chunks (
                    chunk_id TEXT PRIMARY KEY,
                    document_id TEXT NOT NULL REFERENCES atticus_documents(document_id) ON DELETE CASCADE,
                    source_path TEXT NOT NULL,
                    position INTEGER NOT NULL,
                    text TEXT NOT NULL,
                    section TEXT,
                    page_number INTEGER,
                    token_count INTEGER,
                    start_token INTEGER,
                    end_token INTEGER,
                    sha256 TEXT NOT NULL,
                    metadata JSONB NOT NULL DEFAULT '{{}}'::jsonb,
                    embedding vector({dimension}) NOT NULL,
                    ingested_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
                )
                """
            )
            conn.execute(
                "ALTER TABLE atticus_chunks ADD COLUMN IF NOT EXISTS sha256 TEXT NOT NULL DEFAULT ''"
            )
            conn.execute(
                """
                CREATE INDEX IF NOT EXISTS idx_atticus_chunks_document
                ON atticus_chunks(document_id)
                """
            )
            conn.execute(
                """
                CREATE INDEX IF NOT EXISTS idx_atticus_chunks_source_path
                ON atticus_chunks(source_path)
                """
            )
            conn.execute(
                """
                CREATE UNIQUE INDEX IF NOT EXISTS idx_atticus_chunks_doc_sha
                ON atticus_chunks(document_id, sha256)
                """
            )
            if ann_supported:
                conn.execute(
                    f"""
                    CREATE INDEX IF NOT EXISTS idx_atticus_chunks_embedding
                    ON atticus_chunks USING ivfflat (embedding vector_cosine_ops)
                    WITH (lists = {lists})
                    """
                )
            else:
                logger.warning(
                    "Skipping ivfflat index on atticus_chunks.embedding; "
                    "dimension %s exceeds the 2000 limit for this pgvector build. "
                    "Install a pgvector build compiled with a higher INDEX_MAX_DIMENSIONS "
                    "to enable ANN search.",
                    dimension,
                )
            conn.execute(
                "ALTER TABLE atticus_documents ALTER COLUMN metadata SET DEFAULT '{}'::jsonb"
            )
            conn.execute("ALTER TABLE atticus_chunks ALTER COLUMN metadata SET DEFAULT '{}'::jsonb")
            conn.execute("ANALYZE atticus_chunks")
            conn.execute("ANALYZE atticus_chunks")

    def fetch_document(self, source_path: str) -> dict[str, Any] | None:
        with self.connection() as conn, conn.cursor() as cur:
            cur.execute(
                "SELECT document_id, sha256, source_type, chunk_count FROM atticus_documents WHERE source_path = %s",
                (source_path,),
            )
            return cur.fetchone()

    def remove_document(self, source_path: str) -> None:
        """Delete a document (and its chunks) by source path if it exists."""
        record = self.fetch_document(source_path)
        if not record:
            return
        with self.connection() as conn, conn.cursor() as cur:
            cur.execute(
                "DELETE FROM atticus_documents WHERE document_id = %s", (record["document_id"],)
            )

    def fetch_chunks_for_source(self, source_path: str) -> list[StoredChunk]:
        with self.connection() as conn, conn.cursor() as cur:
            cur.execute(
                """
                SELECT chunk_id, document_id, source_path, text, start_token, end_token,
                       page_number, section, sha256, metadata, embedding
                FROM atticus_chunks
                WHERE source_path = %s
                ORDER BY position ASC
                """,
                (source_path,),
            )
            rows = cur.fetchall()
        chunks: list[StoredChunk] = []
        for row in rows:
            metadata = row.get("metadata") or {}
            if isinstance(metadata, dict):
                meta = {str(k): str(v) for k, v in metadata.items()}
            else:
                meta = {}
            embedding = row.get("embedding")
            embedding_list: Sequence[float] | None
            if embedding is None:
                embedding_list = None
            else:
                embedding_list = list(embedding)
            chunks.append(
                StoredChunk(
                    chunk_id=str(row["chunk_id"]),
                    document_id=str(row["document_id"]),
                    source_path=str(row["source_path"]),
                    text=str(row["text"]),
                    start_token=int(row.get("start_token") or 0),
                    end_token=int(row.get("end_token") or 0),
                    page_number=row.get("page_number"),
                    section=row.get("section"),
                    sha256=str(row.get("sha256", "")),
                    embedding=embedding_list,
                    extra=meta,
                )
            )
        return chunks

    def load_all_chunk_metadata(self) -> list[StoredChunk]:
        with self.connection() as conn, conn.cursor() as cur:
            cur.execute(
                """
                SELECT chunk_id, document_id, source_path, text, start_token, end_token,
                       page_number, section, sha256, metadata
                FROM atticus_chunks
                ORDER BY position ASC
                """
            )
            rows = cur.fetchall()
        result: list[StoredChunk] = []
        for row in rows:
            metadata = row.get("metadata") or {}
            meta = (
                {str(k): str(v) for k, v in metadata.items()} if isinstance(metadata, dict) else {}
            )
            result.append(
                StoredChunk(
                    chunk_id=str(row["chunk_id"]),
                    document_id=str(row["document_id"]),
                    source_path=str(row["source_path"]),
                    text=str(row["text"]),
                    start_token=int(row.get("start_token") or 0),
                    end_token=int(row.get("end_token") or 0),
                    page_number=row.get("page_number"),
                    section=row.get("section"),
                    sha256=str(row.get("sha256", "")),
                    embedding=None,
                    extra=meta,
                )
            )
        return result

    def replace_document(
        self,
        *,
        document_id: str,
        source_path: str,
        sha256: str,
        source_type: str | None,
        chunks: Sequence[StoredChunk],
        ingest_time: str,
    ) -> None:
        metadata = {"ingested_at": ingest_time, "source_type": source_type or ""}
        with self.connection() as conn, conn.cursor() as cur:
            cur.execute(
                """
                INSERT INTO atticus_documents (document_id, source_path, sha256, source_type, metadata, chunk_count, ingested_at, updated_at)
                VALUES (%s, %s, %s, %s, %s, %s, %s::timestamptz, %s::timestamptz)
                ON CONFLICT (document_id)
                DO UPDATE SET
                    source_path = EXCLUDED.source_path,
                    sha256 = EXCLUDED.sha256,
                    source_type = EXCLUDED.source_type,
                    metadata = EXCLUDED.metadata,
                    chunk_count = EXCLUDED.chunk_count,
                    ingested_at = EXCLUDED.ingested_at,
                    updated_at = EXCLUDED.updated_at
                """,
                (
                    document_id,
                    source_path,
                    sha256,
                    source_type,
                    Json(metadata),
                    len(chunks),
                    ingest_time,
                    ingest_time,
                ),
            )
            cur.execute("DELETE FROM atticus_chunks WHERE document_id = %s", (document_id,))
            for position, chunk in enumerate(chunks):
                if chunk.embedding is None:
                    raise ValueError(f"Chunk {chunk.chunk_id} missing embedding for persistence")
                meta = {str(k): str(v) for k, v in chunk.extra.items()}
                token_count = meta.get("token_count")
                try:
                    token_value = int(token_count) if token_count is not None else None
                except ValueError:
                    token_value = None
                cur.execute(
                    """
                    INSERT INTO atticus_chunks (
                        chunk_id,
                        document_id,
                        source_path,
                        position,
                        text,
                        section,
                        page_number,
                        token_count,
                        start_token,
                        end_token,
                        sha256,
                        metadata,
                        embedding,
                        ingested_at
                    )
                    VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s::timestamptz)
                    """,
                    (
                        chunk.chunk_id,
                        document_id,
                        source_path,
                        position,
                        chunk.text,
                        chunk.section,
                        chunk.page_number,
                        token_value,
                        chunk.start_token,
                        chunk.end_token,
                        chunk.sha256,
                        Json(meta),
                        Vector(chunk.embedding),
                        ingest_time,
                    ),
                )

    def query_similar_chunks(
        self,
        embedding: Sequence[float],
        *,
        limit: int,
        probes: int | None = None,
    ) -> list[dict[str, Any]]:
        with self.connection() as conn, conn.cursor() as cur:
            if probes and probes > 0:
                cur.execute(f"SET LOCAL ivfflat.probes = {int(probes)}")
            cur.execute(
                """
                SELECT chunk_id, document_id, source_path, text, metadata, page_number, section,
                       embedding <=> %s AS distance
                FROM atticus_chunks
                ORDER BY distance
                LIMIT %s
                """,
                (Vector(embedding), limit),
            )
            rows = cur.fetchall()
        formatted: list[dict[str, Any]] = []
        for row in rows:
            metadata = row.get("metadata") or {}
            meta = (
                {str(k): str(v) for k, v in metadata.items()} if isinstance(metadata, dict) else {}
            )
            formatted.append(
                {
                    "chunk_id": str(row["chunk_id"]),
                    "document_id": str(row["document_id"]),
                    "source_path": str(row["source_path"]),
                    "text": str(row.get("text", "")),
                    "page_number": row.get("page_number"),
                    "section": row.get("section"),
                    "metadata": meta,
                    "distance": float(row.get("distance", 0.0)),
                }
            )
        return formatted

    def truncate(self) -> None:
        """Delete all stored documents and chunks."""

        with self.connection() as conn, conn.cursor() as cur:
            cur.execute("TRUNCATE atticus_chunks, atticus_documents")

```

---

### components/AnswerRenderer.tsx

```tsx
"use client";
import React from "react";
import ReactMarkdown from "react-markdown";
import remarkGfm from "remark-gfm";

export default function AnswerRenderer({ text }: { text: string }) {
    return (
        <div className="max-w-none">
            <ReactMarkdown
                remarkPlugins={[remarkGfm]}
                components={{
                    p: ({ node, ...props }) => (
                        <p className="my-2 leading-relaxed" {...props} />
                    ),
                    ul: ({ node, ...props }) => (
                        <ul className="my-2 ml-5 list-disc" {...props} />
                    ),
                    ol: ({ node, ...props }) => (
                        <ol className="my-2 ml-5 list-decimal" {...props} />
                    ),
                    li: ({ node, ...props }) => <li className="my-1" {...props} />,
                    strong: ({ node, ...props }) => (
                        <strong className="font-semibold" {...props} />
                    ),
                }}
            >
                {text}
            </ReactMarkdown>
        </div>
    );
}

```

---

### components/admin/admin-ops-console.tsx

```tsx
"use client";

import { useEffect, useMemo, useState, useTransition } from "react";
import { Role } from "@prisma/client";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { GlossaryAdminPanel, GlossaryEntryDto } from "@/components/glossary/admin-panel";
import { Drawer, DrawerBody, DrawerContent, DrawerFooter, DrawerHeader } from "@/components/ui/drawer";
import { Textarea } from "@/components/ui/textarea";

export type SourceSummary = {
  path: string;
  score: number | null;
  page: number | null;
  heading: string | null;
  chunkId: string | null;
};

export type UncertainChat = {
  id: string;
  question: string;
  answer: string | null;
  confidence: number;
  status: string;
  requestId: string | null;
  createdAt: string;
  topSources: SourceSummary[];
  author: { id: string; email: string | null; name: string | null } | null;
  reviewer: { id: string; email: string | null; name: string | null } | null;
  tickets: Array<{
    id: string;
    key: string;
    status: string;
    assignee: string | null;
    lastActivity: string | null;
  }>;
  followUpPrompt: string | null;
  auditLog: Array<Record<string, unknown>>;
};

export type TicketSummary = {
  id: string;
  key: string;
  status: string;
  assignee: string | null;
  lastActivity: string | null;
  summary: string | null;
};

interface AdminOpsConsoleProps {
  role: Role;
  uncertain: UncertainChat[];
  tickets: TicketSummary[];
  glossaryEntries: GlossaryEntryDto[];
}

function confidenceVariant(confidence: number): "success" | "warning" | "destructive" {
  if (confidence >= 0.75) {
    return "success";
  }
  if (confidence >= 0.45) {
    return "warning";
  }
  return "destructive";
}

export function AdminOpsConsole({ role, uncertain, tickets, glossaryEntries }: AdminOpsConsoleProps) {
  const [uncertainChats, setUncertainChats] = useState(uncertain);
  const [ticketSummaries, setTicketSummaries] = useState(tickets);
  const [feedback, setFeedback] = useState<string | null>(null);
  const [isPending, startTransition] = useTransition();
  const [drawerChatId, setDrawerChatId] = useState<string | null>(null);
  const [followUpDraft, setFollowUpDraft] = useState("");

  const canApprove = role === Role.ADMIN || role === Role.REVIEWER;
  const canEscalate = role === Role.ADMIN;
  const canManageGlossary = role === Role.ADMIN;
  const defaultTab = role === Role.ADMIN ? "uncertain" : "glossary";

  const activeChat = useMemo(
    () => uncertainChats.find((chat) => chat.id === drawerChatId) ?? null,
    [drawerChatId, uncertainChats]
  );

  useEffect(() => {
    setFollowUpDraft(activeChat?.followUpPrompt ?? "");
  }, [activeChat?.followUpPrompt, drawerChatId]);

  function openDrawer(chatId: string) {
    setDrawerChatId(chatId);
    setFeedback(null);
  }

  async function handleApprove(chatId: string) {
    if (!canApprove) {
      return;
    }
    setFeedback(null);
    startTransition(async () => {
      const response = await fetch(`/api/admin/uncertain/${chatId}/approve`, { method: "POST" });
      if (!response.ok) {
        const body = await response.json().catch(() => ({}));
        setFeedback(body.detail ?? "Unable to approve chat.");
        return;
      }
      setUncertainChats((prev) => prev.filter((chat) => chat.id !== chatId));
      setFeedback("Chat approved and removed from the uncertain queue.");
      if (drawerChatId === chatId) {
        setDrawerChatId(null);
      }
    });
  }

  async function handleEscalate(chat: UncertainChat) {
    if (!canEscalate) {
      return;
    }
    setFeedback(null);
    startTransition(async () => {
      const response = await fetch(`/api/admin/uncertain/${chat.id}/escalate`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ summary: chat.question, assignee: chat.tickets.at(0)?.assignee ?? null }),
      });
      if (!response.ok) {
        const body = await response.json().catch(() => ({}));
        setFeedback(body.detail ?? "Unable to escalate chat.");
        return;
      }
      const ticket = (await response.json()) as TicketSummary;
      setUncertainChats((prev) => prev.filter((item) => item.id !== chat.id));
      setTicketSummaries((prev) => [{ ...ticket, summary: chat.question }, ...prev]);
      setFeedback(`Escalated to ticket ${ticket.key}.`);
      if (drawerChatId === chat.id) {
        setDrawerChatId(null);
      }
    });
  }

  function updateChat(chatId: string, partial: Partial<UncertainChat>) {
    setUncertainChats((prev) => prev.map((chat) => (chat.id === chatId ? { ...chat, ...partial } : chat)));
  }

  async function handleFollowUpSave(chat: UncertainChat) {
    if (!canApprove) {
      return;
    }
    const trimmed = followUpDraft.trim();
    if (!trimmed) {
      setFeedback("Add a follow-up prompt before saving.");
      return;
    }
    setFeedback(null);
    startTransition(async () => {
      const response = await fetch(`/api/admin/uncertain/${chat.id}/ask-followup`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt: trimmed }),
      });
      if (!response.ok) {
        const body = await response.json().catch(() => ({}));
        setFeedback(body.detail ?? "Unable to store follow-up prompt.");
        return;
      }
      const payload = await response.json();
      updateChat(chat.id, { followUpPrompt: payload.followUpPrompt, auditLog: payload.auditLog ?? [] });
      setFeedback("Follow-up prompt saved.");
    });
  }

  const ticketCount = ticketSummaries.length;
  const pendingCount = uncertainChats.length;

  const ticketCards = useMemo(
    () =>
      ticketSummaries.map((ticket) => {
        const lastActivity = ticket.lastActivity ? new Date(ticket.lastActivity).toLocaleString() : "N/A";
        return (
          <Card key={ticket.id} className="border-slate-200 dark:border-slate-800">
            <CardHeader className="pb-3">
              <CardTitle className="flex items-center justify-between text-base">
                <span>{ticket.key}</span>
                <Badge variant="outline" className="capitalize">
                  {ticket.status}
                </Badge>
              </CardTitle>
              <CardDescription>Assigned to {ticket.assignee ?? "Unassigned"}</CardDescription>
            </CardHeader>
            <CardContent className="space-y-2 text-sm text-slate-600 dark:text-slate-300">
              <p>{ticket.summary ?? "No summary provided."}</p>
              <p className="text-xs text-slate-500 dark:text-slate-400">Last activity: {lastActivity}</p>
            </CardContent>
          </Card>
        );
      }),
    [ticketSummaries]
  );

  return (
    <>
      <Tabs defaultValue={defaultTab} className="space-y-6">
        <TabsList>
          <TabsTrigger value="uncertain">Uncertain ({pendingCount})</TabsTrigger>
          <TabsTrigger value="tickets">Tickets ({ticketCount})</TabsTrigger>
          <TabsTrigger value="glossary">Glossary</TabsTrigger>
      </TabsList>
      {feedback ? (
        <Badge variant="subtle" className="normal-case">
          {feedback}
        </Badge>
      ) : null}
      <TabsContent value="uncertain">
        <div className="overflow-x-auto">
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Question</TableHead>
                <TableHead>Confidence</TableHead>
                <TableHead>Top sources</TableHead>
                <TableHead>Requester</TableHead>
                <TableHead>Created</TableHead>
                <TableHead className="text-right">Actions</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {uncertainChats.map((chat) => (
                <TableRow key={chat.id}>
                  <TableCell className="max-w-xs align-top">
                    <p className="font-medium text-slate-900 dark:text-white">{chat.question}</p>
                    {chat.requestId ? (
                      <p className="mt-2 text-xs text-slate-500 dark:text-slate-400">Request {chat.requestId}</p>
                    ) : null}
                  </TableCell>
                  <TableCell className="align-top">
                    <Badge variant={confidenceVariant(chat.confidence)}>
                      {(chat.confidence * 100).toFixed(0)}%
                    </Badge>
                  </TableCell>
                  <TableCell className="align-top text-sm text-slate-600 dark:text-slate-300">
                    <ul className="space-y-1">
                      {chat.topSources.length ? (
                        chat.topSources.map((source, index) => (
                          <li key={`${chat.id}-source-${index}`} className="flex flex-col">
                            <span className="truncate text-xs text-slate-500 dark:text-slate-400">
                              {source.path}
                            </span>
                            {source.heading ? (
                              <span className="text-xs text-slate-400 dark:text-slate-500">
                                {source.heading}
                              </span>
                            ) : null}
                            <div className="flex flex-wrap gap-2 text-[11px] text-slate-400 dark:text-slate-500">
                              {source.page != null ? <span>Page {source.page}</span> : null}
                              {source.score != null ? (
                                <span>Score {(source.score * 100).toFixed(1)}%</span>
                              ) : null}
                              {source.chunkId ? <span>{source.chunkId}</span> : null}
                            </div>
                          </li>
                        ))
                      ) : (
                        <li className="text-xs text-slate-500 dark:text-slate-400">No sources captured.</li>
                      )}
                    </ul>
                  </TableCell>
                  <TableCell className="align-top text-sm text-slate-600 dark:text-slate-300">
                    <p>{chat.author?.name ?? chat.author?.email ?? "Unknown"}</p>
                  </TableCell>
                  <TableCell className="align-top text-sm text-slate-600 dark:text-slate-300">
                    {new Date(chat.createdAt).toLocaleString()}
                  </TableCell>
                  <TableCell className="align-top text-right">
                    <div className="flex flex-col items-end gap-2">
                      <Button
                        type="button"
                        size="sm"
                        onClick={() => openDrawer(chat.id)}
                        variant="default"
                      >
                        Review
                      </Button>
                      <Button
                        type="button"
                        size="sm"
                        variant="secondary"
                        disabled={!canApprove || isPending}
                        onClick={() => handleApprove(chat.id)}
                      >
                        Approve
                      </Button>
                      <Button
                        type="button"
                        size="sm"
                        variant="outline"
                        disabled={!canEscalate || isPending}
                        onClick={() => handleEscalate(chat)}
                      >
                        Escalate
                      </Button>
                    </div>
                  </TableCell>
                </TableRow>
              ))}
              {uncertainChats.length === 0 ? (
                <TableRow>
                  <TableCell colSpan={6} className="py-8 text-center text-sm text-slate-500 dark:text-slate-400">
                    All caught up. Pending review chats will appear here automatically.
                  </TableCell>
                </TableRow>
              ) : null}
            </TableBody>
          </Table>
        </div>
      </TabsContent>
      <TabsContent value="tickets">
        <div className="grid gap-4 md:grid-cols-2">{ticketCards}</div>
        {ticketSummaries.length === 0 ? (
          <Card className="mt-4 border-dashed">
            <CardHeader>
              <CardTitle>No escalations yet</CardTitle>
              <CardDescription>
                Approve chats or escalate them to create AE tickets that appear in this queue.
              </CardDescription>
            </CardHeader>
          </Card>
        ) : null}
      </TabsContent>
      <TabsContent value="glossary" className="p-0">
        <GlossaryAdminPanel initialEntries={glossaryEntries} canEdit={canManageGlossary} />
      </TabsContent>
      </Tabs>
      <Drawer
        open={drawerChatId !== null}
        onOpenChange={(open) => {
          if (!open) {
            setDrawerChatId(null);
            setFollowUpDraft("");
          }
        }}
      >
        <DrawerContent>
          <DrawerHeader>
            <div className="flex-1">
              <p className="text-xs uppercase text-slate-400">Review uncertain chat</p>
              <p className="mt-1 text-base font-semibold text-slate-900 dark:text-white">
                {activeChat?.question ?? "No chat selected"}
              </p>
              {activeChat ? (
                <p className="mt-2 text-xs text-slate-500 dark:text-slate-400">
                  Captured {new Date(activeChat.createdAt).toLocaleString()}
                </p>
              ) : null}
            </div>
          </DrawerHeader>
          <DrawerBody>
            {activeChat ? (
              <div className="space-y-6">
                <div className="flex flex-wrap items-center gap-3">
                  <Badge variant={confidenceVariant(activeChat.confidence)}>
                    {(activeChat.confidence * 100).toFixed(1)}%
                  </Badge>
                  {activeChat.requestId ? (
                    <span className="text-xs text-slate-500 dark:text-slate-400">
                      Request {activeChat.requestId}
                    </span>
                  ) : null}
                  <span className="text-xs capitalize text-slate-500 dark:text-slate-400">
                    Status {activeChat.status}
                  </span>
                </div>
                <section className="space-y-2">
                  <h3 className="text-sm font-semibold text-slate-900 dark:text-white">Answer</h3>
                  <div className="rounded-md border border-slate-200 bg-slate-50 p-4 text-sm leading-relaxed text-slate-700 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-200">
                    {activeChat.answer?.length ? activeChat.answer : "No answer captured for this request."}
                  </div>
                </section>
                <section className="space-y-2">
                  <h3 className="text-sm font-semibold text-slate-900 dark:text-white">Top sources</h3>
                  <ul className="space-y-2 text-xs text-slate-500 dark:text-slate-400">
                    {activeChat.topSources.length ? (
                      activeChat.topSources.map((source, index) => (
                        <li key={`${activeChat.id}-drawer-source-${index}`} className="rounded-md border border-slate-200 p-3 dark:border-slate-800">
                          <p className="font-medium text-slate-700 dark:text-slate-200">{source.path}</p>
                          {source.heading ? <p className="mt-1">{source.heading}</p> : null}
                          <div className="mt-2 flex flex-wrap gap-3">
                            {source.page != null ? <span>Page {source.page}</span> : null}
                            {source.score != null ? <span>Score {(source.score * 100).toFixed(1)}%</span> : null}
                            {source.chunkId ? <span>{source.chunkId}</span> : null}
                          </div>
                        </li>
                      ))
                    ) : (
                      <li>No sources recorded for this chat.</li>
                    )}
                  </ul>
                </section>
                <section className="space-y-2">
                  <h3 className="text-sm font-semibold text-slate-900 dark:text-white">Follow-up prompt</h3>
                  <Textarea
                    value={followUpDraft}
                    onChange={(event) => setFollowUpDraft(event.target.value)}
                    minLength={3}
                    rows={4}
                    placeholder="What would you ask next?"
                    disabled={!canApprove || isPending}
                  />
                  {activeChat.followUpPrompt ? (
                    <p className="text-xs text-slate-500 dark:text-slate-400">
                      Last saved prompt: “{activeChat.followUpPrompt}”
                    </p>
                  ) : null}
                </section>
              </div>
            ) : (
              <p className="text-sm text-slate-500 dark:text-slate-400">Select a chat to review details.</p>
            )}
          </DrawerBody>
          <DrawerFooter className="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
            <div className="flex flex-wrap gap-2">
              <Button
                type="button"
                size="sm"
                disabled={!activeChat || !canApprove || isPending}
                onClick={() => activeChat && handleFollowUpSave(activeChat)}
              >
                Save follow-up
              </Button>
              <Button
                type="button"
                size="sm"
                variant="secondary"
                disabled={!activeChat || !canApprove || isPending}
                onClick={() => activeChat && handleApprove(activeChat.id)}
              >
                Approve
              </Button>
              <Button
                type="button"
                size="sm"
                variant="outline"
                disabled={!activeChat || !canEscalate || isPending}
                onClick={() => activeChat && handleEscalate(activeChat)}
              >
                Escalate
              </Button>
            </div>
            <div className="text-xs text-slate-500 dark:text-slate-400">
              Actions are recorded in the chat audit trail.
            </div>
          </DrawerFooter>
        </DrawerContent>
      </Drawer>
    </>
  );
}

```

---

### components/auth/sign-in-form.tsx

```tsx
"use client";

import { FormEvent, useState, useTransition } from "react";
import { signIn } from "next-auth/react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";

export function SignInForm() {
  const [email, setEmail] = useState("");
  const [sent, setSent] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [isPending, startTransition] = useTransition();

  async function handleSubmit(event: FormEvent<HTMLFormElement>) {
    event.preventDefault();
    setError(null);
    startTransition(async () => {
      const result = await signIn("email", {
        email,
        redirect: false,
      });
      if (result?.error) {
        setError("We could not send a magic link to that address. Ensure you are provisioned.");
        setSent(false);
        return;
      }
      setSent(true);
    });
  }

  return (
    <form
      onSubmit={handleSubmit}
      className="space-y-4 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900"
    >
      <div className="space-y-2 text-left">
        <Label htmlFor="email">Work email</Label>
        <Input
          id="email"
          name="email"
          type="email"
          required
          value={email}
          onChange={(event) => setEmail(event.target.value)}
          placeholder="alex@contoso.com"
          autoComplete="email"
        />
      </div>
      <Button type="submit" className="w-full" disabled={isPending || sent}>
        {sent ? "Magic link sent" : isPending ? "Sending..." : "Email me a magic link"}
      </Button>
      {error ? <p className="text-sm text-rose-600">{error}</p> : null}
      {sent ? (
        <p className="text-sm text-slate-600 dark:text-slate-300">
          Check your inbox for a sign-in email from Atticus. The link expires in 10 minutes.
        </p>
      ) : null}
    </form>
  );
}

```

---

### components/chat/chat-panel.tsx

```tsx
"use client";

import { useMemo, useState } from "react";
import { Loader2, Paperclip, Send } from "lucide-react";
import { streamAsk, type AskStreamEvent } from "@/lib/ask-client";
import type { AskResponse, AskSource } from "@/lib/ask-contract";
import AnswerRenderer from "@/components/AnswerRenderer";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Textarea } from "@/components/ui/textarea";

interface ChatMessage {
  id: string;
  role: "user" | "assistant";
  content: string;
  status?: "pending" | "complete" | "error";
  response?: AskResponse;
  error?: string;
}

const shortcuts = [
  { label: "Shift + Enter", description: "New line" },
  { label: "Ctrl + Enter", description: "Send message" },
  { label: "Esc", description: "Clear composer" },
];

function createId() {
  return `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 8)}`;
}

function formatConfidence(confidence: number | undefined) {
  if (confidence === undefined || Number.isNaN(confidence)) {
    return "—";
  }
  return `${Math.round(confidence * 100)}%`;
}

export function ChatPanel() {
  const [messages, setMessages] = useState<ChatMessage[]>([
    {
      id: createId(),
      role: "assistant",
      status: "complete",
      content:
        "Hi! Drop any tender or product question below and I will back it with citations from your latest content set.",
    },
  ]);
  const [composer, setComposer] = useState("");
  const [isStreaming, setIsStreaming] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const lastAssistant = useMemo(
    () => messages.filter((message) => message.role === "assistant").at(-1)?.response,
    [messages]
  );

  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {
    event.preventDefault();
    const trimmed = composer.trim();
    if (!trimmed || isStreaming) {
      return;
    }
    setError(null);

    const userMessage: ChatMessage = {
      id: createId(),
      role: "user",
      status: "complete",
      content: trimmed,
    };
    const placeholder: ChatMessage = {
      id: createId(),
      role: "assistant",
      status: "pending",
      content: "Atticus is thinking…",
    };

    setMessages((prev) => [...prev, userMessage, placeholder]);
    setComposer("");
    setIsStreaming(true);

    try {
      await streamAsk(
        { question: trimmed, filters: undefined, contextHints: undefined, topK: undefined },
        {
          onEvent: (event: AskStreamEvent) => {
            if (event.type === "answer") {
              const response = event.payload;
              console.info("ask_response", {
                requestId: response.request_id,
                confidence: response.confidence,
                shouldEscalate: response.should_escalate,
              });
              setMessages((prev) =>
                prev.map((message) =>
                  message.id === placeholder.id
                    ? {
                        ...message,
                        status: "complete",
                        content: response.answer,
                        response,
                      }
                    : message
                )
              );
            }
            if (event.type === "end") {
              setIsStreaming(false);
            }
          },
        }
      );
    } catch (err) {
      setIsStreaming(false);
      const messageError = err instanceof Error ? err.message : "Something went wrong.";
      setError(messageError);
      setMessages((prev) =>
        prev.map((message) =>
          message.id === placeholder.id
            ? {
                ...message,
                status: "error",
                content: "Unable to generate a response. Try again in a few moments.",
                error: messageError,
              }
            : message
        )
      );
    }
  }

  return (
    <section className="flex w-full justify-center">
      <Card className="flex w-full max-w-3xl flex-col">
        <CardHeader className="border-b border-slate-200/80 pb-4 dark:border-slate-800/60">
          <div className="flex items-center justify-between gap-3">
            <CardTitle className="text-base">Live conversation</CardTitle>
            <Badge variant={isStreaming ? "default" : "success"}>
              {isStreaming ? "Streaming…" : "Connected"}
            </Badge>
          </div>
          <CardDescription>
            Atticus shares grounded responses with request IDs and citation details for audit trails.
          </CardDescription>
        </CardHeader>
        <CardContent className="flex flex-1 flex-col gap-4">
          <div className="flex-1 space-y-4 overflow-y-auto pr-1">
            {messages.map((message) => (
              <article key={message.id} className="flex items-start gap-3">
                <div
                  className={
                    message.role === "assistant"
                      ? "flex h-9 w-9 items-center justify-center rounded-full bg-indigo-600 text-sm font-semibold text-white"
                      : "flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-sm font-semibold text-slate-600 dark:bg-slate-800 dark:text-slate-300"
                  }
                >
                  {message.role === "assistant" ? "A" : "You"}
                </div>
                <div
                  className={
                    message.role === "assistant"
                      ? "flex-1 rounded-2xl bg-slate-50 p-4 text-sm text-slate-700 shadow-sm dark:bg-slate-800/60 dark:text-slate-200"
                      : "flex-1 rounded-2xl bg-white p-4 text-sm text-slate-700 shadow-sm ring-1 ring-slate-200 dark:bg-slate-900 dark:text-slate-100 dark:ring-slate-800"
                  }
                >
                  {message.role === "assistant" ? (
                    <AnswerRenderer text={message.content} />
                  ) : (
                    <p className="whitespace-pre-wrap">{message.content}</p>
                  )}
                  {message.response?.sources?.length ? (
                    <div className="mt-3 space-y-2">
                      <h3 className="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">
                        Sources
                      </h3>
                      <ul className="space-y-1 text-xs text-slate-600 dark:text-slate-300">
                        {message.response.sources.map((source: AskSource, index) => (
                          <li key={`${message.id}-source-${index}`} className="flex items-start gap-2">
                            <span
                              className="mt-0.5 inline-flex h-2 w-2 flex-none rounded-full bg-indigo-500"
                              aria-hidden="true"
                            />
                            <span>
                              {source.path}
                              {typeof source.page === "number" ? ` · page ${source.page}` : ""}
                              {source.heading ? ` · ${source.heading}` : ""}
                            </span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  ) : null}
                  {message.response ? (
                    <footer className="mt-3 flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
                      <span>Confidence: {formatConfidence(message.response.confidence)}</span>
                      <span>
                        Escalate: {" "}
                        {message.response.should_escalate ? (
                          <span className="font-semibold text-rose-600">Yes</span>
                        ) : (
                          "No"
                        )}
                      </span>
                      <span className="truncate">Request ID: {message.response.request_id}</span>
                    </footer>
                  ) : null}
                  {message.status === "error" ? (
                    <p className="mt-2 text-xs text-rose-600">
                      {error ?? "Try asking again in a few minutes."}
                    </p>
                  ) : null}
                </div>
              </article>
            ))}
          </div>
        </CardContent>
        <CardFooter className="flex flex-col gap-3 border-t border-slate-200/80 bg-white/80 dark:border-slate-800/70 dark:bg-slate-950/60">
          <form onSubmit={handleSubmit} className="flex flex-col gap-3">
            <div className="flex items-end gap-3">
              <Button type="button" variant="outline" size="icon" className="rounded-2xl">
                <Paperclip className="h-5 w-5" aria-hidden="true" />
                <span className="sr-only">Attach file</span>
              </Button>
              <div className="flex-1">
                <label htmlFor="chat-message" className="sr-only">
                  Message Atticus
                </label>
                <Textarea
                  id="chat-message"
                  value={composer}
                  onChange={(event) => setComposer(event.target.value)}
                  rows={3}
                  placeholder="Message Atticus…"
                  className="max-h-[160px] min-h-[72px]"
                />
              </div>
              <Button type="submit" disabled={isStreaming || !composer.trim()} className="rounded-2xl">
                {isStreaming ? (
                  <Loader2 className="h-4 w-4 animate-spin" aria-hidden="true" />
                ) : (
                  <Send className="h-4 w-4" aria-hidden="true" />
                )}
                <span>{isStreaming ? "Sending…" : "Send"}</span>
              </Button>
            </div>
            <div className="flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500 dark:text-slate-400">
              <div className="flex flex-wrap gap-2">
                {shortcuts.map((shortcut) => (
                  <Badge key={shortcut.label} variant="subtle" className="normal-case">
                    {shortcut.label} · {shortcut.description}
                  </Badge>
                ))}
              </div>
              {error ? (
                <span className="text-rose-600">{error}</span>
              ) : lastAssistant ? (
                <span className="truncate text-slate-400">Last request: {lastAssistant.request_id}</span>
              ) : null}
            </div>
          </form>
        </CardFooter>
      </Card>
    </section>
  );
}

```

---

### components/glossary/admin-panel.tsx

```tsx
"use client";

import { useState, useTransition } from "react";
import { GlossaryStatus } from "@prisma/client";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Select } from "@/components/ui/select";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Textarea } from "@/components/ui/textarea";

export interface GlossaryEntryDto {
  id: string;
  term: string;
  definition: string;
  synonyms: string[];
  status: GlossaryStatus;
  createdAt: string;
  updatedAt: string;
  reviewedAt: string | null;
  author: { id: string; email: string | null; name: string | null } | null;
  updatedBy: { id: string; email: string | null; name: string | null } | null;
  reviewer: { id: string; email: string | null; name: string | null } | null;
  reviewNotes: string | null;
}

interface GlossaryAdminPanelProps {
  initialEntries: GlossaryEntryDto[];
  canEdit?: boolean;
}

const statusOptions: GlossaryStatus[] = [
  GlossaryStatus.PENDING,
  GlossaryStatus.APPROVED,
  GlossaryStatus.REJECTED,
];

export function GlossaryAdminPanel({ initialEntries, canEdit = true }: GlossaryAdminPanelProps) {
  const [entries, setEntries] = useState(initialEntries);
  const [term, setTerm] = useState("");
  const [definition, setDefinition] = useState("");
  const [synonyms, setSynonyms] = useState("");
  const [status, setStatus] = useState<GlossaryStatus>(GlossaryStatus.PENDING);
  const [feedback, setFeedback] = useState<string | null>(null);
  const [isPending, startTransition] = useTransition();
  const [editingId, setEditingId] = useState<string | null>(null);
  const [definitionDraft, setDefinitionDraft] = useState("");
  const [synonymsDraft, setSynonymsDraft] = useState("");

  function parseSynonyms(value: string): string[] {
    return value
      .split(",")
      .map((item) => item.trim())
      .filter((item) => item.length > 0);
  }

  async function createEntry() {
    if (!canEdit) {
      return;
    }
    setFeedback(null);
    startTransition(async () => {
      const response = await fetch("/api/glossary", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ term, definition, status, synonyms: parseSynonyms(synonyms) }),
      });
      if (!response.ok) {
        const body = await response.json().catch(() => ({}));
        setFeedback(body.detail ?? "Unable to create entry.");
        return;
      }
      const created: GlossaryEntryDto = await response.json();
      setEntries((prev) => [...prev, created].sort((a, b) => a.term.localeCompare(b.term)));
      setTerm("");
      setDefinition("");
      setSynonyms("");
      setStatus(GlossaryStatus.PENDING);
      setFeedback("Entry created successfully.");
    });
  }

  function beginEditing(entry: GlossaryEntryDto) {
    setEditingId(entry.id);
    setDefinitionDraft(entry.definition);
    setSynonymsDraft(entry.synonyms.join(", "));
    setFeedback(null);
  }

  function cancelEditing() {
    setEditingId(null);
    setDefinitionDraft("");
    setSynonymsDraft("");
  }

  async function saveEntryUpdate(
    entry: GlossaryEntryDto,
    overrides: Partial<{
      definition: string;
      synonyms: string[];
      status: GlossaryStatus;
      reviewNotes: string | null;
    }>
  ) {
    if (!canEdit) {
      return null;
    }
    const payload = {
      term: entry.term,
      definition: overrides.definition ?? entry.definition,
      synonyms: overrides.synonyms ?? entry.synonyms,
      status: overrides.status ?? entry.status,
      reviewNotes: overrides.reviewNotes ?? entry.reviewNotes,
    };
    const response = await fetch(`/api/glossary/${entry.id}`, {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
    });
    if (!response.ok) {
      const body = await response.json().catch(() => ({}));
      setFeedback(body.detail ?? "Unable to update entry.");
      return null;
    }
    const updated: GlossaryEntryDto = await response.json();
    setEntries((prev) => prev.map((item) => (item.id === entry.id ? updated : item)));
    return updated;
  }

  async function updateStatus(entry: GlossaryEntryDto, nextStatus: GlossaryStatus) {
    if (!canEdit) {
      return;
    }
    startTransition(async () => {
      let reviewNotes: string | null | undefined;
      if (nextStatus !== GlossaryStatus.PENDING) {
        reviewNotes =
          window.prompt("Add review notes (optional)", entry.reviewNotes ?? "") ?? undefined;
      }
      const updated = await saveEntryUpdate(entry, {
        status: nextStatus,
        reviewNotes: reviewNotes === undefined ? entry.reviewNotes : reviewNotes ?? null,
      });
      if (updated) {
        setFeedback(`Status updated to ${nextStatus.toLowerCase()}.`);
      }
    });
  }

  async function deleteEntry(entryId: string) {
    if (!canEdit) {
      return;
    }
    startTransition(async () => {
      const response = await fetch(`/api/glossary/${entryId}`, { method: "DELETE" });
      if (!response.ok) {
        const body = await response.json().catch(() => ({}));
      setFeedback(body.detail ?? "Unable to delete entry.");
      return;
      }
      setEntries((prev) => prev.filter((item) => item.id !== entryId));
      setFeedback("Entry deleted.");
      if (editingId === entryId) {
        cancelEditing();
      }
    });
  }

  function submitDraft(entry: GlossaryEntryDto) {
    if (!canEdit) {
      return;
    }
    const trimmedDefinition = definitionDraft.trim();
    if (!trimmedDefinition) {
      setFeedback("Definition is required.");
      return;
    }
    setFeedback(null);
    startTransition(async () => {
      const updated = await saveEntryUpdate(entry, {
        definition: trimmedDefinition,
        synonyms: parseSynonyms(synonymsDraft),
      });
      if (updated) {
        setFeedback("Entry updated.");
        cancelEditing();
      }
    });
  }

  return (
    <section className="space-y-6">
      <Card>
        <CardHeader className="pb-4">
          <CardTitle>Add glossary entry</CardTitle>
          <CardDescription>
            Approved terms appear instantly in chat responses. Pending entries stay private until
            promoted.
          </CardDescription>
        </CardHeader>
        <CardContent className="grid gap-4 md:grid-cols-2">
          <div className="space-y-2">
            <Label htmlFor="term">Term</Label>
            <Input
              id="term"
              value={term}
              onChange={(event) => setTerm(event.target.value)}
              placeholder="Consumables"
              disabled={!canEdit}
            />
          </div>
          <div className="space-y-2">
            <Label htmlFor="status">Status</Label>
            <Select
              id="status"
              value={status}
              onChange={(event) => setStatus(event.target.value as GlossaryStatus)}
              disabled={!canEdit}
            >
              {statusOptions.map((option) => (
                <option key={option} value={option}>
                  {option.toLowerCase()}
                </option>
              ))}
            </Select>
          </div>
          <div className="space-y-2 md:col-span-2">
            <Label htmlFor="synonyms">Synonyms</Label>
            <Input
              id="synonyms"
              value={synonyms}
              onChange={(event) => setSynonyms(event.target.value)}
              placeholder="Comma-separated list"
              disabled={!canEdit}
            />
          </div>
          <div className="space-y-2 md:col-span-2">
            <Label htmlFor="definition">Definition</Label>
            <Textarea
              id="definition"
              value={definition}
              onChange={(event) => setDefinition(event.target.value)}
              rows={4}
              placeholder="How the team uses this term..."
              disabled={!canEdit}
            />
          </div>
        </CardContent>
        <CardFooter className="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
          <Button type="button" disabled={isPending || !term || !definition || !canEdit} onClick={createEntry}>
            {isPending ? "Saving…" : "Save entry"}
          </Button>
          <div className="flex flex-1 items-center justify-end gap-2">
            {!canEdit ? (
              <Badge variant="outline" className="normal-case">
                Reviewer access is read-only
              </Badge>
            ) : null}
            {feedback ? (
              <Badge variant="subtle" className="normal-case">
                {feedback}
              </Badge>
            ) : null}
          </div>
        </CardFooter>
      </Card>

      <Card className="overflow-hidden">
        <CardHeader className="pb-4">
          <CardTitle>Glossary entries</CardTitle>
          <CardDescription>
            Review pending definitions, promote approved terms, and prune duplicates in one place.
          </CardDescription>
        </CardHeader>
        <CardContent className="p-0">
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Term</TableHead>
                <TableHead>Definition</TableHead>
                <TableHead>Status</TableHead>
                <TableHead>Updated</TableHead>
                <TableHead className="text-right">Actions</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {entries.map((entry) => (
                <TableRow key={entry.id}>
                  <TableCell className="font-medium text-slate-900 dark:text-white">
                    {entry.term}
                  </TableCell>
                  <TableCell>
                    {editingId === entry.id ? (
                      <div className="space-y-3">
                        <Textarea
                          value={definitionDraft}
                          onChange={(event) => setDefinitionDraft(event.target.value)}
                          rows={4}
                          disabled={!canEdit || isPending}
                        />
                        <Input
                          value={synonymsDraft}
                          onChange={(event) => setSynonymsDraft(event.target.value)}
                          placeholder="Comma-separated synonyms"
                          disabled={!canEdit || isPending}
                        />
                      </div>
                    ) : (
                      <>
                        <p>{entry.definition}</p>
                        {entry.synonyms.length ? (
                          <p className="mt-2 text-xs text-slate-500 dark:text-slate-400">
                            Synonyms: {entry.synonyms.join(", ")}
                          </p>
                        ) : null}
                        <p className="mt-1 text-xs text-slate-400 dark:text-slate-500">
                          Added by {entry.author?.name ?? entry.author?.email ?? "unknown"}
                        </p>
                      </>
                    )}
                  </TableCell>
                  <TableCell>
                    <Badge
                      variant={
                        entry.status === GlossaryStatus.APPROVED
                          ? "success"
                          : entry.status === GlossaryStatus.REJECTED
                          ? "destructive"
                          : "warning"
                      }
                    >
                      {entry.status.toLowerCase()}
                    </Badge>
                  </TableCell>
                  <TableCell>
                    <p>{new Date(entry.updatedAt).toLocaleString()}</p>
                    <p className="mt-1 text-xs text-slate-400 dark:text-slate-500">
                      By {entry.updatedBy?.name ?? entry.updatedBy?.email ?? "system"}
                    </p>
                    {entry.reviewedAt ? (
                      <p className="mt-1 text-xs text-slate-400 dark:text-slate-500">
                        Reviewed {new Date(entry.reviewedAt).toLocaleString()} by {" "}
                        {entry.reviewer?.name ?? entry.reviewer?.email ?? "admin"}
                      </p>
                    ) : null}
                    {entry.reviewNotes ? (
                      <p className="mt-1 text-xs text-slate-500 dark:text-slate-400">
                        Notes: {entry.reviewNotes}
                      </p>
                    ) : null}
                  </TableCell>
                  <TableCell className="text-right">
                    <div className="flex flex-wrap justify-end gap-2">
                      {editingId === entry.id ? (
                        <>
                          <Button
                            type="button"
                            size="sm"
                            onClick={() => submitDraft(entry)}
                            disabled={isPending || !canEdit}
                          >
                            Save
                          </Button>
                          <Button
                            type="button"
                            size="sm"
                            variant="outline"
                            onClick={cancelEditing}
                            disabled={isPending}
                          >
                            Cancel
                          </Button>
                        </>
                      ) : (
                        <Button
                          type="button"
                          size="sm"
                          variant="outline"
                          onClick={() => beginEditing(entry)}
                          disabled={isPending || !canEdit}
                        >
                          Edit
                        </Button>
                      )}
                      {statusOptions.map((option) => (
                        <Button
                          key={option}
                          type="button"
                          size="sm"
                          variant={option === entry.status ? "secondary" : "outline"}
                          disabled={
                            option === entry.status || isPending || !canEdit || editingId === entry.id
                          }
                          onClick={() => updateStatus(entry, option)}
                        >
                          {option.toLowerCase()}
                        </Button>
                      ))}
                      <Button
                        type="button"
                        size="sm"
                        variant="destructive"
                        onClick={() => deleteEntry(entry.id)}
                        disabled={isPending || !canEdit}
                      >
                        Delete
                      </Button>
                    </div>
                  </TableCell>
                </TableRow>
              ))}
              {entries.length === 0 ? (
                <TableRow>
                  <TableCell
                    colSpan={5}
                    className="py-6 text-center text-sm text-slate-500 dark:text-slate-400"
                  >
                    No glossary entries yet. Create one above to seed the knowledge base.
                  </TableCell>
                </TableRow>
              ) : null}
            </TableBody>
          </Table>
        </CardContent>
      </Card>
    </section>
  );
}

```

---

### components/page-header.tsx

```tsx
import type { ReactNode } from "react";
import { Badge } from "@/components/ui/badge";

interface PageHeaderProps {
  title: string;
  description: string;
  eyebrow?: string;
  actions?: ReactNode;
}

export function PageHeader({ title, description, eyebrow, actions }: PageHeaderProps) {
  return (
    <div className="mx-auto flex w-full max-w-6xl flex-col gap-6">
      <div className="space-y-4">
        {eyebrow ? (
          <Badge variant="outline" className="w-fit">
            {eyebrow}
          </Badge>
        ) : null}
        <div className="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
          <div className="space-y-2">
            <h1 className="text-3xl font-semibold tracking-tight text-slate-900 dark:text-white">
              {title}
            </h1>
            <p className="max-w-2xl text-sm text-slate-600 dark:text-slate-300">{description}</p>
          </div>
          {actions ? <div className="flex shrink-0 items-center gap-3">{actions}</div> : null}
        </div>
      </div>
    </div>
  );
}

```

---

### components/site-footer.tsx

```tsx
export function SiteFooter() {
  return (
    <footer className="border-t border-slate-200 bg-white/70 dark:border-slate-800 dark:bg-slate-950/70">
      <div className="mx-auto flex max-w-6xl flex-col gap-4 px-4 py-6 text-sm text-slate-500 sm:flex-row sm:items-center sm:justify-between sm:px-6 lg:px-8">
        <p>&copy; {new Date().getFullYear()} Atticus. All rights reserved.</p>
        <div className="flex flex-wrap items-center gap-3" aria-hidden="true" />
      </div>
    </footer>
  );
}

```

---

### components/site-header.tsx

```tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import { useMemo, useState } from "react";
import { Menu, X } from "lucide-react";
import { signOut, useSession } from "next-auth/react";
import type { Role } from "@prisma/client";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";

type NavLink = {
  href: string;
  label: string;
  roles?: readonly Role[];
};

const links: readonly NavLink[] = [
  { href: "/", label: "Chat" },
  { href: "/admin", label: "Admin", roles: ["ADMIN"] as readonly Role[] },
  { href: "/settings", label: "Settings" },
  { href: "/contact", label: "Contact" },
  { href: "/apps", label: "Apps" },
];

export function SiteHeader() {
  const pathname = usePathname();
  const [isOpen, setIsOpen] = useState(false);
  const { data: session, status } = useSession();

  const role = useMemo(() => {
    const userWithRole = session?.user as { role?: Role } | undefined;
    return userWithRole?.role ?? null;
  }, [session?.user]);

  const visibleLinks = useMemo(() => {
    return links.filter((link) => {
      if (link.href === "/settings" && status !== "authenticated") {
        return false;
      }
      if (!role) {
        return !link.roles;
      }
      return !link.roles || link.roles.includes(role);
    });
  }, [role, status]);

  const activeHref = useMemo(() => {
    if (!pathname) {
      return "/";
    }
    return (
      visibleLinks.find((link) => pathname === link.href || pathname.startsWith(`${link.href}/`))?.href ?? "/"
    );
  }, [pathname, visibleLinks]);

  const isAuthenticated = status === "authenticated";
  const userLabel = session?.user?.email ?? session?.user?.name ?? "Account";

  return (
    <header className="sticky top-0 z-40 border-b border-slate-200/80 bg-white/80 backdrop-blur dark:border-slate-800/80 dark:bg-slate-950/80">
      <div className="mx-auto flex max-w-6xl items-center justify-between p-4 sm:px-6 lg:px-8">
        <Link href="/" className="flex items-center gap-2 text-base font-semibold">
          <span className="flex h-9 w-9 items-center justify-center rounded-full bg-indigo-600 text-white shadow-sm">
            A
          </span>
          <span className="hidden sm:inline">Atticus</span>
        </Link>
        <nav
          aria-label="Primary"
          className="hidden items-center gap-1 rounded-full border border-slate-200 bg-white/60 p-1 text-sm font-medium dark:border-slate-800 dark:bg-slate-900/60 sm:flex"
        >
          {visibleLinks.map((link) => (
            <Link
              key={link.href}
              href={link.href}
              className={cn(
                "rounded-full px-3 py-1.5 transition-colors hover:bg-indigo-50 dark:hover:bg-indigo-500/10",
                activeHref === link.href
                  ? "bg-indigo-600 text-white shadow-sm hover:bg-indigo-600"
                  : "text-slate-600 dark:text-slate-300"
              )}
            >
              {link.label}
            </Link>
          ))}
        </nav>
        <div className="flex items-center gap-3">
          {isAuthenticated ? (
            <Button
              type="button"
              variant="secondary"
              size="sm"
              className="hidden rounded-full sm:inline-flex"
              onClick={() => signOut({ callbackUrl: "/" })}
            >
              Sign out
            </Button>
          ) : (
            <Button
              asChild
              variant="secondary"
              size="sm"
              className="hidden rounded-full sm:inline-flex"
            >
              <Link href="/signin">Sign in</Link>
            </Button>
          )}
          <Button
            type="button"
            variant="outline"
            size="icon"
            className="sm:hidden"
            onClick={() => setIsOpen((prev) => !prev)}
            aria-expanded={isOpen}
            aria-controls="mobile-nav"
          >
            {isOpen ? (
              <X className="h-5 w-5" aria-hidden="true" />
            ) : (
              <Menu className="h-5 w-5" aria-hidden="true" />
            )}
            <span className="sr-only">Toggle navigation</span>
          </Button>
        </div>
      </div>
      <div
        id="mobile-nav"
        className={cn(
          "border-t border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-950 sm:hidden",
          isOpen ? "block" : "hidden"
        )}
      >
        <div className="flex flex-col gap-3">
          <nav className="flex flex-col gap-2 text-base font-medium">
            {visibleLinks.map((link) => (
              <Link
                key={link.href}
                href={link.href}
                className={cn(
                  "rounded-xl px-3 py-2 hover:bg-indigo-50 dark:hover:bg-indigo-500/10",
                  activeHref === link.href
                    ? "bg-indigo-600 text-white shadow-sm"
                    : "text-slate-700 dark:text-slate-300"
                )}
                onClick={() => setIsOpen(false)}
              >
                {link.label}
              </Link>
            ))}
          </nav>
          <div className="border-t border-slate-200 pt-3 text-sm dark:border-slate-800">
            {isAuthenticated ? (
              <Button
                type="button"
                className="w-full"
                onClick={() => {
                  setIsOpen(false);
                  signOut({ callbackUrl: "/" });
                }}
              >
                Sign out ({userLabel})
              </Button>
            ) : (
              <Button asChild className="w-full" onClick={() => setIsOpen(false)}>
                <Link href="/signin">Sign in</Link>
              </Button>
            )}
          </div>
        </div>
      </div>
    </header>
  );
}

```

---

### components/ui/badge.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type BadgeVariant =
  | "default"
  | "subtle"
  | "outline"
  | "success"
  | "warning"
  | "destructive";

const variantClasses: Record<BadgeVariant, string> = {
  default:
    "bg-indigo-50 text-indigo-600 dark:bg-indigo-500/15 dark:text-indigo-300",
  subtle: "bg-slate-100 text-slate-600 dark:bg-slate-800/60 dark:text-slate-300",
  outline:
    "border border-slate-200 text-slate-600 dark:border-slate-700 dark:text-slate-300",
  success:
    "bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200",
  warning:
    "bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-200",
  destructive:
    "bg-rose-100 text-rose-700 dark:bg-rose-500/20 dark:text-rose-200",
};

interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement> {
  variant?: BadgeVariant;
}

export const Badge = React.forwardRef<HTMLSpanElement, BadgeProps>(function Badge(
  { className, variant = "default", ...props },
  ref
) {
  return (
    <span
      ref={ref}
      className={cn(
        "inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide",
        variantClasses[variant],
        className
      )}
      {...props}
    />
  );
});

```

---

### components/ui/button.tsx

```tsx
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cn } from "@/lib/utils";

type ButtonVariant =
  | "default"
  | "secondary"
  | "outline"
  | "ghost"
  | "destructive"
  | "link";

type ButtonSize = "sm" | "default" | "lg" | "icon";

const variantClasses: Record<ButtonVariant, string> = {
  default:
    "bg-indigo-600 text-white shadow-sm hover:bg-indigo-500 dark:bg-indigo-500 dark:text-white dark:hover:bg-indigo-400",
  secondary:
    "bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",
  outline:
    "border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-200 dark:hover:bg-slate-900",
  ghost:
    "bg-transparent text-slate-600 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800",
  destructive:
    "bg-rose-600 text-white hover:bg-rose-500 dark:bg-rose-500 dark:hover:bg-rose-400",
  link: "bg-transparent text-indigo-600 underline-offset-4 hover:underline dark:text-indigo-400",
};

const sizeClasses: Record<ButtonSize, string> = {
  sm: "h-9 px-3",
  default: "h-10 px-4 py-2",
  lg: "h-11 px-6",
  icon: "h-10 w-10",
};

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: ButtonVariant;
  size?: ButtonSize;
  asChild?: boolean;
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(function Button(
  { className, variant = "default", size = "default", asChild = false, ...props },
  ref
) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      ref={ref as React.Ref<any>}
      className={cn(
        "inline-flex items-center justify-center gap-2 rounded-xl text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:pointer-events-none disabled:opacity-60 dark:focus-visible:ring-offset-slate-950",
        sizeClasses[size],
        variantClasses[variant],
        className
      )}
      {...props}
    />
  );
});

```

---

### components/ui/card.tsx

```tsx
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cn } from "@/lib/utils";

interface CardProps extends React.HTMLAttributes<HTMLDivElement> {
  asChild?: boolean;
}

export const Card = React.forwardRef<HTMLDivElement, CardProps>(function Card(
  { className, asChild = false, ...props },
  ref
) {
  const Comp = asChild ? Slot : "div";

  return (
    <Comp
      ref={ref as React.Ref<any>}
      className={cn(
        "rounded-3xl border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900",
        className
      )}
      {...props}
    />
  );
});

export const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  function CardHeader({ className, ...props }, ref) {
    return (
      <div
        ref={ref}
        className={cn("flex flex-col gap-2 p-6", className)}
        {...props}
      />
    );
  }
);

export const CardTitle = React.forwardRef<HTMLHeadingElement, React.HTMLAttributes<HTMLHeadingElement>>(
  function CardTitle({ className, ...props }, ref) {
    return (
      <h2
        ref={ref}
        className={cn("text-lg font-semibold tracking-tight text-slate-900 dark:text-white", className)}
        {...props}
      />
    );
  }
);

export const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  function CardDescription({ className, ...props }, ref) {
    return (
      <p
        ref={ref}
        className={cn("text-sm text-slate-600 dark:text-slate-300", className)}
        {...props}
      />
    );
  }
);

export const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  function CardContent({ className, ...props }, ref) {
    return (
      <div
        ref={ref}
        className={cn("p-6 pt-0", className)}
        {...props}
      />
    );
  }
);

export const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  function CardFooter({ className, ...props }, ref) {
    return (
      <div
        ref={ref}
        className={cn("p-6 pt-0", className)}
        {...props}
      />
    );
  }
);

```

---

### components/ui/drawer.tsx

```tsx
"use client";

import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import { X } from "lucide-react";
import { cn } from "@/lib/utils";

export const Drawer = DialogPrimitive.Root;
export const DrawerTrigger = DialogPrimitive.Trigger;
export const DrawerClose = DialogPrimitive.Close;

export function DrawerContent({
  className,
  children,
  ...props
}: DialogPrimitive.DialogContentProps) {
  return (
    <DialogPrimitive.Portal>
      <DialogPrimitive.Overlay className="fixed inset-0 z-40 bg-slate-950/60 backdrop-blur-sm" />
      <DialogPrimitive.Content
        className={cn(
          "fixed inset-y-0 right-0 z-50 flex w-full max-w-xl flex-col border-l border-slate-200 bg-white shadow-2xl transition-transform duration-200 ease-out dark:border-slate-800 dark:bg-slate-950",
          className
        )}
        {...props}
      >
        {children}
      </DialogPrimitive.Content>
    </DialogPrimitive.Portal>
  );
}

export function DrawerHeader({
  className,
  children,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn("flex items-start justify-between border-b border-slate-200 p-6 dark:border-slate-800", className)}
      {...props}
    >
      {children}
      <DrawerClose className="rounded-md p-1 text-slate-500 transition hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-primary dark:text-slate-400 dark:hover:bg-slate-900">
        <span className="sr-only">Close</span>
        <X className="h-4 w-4" aria-hidden />
      </DrawerClose>
    </div>
  );
}

export function DrawerBody({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {
  return <div className={cn("flex-1 overflow-y-auto p-6", className)} {...props} />;
}

export function DrawerFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {
  return <div className={cn("border-t border-slate-200 p-6 dark:border-slate-800", className)} {...props} />;
}

```

---

### components/ui/input.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type InputProps = React.InputHTMLAttributes<HTMLInputElement>;

export const Input = React.forwardRef<HTMLInputElement, InputProps>(function Input(
  { className, type = "text", ...props },
  ref
) {
  return (
    <input
      ref={ref}
      type={type}
      className={cn(
        "flex h-10 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus-visible:ring-offset-slate-950",
        className
      )}
      {...props}
    />
  );
});

```

---

### components/ui/label.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type LabelProps = React.LabelHTMLAttributes<HTMLLabelElement>;

export const Label = React.forwardRef<HTMLLabelElement, LabelProps>(function Label(
  { className, ...props },
  ref
) {
  return (
    <label
      ref={ref}
      className={cn("text-sm font-medium text-slate-700 dark:text-slate-200", className)}
      {...props}
    />
  );
});

```

---

### components/ui/select.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type SelectProps = React.SelectHTMLAttributes<HTMLSelectElement>;

export const Select = React.forwardRef<HTMLSelectElement, SelectProps>(function Select(
  { className, children, ...props },
  ref
) {
  return (
    <select
      ref={ref}
      className={cn(
        "flex h-10 w-full appearance-none rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus-visible:ring-offset-slate-950",
        className
      )}
      {...props}
    >
      {children}
    </select>
  );
});

```

---

### components/ui/table.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type TableProps = React.HTMLAttributes<HTMLTableElement>;
type TableSectionProps = React.HTMLAttributes<HTMLTableSectionElement>;
type TableRowProps = React.HTMLAttributes<HTMLTableRowElement>;
type TableHeadProps = React.ThHTMLAttributes<HTMLTableCellElement>;
type TableCellProps = React.TdHTMLAttributes<HTMLTableCellElement>;

export const Table = React.forwardRef<HTMLTableElement, TableProps>(function Table(
  { className, ...props },
  ref
) {
  return <table ref={ref} className={cn("w-full caption-bottom text-sm", className)} {...props} />;
});

export const TableHeader = React.forwardRef<HTMLTableSectionElement, TableSectionProps>(
  function TableHeader({ className, ...props }, ref) {
    return (
      <thead
        ref={ref}
        className={cn(
          "bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:bg-slate-900/60 dark:text-slate-400",
          className
        )}
        {...props}
      />
    );
  }
);

export const TableBody = React.forwardRef<HTMLTableSectionElement, TableSectionProps>(
  function TableBody({ className, ...props }, ref) {
    return (
      <tbody
        ref={ref}
        className={cn("divide-y divide-slate-200 dark:divide-slate-800", className)}
        {...props}
      />
    );
  }
);

export const TableRow = React.forwardRef<HTMLTableRowElement, TableRowProps>(function TableRow(
  { className, ...props },
  ref
) {
  return (
    <tr
      ref={ref}
      className={cn("transition hover:bg-slate-50/50 dark:hover:bg-slate-900/40", className)}
      {...props}
    />
  );
});

export const TableHead = React.forwardRef<HTMLTableCellElement, TableHeadProps>(function TableHead(
  { className, ...props },
  ref
) {
  return (
    <th
      ref={ref}
      className={cn(
        "px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-300",
        className
      )}
      {...props}
    />
  );
});

export const TableCell = React.forwardRef<HTMLTableCellElement, TableCellProps>(function TableCell(
  { className, ...props },
  ref
) {
  return (
    <td
      ref={ref}
      className={cn("px-4 py-3 align-top text-sm text-slate-600 dark:text-slate-300", className)}
      {...props}
    />
  );
});

```

---

### components/ui/tabs.tsx

```tsx
"use client";

import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs";
import { cn } from "@/lib/utils";

const Tabs = TabsPrimitive.Root;

const TabsList = ({ className, ...props }: React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>) => (
  <TabsPrimitive.List
    className={cn(
      "inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-600 dark:bg-slate-800 dark:text-slate-200",
      className
    )}
    {...props}
  />
);
TabsList.displayName = TabsPrimitive.List.displayName;

const TabsTrigger = ({ className, ...props }: React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>) => (
  <TabsPrimitive.Trigger
    className={cn(
      "inline-flex min-w-[120px] items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all",
      "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",
      "disabled:pointer-events-none disabled:opacity-50",
      "data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm",
      "dark:data-[state=active]:bg-slate-900 dark:data-[state=active]:text-slate-100",
      className
    )}
    {...props}
  />
);
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName;

const TabsContent = ({ className, ...props }: React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>) => (
  <TabsPrimitive.Content
    className={cn(
      "mt-4 rounded-lg border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900",
      "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
);
TabsContent.displayName = TabsPrimitive.Content.displayName;

export { Tabs, TabsList, TabsTrigger, TabsContent };

```

---

### components/ui/textarea.tsx

```tsx
import * as React from "react";
import { cn } from "@/lib/utils";

type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>;

export const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(function Textarea(
  { className, ...props },
  ref
) {
  return (
    <textarea
      ref={ref}
      className={cn(
        "flex w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm leading-6 text-slate-900 shadow-sm transition placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus-visible:ring-offset-slate-950",
        className
      )}
      {...props}
    />
  );
});

```

---

### config.yaml

```yaml
# Default configuration for the Atticus RAG service.
# Values can be overridden via environment variables (see .env.example).
content_dir: content
indices_dir: indices
logs_path: logs/app.jsonl
errors_path: logs/errors.jsonl
manifest_path: indices/manifest.json
metadata_path: indices/index_metadata.json
snapshots_dir: indices/snapshots
dictionary_path: indices/dictionary.json
database_url: postgresql://postgres:postgres@localhost:5432/atticus
pgvector_lists: 100
pgvector_probes: 4
chunk_size: 512
chunk_overlap_ratio: 0.0
chunk_target_tokens: 512
chunk_min_tokens: 256
chunk_overlap_tokens_setting: 0
max_context_chunks: 10
top_k: 20
embed_model: text-embedding-3-large
embedding_model_version: text-embedding-3-large@2025-01-15
generation_model: gpt-4.1
confidence_threshold: 0.7
log_level: INFO
timezone: UTC
evaluation_runs_dir: eval/runs
baseline_path: eval/baseline.json
gold_set_path: eval/gold_set.csv
eval_regression_threshold: 3.0

```

---

### docker-compose.yml

```yaml
services:
  postgres:
    image: pgvector/pgvector:pg16
    container_name: atticus-postgres
    restart: unless-stopped
    env_file: .env
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-atticus}
      POSTGRES_USER: ${POSTGRES_USER:-atticus}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-atticus}
      VECTOR_INDEX_MAX_DIMENSIONS: 4096
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  api:
    build: ./api
    container_name: atticus-api
    env_file: .env
    depends_on:
      - postgres
    volumes:
      - ./content:/app/content:ro
      - indices:/app/indices
      - logs:/app/logs
    ports:
      - "8000:8000"
    command: ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000"]
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 10s
      timeout: 3s
      retries: 5

  nginx:
    build: ./nginx
    container_name: atticus-nginx
    depends_on:
      api:
        condition: service_healthy
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/certs:/etc/nginx/certs:ro
    healthcheck:
      test: ["CMD", "nginx", "-t"]
      interval: 30s
      timeout: 5s
      retries: 3

volumes:
  indices:
  logs:
  postgres_data:

```

---

### docs/api/openapi.json

```json
{
  "components": {
    "schemas": {
      "AskRequest": {
        "properties": {
          "filters": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "Metadata filters such as path_prefix or source_type",
            "title": "Filters"
          },
          "contextHints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional hints supplied by the UI to bias retrieval",
            "title": "ContextHints"
          },
          "topK": {
            "anyOf": [
              {
                "maximum": 32,
                "minimum": 1,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "Override for the retrieval top-k window",
            "title": "TopK"
          },
          "question": {
            "title": "Question",
            "type": "string"
          }
        },
        "required": ["question"],
        "title": "AskRequest",
        "type": "object"
      },
      "AskResponse": {
        "properties": {
          "answer": {
            "title": "Answer",
            "type": "string"
          },
          "sources": {
            "items": {
              "$ref": "#/components/schemas/AskSource"
            },
            "title": "Sources",
            "type": "array"
          },
          "confidence": {
            "title": "Confidence",
            "type": "number"
          },
          "request_id": {
            "title": "Request Id",
            "type": "string"
          },
          "should_escalate": {
            "title": "Should Escalate",
            "type": "boolean"
          }
        },
        "required": ["answer", "confidence", "should_escalate", "request_id", "sources"],
        "title": "AskResponse",
        "type": "object"
      },
      "AskSource": {
        "properties": {
          "heading": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading"
          },
          "page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page"
          },
          "chunkId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunkid"
          },
          "score": {
            "title": "Score",
            "type": "number"
          },
          "path": {
            "title": "Path",
            "type": "string"
          }
        },
        "required": ["path"],
        "title": "AskSource",
        "type": "object"
      },
      "ContactRequest": {
        "properties": {
          "reason": {
            "description": "Reason for contacting support/escalation",
            "title": "Reason",
            "type": "string"
          },
          "transcript": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional chat transcript (list of lines) or a single string",
            "title": "Transcript"
          }
        },
        "required": ["reason"],
        "title": "ContactRequest",
        "type": "object"
      },
      "DictionaryEntry": {
        "properties": {
          "synonyms": {
            "items": {
              "type": "string"
            },
            "title": "Synonyms",
            "type": "array"
          },
          "term": {
            "title": "Term",
            "type": "string"
          }
        },
        "required": ["term", "synonyms"],
        "title": "DictionaryEntry",
        "type": "object"
      },
      "DictionaryPayload": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/DictionaryEntry"
            },
            "title": "Entries",
            "type": "array"
          }
        },
        "required": ["entries"],
        "title": "DictionaryPayload",
        "type": "object"
      },
      "ErrorLogEntry": {
        "properties": {
          "details": {
            "additionalProperties": {
              "type": "string"
            },
            "title": "Details",
            "type": "object"
          },
          "message": {
            "title": "Message",
            "type": "string"
          },
          "time": {
            "title": "Time",
            "type": "string"
          }
        },
        "required": ["time", "message"],
        "title": "ErrorLogEntry",
        "type": "object"
      },
      "EvalResponse": {
        "properties": {
          "deltas": {
            "additionalProperties": {
              "type": "number"
            },
            "title": "Deltas",
            "type": "object"
          },
          "metrics": {
            "additionalProperties": {
              "type": "number"
            },
            "title": "Metrics",
            "type": "object"
          },
          "summary_csv": {
            "title": "Summary Csv",
            "type": "string"
          },
          "summary_json": {
            "title": "Summary Json",
            "type": "string"
          }
        },
        "required": ["metrics", "deltas", "summary_csv", "summary_json"],
        "title": "EvalResponse",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "HealthResponse": {
        "properties": {
          "chunk_count": {
            "title": "Chunk Count",
            "type": "integer"
          },
          "document_count": {
            "title": "Document Count",
            "type": "integer"
          },
          "embedding_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Embedding Model"
          },
          "embedding_model_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Embedding Model Version"
          },
          "manifest_present": {
            "title": "Manifest Present",
            "type": "boolean"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": ["status", "manifest_present", "document_count", "chunk_count"],
        "title": "HealthResponse",
        "type": "object"
      },
      "IngestRequest": {
        "properties": {
          "full_refresh": {
            "default": false,
            "title": "Full Refresh",
            "type": "boolean"
          },
          "paths": {
            "anyOf": [
              {
                "items": {
                  "format": "path",
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Paths"
          }
        },
        "title": "IngestRequest",
        "type": "object"
      },
      "IngestResponse": {
        "properties": {
          "chunks_indexed": {
            "title": "Chunks Indexed",
            "type": "integer"
          },
          "documents_processed": {
            "title": "Documents Processed",
            "type": "integer"
          },
          "documents_skipped": {
            "title": "Documents Skipped",
            "type": "integer"
          },
          "elapsed_seconds": {
            "title": "Elapsed Seconds",
            "type": "number"
          },
          "embedding_model": {
            "title": "Embedding Model",
            "type": "string"
          },
          "embedding_model_version": {
            "title": "Embedding Model Version",
            "type": "string"
          },
          "index_path": {
            "title": "Index Path",
            "type": "string"
          },
          "ingested_at": {
            "title": "Ingested At",
            "type": "string"
          },
          "manifest_path": {
            "title": "Manifest Path",
            "type": "string"
          },
          "snapshot_path": {
            "title": "Snapshot Path",
            "type": "string"
          }
        },
        "required": [
          "documents_processed",
          "documents_skipped",
          "chunks_indexed",
          "elapsed_seconds",
          "manifest_path",
          "index_path",
          "snapshot_path",
          "ingested_at",
          "embedding_model",
          "embedding_model_version"
        ],
        "title": "IngestResponse",
        "type": "object"
      },
      "SessionLogEntry": {
        "properties": {
          "confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence"
          },
          "escalate": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Escalate"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms"
          },
          "method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Method"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "request_id": {
            "title": "Request Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "time": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time"
          }
        },
        "required": ["request_id"],
        "title": "SessionLogEntry",
        "type": "object"
      },
      "SessionLogResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionLogEntry"
            },
            "title": "Sessions",
            "type": "array"
          }
        },
        "required": ["sessions"],
        "title": "SessionLogResponse",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": ["loc", "msg", "type"],
        "title": "ValidationError",
        "type": "object"
      }
    }
  },
  "info": {
    "title": "Atticus RAG API",
    "version": "0.4.1"
  },
  "openapi": "3.1.0",
  "paths": {
    "/admin/dictionary": {
      "get": {
        "operationId": "read_dictionary_admin_dictionary_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DictionaryPayload"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Read Dictionary"
      },
      "post": {
        "operationId": "write_dictionary_admin_dictionary_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DictionaryPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DictionaryPayload"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Write Dictionary"
      }
    },
    "/admin/errors": {
      "get": {
        "operationId": "get_errors_admin_errors_get",
        "parameters": [
          {
            "description": "Return errors since ISO timestamp",
            "in": "query",
            "name": "since",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Return errors since ISO timestamp",
              "title": "Since"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ErrorLogEntry"
                  },
                  "title": "Response Get Errors Admin Errors Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Errors"
      }
    },
    "/admin/sessions": {
      "get": {
        "operationId": "get_sessions_admin_sessions_get",
        "parameters": [
          {
            "description": "Return JSON or HTML",
            "in": "query",
            "name": "format",
            "required": false,
            "schema": {
              "default": "json",
              "description": "Return JSON or HTML",
              "pattern": "^(json|html)$",
              "title": "Format",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionLogResponse"
                }
              },
              "text/html": {}
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Sessions"
      }
    },
    "/ask": {
      "post": {
        "operationId": "ask_endpoint_ask_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AskRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AskResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ask Endpoint"
      }
    },
    "/contact": {
      "post": {
        "operationId": "contact_contact_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Contact Contact Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Contact"
      }
    },
    "/eval/run": {
      "post": {
        "operationId": "run_eval_eval_run_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EvalResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Run Eval"
      }
    },
    "/health": {
      "get": {
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Health"
      }
    },
    "/ingest": {
      "post": {
        "operationId": "trigger_ingestion_ingest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Trigger Ingestion"
      }
    }
  }
}

```

---

### eval/__init__.py

```python
"""Evaluation utilities for Atticus."""

from .runner import EvaluationResult, run_evaluation

__all__ = ["EvaluationResult", "run_evaluation"]

```

---

### eval/baseline.json

```json
{
  "nDCG@10": 1.0,
  "Recall@50": 1.0,
  "MRR": 1.0
}

```

---

### eval/harness/__init__.py

```python
"""Evaluation harness package."""

```

---

### eval/harness/test_eval.py

```python
"""Evaluation metric unit tests."""

from __future__ import annotations

import pytest

from eval.runner import _evaluate_query

EXPECTED_PARTIAL_MRR = 0.5


@pytest.mark.eval
def test_evaluate_query_perfect_match() -> None:
    results = ["doc1", "doc2", "doc3"]
    relevant = ["doc1", "doc2"]
    ndcg, recall, mrr = _evaluate_query(results, relevant)
    assert round(ndcg, 4) == 1.0
    assert round(recall, 4) == 1.0
    assert round(mrr, 4) == 1.0


@pytest.mark.eval
def test_evaluate_query_partial_match() -> None:
    results = ["docX", "doc2", "doc3", "doc1"]
    relevant = ["doc1", "doc2"]
    ndcg, recall, mrr = _evaluate_query(results, relevant)
    assert ndcg < 1.0
    assert recall == 1.0
    assert mrr == EXPECTED_PARTIAL_MRR

```

---

### eval/harness/test_ui.py

```python
from __future__ import annotations

from fastapi.testclient import TestClient

from api.main import app

HTTP_OK = 200


def test_ui_served() -> None:
    with TestClient(app) as client:
        res = client.get("/ui")
        assert res.status_code == HTTP_OK
        assert "Atticus" in res.text

```

---

### eval/runner.py

```python
"""Evaluation harness computing nDCG@10, Recall@50, and MRR.

This module lazily imports heavy runtime dependencies so its pure functions
can be unit tested without requiring optional system packages (e.g. pgvector server extension).
"""

from __future__ import annotations

import csv
import json
import math
from collections.abc import Mapping, Sequence
from dataclasses import dataclass
from datetime import UTC, datetime
from html import escape
from pathlib import Path
from typing import TYPE_CHECKING, Protocol, cast, runtime_checkable

if TYPE_CHECKING:  # avoid importing heavy deps at import time
    from atticus.config import AppSettings
    from retriever.vector_store import SearchResult


def _default_output_dir(settings: AppSettings) -> Path:
    return settings.evaluation_runs_dir / datetime.now(tz=settings.tzinfo).strftime("%Y%m%d")


@dataclass(slots=True)
class GoldExample:
    question: str
    relevant_documents: list[str]
    expected_answer: str | None
    notes: str | None


@dataclass(slots=True)
class EvaluationResult:
    metrics: dict[str, float]
    deltas: dict[str, float]
    summary_csv: Path
    summary_json: Path
    summary_html: Path


def load_gold_set(path: Path) -> list[GoldExample]:
    examples: list[GoldExample] = []
    with path.open(newline="", encoding="utf-8") as handle:
        reader = csv.DictReader(handle)
        for row in reader:
            question = row.get("question", "").strip()

            # Normalize gold document paths for cross-platform comparisons
            def _canon(p: str) -> str:
                try:
                    return Path(p.strip()).as_posix().lower()
                except Exception:
                    return p.strip().replace("\\", "/").lower()

            documents = [
                _canon(item)
                for item in row.get("relevant_documents", "").split(";")
                if item and item.strip()
            ]
            expected = (row.get("expected_answer") or "").strip() or None
            notes = row.get("notes") or None
            examples.append(
                GoldExample(
                    question=question,
                    relevant_documents=documents,
                    expected_answer=expected,
                    notes=notes,
                )
            )
    return examples


def _dcg(relevances: Sequence[int]) -> float:
    return sum(
        ((2**rel - 1) / math.log2(idx + 2) for idx, rel in enumerate(relevances)),
        0.0,
    )


def _evaluate_query(
    results_doc_keys: Sequence[str], relevant_docs: list[str]
) -> tuple[float, float, float]:
    if not relevant_docs:
        return 0.0, 0.0, 0.0
    # Build the set of relevant document keys (by basename only)
    relevant_keys: set[str] = {Path(doc).name for doc in relevant_docs}

    ideal = sorted([1] * min(len(relevant_keys), 10), reverse=True)
    idcg = _dcg(ideal) if ideal else 0.0
    gains = [1 if doc_key in relevant_keys else 0 for doc_key in results_doc_keys[:10]]
    dcg = _dcg(gains)
    ndcg = dcg / idcg if idcg else 0.0

    top50 = results_doc_keys[:50]
    hits = sum(1 for key in top50 if key in relevant_keys)
    recall = hits / max(1, len(relevant_keys))

    mrr = 0.0
    for idx, key in enumerate(results_doc_keys, start=1):
        if key in relevant_keys:
            mrr = 1.0 / idx
            break
    # Clamp to [0,1]
    return min(ndcg, 1.0), min(recall, 1.0), min(mrr, 1.0)


def _canon(p: str) -> str:
    """Canonicalize a path-like string for comparison."""
    try:
        return Path(p).as_posix().lower()
    except Exception:
        return str(p).replace("\\", "/").lower()


@runtime_checkable
class _HasSource(Protocol):
    source_path: str
    metadata: Mapping[str, str] | None


def _build_doc_keys(results: Sequence[SearchResult]) -> tuple[list[str], list[str]]:
    """Produce unique document keys and primary paths from search results."""
    seen_docs: set[str] = set()
    doc_keys: list[str] = []
    documents_primary: list[str] = []
    for result in results:
        primary = _canon(result.source_path)
        meta = getattr(result, "metadata", None)
        src = meta.get("source") if meta else None
        key_source = _canon(src) if src else primary
        doc_key = Path(key_source).name
        if doc_key in seen_docs:
            continue
        seen_docs.add(doc_key)
        doc_keys.append(doc_key)
        documents_primary.append(primary)
    return doc_keys, documents_primary


def _compute_metrics(
    ndcg_scores: Sequence[float], recall_scores: Sequence[float], mrr_scores: Sequence[float]
) -> dict[str, float]:
    return {
        "nDCG@10": round(sum(ndcg_scores) / len(ndcg_scores), 4) if ndcg_scores else 0.0,
        "Recall@50": round(sum(recall_scores) / len(recall_scores), 4) if recall_scores else 0.0,
        "MRR": round(sum(mrr_scores) / len(mrr_scores), 4) if mrr_scores else 0.0,
    }


def _format_float(value: object) -> str:
    try:
        return f"{float(value):.4f}"
    except (TypeError, ValueError):
        return ""


def _write_outputs(
    output_dir: Path, rows: Sequence[dict[str, object]], metrics: dict[str, float]
) -> tuple[Path, Path, Path]:
    output_dir.mkdir(parents=True, exist_ok=True)
    summary_csv = output_dir / "metrics.csv"
    summary_json = output_dir / "summary.json"
    summary_html = output_dir / "metrics.html"

    with summary_csv.open("w", newline="", encoding="utf-8") as handle:
        writer = csv.DictWriter(
            handle, fieldnames=["query", "nDCG@10", "Recall@50", "MRR", "top_document"]
        )
        writer.writeheader()
        writer.writerows(rows)
        writer.writerow({"query": "AVERAGE", **metrics})

    summary_json.write_text(json.dumps(metrics, indent=2) + "\n", encoding="utf-8")

    generated_at = datetime.now(UTC).strftime("%Y-%m-%d %H:%M:%SZ")
    metrics_rows = "".join(
        f'<tr><th scope="row">{escape(name)}</th><td>{_format_float(value)}</td></tr>'
        for name, value in metrics.items()
    )
    query_rows = "".join(
        "<tr>"
        f"<td>{escape(str(row.get('query', '')))}</td>"
        f"<td>{_format_float(row.get('nDCG@10'))}</td>"
        f"<td>{_format_float(row.get('Recall@50'))}</td>"
        f"<td>{_format_float(row.get('MRR'))}</td>"
        f"<td>{escape(str(row.get('top_document') or ''))}</td>"
        "</tr>"
        for row in rows
    )

    html_report = (
        "<!DOCTYPE html>"
        '<html lang="en">'
        "<head>"
        '<meta charset="utf-8">'
        "<title>Atticus Evaluation Summary</title>"
        "<style>"
        "body{font-family:Inter,Arial,sans-serif;background:#0f172a;color:#e2e8f0;margin:0;padding:2rem;}"
        "h1{margin-top:0;font-size:1.75rem;}"
        "table{border-collapse:collapse;width:100%;margin-top:1.5rem;background:#1e293b;border-radius:0.5rem;overflow:hidden;}"
        "th,td{padding:0.75rem 1rem;text-align:left;border-bottom:1px solid rgba(148,163,184,0.25);}"
        "th{width:18rem;font-weight:600;}"
        "tbody tr:last-child td{border-bottom:none;}"
        "section + section{margin-top:2rem;}"
        "caption{caption-side:top;font-weight:600;font-size:1.1rem;margin-bottom:0.5rem;color:#f8fafc;}"
        "</style>"
        "</head>"
        "<body>"
        "<h1>Atticus Evaluation Summary</h1>"
        f"<p>Generated at <strong>{escape(generated_at)}</strong>. Metrics compare retrieval output against the configured gold set.</p>"
        "<section>"
        "<table>"
        "<caption>Aggregate Metrics</caption>"
        "<tbody>"
        f"{metrics_rows}"
        "</tbody>"
        "</table>"
        "</section>"
        "<section>"
        "<table>"
        "<caption>Per-query Breakdown</caption>"
        "<thead><tr><th>Query</th><th>nDCG@10</th><th>Recall@50</th><th>MRR</th><th>Top Document</th></tr></thead>"
        f"<tbody>{query_rows}</tbody>"
        "</table>"
        "</section>"
        "</body></html>"
    )

    summary_html.write_text(html_report, encoding="utf-8")
    return summary_csv, summary_json, summary_html


def _load_baseline(path: Path) -> dict[str, float]:
    if path.exists():
        return cast(dict[str, float], json.loads(path.read_text(encoding="utf-8")))
    return {"nDCG@10": 0.0, "Recall@50": 0.0, "MRR": 0.0}


def run_evaluation(
    settings: AppSettings | None = None,
    gold_path: Path | None = None,
    baseline_path: Path | None = None,
    output_dir: Path | None = None,
) -> EvaluationResult:
    # Lazy imports to keep unit tests lightweight
    from atticus.config import load_settings  # noqa: PLC0415
    from atticus.logging import configure_logging, log_event  # noqa: PLC0415
    from retriever.vector_store import VectorStore  # noqa: PLC0415

    settings = settings or load_settings()
    gold_path = gold_path or settings.gold_set_path
    baseline_path = baseline_path or settings.baseline_path
    output_dir = output_dir or _default_output_dir(settings)

    logger = configure_logging(settings)
    store = VectorStore(settings, logger)
    gold_examples = load_gold_set(gold_path)

    ndcg_scores: list[float] = []
    recall_scores: list[float] = []
    mrr_scores: list[float] = []
    per_query_rows: list[dict[str, object]] = []

    for example in gold_examples:
        results = store.search(example.question, top_k=50, filters=None, hybrid=True)
        # Unique documents by basename (prefer metadata.source)
        doc_keys, documents_primary = _build_doc_keys(results)

        ndcg, recall, mrr = _evaluate_query(doc_keys, example.relevant_documents)
        ndcg_scores.append(ndcg)
        recall_scores.append(recall)
        mrr_scores.append(mrr)
        per_query_rows.append(
            {
                "query": example.question,
                "nDCG@10": round(ndcg, 4),
                "Recall@50": round(recall, 4),
                "MRR": round(mrr, 4),
                "top_document": documents_primary[0] if documents_primary else None,
            }
        )

    metrics = _compute_metrics(ndcg_scores, recall_scores, mrr_scores)
    summary_csv, summary_json, summary_html = _write_outputs(output_dir, per_query_rows, metrics)

    baseline_metrics = _load_baseline(baseline_path)

    deltas = {key: round(metrics[key] - baseline_metrics.get(key, 0.0), 4) for key in metrics}

    log_event(
        logger,
        "evaluation_complete",
        metrics=metrics,
        deltas=deltas,
        gold_examples=len(gold_examples),
        output=str(output_dir),
    )

    return EvaluationResult(
        metrics=metrics,
        deltas=deltas,
        summary_csv=summary_csv,
        summary_json=summary_json,
        summary_html=summary_html,
    )


def main() -> None:
    from atticus.config import load_settings  # noqa: PLC0415

    settings = load_settings()
    result = run_evaluation(settings=settings)
    payload = {
        "metrics": result.metrics,
        "deltas": result.deltas,
        "summary_csv": str(result.summary_csv),
        "summary_json": str(result.summary_json),
    }
    print(json.dumps(payload, indent=2))


if __name__ == "__main__":
    main()

```

---

### eval/runs/20251008/metrics.html

```html
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Atticus Evaluation Summary</title><style>body{font-family:Inter,Arial,sans-serif;background:#0f172a;color:#e2e8f0;margin:0;padding:2rem;}h1{margin-top:0;font-size:1.75rem;}table{border-collapse:collapse;width:100%;margin-top:1.5rem;background:#1e293b;border-radius:0.5rem;overflow:hidden;}th,td{padding:0.75rem 1rem;text-align:left;border-bottom:1px solid rgba(148,163,184,0.25);}th{width:18rem;font-weight:600;}tbody tr:last-child td{border-bottom:none;}section + section{margin-top:2rem;}caption{caption-side:top;font-weight:600;font-size:1.1rem;margin-bottom:0.5rem;color:#f8fafc;}</style></head><body><h1>Atticus Evaluation Summary</h1><p>Generated at <strong>2025-10-08 12:38:37Z</strong>. Metrics compare retrieval output against the configured gold set.</p><section><table><caption>Aggregate Metrics</caption><tbody><tr><th scope="row">nDCG@10</th><td>1.0000</td></tr><tr><th scope="row">Recall@50</th><td>1.0000</td></tr><tr><th scope="row">MRR</th><td>1.0000</td></tr></tbody></table></section><section><table><caption>Per-query Breakdown</caption><thead><tr><th>Query</th><th>nDCG@10</th><th>Recall@50</th><th>MRR</th><th>Top Document</th></tr></thead><tbody><tr><td>What is the maximum print resolution of the Apeos C7070 series?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum scanning resolution?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the minimum AMPV for the C3070?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum AMPV for the C4570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the duty cycle for the C2570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the machine life for the C6570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the rated print speed of the C7070?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the touch panel size?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the standard system memory?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the standard SSD capacity?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What type of encryption is standard?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which kit enables data overwrite security?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the warm-up time with plug-ins enabled?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the recovery time from sleep for the C7070?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the first copy output time for the C2570 (colour)?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the continuous copy speed of the C5570 for A4 LEF simplex?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum supported paper size in trays?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum bypass tray size?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the minimum bypass tray size?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum supported paper weight in trays?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the continuous copy limit per job?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the reduction/enlargement range?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum print size using the bypass tray?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the minimum print size supported?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What PDLs are standard and optional?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which interfaces are standard?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which wireless standards are supported by the wireless kit?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What file systems are supported for USB printing?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What operating systems are supported for PCL printing?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What operating systems are supported for Adobe PostScript 3?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>How many fonts are included with PCL?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>How many fonts are included with PostScript?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the scanning speed of the C7070 with DADF C2-PC?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the scanning speed of the C2570 with DADF B2-PC?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What scanning resolutions are supported?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What file formats are supported for colour scans?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What additional formats require the Advanced Scan Kit?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What fax transmission time is specified per A4 page?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What maximum fax resolution is supported?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What coding methods are supported for fax?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What fax transmission speeds are supported?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>How many fax ports are supported with expansion?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum duplex feeder capacity on C2-PC?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum duplex feeder capacity on B2-PC?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which models come standard with C2-PC?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the standard side tray capacity?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which finisher is not supported on C7070/C6570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum staple capacity of the B5-Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum staple-free capacity of the B5-Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the booklet capacity of the B4/B5 Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the booklet capacity of the C4/C5 Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum staple capacity of the C4/C5 Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum half-fold capacity on C4/C5 Finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What folding unit is available?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What fold types does Folder Unit CD3 support?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the capacity of Folder Unit CD3?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum output tray capacity of the centre tray?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum input tray capacity?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the tandem tray capacity?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the bypass tray capacity?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the capacity of HCF-B1?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the capacity of HCF-B2?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the capacity of the envelope tray?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which tray supports banner paper?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the toner yield for black toner?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the toner yield for cyan toner?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the toner yield for magenta toner?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the toner yield for yellow toner?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the drum yield for C7070 mono?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the drum yield for C3070 colour?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the waste toner bottle yield for C6570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which consumables are considered excess?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What consumables are not covered as standard?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the staple cartridge life for 50-sheet stapling?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the staple cartridge life for booklet stapling?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the staple cartridge life for 65-sheet stapling?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the EPSV kit used for?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which kit enables searchable PDF output?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which kit enables secure watermarking?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which kit enables image logging?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Which kit enables IP Fax (SIP)?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum banner print size?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What drivers are supported for banner printing?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the billing meter for colour impressions?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the billing meter for black impressions?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the billing meter for colour large impressions?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the billing meter for total impressions?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What are recommended paper storage conditions?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Is carbonless stock supported?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Are envelopes guaranteed for print quality?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Is coated stock performance guaranteed?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Are labels reusable in the device?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum humidity for operation?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the minimum operating temperature?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum operating temperature?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the maximum power consumption?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the TEC of the C2570?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the TEC of the C7070?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the noise emission of the C7070 in operation?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the heat emission of the C7070 when running?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the machine weight of the C3070?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the weight of HCF-B1?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the weight of HCF-B2?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the weight of the C4/C5 Finisher with Booklet Maker?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the weight of Folder Unit CD3?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What are the electrical requirements?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the recommended clearance behind the C7070 for service?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the recommended clearance on the left side of C3070 for service?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the recommended minimum overhead clearance for all models?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Is duplex supported for banner printing?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What are typical image-to-paper alignment tolerances?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Does duplex speed reduce when outputting to the centre tray with a finisher?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Are authenticated prints supported via AirPrint?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What file systems are supported for USB storage?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>What is the USB storage capacity limit?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>Is Wi‑Fi Direct scanning/printing supported via FBAU Print Utility only?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr><tr><td>How many devices can connect via Wi‑Fi Direct concurrently?</td><td>1.0000</td><td>1.0000</td><td>1.0000</td><td>content/model/shobu/ac7070_qna.xlsx</td></tr></tbody></table></section></body></html>
```

---

### eval/runs/20251008/summary.json

```json
{
  "nDCG@10": 1.0,
  "Recall@50": 1.0,
  "MRR": 1.0
}

```

---

### eval/runs/ci/summary.json

```json
{
  "nDCG@10": 1.0,
  "Recall@50": 1.0,
  "MRR": 1.0
}

```

---

### eval/runs/manual/summary.json

```json
{
  "nDCG@10": 1.0,
  "Recall@50": 1.0,
  "MRR": 1.0
}

```

---

### ingest/__init__.py

```python
"""Ingestion pipeline entrypoints."""

from .pipeline import IngestionOptions, IngestionSummary, ingest_corpus

__all__ = ["IngestionOptions", "IngestionSummary", "ingest_corpus"]

```

---

### ingest/chunker.py

```python
"""Chunking utilities implementing the CED policy."""

from __future__ import annotations

import json
from collections.abc import Callable, Iterable
from dataclasses import dataclass

from atticus.config import AppSettings
from atticus.tokenization import decode, encode, split_tokens
from atticus.utils import sha256_text

from .models import Chunk, ParsedDocument, ParsedSection

MIN_CHUNK_MERGE_COUNT = 2
TABLE_SPLIT_DELIMITER = "|"


def _normalise_metadata(metadata: dict[str, str | int | float | bool | None]) -> dict[str, str]:
    result: dict[str, str] = {}
    for key, value in metadata.items():
        if value is None:
            continue
        if isinstance(value, bool):
            result[str(key)] = "true" if value else "false"
        else:
            result[str(key)] = str(value)
    return result


def _hash_chunk_payload(text: str, metadata: dict[str, str]) -> str:
    material = json.dumps({"text": text.strip(), "meta": metadata}, sort_keys=True)
    return sha256_text(material)


@dataclass(slots=True)
class _ChunkBuilder:
    settings: AppSettings
    document: ParsedDocument
    chunk_counter: int = 0

    def next_id(self) -> str:
        ident = f"{self.document.document_id}::chunk_{self.chunk_counter}".replace("//", "/")
        self.chunk_counter += 1
        return ident

    def build_chunk(
        self,
        *,
        section: ParsedSection,
        breadcrumbs: list[str],
        text: str,
        start: int,
        end: int,
        chunking: str,
        extra: dict[str, str | int | float | bool | None],
    ) -> Chunk:
        raw_metadata: dict[str, str | int | float | bool | None] = {
            "chunking": chunking,
            "source_type": self.document.source_type,
            **section.extra,
            **extra,
        }
        if section.heading:
            raw_metadata.setdefault("section_heading", section.heading)
        if section.page_number is not None:
            raw_metadata.setdefault("page_number", section.page_number)
        if breadcrumbs:
            raw_metadata.setdefault("breadcrumbs", " > ".join(breadcrumbs))
        metadata = _normalise_metadata(raw_metadata)
        chunk_hash = _hash_chunk_payload(text, metadata)
        metadata.setdefault("chunk_sha", chunk_hash)

        return Chunk(
            chunk_id=self.next_id(),
            document_id=self.document.document_id,
            source_path=str(self.document.source_path),
            text=text,
            start_token=start,
            end_token=end,
            page_number=section.page_number,
            heading=section.heading,
            sha256=chunk_hash,
            extra=metadata,
            breadcrumbs=list(breadcrumbs),
        )


class CEDChunker:
    """Implements the CED chunking strategy (prose, table, footnote)."""

    def __init__(self, settings: AppSettings) -> None:
        self.settings = settings

    def chunk_document(self, document: ParsedDocument) -> list[Chunk]:
        builder = _ChunkBuilder(settings=self.settings, document=document)
        chunks: list[Chunk] = []
        dedupe: set[str] = set()
        breadcrumbs_root = [document.source_path.name]

        for section in document.sections:
            breadcrumbs = breadcrumbs_root + list(section.breadcrumbs)
            if section.heading and (not breadcrumbs or breadcrumbs[-1] != section.heading):
                breadcrumbs.append(section.heading)

            if section.extra.get("is_table") == "true":
                factory: Callable[[], Iterable[Chunk]] = lambda: self._chunk_table(
                    builder, section, breadcrumbs
                )
            elif self._is_footnote(section):
                factory = lambda: self._chunk_footnote(builder, section, breadcrumbs)
            else:
                factory = lambda: self._chunk_prose(builder, section, breadcrumbs)

            for chunk in factory():
                if chunk.sha256 in dedupe:
                    continue
                dedupe.add(chunk.sha256)
                chunks.append(chunk)

        return chunks

    def _chunk_prose(
        self,
        builder: _ChunkBuilder,
        section: ParsedSection,
        breadcrumbs: list[str],
    ) -> Iterable[Chunk]:
        tokens = encode(section.text)
        if not tokens:
            return []
        target_tokens = self.settings.chunk_target_tokens or self.settings.chunk_size
        overlap = 0
        splits = list(split_tokens(tokens, target_tokens, overlap))
        result: list[Chunk] = []
        for index, (start, end) in enumerate(splits, start=1):
            text = decode(tokens[start:end])
            chunk = builder.build_chunk(
                section=section,
                breadcrumbs=breadcrumbs,
                text=text,
                start=start,
                end=end,
                chunking="prose",
                extra={
                    "chunk_index": index,
                    "token_count": max(0, end - start),
                },
            )
            result.append(chunk)

        if (
            self.settings.chunk_min_tokens > 0
            and len(result) >= MIN_CHUNK_MERGE_COUNT
            and result[-1].end_token - result[-1].start_token < self.settings.chunk_min_tokens
        ):
            tail = result.pop()
            prev = result[-1]
            merged_text = f"{prev.text}\n{tail.text}".strip()
            prev.text = merged_text
            prev.end_token = tail.end_token
            prev.extra.update({"merged": "true"})
            prev.extra.update(
                {k: v for k, v in tail.extra.items() if k not in {"chunk_sha", "chunking"}}
            )
            new_hash = _hash_chunk_payload(merged_text, prev.extra)
            prev.sha256 = new_hash
            prev.extra["chunk_sha"] = new_hash

        return result

    def _chunk_table(
        self,
        builder: _ChunkBuilder,
        section: ParsedSection,
        breadcrumbs: list[str],
    ) -> Iterable[Chunk]:
        lines = [line.strip() for line in section.text.splitlines() if line.strip()]
        if not lines:
            return []
        headers = section.extra.get("table_headers") or ""
        result: list[Chunk] = []
        for index, line in enumerate(lines, start=1):
            cells = [cell.strip() for cell in line.split(TABLE_SPLIT_DELIMITER)]
            cell_payload = {f"col_{idx}": value for idx, value in enumerate(cells, start=1)}
            formatted_cells = " | ".join(cells)
            text = formatted_cells
            if headers:
                text = f"{headers}\n{formatted_cells}".strip()
            chunk = builder.build_chunk(
                section=section,
                breadcrumbs=breadcrumbs,
                text=text,
                start=0,
                end=len(encode(text)),
                chunking="table_row",
                extra={
                    "table_headers": headers,
                    "table_row_index": index,
                    "table_cells": json.dumps(cell_payload, ensure_ascii=False),
                },
            )
            result.append(chunk)
        return result

    def _chunk_footnote(
        self,
        builder: _ChunkBuilder,
        section: ParsedSection,
        breadcrumbs: list[str],
    ) -> Iterable[Chunk]:
        text = section.text.strip()
        if not text:
            return []
        chunk = builder.build_chunk(
            section=section,
            breadcrumbs=breadcrumbs,
            text=text,
            start=0,
            end=len(encode(text)),
            chunking="footnote",
            extra={"token_count": len(encode(text))},
        )
        return [chunk]

    @staticmethod
    def _is_footnote(section: ParsedSection) -> bool:
        heading = (section.heading or "").lower()
        if "footnote" in heading:
            return True
        return str(section.extra.get("footnote", "")).lower() == "true"


def chunk_document(document: ParsedDocument, settings: AppSettings) -> list[Chunk]:
    return CEDChunker(settings).chunk_document(document)


def chunk_documents(documents: Iterable[ParsedDocument], settings: AppSettings) -> list[Chunk]:
    chunker = CEDChunker(settings)
    all_chunks: list[Chunk] = []
    for document in documents:
        all_chunks.extend(chunker.chunk_document(document))
    return all_chunks

```

---

### ingest/models.py

```python
"""Dataclasses for parsed documents and chunks."""

from __future__ import annotations

from dataclasses import dataclass, field
from pathlib import Path


@dataclass(slots=True)
class ParsedSection:
    text: str
    page_number: int | None = None
    heading: str | None = None
    extra: dict[str, str] = field(default_factory=dict)
    breadcrumbs: list[str] = field(default_factory=list)


@dataclass(slots=True)
class ParsedDocument:
    source_path: Path
    source_type: str
    sections: list[ParsedSection]
    sha256: str | None = None

    @property
    def document_id(self) -> str:
        return str(self.source_path)


@dataclass(slots=True)
class Chunk:
    """Chunk produced by the ingestion pipeline."""

    chunk_id: str
    document_id: str
    source_path: str
    text: str
    start_token: int
    end_token: int
    page_number: int | None
    heading: str | None
    sha256: str
    extra: dict[str, str]
    breadcrumbs: list[str] = field(default_factory=list)

```

---

### ingest/parsers/__init__.py

```python
"""Document discovery and parsing utilities."""

from __future__ import annotations

from collections.abc import Callable, Iterable
from pathlib import Path

from ..models import ParsedDocument
from .docx import parse_docx
from .html import parse_html
from .image import parse_image
from .pdf import parse_pdf
from .text import parse_text
from .xlsx import parse_xlsx

Parser = Callable[[Path], ParsedDocument]

PARSERS: dict[str, Parser] = {
    ".txt": parse_text,
    ".md": parse_text,
    ".pdf": parse_pdf,
    ".docx": parse_docx,
    ".xlsx": parse_xlsx,
    ".html": parse_html,
    ".htm": parse_html,
    ".png": parse_image,
    ".jpg": parse_image,
    ".jpeg": parse_image,
    ".tif": parse_image,
    ".tiff": parse_image,
}


def discover_documents(content_root: Path) -> Iterable[Path]:
    for path in sorted(content_root.rglob("*")):
        if path.is_file() and path.suffix.lower() in PARSERS:
            yield path


def parse_document(path: Path) -> ParsedDocument:
    parser = PARSERS.get(path.suffix.lower())
    if parser is None:
        raise ValueError(f"Unsupported file extension: {path.suffix}")
    return parser(path)

```

---

### ingest/parsers/docx.py

```python
"""DOCX parser."""

from __future__ import annotations

from pathlib import Path

import docx

from ..models import ParsedDocument, ParsedSection


def _heading_level(style_name: str) -> int | None:
    if not style_name.lower().startswith("heading"):
        return None
    digits = "".join(ch for ch in style_name if ch.isdigit())
    if not digits:
        return 1
    try:
        return max(1, int(digits))
    except ValueError:
        return 1


def parse_docx(path: Path) -> ParsedDocument:
    document = docx.Document(str(path))
    sections: list[ParsedSection] = []
    breadcrumb_stack: list[str] = []

    for paragraph in document.paragraphs:
        text = paragraph.text.strip()
        if not text:
            continue
        style_name = paragraph.style.name if paragraph.style is not None else ""
        level = _heading_level(style_name or "")
        if level is not None:
            while len(breadcrumb_stack) >= level:
                breadcrumb_stack.pop()
            breadcrumb_stack.append(text)
            continue
        heading = breadcrumb_stack[-1] if breadcrumb_stack else None
        sections.append(
            ParsedSection(text=text, heading=heading, breadcrumbs=breadcrumb_stack.copy())
        )

    return ParsedDocument(
        source_path=path,
        source_type="docx",
        sections=sections,
    )

```

---

### ingest/parsers/html.py

```python
"""HTML parser using BeautifulSoup."""

from __future__ import annotations

from pathlib import Path

from bs4 import BeautifulSoup

from ..models import ParsedDocument, ParsedSection


def parse_html(path: Path) -> ParsedDocument:
    soup = BeautifulSoup(path.read_text(encoding="utf-8"), "html.parser")
    texts = []
    for heading in soup.find_all(["h1", "h2", "h3", "h4", "h5", "h6"]):
        heading_text = heading.get_text(strip=True)
        sibling_text = []
        for sibling in heading.next_siblings:
            if getattr(sibling, "name", None) in {"h1", "h2", "h3", "h4", "h5", "h6"}:
                break
            if isinstance(sibling, str):
                content = sibling.strip()
            else:
                content = sibling.get_text(" ", strip=True)
            if content:
                sibling_text.append(content)
        texts.append((heading_text, "\n".join(sibling_text)))

    if not texts:
        body_text = soup.get_text("\n", strip=True)
        texts.append(("", body_text))

    sections = [
        ParsedSection(
            text=content, heading=heading or None, breadcrumbs=[heading] if heading else []
        )
        for heading, content in texts
        if content
    ]
    return ParsedDocument(
        source_path=path,
        source_type="html",
        sections=sections,
    )

```

---

### ingest/parsers/image.py

```python
"""Image OCR parser."""

from __future__ import annotations

from pathlib import Path
from typing import Any, cast

from PIL import Image

from ..models import ParsedDocument, ParsedSection

try:  # pragma: no cover - optional dependency
    import pytesseract as _pytesseract
except Exception:  # pragma: no cover - runtime fallback
    _pytesseract = None

pytesseract: Any | None = _pytesseract


def parse_image(path: Path) -> ParsedDocument:
    text = ""
    if pytesseract is not None:  # pragma: no cover - requires external binary
        try:
            with Image.open(str(path)) as image:
                text = cast(str, pytesseract.image_to_string(image))
        except Exception:
            text = ""
    section = ParsedSection(text=text.strip(), breadcrumbs=["Image"])
    return ParsedDocument(
        source_path=path,
        source_type="image",
        sections=[section],
    )

```

---

### ingest/parsers/pdf.py

```python
"""PDF parsing including OCR fallback."""

from __future__ import annotations

import importlib
import io
from collections.abc import Iterable
from pathlib import Path
from typing import Any, cast

import fitz
from PIL import Image

from ..models import ParsedDocument, ParsedSection

pytesseract: Any | None
camelot: Any | None
tabula: Any | None

try:  # pragma: no cover - optional dependency
    pytesseract = importlib.import_module("pytesseract")
except Exception:  # pragma: no cover - runtime fallback
    pytesseract = None

try:  # pragma: no cover - optional dependency
    camelot = importlib.import_module("camelot")
except Exception:  # pragma: no cover
    camelot = None

try:  # pragma: no cover - optional dependency
    tabula = importlib.import_module("tabula")
except Exception:  # pragma: no cover
    tabula = None


def _extract_ocr(page: fitz.Page) -> str:
    if pytesseract is None:  # pragma: no cover - optional binary
        return ""
    try:
        pix = page.get_pixmap()
        buffer = io.BytesIO(pix.tobytes("png"))
        with Image.open(buffer) as image:
            return cast(str, pytesseract.image_to_string(image))
    except Exception:
        # If OCR tooling is unavailable at runtime, fall back silently
        return ""


def parse_pdf(path: Path) -> ParsedDocument:
    document = fitz.open(str(path))
    sections: list[ParsedSection] = []
    for index, page in enumerate(document, start=1):
        text = page.get_text("text")
        if not text.strip():
            text = _extract_ocr(page)
        breadcrumbs = [f"Page {index}"]
        sections.append(
            ParsedSection(text=text.strip(), page_number=index, breadcrumbs=breadcrumbs)
        )
    document.close()

    table_sections = list(_extract_tables(path))
    sections.extend(table_sections)

    return ParsedDocument(
        source_path=path,
        source_type="pdf",
        sections=sections,
    )


def _extract_tables(path: Path) -> Iterable[ParsedSection]:  # noqa: PLR0912
    tables_found = False
    if camelot is not None:  # pragma: no cover - requires camelot dependencies
        try:
            tables = camelot.read_pdf(str(path), pages="all")
        except Exception:
            tables = []
        for index, table in enumerate(tables, start=1):
            dataframe = getattr(table, "df", None)
            if dataframe is None:
                continue
            if dataframe.empty:
                continue
            tables_found = True
            cleaned = dataframe.fillna("")
            header = [str(cell).strip() for cell in cleaned.iloc[0].tolist()]
            rows = cleaned.iloc[1:]
            lines = [
                " | ".join(str(cell).strip() for cell in row.tolist()) for _, row in rows.iterrows()
            ]
            content = "\n".join(lines)
            if not content.strip():
                continue
            extra = {
                "is_table": "true",
                "table_headers": ", ".join(header),
            }
            page_number = getattr(table, "page", None)
            breadcrumbs = [f"Table {index}"]
            if page_number:
                extra["page_number"] = str(page_number)
                breadcrumbs.append(f"Page {page_number}")
            yield ParsedSection(
                text=content,
                page_number=int(page_number) if isinstance(page_number, int) else None,
                heading=f"Table {index}",
                extra=extra,
                breadcrumbs=breadcrumbs,
            )
    if tables_found:
        return

    if tabula is not None:  # pragma: no cover - requires java
        try:
            dataframes = tabula.read_pdf(str(path), pages="all", multiple_tables=True)
        except Exception:
            dataframes = []
        for index, dataframe in enumerate(dataframes, start=1):
            if dataframe is None or dataframe.empty:
                continue
            cleaned = dataframe.fillna("")
            header = [str(col).strip() for col in cleaned.columns]
            lines = [" | ".join(str(value).strip() for value in row) for row in cleaned.to_numpy()]
            content = "\n".join(lines)
            if not content.strip():
                continue
            extra = {
                "is_table": "true",
                "table_headers": ", ".join(header),
            }
            breadcrumbs = [f"Table {index}"]
            yield ParsedSection(
                text=content,
                heading=f"Table {index}",
                extra=extra,
                breadcrumbs=breadcrumbs,
            )

```

---

### ingest/parsers/text.py

```python
"""Plain text parser."""

from __future__ import annotations

from pathlib import Path

from ..models import ParsedDocument, ParsedSection


def parse_text(path: Path) -> ParsedDocument:
    text = path.read_text(encoding="utf-8")
    section = ParsedSection(text=text, breadcrumbs=["Text"])
    return ParsedDocument(
        source_path=path,
        source_type="text",
        sections=[section],
    )

```

---

### ingest/parsers/xlsx.py

```python
"""Parser for XLSX question and answer sheets."""

from __future__ import annotations

from dataclasses import dataclass
from pathlib import Path
from typing import TYPE_CHECKING, Any, Iterable, Iterator, Sequence, cast

try:  # pragma: no cover - optional runtime dependency
    from openpyxl import load_workbook as _load_workbook
except Exception:  # pragma: no cover - graceful fallback for typing
    _load_workbook = None  # type: ignore[assignment]

load_workbook: Any = _load_workbook

if TYPE_CHECKING:
    from openpyxl.worksheet.worksheet import Worksheet
else:  # pragma: no cover - runtime fallback
    Worksheet = Any  # type: ignore[assignment]

from ..models import ParsedDocument, ParsedSection

EXPECTED_COLUMNS = {"question", "answer"}


def _ensure_worksheet(candidate: Any) -> Worksheet | None:
    """Return a Worksheet when the object quacks like one, otherwise None."""
    if candidate is None:
        return None
    if hasattr(candidate, "iter_rows") and hasattr(candidate, "max_row"):
        return cast(Worksheet, candidate)
    return None


def _cell_to_str(value: Any) -> str:
    if value is None:
        return ""
    if isinstance(value, bool):
        return "true" if value else "false"
    if isinstance(value, (int, float)):
        text = f"{value}"
        return text[:-2] if text.endswith(".0") else text
    return str(value).strip()


def _coerce_int(value: str) -> int | None:
    text = value.strip()
    if not text:
        return None
    try:
        return int(text)
    except ValueError:
        try:
            return int(float(text))
        except ValueError:
            return None


def _cell_at(cells: Sequence[str], index: int) -> str:
    if 0 <= index < len(cells):
        return cells[index]
    return ""


@dataclass(slots=True)
class Row:
    cells: list[str]


def iter_rows_safe(ws: Worksheet | None) -> Iterator[Row]:
    sheet = _ensure_worksheet(ws)
    if sheet is None:
        return
    try:
        values_iter = cast(Iterable[Sequence[Any]], sheet.iter_rows(values_only=True))
        for raw in values_iter:
            yield Row([_cell_to_str(value) for value in raw])
    except Exception:  # pragma: no cover - defensive fallback
        cells_iter = cast(Iterable[Sequence[Any]], sheet.iter_rows())
        for raw in cells_iter:
            yield Row([_cell_to_str(getattr(cell, "value", None)) for cell in raw])


def _header_map(header_row: Sequence[str]) -> dict[str, int]:
    mapping: dict[str, int] = {}
    for idx, cell in enumerate(header_row):
        key = cell.strip().lower()
        if key:
            mapping[key] = idx
    return mapping


def parse_xlsx(path: Path) -> ParsedDocument:
    if load_workbook is None:  # pragma: no cover - import guard
        raise RuntimeError("openpyxl is required to parse XLSX documents")

    workbook = load_workbook(filename=str(path), data_only=True)

    candidate_sheets: list[Worksheet | None] = []
    active = _ensure_worksheet(getattr(workbook, "active", None))
    if active is not None:
        candidate_sheets.append(active)
    for name in getattr(workbook, "sheetnames", []):
        try:
            sheet = _ensure_worksheet(workbook[name])
        except Exception:  # pragma: no cover - defensive guard
            sheet = None
        if sheet is not None and sheet not in candidate_sheets:
            candidate_sheets.append(sheet)

    rows: list[Row] = []
    for sheet in candidate_sheets:
        rows = list(iter_rows_safe(sheet))
        if rows:
            break

    if not rows:
        return ParsedDocument(source_path=path, source_type="xlsx", sections=[])

    headers = rows[0].cells
    header_map = _header_map(headers)
    column_map = {name: header_map[name] for name in EXPECTED_COLUMNS if name in header_map}
    sections: list[ParsedSection] = []

    for row in rows[1:]:
        cells = row.cells
        if not any(cells):
            continue

        question_idx = column_map.get("question")
        answer_idx = column_map.get("answer")
        question = _cell_at(cells, question_idx).strip() if question_idx is not None else ""
        answer = _cell_at(cells, answer_idx).strip() if answer_idx is not None else ""

        if not question and not answer:
            continue

        extra: dict[str, str] = {}
        source_idx = header_map.get("source")
        if source_idx is not None:
            source = _cell_at(cells, source_idx).strip()
            if source:
                extra["source"] = source

        page = None
        page_idx = header_map.get("page")
        if page_idx is not None:
            page = _coerce_int(_cell_at(cells, page_idx))

        text = f"Q: {question}\nA: {answer}"
        breadcrumbs = ["Q&A"]
        sections.append(
            ParsedSection(text=text, page_number=page, extra=extra, breadcrumbs=breadcrumbs)
        )

    return ParsedDocument(source_path=path, source_type="xlsx", sections=sections)

```

---

### ingest/pipeline.py

```python
"""Ingestion pipeline orchestrating parsing, chunking, and indexing."""

from __future__ import annotations

import shutil
import time
from collections.abc import Sequence
from dataclasses import dataclass
from pathlib import Path
from typing import Any

from atticus.config import AppSettings, Manifest, load_manifest, load_settings, write_manifest
from atticus.embeddings import EmbeddingClient
from atticus.logging import configure_logging, log_event
from atticus.utils import sha256_file, sha256_text
from atticus.vector_db import PgVectorRepository, StoredChunk, save_metadata

from .chunker import chunk_document
from .models import ParsedDocument
from .parsers import discover_documents, parse_document


@dataclass(slots=True)
class IngestionOptions:
    full_refresh: bool = False
    paths: Sequence[Path] | None = None


@dataclass(slots=True)
class IngestionSummary:
    documents_processed: int
    documents_skipped: int
    chunks_indexed: int
    elapsed_seconds: float
    manifest_path: Path
    index_path: Path
    snapshot_path: Path
    ingested_at: str
    embedding_model: str
    embedding_model_version: str


def _snapshot_directory(settings: AppSettings, timestamp: str) -> Path:
    safe = timestamp.replace(":", "").replace("-", "")
    snapshot_dir = settings.snapshots_dir / safe
    snapshot_dir.mkdir(parents=True, exist_ok=True)
    return snapshot_dir


def ingest_corpus(  # noqa: PLR0915, PLR0912
    settings: AppSettings | None = None, options: IngestionOptions | None = None
) -> IngestionSummary:
    settings = settings or load_settings()
    options = options or IngestionOptions()
    settings.ensure_directories()
    logger = configure_logging(settings)

    if not settings.database_url:
        raise ValueError("DATABASE_URL must be configured before running ingestion")

    repo = PgVectorRepository(settings)
    repo.ensure_schema()

    ingest_time = settings.timestamp()
    start_time = time.time()
    manifest = load_manifest(settings.manifest_path)

    target_paths = (
        list(options.paths) if options.paths else list(discover_documents(settings.content_dir))
    )
    previous_docs = manifest.documents if manifest else {}

    reused_chunks: list[StoredChunk] = []
    reused_documents: dict[str, dict[str, Any]] = {}
    new_documents: list[ParsedDocument] = []
    skipped = 0
    document_lookup: dict[str, str] = {}

    for raw_path in target_paths:
        file_path = Path(raw_path)
        file_hash = sha256_file(file_path)
        manifest_entry = (
            previous_docs.get(str(file_path)) if manifest and not options.full_refresh else None
        )
        if manifest_entry and manifest_entry.get("sha256") == file_hash:
            existing_chunks = repo.fetch_chunks_for_source(str(file_path))
            if existing_chunks:
                for chunk in existing_chunks:
                    chunk.extra["embedding_model"] = settings.embed_model
                    chunk.extra["embedding_model_version"] = settings.embedding_model_version
                    chunk.extra["ingested_at"] = ingest_time
                    chunk.extra.setdefault("chunk_sha", chunk.sha256)
                reused_chunks.extend(existing_chunks)
                first = existing_chunks[0]
                reused_documents[first.document_id] = {
                    "document_id": first.document_id,
                    "source_path": str(file_path),
                    "sha256": str(manifest_entry.get("sha256", "")),
                    "source_type": manifest_entry.get("source_type"),
                    "chunks": existing_chunks,
                }
                document_lookup[str(file_path)] = str(manifest_entry.get("source_type", ""))
                skipped += 1
                continue
        document = parse_document(file_path)
        document.sha256 = file_hash
        new_documents.append(document)
        document_lookup[str(document.source_path)] = document.source_type

    new_parsed_chunks = []
    for document in new_documents:
        new_parsed_chunks.extend(chunk_document(document, settings))

    embed_client = EmbeddingClient(settings, logger=logger)
    embeddings = embed_client.embed_texts(chunk.text for chunk in new_parsed_chunks)

    stored_chunks: list[StoredChunk] = list(reused_chunks)
    chunks_by_document: dict[str, list[StoredChunk]] = {}
    for doc_id, info in reused_documents.items():
        chunks_by_document[doc_id] = list(info["chunks"])

    for index_counter, (parsed_chunk, embedding) in enumerate(
        zip(new_parsed_chunks, embeddings, strict=False), start=len(stored_chunks)
    ):
        metadata = {key: str(value) for key, value in parsed_chunk.extra.items()}
        metadata.setdefault("chunk_sha", parsed_chunk.sha256)
        if parsed_chunk.breadcrumbs:
            metadata.setdefault("breadcrumbs", " > ".join(parsed_chunk.breadcrumbs))
        metadata.setdefault("source_path", parsed_chunk.source_path)
        metadata.setdefault("document_id", parsed_chunk.document_id)
        metadata.setdefault("chunk_index", str(index_counter))
        metadata.setdefault(
            "source_type",
            metadata.get("source_type", document_lookup.get(parsed_chunk.source_path, "")),
        )
        metadata.setdefault("ingested_at", ingest_time)
        metadata.setdefault("embedding_model", settings.embed_model)
        metadata.setdefault("embedding_model_version", settings.embedding_model_version)
        metadata.setdefault("token_span", f"{parsed_chunk.start_token}:{parsed_chunk.end_token}")
        metadata.setdefault(
            "token_count", str(max(0, parsed_chunk.end_token - parsed_chunk.start_token))
        )
        chunk_object = StoredChunk(
            chunk_id=parsed_chunk.chunk_id,
            document_id=parsed_chunk.document_id,
            source_path=parsed_chunk.source_path,
            text=parsed_chunk.text,
            start_token=parsed_chunk.start_token,
            end_token=parsed_chunk.end_token,
            page_number=parsed_chunk.page_number,
            section=parsed_chunk.heading,
            sha256=parsed_chunk.sha256,
            embedding=list(embedding),
            extra=metadata,
        )
        stored_chunks.append(chunk_object)
        chunks_by_document.setdefault(parsed_chunk.document_id, []).append(chunk_object)

    for info in reused_documents.values():
        repo.replace_document(
            document_id=info["document_id"],
            source_path=info["source_path"],
            sha256=info["sha256"],
            source_type=info.get("source_type"),
            chunks=info["chunks"],
            ingest_time=ingest_time,
        )

    for document in new_documents:
        repo.replace_document(
            document_id=document.document_id,
            source_path=str(document.source_path),
            sha256=document.sha256 or "",
            source_type=document.source_type,
            chunks=chunks_by_document.get(document.document_id, []),
            ingest_time=ingest_time,
        )

    save_metadata(stored_chunks, settings.metadata_path)

    snapshot_dir = _snapshot_directory(settings, ingest_time)
    shutil.copy2(settings.metadata_path, snapshot_dir / "index_metadata.json")

    document_records: dict[str, dict[str, Any]] = {}
    for chunk in stored_chunks:
        entry = document_records.setdefault(
            chunk.source_path,
            {
                "sha256": previous_docs.get(chunk.source_path, {}).get("sha256")
                if manifest
                else None,
                "chunk_count": 0,
                "source_type": previous_docs.get(chunk.source_path, {}).get("source_type")
                if manifest
                else None,
            },
        )
        raw_count = entry.get("chunk_count", 0)
        if isinstance(raw_count, int):
            chunk_count = raw_count
        elif isinstance(raw_count, str) and raw_count.isdigit():
            chunk_count = int(raw_count)
        else:
            chunk_count = 0
        entry["chunk_count"] = chunk_count + 1

    for document in new_documents:
        record = document_records.setdefault(
            str(document.source_path),
            {"sha256": document.sha256, "chunk_count": 0, "source_type": document.source_type},
        )
        record["sha256"] = document.sha256
        record["source_type"] = document.source_type

    previous_paths = set(previous_docs.keys())
    current_paths = set(document_records.keys())
    removed_paths = previous_paths - current_paths
    for missing_path in removed_paths:
        repo.remove_document(missing_path)

    document_hashes = [
        f"{path}:{info.get('sha256', '')}" for path, info in sorted(document_records.items())
    ]
    corpus_hash = (
        sha256_text("|".join(document_hashes)) if document_hashes else sha256_text("empty")
    )

    index_identifier = Path("pgvector")
    metadata_snapshot_path = snapshot_dir / "index_metadata.json"

    manifest = Manifest(
        embedding_model=settings.embed_model,
        embedding_model_version=settings.embedding_model_version,
        embedding_dimensions=settings.embed_dimensions,
        chunk_size=settings.chunk_size,
        chunk_overlap_ratio=settings.chunk_overlap_ratio,
        corpus_hash=corpus_hash,
        document_count=len(document_records),
        chunk_count=len(stored_chunks),
        created_at=ingest_time,
        metadata_path=settings.metadata_path,
        index_path=index_identifier,
        snapshot_path=metadata_snapshot_path,
        documents=document_records,
    )
    write_manifest(settings.manifest_path, manifest)
    shutil.copy2(settings.manifest_path, snapshot_dir / "manifest.json")

    elapsed = time.time() - start_time
    summary = IngestionSummary(
        documents_processed=len(new_documents),
        documents_skipped=skipped,
        chunks_indexed=len(stored_chunks),
        elapsed_seconds=round(elapsed, 2),
        manifest_path=settings.manifest_path,
        index_path=index_identifier,
        snapshot_path=metadata_snapshot_path,
        ingested_at=ingest_time,
        embedding_model=settings.embed_model,
        embedding_model_version=settings.embedding_model_version,
    )

    log_event(
        logger,
        "ingestion_complete",
        documents_processed=summary.documents_processed,
        documents_skipped=summary.documents_skipped,
        chunks_indexed=summary.chunks_indexed,
        elapsed_seconds=summary.elapsed_seconds,
        embedding_model=settings.embed_model,
        embedding_model_version=settings.embedding_model_version,
        ingested_at=ingest_time,
    )

    return summary

```

---

### knip.json

```json
{
  "$schema": "https://unpkg.com/knip@5/schema.json",
  "entry": [
    "app/**/*.{ts,tsx}",
    "components/**/*.{ts,tsx}",
    "lib/**/*.{ts,tsx}",
    "scripts/**/*.{ts,tsx,js,mjs}",
    "tests/**/*.{ts,tsx}",
    "middleware.ts"
  ],
  "project": [
    "app/**/*.{ts,tsx}",
    "components/**/*.{ts,tsx}",
    "lib/**/*.{ts,tsx}",
    "scripts/**/*.{ts,tsx,js,mjs}",
    "tests/**/*.{ts,tsx}",
    "prisma/**/*.ts"
  ],
  "paths": {
    "@": ["."],
    "@/components": ["components"],
    "@/app": ["app"],
    "@/lib": ["lib"]
  },
  "ignoreDependencies": ["@auth/prisma-adapter", "clsx", "zod"],
  "ignore": ["archive/legacy-ui/**", "prisma/seed.ts", "scripts/route-audit.mjs"]
}

```

---

### lib/ask-client.ts

```ts
import {
  askRequestSchema,
  askResponseSchema,
  type AskRequest,
  type AskResponse,
} from "@/lib/ask-contract";

export type AskStreamEvent =
  | { type: "start"; requestId: string }
  | { type: "answer"; payload: AskResponse }
  | { type: "end"; requestId: string };

interface StreamOptions {
  signal?: AbortSignal;
  onEvent?: (event: AskStreamEvent) => void;
}

function parseSseChunk(chunk: string): AskStreamEvent | null {
  const lines = chunk.split("\n").filter(Boolean);
  let eventType = "answer";
  let dataLine = "";
  for (const line of lines) {
    if (line.startsWith("event:")) {
      eventType = line.slice(6).trim();
    }
    if (line.startsWith("data:")) {
      dataLine += line.slice(5).trim();
    }
  }
  if (!dataLine) {
    return null;
  }
  const payload = JSON.parse(dataLine);
  switch (eventType) {
    case "start":
      return { type: "start", requestId: payload.request_id ?? payload.requestId ?? "" };
    case "end":
      return { type: "end", requestId: payload.request_id ?? payload.requestId ?? "" };
    default:
      return { type: "answer", payload: askResponseSchema.parse(payload) };
  }
}

export async function streamAsk(
  request: AskRequest,
  options: StreamOptions = {}
): Promise<AskResponse> {
  const normalized = askRequestSchema.parse(request);
  const response = await fetch("/api/ask", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Accept: "text/event-stream",
    },
    body: JSON.stringify(normalized),
    signal: options.signal,
  });

  if (!response.ok) {
    const text = await response.text();
    throw new Error(text || "Unable to reach Atticus.");
  }

  const contentType = response.headers.get("content-type") ?? "";
  if (!contentType.includes("text/event-stream")) {
    const payload = await response.json();
    return askResponseSchema.parse(payload);
  }

  const reader = response.body?.getReader();
  if (!reader) {
    throw new Error("Streaming unsupported in this environment.");
  }

  const decoder = new TextDecoder();
  let buffer = "";
  let resolved: AskResponse | undefined;

  while (true) {
    const { value, done } = await reader.read();
    if (done) {
      break;
    }
    buffer += decoder.decode(value, { stream: true });
    let boundary = buffer.indexOf("\n\n");
    while (boundary !== -1) {
      const chunk = buffer.slice(0, boundary);
      buffer = buffer.slice(boundary + 2);
      const event = parseSseChunk(chunk);
      if (event) {
        options.onEvent?.(event);
        if (event.type === "answer") {
          resolved = event.payload;
        }
      }
      boundary = buffer.indexOf("\n\n");
    }
  }

  if (!resolved) {
    throw new Error("Stream ended without answer payload.");
  }
  return resolved;
}

```

---

### lib/ask-contract.ts

```ts
import { z } from "zod";

const askSourceSchema = z.object({
  path: z.string(),
  page: z.number().int().nullable().optional(),
  heading: z.string().nullable().optional(),
  chunkId: z.string().nullable().optional(),
  score: z.number().nullable().optional(),
});

export const askResponseSchema = z.object({
  answer: z.string(),
  confidence: z.number(),
  should_escalate: z.boolean(),
  request_id: z.string(),
  sources: z.array(askSourceSchema),
});

export const askRequestSchema = z.object({
  question: z.string().trim().min(1, "question is required"),
  filters: z
    .record(z.string(), z.unknown())
    .nullish()
    .transform((value) => (value ? Object.fromEntries(Object.entries(value)) : undefined)),
  contextHints: z
    .array(z.string().min(1))
    .nullish()
    .transform((value) => value ?? undefined),
  topK: z
    .number()
    .int()
    .min(1)
    .max(32)
    .nullish()
    .transform((value) => value ?? undefined),
});

export type AskResponse = z.infer<typeof askResponseSchema>;
export type AskRequest = z.infer<typeof askRequestSchema>;
export type AskSource = z.infer<typeof askSourceSchema>;

```

---

### lib/auth.ts

```ts
import { PrismaAdapter } from "@auth/prisma-adapter";
import type { Adapter, AdapterUser } from "next-auth/adapters";
import type { Session } from "next-auth";
import { getServerSession } from "next-auth/next";
import EmailProvider from "next-auth/providers/email";
import nodemailer from "nodemailer";
import fs from "node:fs/promises";
import path from "node:path";
import { Role } from "@prisma/client";
import { prisma } from "@/lib/prisma";

const defaultOrgId = process.env.DEFAULT_ORG_ID ?? "org-atticus";
const emailFrom = process.env.EMAIL_FROM ?? process.env.SMTP_FROM ?? "atticus@localhost";

function normalizeEmail(email: string): string {
  return email.trim().toLowerCase();
}

async function persistMagicLink(email: string, url: string) {
  const mailboxDir = process.env.AUTH_DEBUG_MAILBOX_DIR;
  if (!mailboxDir) {
    return;
  }
  const targetDir = path.resolve(mailboxDir);
  await fs.mkdir(targetDir, { recursive: true });
  const filePath = path.join(targetDir, `${normalizeEmail(email)}.txt`);
  const payload = `${new Date().toISOString()}\n${url}\n`;
  await fs.writeFile(filePath, payload, { encoding: "utf-8" });
}

const baseAdapter = PrismaAdapter(prisma) as Adapter;

type CreateUserParams = Parameters<NonNullable<Adapter["createUser"]>>[0];
type UpdateUserParams = Parameters<NonNullable<Adapter["updateUser"]>>[0];
type NextAuthHandler = (typeof import("next-auth/next"))["default"];
type ExtractAuthOptions<T> = T extends (...args: [...infer _Rest, infer Options]) => any
  ? Options
  : never;
type NextAuthConfig = ExtractAuthOptions<NextAuthHandler>;
type AuthCallbacks = NonNullable<NextAuthConfig["callbacks"]>;
type JwtCallbackParams = Parameters<NonNullable<AuthCallbacks["jwt"]>>[0];
type SessionCallbackParams = Parameters<NonNullable<AuthCallbacks["session"]>>[0];
type SignInCallbackParams = Parameters<NonNullable<AuthCallbacks["signIn"]>>[0];
type AuthEvents = NonNullable<NextAuthConfig["events"]>;
type CreateUserEventParams = Parameters<NonNullable<AuthEvents["createUser"]>>[0];

const adapter: Adapter = {
  ...baseAdapter,
  async createUser(data: CreateUserParams) {
    const userData = data as AdapterUser & { role?: Role; orgId?: string };
    if (!userData.email) {
      throw new Error("Email is required to create a user");
    }
    const normalized = normalizeEmail(userData.email);
    const created = await prisma.user.create({
      data: {
        email: normalized,
        name: userData.name ?? null,
        image: userData.image ?? null,
        emailVerified: userData.emailVerified ?? null,
        role: userData.role ?? Role.USER,
        orgId: userData.orgId ?? defaultOrgId,
      },
    });
    return created as unknown as AdapterUser;
  },
  async updateUser(data: UpdateUserParams) {
    if (!data.id) {
      throw new Error("updateUser requires an id");
    }
    const normalizedEmail = data.email ? normalizeEmail(data.email) : undefined;
    const updated = await prisma.user.update({
      where: { id: data.id as string },
      data: {
        name: data.name ?? undefined,
        image: data.image ?? undefined,
        email: normalizedEmail ?? undefined,
        emailVerified: data.emailVerified ?? undefined,
        role: (data as AdapterUser & { role?: Role }).role ?? Role.USER,
        orgId: (data as AdapterUser & { orgId?: string }).orgId ?? defaultOrgId,
      },
    });
    return updated as unknown as AdapterUser;
  },
};

function buildEmailServer() {
  const host = process.env.EMAIL_SERVER_HOST ?? process.env.SMTP_HOST ?? "localhost";
  const port = Number(process.env.EMAIL_SERVER_PORT ?? process.env.SMTP_PORT ?? 587);
  const user = process.env.EMAIL_SERVER_USER ?? process.env.SMTP_USER;
  const pass = process.env.EMAIL_SERVER_PASSWORD ?? process.env.SMTP_PASS;

  return {
    host,
    port,
    auth: user && pass ? { user, pass } : undefined,
    secure: port === 465,
  };
}

export const authOptions: NextAuthConfig = {
  adapter,
  session: { strategy: "database" },
  pages: {
    signIn: "/signin",
    verifyRequest: "/signin/verify",
  },
  providers: [
    EmailProvider({
      from: emailFrom,
      maxAge: 10 * 60,
      async sendVerificationRequest({ identifier, url }) {
        const server = buildEmailServer();
        const transport = nodemailer.createTransport(server);
        const to = normalizeEmail(identifier);
        await transport.sendMail({
          to,
          from: emailFrom,
          subject: "Your Atticus magic link",
          text: `Sign in to Atticus by opening this link:\n${url}\n`,
          html: `<p>Sign in to Atticus by selecting the button below.</p><p><a href="${url}">Complete sign-in</a></p>`,
        });
        await persistMagicLink(to, url);
      },
    }),
  ],
  secret: process.env.AUTH_SECRET,
  callbacks: {
    async jwt({ token, user }: JwtCallbackParams) {
      if (user) {
        token.userId = user.id;
        token.role = (user as AdapterUser & { role?: Role }).role ?? Role.USER;
        token.orgId = (user as AdapterUser & { orgId?: string }).orgId ?? defaultOrgId;
      }
      return token;
    },
    async session({ session, token }: SessionCallbackParams) {
      if (session.user && "userId" in token && token.userId) {
        const enrichedUser = session.user as NonNullable<Session["user"]>;
        enrichedUser.id = token.userId as string;
        enrichedUser.role = (token.role as Role | undefined) ?? Role.USER;
        enrichedUser.orgId = (token.orgId as string | undefined) ?? defaultOrgId;
      }
      return session;
    },
    async signIn({ user }: SignInCallbackParams) {
      if (!user.email) {
        return false;
      }
      const normalized = normalizeEmail(user.email);
      const existing = await prisma.user.findUnique({ where: { email: normalized } });
      if (!existing) {
        return false;
      }
      if (!existing.orgId) {
        await prisma.user.update({
          where: { id: existing.id },
          data: { orgId: defaultOrgId },
        });
      }
      return true;
    },
  },
  events: {
    async createUser({ user }: CreateUserEventParams) {
      if (!user.email) {
        return;
      }
      await prisma.user.update({
        where: { id: user.id },
        data: {
          email: normalizeEmail(user.email),
          orgId: (user as AdapterUser & { orgId?: string }).orgId ?? defaultOrgId,
          role: (user as AdapterUser & { role?: Role }).role ?? Role.USER,
        },
      });
    },
  },
};

export function getServerAuthSession(): Promise<Session | null> {
  return getServerSession(authOptions);
}

```

---

### lib/chat-capture.ts

```ts
import { Prisma, Role } from "@prisma/client";
import type { AskResponse } from "@/lib/ask-contract";
import { getServerAuthSession } from "@/lib/auth";
import { withRlsContext } from "@/lib/rls";

function parseConfidenceThreshold(): number {
  const raw = process.env.CONFIDENCE_THRESHOLD;
  if (!raw) {
    return 0.7;
  }
  const parsed = Number(raw);
  if (Number.isNaN(parsed) || parsed <= 0 || parsed > 1) {
    return 0.7;
  }
  return parsed;
}

function serializeSources(sources: AskResponse["sources"]): Prisma.JsonArray {
  return sources
    .map((source) => ({
      path: source.path,
      page: source.page ?? null,
      heading: source.heading ?? null,
      chunkId: source.chunkId ?? null,
      score: source.score ?? null,
    }))
    .filter((item) => item.path) as Prisma.JsonArray;
}

type CaptureArgs = {
  question: string;
  response: AskResponse;
};

export async function captureLowConfidenceChat({ question, response }: CaptureArgs): Promise<void> {
  const threshold = parseConfidenceThreshold();
  if (!response.should_escalate && response.confidence >= threshold) {
    return;
  }

  const session = await getServerAuthSession();
  if (!session?.user?.id || !session.user.orgId) {
    return;
  }

  try {
    await withRlsContext(session, async (tx) => {
      const now = new Date();
      const auditLog: Prisma.JsonArray = [
        {
          action: "captured",
          at: now.toISOString(),
          confidence: response.confidence,
          requestId: response.request_id,
        },
      ];

      const chat = await tx.chat.create({
        data: {
          orgId: session.user.orgId,
          userId: session.user.id,
          question,
          answer: response.answer,
          confidence: response.confidence,
          status: "pending_review",
          requestId: response.request_id,
          topSources: serializeSources(response.sources),
          auditLog,
        },
        select: { id: true },
      });

      await tx.ragEvent.create({
        data: {
          orgId: session.user.orgId,
          actorId: session.user.id,
          actorRole: session.user.role ?? Role.USER,
          action: "chat.captured",
          entity: "chat",
          chatId: chat.id,
          requestId: response.request_id,
          after: {
            status: "pending_review",
            confidence: response.confidence,
            requestId: response.request_id,
          },
        },
      });
    });
  } catch (error) {
    console.error("Failed to capture low-confidence chat", error);
  }
}

```

---

### lib/prisma.ts

```ts
import { PrismaClient, Prisma } from "@prisma/client";

type GlobalWithPrisma = typeof globalThis & {
  prisma?: PrismaClient;
};

const globalForPrisma = globalThis as GlobalWithPrisma;

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === "development" ? ["query", "error", "warn"] : ["error"],
  });

if (process.env.NODE_ENV !== "production") {
  globalForPrisma.prisma = prisma;
}

type PrismaContextClient = PrismaClient | Prisma.TransactionClient;

export async function setRlsContext(
  client: PrismaContextClient,
  options: { userId: string; role: string; orgId: string }
) {
  const { userId, role, orgId } = options;
  await client.$executeRaw`SELECT set_config('app.current_user_id', ${userId}, true)`;
  await client.$executeRaw`SELECT set_config('app.current_user_role', ${role}, true)`;
  await client.$executeRaw`SELECT set_config('app.current_org_id', ${orgId}, true)`;
}

export async function clearRlsContext(client: PrismaContextClient) {
  await client.$executeRaw`SELECT set_config('app.current_user_id', '', true)`;
  await client.$executeRaw`SELECT set_config('app.current_user_role', 'SERVICE', true)`;
  await client.$executeRaw`SELECT set_config('app.current_org_id', '', true)`;
}

```

---

### lib/rbac.ts

```ts
import { Role } from "@prisma/client";
import type { Session } from "next-auth";

export class ForbiddenError extends Error {
  constructor(message = "Forbidden") {
    super(message);
    this.name = "ForbiddenError";
  }
}

export class UnauthorizedError extends Error {
  constructor(message = "Unauthorized") {
    super(message);
    this.name = "UnauthorizedError";
  }
}

export function requireSession(session: Session | null): Session {
  if (!session?.user?.id) {
    throw new UnauthorizedError();
  }
  return session;
}

export function ensureRole(session: Session | null, allowed: Role[]): Session {
  const activeSession = requireSession(session);
  if (!allowed.includes(activeSession.user.role)) {
    throw new ForbiddenError("Insufficient role");
  }
  return activeSession;
}

export function canReviewGlossary(session: Session | null): Session {
  return ensureRole(session, [Role.ADMIN, Role.REVIEWER]);
}

export function canEditGlossary(session: Session | null): Session {
  return ensureRole(session, [Role.ADMIN]);
}

```

---

### lib/rls.ts

```ts
import type { Session } from "next-auth";
import type { Prisma } from "@prisma/client";
import { prisma, setRlsContext, clearRlsContext } from "@/lib/prisma";

export async function withRlsContext<T>(
  session: Session | null,
  fn: (client: Prisma.TransactionClient) => Promise<T>
): Promise<T> {
  if (!session?.user?.id || !session.user.orgId || !session.user.role) {
    throw new Error("RBAC enforcement requires an authenticated session");
  }

  return prisma.$transaction(async (tx) => {
    await setRlsContext(tx, {
      userId: session.user.id,
      role: session.user.role,
      orgId: session.user.orgId,
    });

    try {
      return await fn(tx);
    } finally {
      await clearRlsContext(tx);
    }
  });
}

```

---

### lib/utils.ts

```ts
import { clsx, type ClassValue } from "clsx";

export function cn(...inputs: ClassValue[]) {
  return clsx(...inputs);
}

```

---

### middleware.ts

```ts
import { withAuth } from "next-auth/middleware";
import { NextResponse } from "next/server";
import type { NextRequestWithAuth } from "next-auth/middleware";

type TokenRole = "USER" | "REVIEWER" | "ADMIN" | undefined;

export default withAuth(
  function middleware(request: NextRequestWithAuth) {
    const role = request.nextauth.token?.role as TokenRole;
    const isAuthenticated = Boolean(request.nextauth.token);

    if (request.nextUrl.pathname.startsWith("/api/glossary")) {
      if (!isAuthenticated) {
        return NextResponse.json({ error: "unauthorized" }, { status: 401 });
      }
      if (role !== "ADMIN") {
        return NextResponse.json({ error: "forbidden" }, { status: 403 });
      }
      return NextResponse.next();
    }

    if (!isAuthenticated) {
      const signinUrl = new URL("/signin", request.url);
      signinUrl.searchParams.set("from", request.nextUrl.pathname);
      return NextResponse.redirect(signinUrl);
    }

    if (role !== "ADMIN") {
      return NextResponse.redirect(new URL("/", request.url));
    }

    return NextResponse.next();
  },
  {
    callbacks: {
      authorized: () => true,
    },
  }
);

export const config = {
  matcher: ["/admin/:path*", "/api/glossary/:path*"],
};

```

---

### next-auth.d.ts

```ts
import { DefaultSession, DefaultUser } from "next-auth";
import { Role } from "@prisma/client";

declare module "next-auth" {
  interface Session extends DefaultSession {
    user?: {
      id: string;
      role: Role;
      orgId: string;
    } & DefaultSession["user"];
    expires: DefaultSession["expires"];
  }

  interface User extends DefaultUser {
    role: Role;
    orgId: string;
  }
}

declare module "next-auth/jwt" {
  interface JWT {
    userId: string;
    role: Role;
    orgId: string;
  }
}

```

---

### next-env.d.ts

```ts
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.

```

---

### next.config.js

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  experimental: {
    serverActions: {
      bodySizeLimit: "2mb",
    },
  },
  output: "standalone",
  eslint: {
    ignoreDuringBuilds: false,
  },
  typescript: {
    ignoreBuildErrors: false,
  },
};

module.exports = nextConfig;

```

---

### nginx/Dockerfile

```dockerfile
FROM nginx:stable-alpine

COPY nginx.conf /etc/nginx/nginx.conf

# Certificates are mounted at runtime from ./nginx/certs

```

---

### package-lock.json

```json
{
  "name": "atticus",
  "version": "0.8.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "atticus",
      "version": "0.8.0",
      "dependencies": {
        "@auth/prisma-adapter": "^2.10.0",
        "@prisma/client": "^5.18.0",
        "@radix-ui/react-dialog": "^1.1.15",
        "@radix-ui/react-slot": "^1.0.4",
        "@radix-ui/react-tabs": "^1.0.5",
        "clsx": "^2.1.1",
        "lucide-react": "^0.452.0",
        "next": "^14.2.33",
        "next-auth": "^4.24.7",
        "nodemailer": "^6.9.14",
        "react": "18.2.0",
        "react-dom": "18.2.0",
        "react-markdown": "^10.1.0",
        "remark-gfm": "^4.0.1",
        "zod": "^4.1.11"
      },
      "devDependencies": {
        "@playwright/test": "^1.45.2",
        "@types/node": "20.14.9",
        "@types/nodemailer": "^7.0.1",
        "@types/react": "18.3.5",
        "@types/react-dom": "18.3.0",
        "autoprefixer": "10.4.20",
        "eslint": "8.57.0",
        "eslint-config-next": "14.2.5",
        "eslint-config-prettier": "^9.1.0",
        "eslint-plugin-tailwindcss": "^3.13.0",
        "knip": "^5.64.1",
        "postcss": "8.4.40",
        "prettier": "^3.3.3",
        "prettier-plugin-tailwindcss": "^0.5.14",
        "prisma": "^5.18.0",
        "tailwindcss": "3.4.10",
        "ts-node": "^10.9.2",
        "typescript": "5.4.5",
        "vitest": "^3.2.4"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@auth/prisma-adapter": {
      "version": "2.10.0",
      "resolved": "https://registry.npmjs.org/@auth/prisma-adapter/-/prisma-adapter-2.10.0.tgz",
      "integrity": "sha512-EliOQoTjGK87jWWqnJvlQjbR4PjQZQqtwRwPAe108WwT9ubuuJJIrL68aNnQr4hFESz6P7SEX2bZy+y2yL37Gw==",
      "license": "ISC",
      "dependencies": {
        "@auth/core": "0.40.0"
      },
      "peerDependencies": {
        "@prisma/client": ">=2.26.0 || >=3 || >=4 || >=5 || >=6"
      }
    },
    "node_modules/@auth/prisma-adapter/node_modules/@auth/core": {
      "version": "0.40.0",
      "resolved": "https://registry.npmjs.org/@auth/core/-/core-0.40.0.tgz",
      "integrity": "sha512-n53uJE0RH5SqZ7N1xZoMKekbHfQgjd0sAEyUbE+IYJnmuQkbvuZnXItCU7d+i7Fj8VGOgqvNO7Mw4YfBTlZeQw==",
      "license": "ISC",
      "dependencies": {
        "@panva/hkdf": "^1.2.1",
        "jose": "^6.0.6",
        "oauth4webapi": "^3.3.0",
        "preact": "10.24.3",
        "preact-render-to-string": "6.5.11"
      },
      "peerDependencies": {
        "@simplewebauthn/browser": "^9.0.1",
        "@simplewebauthn/server": "^9.0.2",
        "nodemailer": "^6.8.0"
      },
      "peerDependenciesMeta": {
        "@simplewebauthn/browser": {
          "optional": true
        },
        "@simplewebauthn/server": {
          "optional": true
        },
        "nodemailer": {
          "optional": true
        }
      }
    },
    "node_modules/@auth/prisma-adapter/node_modules/jose": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/jose/-/jose-6.1.0.tgz",
      "integrity": "sha512-TTQJyoEoKcC1lscpVDCSsVgYzUDg/0Bt3WE//WiTPK6uOCQC2KZS4MpugbMWt/zyjkopgZoXhZuCi00gLudfUA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/@auth/prisma-adapter/node_modules/oauth4webapi": {
      "version": "3.8.2",
      "resolved": "https://registry.npmjs.org/oauth4webapi/-/oauth4webapi-3.8.2.tgz",
      "integrity": "sha512-FzZZ+bht5X0FKe7Mwz3DAVAmlH1BV5blSak/lHMBKz0/EBMhX6B10GlQYI51+oRp8ObJaX0g6pXrAxZh5s8rjw==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/@auth/prisma-adapter/node_modules/preact-render-to-string": {
      "version": "6.5.11",
      "resolved": "https://registry.npmjs.org/preact-render-to-string/-/preact-render-to-string-6.5.11.tgz",
      "integrity": "sha512-ubnauqoGczeGISiOh6RjX0/cdaF8v/oDXIjO85XALCQjwQP+SB4RDXXtvZ6yTYSjG+PC1QRP2AhPgCEsM2EvUw==",
      "license": "MIT",
      "peerDependencies": {
        "preact": ">=10"
      }
    },
    "node_modules/@aws-crypto/sha256-browser": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/sha256-browser/-/sha256-browser-5.2.0.tgz",
      "integrity": "sha512-AXfN/lGotSQwu6HNcEsIASo7kWXZ5HYWvfOmSNKDsEqC4OashTp8alTmaz+F7TC2L083SFv5RdB+qU3Vs1kZqw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-js": "^5.2.0",
        "@aws-crypto/supports-web-crypto": "^5.2.0",
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "@aws-sdk/util-locate-window": "^3.0.0",
        "@smithy/util-utf8": "^2.0.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/is-array-buffer": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-2.2.0.tgz",
      "integrity": "sha512-GGP3O9QFD24uGeAXYUjwSTXARoqpZykHadOmA8G5vfJPK0/DC67qa//0qvqrJzL1xc8WQWX7/yc7fwudjPHPhA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/util-buffer-from": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-2.2.0.tgz",
      "integrity": "sha512-IJdWBbTcMQ6DA0gdNhh/BwrLkDR+ADW5Kr1aZmd4k3DIF6ezMV4R2NIAmT08wQJ3yUK82thHWmC/TnK/wpMMIA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/util-utf8": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-2.3.0.tgz",
      "integrity": "sha512-R8Rdn8Hy72KKcebgLiv8jQcQkXoLMOGGv5uI1/k0l+snqkOzQ1R0ChUBCxWMlBsFMekWjq0wRudIweFs7sKT5A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-js": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/sha256-js/-/sha256-js-5.2.0.tgz",
      "integrity": "sha512-FFQQyu7edu4ufvIZ+OadFpHHOt+eSTBaYaki44c+akjg7qZg9oOQeLlk77F6tSYqjDAFClrHJk9tMf0HdVyOvA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/@aws-crypto/supports-web-crypto": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/supports-web-crypto/-/supports-web-crypto-5.2.0.tgz",
      "integrity": "sha512-iAvUotm021kM33eCdNfwIN//F77/IADDSs58i+MDaOqFrVjZo9bAal0NK7HurRuWLLpF1iLX7gbWrjHjeo+YFg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/util": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/util/-/util-5.2.0.tgz",
      "integrity": "sha512-4RkU9EsI6ZpBve5fseQlGNUWKMa1RLPQ1dnjnQoe07ldfIzcsGb5hC5W0Dm7u423KWzawlrpbjXBrXCEv9zazQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "^3.222.0",
        "@smithy/util-utf8": "^2.0.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/is-array-buffer": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-2.2.0.tgz",
      "integrity": "sha512-GGP3O9QFD24uGeAXYUjwSTXARoqpZykHadOmA8G5vfJPK0/DC67qa//0qvqrJzL1xc8WQWX7/yc7fwudjPHPhA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-2.2.0.tgz",
      "integrity": "sha512-IJdWBbTcMQ6DA0gdNhh/BwrLkDR+ADW5Kr1aZmd4k3DIF6ezMV4R2NIAmT08wQJ3yUK82thHWmC/TnK/wpMMIA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-2.3.0.tgz",
      "integrity": "sha512-R8Rdn8Hy72KKcebgLiv8jQcQkXoLMOGGv5uI1/k0l+snqkOzQ1R0ChUBCxWMlBsFMekWjq0wRudIweFs7sKT5A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-sdk/client-sesv2": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/client-sesv2/-/client-sesv2-3.896.0.tgz",
      "integrity": "sha512-KqWoxNmSKw4KYDrB3IH6AIfX855Dlorya1PcRqODa16xUp8aqoYACuBq+cjSuy5F6j9YDGSZgc20JDmWQRkN8Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/credential-provider-node": "3.896.0",
        "@aws-sdk/middleware-host-header": "3.893.0",
        "@aws-sdk/middleware-logger": "3.893.0",
        "@aws-sdk/middleware-recursion-detection": "3.893.0",
        "@aws-sdk/middleware-user-agent": "3.896.0",
        "@aws-sdk/region-config-resolver": "3.893.0",
        "@aws-sdk/signature-v4-multi-region": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/util-endpoints": "3.895.0",
        "@aws-sdk/util-user-agent-browser": "3.893.0",
        "@aws-sdk/util-user-agent-node": "3.896.0",
        "@smithy/config-resolver": "^4.2.2",
        "@smithy/core": "^3.12.0",
        "@smithy/fetch-http-handler": "^5.2.1",
        "@smithy/hash-node": "^4.1.1",
        "@smithy/invalid-dependency": "^4.1.1",
        "@smithy/middleware-content-length": "^4.1.1",
        "@smithy/middleware-endpoint": "^4.2.4",
        "@smithy/middleware-retry": "^4.3.0",
        "@smithy/middleware-serde": "^4.1.1",
        "@smithy/middleware-stack": "^4.1.1",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/node-http-handler": "^4.2.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-body-length-browser": "^4.1.0",
        "@smithy/util-body-length-node": "^4.1.0",
        "@smithy/util-defaults-mode-browser": "^4.1.4",
        "@smithy/util-defaults-mode-node": "^4.1.4",
        "@smithy/util-endpoints": "^3.1.2",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-retry": "^4.1.2",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/client-sso": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/client-sso/-/client-sso-3.896.0.tgz",
      "integrity": "sha512-mpE3mrNili1dcvEvxaYjyoib8HlRXkb2bY5a3WeK++KObFY+HUujKtgQmiNSRX5YwQszm//fTrmGMmv9zpMcKg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/middleware-host-header": "3.893.0",
        "@aws-sdk/middleware-logger": "3.893.0",
        "@aws-sdk/middleware-recursion-detection": "3.893.0",
        "@aws-sdk/middleware-user-agent": "3.896.0",
        "@aws-sdk/region-config-resolver": "3.893.0",
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/util-endpoints": "3.895.0",
        "@aws-sdk/util-user-agent-browser": "3.893.0",
        "@aws-sdk/util-user-agent-node": "3.896.0",
        "@smithy/config-resolver": "^4.2.2",
        "@smithy/core": "^3.12.0",
        "@smithy/fetch-http-handler": "^5.2.1",
        "@smithy/hash-node": "^4.1.1",
        "@smithy/invalid-dependency": "^4.1.1",
        "@smithy/middleware-content-length": "^4.1.1",
        "@smithy/middleware-endpoint": "^4.2.4",
        "@smithy/middleware-retry": "^4.3.0",
        "@smithy/middleware-serde": "^4.1.1",
        "@smithy/middleware-stack": "^4.1.1",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/node-http-handler": "^4.2.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-body-length-browser": "^4.1.0",
        "@smithy/util-body-length-node": "^4.1.0",
        "@smithy/util-defaults-mode-browser": "^4.1.4",
        "@smithy/util-defaults-mode-node": "^4.1.4",
        "@smithy/util-endpoints": "^3.1.2",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-retry": "^4.1.2",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/core": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/core/-/core-3.896.0.tgz",
      "integrity": "sha512-uJaoyWKeGNyCyeI+cIJrD7LEB4iF/W8/x2ij7zg32OFpAAJx96N34/e+XSKp/xkJpO5FKiBOskKLnHeUsJsAPA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/xml-builder": "3.894.0",
        "@smithy/core": "^3.12.0",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/signature-v4": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-env": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-env/-/credential-provider-env-3.896.0.tgz",
      "integrity": "sha512-Cnqhupdkp825ICySrz4QTI64Nq3AmUAscPW8dueanni0avYBDp7RBppX4H0+6icqN569B983XNfQ0YSImQhfhg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-http": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-http/-/credential-provider-http-3.896.0.tgz",
      "integrity": "sha512-CN0fTCKCUA1OTSx1c76o8XyJCy2WoI/av3J8r8mL6GmxTerhLRyzDy/MwxzPjTYPoL+GLEg6V4a9fRkWj1hBUA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/fetch-http-handler": "^5.2.1",
        "@smithy/node-http-handler": "^4.2.1",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/util-stream": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-ini": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-ini/-/credential-provider-ini-3.896.0.tgz",
      "integrity": "sha512-+rbYG98czzwZLTYHJasK+VBjnIeXk73mRpZXHvaa4kDNxBezdN2YsoGNpLlPSxPdbpq18LY3LRtkdFTaT6DIQA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/credential-provider-env": "3.896.0",
        "@aws-sdk/credential-provider-http": "3.896.0",
        "@aws-sdk/credential-provider-process": "3.896.0",
        "@aws-sdk/credential-provider-sso": "3.896.0",
        "@aws-sdk/credential-provider-web-identity": "3.896.0",
        "@aws-sdk/nested-clients": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/credential-provider-imds": "^4.1.2",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-node": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-node/-/credential-provider-node-3.896.0.tgz",
      "integrity": "sha512-J0Jm+56MNngk1PIyqoJFf5FC2fjA4CYXlqODqNRDtid7yk7HB9W3UTtvxofmii5KJOLcHGNPdGnHWKkUc+xYgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/credential-provider-env": "3.896.0",
        "@aws-sdk/credential-provider-http": "3.896.0",
        "@aws-sdk/credential-provider-ini": "3.896.0",
        "@aws-sdk/credential-provider-process": "3.896.0",
        "@aws-sdk/credential-provider-sso": "3.896.0",
        "@aws-sdk/credential-provider-web-identity": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/credential-provider-imds": "^4.1.2",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-process": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-process/-/credential-provider-process-3.896.0.tgz",
      "integrity": "sha512-UfWVMQPZy7dus40c4LWxh5vQ+I51z0q4vf09Eqas5848e9DrGRG46GYIuc/gy+4CqEypjbg/XNMjnZfGLHxVnQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-sso": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-sso/-/credential-provider-sso-3.896.0.tgz",
      "integrity": "sha512-77Te8WrVdLABKlv7QyetXP6aYEX1UORiahLA1PXQb/p66aFBw18Xc6JiN/6zJ4RqdyV1Xr9rwYBwGYua93ANIA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/client-sso": "3.896.0",
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/token-providers": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-web-identity": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-web-identity/-/credential-provider-web-identity-3.896.0.tgz",
      "integrity": "sha512-gwMwZWumo+V0xJplO8j2HIb1TfPsF9fbcRGXS0CanEvjg4fF2Xs1pOQl2oCw3biPZpxHB0plNZjqSF2eneGg9g==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/nested-clients": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-host-header": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-host-header/-/middleware-host-header-3.893.0.tgz",
      "integrity": "sha512-qL5xYRt80ahDfj9nDYLhpCNkDinEXvjLe/Qen/Y/u12+djrR2MB4DRa6mzBCkLkdXDtf0WAoW2EZsNCfGrmOEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-logger": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-logger/-/middleware-logger-3.893.0.tgz",
      "integrity": "sha512-ZqzMecjju5zkBquSIfVfCORI/3Mge21nUY4nWaGQy+NUXehqCGG4W7AiVpiHGOcY2cGJa7xeEkYcr2E2U9U0AA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-recursion-detection": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-recursion-detection/-/middleware-recursion-detection-3.893.0.tgz",
      "integrity": "sha512-H7Zotd9zUHQAr/wr3bcWHULYhEeoQrF54artgsoUGIf/9emv6LzY89QUccKIxYd6oHKNTrTyXm9F0ZZrzXNxlg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@aws/lambda-invoke-store": "^0.0.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-sdk-s3": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-sdk-s3/-/middleware-sdk-s3-3.896.0.tgz",
      "integrity": "sha512-hlPu/AZ5Afa4ZafP+aXIjRtKm7BX57lurA+TJ+7nXm1Az8Du3Sg2tZXP2/GfqTztLIFQYj/Jy5smkJ0+1HNAPQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/util-arn-parser": "3.893.0",
        "@smithy/core": "^3.12.0",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/signature-v4": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/util-config-provider": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-stream": "^4.3.2",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-user-agent": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-user-agent/-/middleware-user-agent-3.896.0.tgz",
      "integrity": "sha512-so/3tZH34YIeqG/QJgn5ZinnmHRdXV1ehsj4wVUrezL/dVW86jfwIkQIwpw8roOC657UoUf91c9FDhCxs3J5aQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/util-endpoints": "3.895.0",
        "@smithy/core": "^3.12.0",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/nested-clients": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/nested-clients/-/nested-clients-3.896.0.tgz",
      "integrity": "sha512-KaHALB6DIXScJL/ExmonADr3jtTV6dpOHoEeTRSskJ/aW+rhZo7kH8SLmrwOT/qX8d5tza17YyR/oRkIKY6Eaw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/middleware-host-header": "3.893.0",
        "@aws-sdk/middleware-logger": "3.893.0",
        "@aws-sdk/middleware-recursion-detection": "3.893.0",
        "@aws-sdk/middleware-user-agent": "3.896.0",
        "@aws-sdk/region-config-resolver": "3.893.0",
        "@aws-sdk/types": "3.893.0",
        "@aws-sdk/util-endpoints": "3.895.0",
        "@aws-sdk/util-user-agent-browser": "3.893.0",
        "@aws-sdk/util-user-agent-node": "3.896.0",
        "@smithy/config-resolver": "^4.2.2",
        "@smithy/core": "^3.12.0",
        "@smithy/fetch-http-handler": "^5.2.1",
        "@smithy/hash-node": "^4.1.1",
        "@smithy/invalid-dependency": "^4.1.1",
        "@smithy/middleware-content-length": "^4.1.1",
        "@smithy/middleware-endpoint": "^4.2.4",
        "@smithy/middleware-retry": "^4.3.0",
        "@smithy/middleware-serde": "^4.1.1",
        "@smithy/middleware-stack": "^4.1.1",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/node-http-handler": "^4.2.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/smithy-client": "^4.6.4",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-body-length-browser": "^4.1.0",
        "@smithy/util-body-length-node": "^4.1.0",
        "@smithy/util-defaults-mode-browser": "^4.1.4",
        "@smithy/util-defaults-mode-node": "^4.1.4",
        "@smithy/util-endpoints": "^3.1.2",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-retry": "^4.1.2",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/region-config-resolver": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/region-config-resolver/-/region-config-resolver-3.893.0.tgz",
      "integrity": "sha512-/cJvh3Zsa+Of0Zbg7vl9wp/kZtdb40yk/2+XcroAMVPO9hPvmS9r/UOm6tO7FeX4TtkRFwWaQJiTZTgSdsPY+Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/types": "^4.5.0",
        "@smithy/util-config-provider": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/signature-v4-multi-region": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/signature-v4-multi-region/-/signature-v4-multi-region-3.896.0.tgz",
      "integrity": "sha512-txiQDEZXL9tlNP8mbnNaDtuHBYc/FCqaZ8Y76qnfM3o6CTIn0t0tTAlnx1CyFe4EaikVBgQuZvj5KfNA8PmlzA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/middleware-sdk-s3": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/signature-v4": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/token-providers": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/token-providers/-/token-providers-3.896.0.tgz",
      "integrity": "sha512-WBoD+RY7tUfW9M+wGrZ2vdveR+ziZOjGHWFY3lcGnDvI8KE+fcSccEOTxgJBNBS5Z8B+WHKU2sZjb+Z7QqGwjw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.896.0",
        "@aws-sdk/nested-clients": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/types": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/types/-/types-3.893.0.tgz",
      "integrity": "sha512-Aht1nn5SnA0N+Tjv0dzhAY7CQbxVtmq1bBR6xI0MhG7p2XYVh1wXuKTzrldEvQWwA3odOYunAfT9aBiKZx9qIg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-arn-parser": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-arn-parser/-/util-arn-parser-3.893.0.tgz",
      "integrity": "sha512-u8H4f2Zsi19DGnwj5FSZzDMhytYF/bCh37vAtBsn3cNDL3YG578X5oc+wSX54pM3tOxS+NY7tvOAo52SW7koUA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-endpoints": {
      "version": "3.895.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-endpoints/-/util-endpoints-3.895.0.tgz",
      "integrity": "sha512-MhxBvWbwxmKknuggO2NeMwOVkHOYL98pZ+1ZRI5YwckoCL3AvISMnPJgfN60ww6AIXHGpkp+HhpFdKOe8RHSEg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "@smithy/util-endpoints": "^3.1.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-locate-window": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-locate-window/-/util-locate-window-3.893.0.tgz",
      "integrity": "sha512-T89pFfgat6c8nMmpI8eKjBcDcgJq36+m9oiXbcUzeU55MP9ZuGgBomGjGnHaEyF36jenW9gmg3NfZDm0AO2XPg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-user-agent-browser": {
      "version": "3.893.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-user-agent-browser/-/util-user-agent-browser-3.893.0.tgz",
      "integrity": "sha512-PE9NtbDBW6Kgl1bG6A5fF3EPo168tnkj8TgMcT0sg4xYBWsBpq0bpJZRh+Jm5Bkwiw9IgTCLjEU7mR6xWaMB9w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.893.0",
        "@smithy/types": "^4.5.0",
        "bowser": "^2.11.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-sdk/util-user-agent-node": {
      "version": "3.896.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-user-agent-node/-/util-user-agent-node-3.896.0.tgz",
      "integrity": "sha512-jegizucAwoxyBddKl0kRGNEgRHcfGuMeyhP1Nf+wIUmHz/9CxobIajqcVk/KRNLdZY5mSn7YG2VtP3z0BcBb0w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/middleware-user-agent": "3.896.0",
        "@aws-sdk/types": "3.893.0",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "aws-crt": ">=1.0.0"
      },
      "peerDependenciesMeta": {
        "aws-crt": {
          "optional": true
        }
      }
    },
    "node_modules/@aws-sdk/xml-builder": {
      "version": "3.894.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/xml-builder/-/xml-builder-3.894.0.tgz",
      "integrity": "sha512-E6EAMc9dT1a2DOdo4zyOf3fp5+NJ2wI+mcm7RaW1baFIWDwcb99PpvWoV7YEiK7oaBDshuOEGWKUSYXdW+JYgA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "fast-xml-parser": "5.2.5",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws/lambda-invoke-store": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/@aws/lambda-invoke-store/-/lambda-invoke-store-0.0.1.tgz",
      "integrity": "sha512-ORHRQ2tmvnBXc8t/X9Z8IcSbBA4xTLKuN873FopzklHMeqBst7YG0d+AX97inkvDX+NChYtSr+qGfcqGFaI8Zw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.28.4.tgz",
      "integrity": "sha512-Q/N6JNWvIvPnLDvjlE1OUBLPQHH6l3CltCEsHIujp45zQUSSh8K+gHnaEX45yAT1nyngnINhvWtzN+Nb9D8RAQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@cspotcode/source-map-support": {
      "version": "0.8.1",
      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.8.1.tgz",
      "integrity": "sha512-IchNf6dN4tHoMFIn/7OE8LWZ19Y6q/67Bmf6vnGREv8RSbBVb9LPJxEcnwrcwX6ixSvaiGoomAUvu4YSxXrVgw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "0.3.9"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@cspotcode/source-map-support/node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.9.tgz",
      "integrity": "sha512-3Belt6tdc8bPgAtbcmdtNJlirVoTmEb5e2gC94PnkwEW9jI6CAHUeoG85tjWP5WquqfavoMtMwiG4P926ZKKuQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.0.3",
        "@jridgewell/sourcemap-codec": "^1.4.10"
      }
    },
    "node_modules/@emnapi/core": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@emnapi/core/-/core-1.5.0.tgz",
      "integrity": "sha512-sbP8GzB1WDzacS8fgNPpHlp6C9VZe+SJP3F90W9rLemaQj2PzIuTEl1qDOYQf58YIpyjViI24y9aPWCjEzY2cg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/wasi-threads": "1.1.0",
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/runtime": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.5.0.tgz",
      "integrity": "sha512-97/BJ3iXHww3djw6hYIfErCZFee7qCtrneuLa20UXFCOTCfBM2cvQHjWJ2EG0s0MtdNwInarqCTz35i4wWXHsQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/wasi-threads": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@emnapi/wasi-threads/-/wasi-threads-1.1.0.tgz",
      "integrity": "sha512-WI0DdZ8xFSbgMjR1sFsKABJ/C5OnRrjT06JXbZKexJGrDuPTzZdDYfFlsgcCXCyf+suG5QU2e/y1Wo2V/OapLQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.10.tgz",
      "integrity": "sha512-0NFWnA+7l41irNuaSVlLfgNT12caWJVLzp5eAVhZ0z1qpxbockccEt3s+149rE64VUI3Ml2zt8Nv5JVc4QXTsw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.10.tgz",
      "integrity": "sha512-dQAxF1dW1C3zpeCDc5KqIYuZ1tgAdRXNoZP7vkBIRtKZPYe2xVr/d3SkirklCHudW1B45tGiUlz2pUWDfbDD4w==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.10.tgz",
      "integrity": "sha512-LSQa7eDahypv/VO6WKohZGPSJDq5OVOo3UoFR1E4t4Gj1W7zEQMUhI+lo81H+DtB+kP+tDgBp+M4oNCwp6kffg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.10.tgz",
      "integrity": "sha512-MiC9CWdPrfhibcXwr39p9ha1x0lZJ9KaVfvzA0Wxwz9ETX4v5CHfF09bx935nHlhi+MxhA63dKRRQLiVgSUtEg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.10.tgz",
      "integrity": "sha512-JC74bdXcQEpW9KkV326WpZZjLguSZ3DfS8wrrvPMHgQOIEIG/sPXEN/V8IssoJhbefLRcRqw6RQH2NnpdprtMA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.10.tgz",
      "integrity": "sha512-tguWg1olF6DGqzws97pKZ8G2L7Ig1vjDmGTwcTuYHbuU6TTjJe5FXbgs5C1BBzHbJ2bo1m3WkQDbWO2PvamRcg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.10.tgz",
      "integrity": "sha512-3ZioSQSg1HT2N05YxeJWYR+Libe3bREVSdWhEEgExWaDtyFbbXWb49QgPvFH8u03vUPX10JhJPcz7s9t9+boWg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.10.tgz",
      "integrity": "sha512-LLgJfHJk014Aa4anGDbh8bmI5Lk+QidDmGzuC2D+vP7mv/GeSN+H39zOf7pN5N8p059FcOfs2bVlrRr4SK9WxA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.10.tgz",
      "integrity": "sha512-oR31GtBTFYCqEBALI9r6WxoU/ZofZl962pouZRTEYECvNF/dtXKku8YXcJkhgK/beU+zedXfIzHijSRapJY3vg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.10.tgz",
      "integrity": "sha512-5luJWN6YKBsawd5f9i4+c+geYiVEw20FVW5x0v1kEMWNq8UctFjDiMATBxLvmmHA4bf7F6hTRaJgtghFr9iziQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.10.tgz",
      "integrity": "sha512-NrSCx2Kim3EnnWgS4Txn0QGt0Xipoumb6z6sUtl5bOEZIVKhzfyp/Lyw4C1DIYvzeW/5mWYPBFJU3a/8Yr75DQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.10.tgz",
      "integrity": "sha512-xoSphrd4AZda8+rUDDfD9J6FUMjrkTz8itpTITM4/xgerAZZcFW7Dv+sun7333IfKxGG8gAq+3NbfEMJfiY+Eg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.10.tgz",
      "integrity": "sha512-ab6eiuCwoMmYDyTnyptoKkVS3k8fy/1Uvq7Dj5czXI6DF2GqD2ToInBI0SHOp5/X1BdZ26RKc5+qjQNGRBelRA==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.10.tgz",
      "integrity": "sha512-NLinzzOgZQsGpsTkEbdJTCanwA5/wozN9dSgEl12haXJBzMTpssebuXR42bthOF3z7zXFWH1AmvWunUCkBE4EA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.10.tgz",
      "integrity": "sha512-FE557XdZDrtX8NMIeA8LBJX3dC2M8VGXwfrQWU7LB5SLOajfJIxmSdyL/gU1m64Zs9CBKvm4UAuBp5aJ8OgnrA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.10.tgz",
      "integrity": "sha512-3BBSbgzuB9ajLoVZk0mGu+EHlBwkusRmeNYdqmznmMc9zGASFjSsxgkNsqmXugpPk00gJ0JNKh/97nxmjctdew==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.10.tgz",
      "integrity": "sha512-QSX81KhFoZGwenVyPoberggdW1nrQZSvfVDAIUXr3WqLRZGZqWk/P4T8p2SP+de2Sr5HPcvjhcJzEiulKgnxtA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.10.tgz",
      "integrity": "sha512-AKQM3gfYfSW8XRk8DdMCzaLUFB15dTrZfnX8WXQoOUpUBQ+NaAFCP1kPS/ykbbGYz7rxn0WS48/81l9hFl3u4A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.10.tgz",
      "integrity": "sha512-7RTytDPGU6fek/hWuN9qQpeGPBZFfB4zZgcz2VK2Z5VpdUxEI8JKYsg3JfO0n/Z1E/6l05n0unDCNc4HnhQGig==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.10.tgz",
      "integrity": "sha512-5Se0VM9Wtq797YFn+dLimf2Zx6McttsH2olUBsDml+lm0GOCRVebRWUvDtkY4BWYv/3NgzS8b/UM3jQNh5hYyw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.10.tgz",
      "integrity": "sha512-XkA4frq1TLj4bEMB+2HnI0+4RnjbuGZfet2gs/LNs5Hc7D89ZQBHQ0gL2ND6Lzu1+QVkjp3x1gIcPKzRNP8bXw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.10.tgz",
      "integrity": "sha512-AVTSBhTX8Y/Fz6OmIVBip9tJzZEUcY8WLh7I59+upa5/GPhh2/aM6bvOMQySspnCCHvFi79kMtdJS1w0DXAeag==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.10.tgz",
      "integrity": "sha512-fswk3XT0Uf2pGJmOpDB7yknqhVkJQkAQOcW/ccVOtfx05LkbWOaRAtn5SaqXypeKQra1QaEa841PgrSL9ubSPQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.10.tgz",
      "integrity": "sha512-ah+9b59KDTSfpaCg6VdJoOQvKjI33nTaQr4UluQwW7aEwZQsbMCfTmfEO4VyewOxx4RaDT/xCy9ra2GPWmO7Kw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.10.tgz",
      "integrity": "sha512-QHPDbKkrGO8/cz9LKVnJU22HOi4pxZnZhhA2HYHez5Pz4JeffhDjf85E57Oyco163GnzNCVkZK0b/n4Y0UHcSw==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.10.tgz",
      "integrity": "sha512-9KpxSVFCu0iK1owoez6aC/s/EdUQLDN3adTxGCqxMVhrPDj6bt5dbrHDXUuq+Bs2vATFBBrQS5vdQ/Ed2P+nbw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.1.4.tgz",
      "integrity": "sha512-269Z39MS6wVJtsoUl10L60WdkhJVdPG24Q4eZTH3nnF6lpvSShEK3wQjDX9JRWAUPvPh7COouPpU9IrqaZFvtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.6.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.57.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.57.0.tgz",
      "integrity": "sha512-Ys+3g2TaW7gADOJzPt83SJtCDhMjndcDMFVQ/Tj9iA1BfJzFKD9mAUXT3OenpuPHbI6P/myECxRJrofUsDx/5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.11.14",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.11.14.tgz",
      "integrity": "sha512-3T8LkOmg45BV5FICb15QQMsyUSWrQ8AygVfC7ZG32zOalnqrilm018ZVCw0eapXux8FtA33q8PSRSstjee3jSg==",
      "deprecated": "Use @eslint/config-array instead",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanwhocodes/object-schema": "^2.0.2",
        "debug": "^4.3.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-2.0.3.tgz",
      "integrity": "sha512-93zYdMES/c1D69yZiKDBj0V24vqNzB/koF26KPaagAfd3P/4gUlh3Dys5ogAK+Exi9QyzlD8x/08Zt7wIKcDcA==",
      "deprecated": "Use @eslint/object-schema instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@isaacs/cliui": {
      "version": "8.0.2",
      "resolved": "https://registry.npmjs.org/@isaacs/cliui/-/cliui-8.0.2.tgz",
      "integrity": "sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^5.1.2",
        "string-width-cjs": "npm:string-width@^4.2.0",
        "strip-ansi": "^7.0.1",
        "strip-ansi-cjs": "npm:strip-ansi@^6.0.1",
        "wrap-ansi": "^8.1.0",
        "wrap-ansi-cjs": "npm:wrap-ansi@^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@napi-rs/wasm-runtime": {
      "version": "0.2.12",
      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
      "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.4.3",
        "@emnapi/runtime": "^1.4.3",
        "@tybys/wasm-util": "^0.10.0"
      }
    },
    "node_modules/@next/env": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/env/-/env-14.2.33.tgz",
      "integrity": "sha512-CgVHNZ1fRIlxkLhIX22flAZI/HmpDaZ8vwyJ/B0SDPTBuLZ1PJ+DWMjCHhqnExfmSQzA/PbZi8OAc7PAq2w9IA==",
      "license": "MIT"
    },
    "node_modules/@next/eslint-plugin-next": {
      "version": "14.2.5",
      "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-14.2.5.tgz",
      "integrity": "sha512-LY3btOpPh+OTIpviNojDpUdIbHW9j0JBYBjsIp8IxtDFfYFyORvw3yNq6N231FVqQA7n7lwaf7xHbVJlA1ED7g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "glob": "10.3.10"
      }
    },
    "node_modules/@next/eslint-plugin-next/node_modules/glob": {
      "version": "10.3.10",
      "resolved": "https://registry.npmjs.org/glob/-/glob-10.3.10.tgz",
      "integrity": "sha512-fa46+tv1Ak0UPK1TOy/pZrIybNNt4HCv7SDzwyfiOZkvZLEbjsZkJBPtDHVshZjbecAoAGSC20MjLDG/qr679g==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "foreground-child": "^3.1.0",
        "jackspeak": "^2.3.5",
        "minimatch": "^9.0.1",
        "minipass": "^5.0.0 || ^6.0.2 || ^7.0.0",
        "path-scurry": "^1.10.1"
      },
      "bin": {
        "glob": "dist/esm/bin.mjs"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@next/eslint-plugin-next/node_modules/jackspeak": {
      "version": "2.3.6",
      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-2.3.6.tgz",
      "integrity": "sha512-N3yCS/NegsOBokc8GAdM8UcmfsKiSS8cipheD/nivzr700H+nsMOxJjQnvwOcRYVuFkdH0wGUvW2WbXGmrZGbQ==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "@isaacs/cliui": "^8.0.2"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      },
      "optionalDependencies": {
        "@pkgjs/parseargs": "^0.11.0"
      }
    },
    "node_modules/@next/swc-darwin-arm64": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-14.2.33.tgz",
      "integrity": "sha512-HqYnb6pxlsshoSTubdXKu15g3iivcbsMXg4bYpjL2iS/V6aQot+iyF4BUc2qA/J/n55YtvE4PHMKWBKGCF/+wA==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-darwin-x64": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-14.2.33.tgz",
      "integrity": "sha512-8HGBeAE5rX3jzKvF593XTTFg3gxeU4f+UWnswa6JPhzaR6+zblO5+fjltJWIZc4aUalqTclvN2QtTC37LxvZAA==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-gnu": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-14.2.33.tgz",
      "integrity": "sha512-JXMBka6lNNmqbkvcTtaX8Gu5by9547bukHQvPoLe9VRBx1gHwzf5tdt4AaezW85HAB3pikcvyqBToRTDA4DeLw==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-musl": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-14.2.33.tgz",
      "integrity": "sha512-Bm+QulsAItD/x6Ih8wGIMfRJy4G73tu1HJsrccPW6AfqdZd0Sfm5Imhgkgq2+kly065rYMnCOxTBvmvFY1BKfg==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-gnu": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-14.2.33.tgz",
      "integrity": "sha512-FnFn+ZBgsVMbGDsTqo8zsnRzydvsGV8vfiWwUo1LD8FTmPTdV+otGSWKc4LJec0oSexFnCYVO4hX8P8qQKaSlg==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-musl": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-14.2.33.tgz",
      "integrity": "sha512-345tsIWMzoXaQndUTDv1qypDRiebFxGYx9pYkhwY4hBRaOLt8UGfiWKr9FSSHs25dFIf8ZqIFaPdy5MljdoawA==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-arm64-msvc": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-14.2.33.tgz",
      "integrity": "sha512-nscpt0G6UCTkrT2ppnJnFsYbPDQwmum4GNXYTeoTIdsmMydSKFz9Iny2jpaRupTb+Wl298+Rh82WKzt9LCcqSQ==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-ia32-msvc": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-ia32-msvc/-/swc-win32-ia32-msvc-14.2.33.tgz",
      "integrity": "sha512-pc9LpGNKhJ0dXQhZ5QMmYxtARwwmWLpeocFmVG5Z0DzWq5Uf0izcI8tLc+qOpqxO1PWqZ5A7J1blrUIKrIFc7Q==",
      "cpu": [
        "ia32"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-x64-msvc": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-14.2.33.tgz",
      "integrity": "sha512-nOjfZMy8B94MdisuzZo9/57xuFVLHJaDj5e/xrduJp9CV2/HrfxTRH2fbyLe+K9QT41WBLUd4iXX3R7jBp0EUg==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nolyfill/is-core-module": {
      "version": "1.0.39",
      "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
      "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.4.0"
      }
    },
    "node_modules/@oxc-resolver/binding-android-arm-eabi": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-android-arm-eabi/-/binding-android-arm-eabi-11.8.3.tgz",
      "integrity": "sha512-er6onTUX8NMF5kBNGHCF8S6vxWVJS5BKO6SmLRW5nfZgHDHWsESH1YgyKpO6n6HBd/x58+7r9/1fxF3N8z911A==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@oxc-resolver/binding-android-arm64": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-android-arm64/-/binding-android-arm64-11.8.3.tgz",
      "integrity": "sha512-VJMGaFYTu5YoZ0kpRhQQQoqNsYuAbPEHb/b/gEqpNpl/zHtvLWha8fYqTGtH7Wu9ajA2ESdWVqOzbBRMjQ/5qA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@oxc-resolver/binding-darwin-arm64": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-darwin-arm64/-/binding-darwin-arm64-11.8.3.tgz",
      "integrity": "sha512-IipM4uDZNZ4GEvmq0g5iRS4Di3YoEhf/BdkvqIFq35rZA9EvYn/csxAJb05H7HDzbLENIUfMvP18eyHt3juU+A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@oxc-resolver/binding-darwin-x64": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-darwin-x64/-/binding-darwin-x64-11.8.3.tgz",
      "integrity": "sha512-gJQnRKe60CNyx+KE7ffKouG15hIoV0mnM3fGGbXRUXW7hVYv2WIiKAJeNn/o/EQhT5i1GrfvskVZCHTwHljuxQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@oxc-resolver/binding-freebsd-x64": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-freebsd-x64/-/binding-freebsd-x64-11.8.3.tgz",
      "integrity": "sha512-UphzSWPIHKuVt6zDoNBzj03SfQIk73cBjfzQXK33asriLMv9kPrt2k5Aaea/ZB2bphv5MAf1BxyacYgT0hjBuA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-arm-gnueabihf": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-arm-gnueabihf/-/binding-linux-arm-gnueabihf-11.8.3.tgz",
      "integrity": "sha512-kjVGH0BIJTCefpNWcD9PrHYzXLMeofHzHqykgPc+OIBdv7KKjtE2FPeQ6PAJFzsB1BbwK0AOtKppajwfpyt1jw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-arm-musleabihf": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-arm-musleabihf/-/binding-linux-arm-musleabihf-11.8.3.tgz",
      "integrity": "sha512-e+BDNYfkOKQSSF8KMrD7FwbBzbN+9mn14pCJk5pLLH9Mtxv5EHB6LrVqLS4nbQt3ZxLwG6WWWlMPv1sdQhxNNQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-arm64-gnu": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-arm64-gnu/-/binding-linux-arm64-gnu-11.8.3.tgz",
      "integrity": "sha512-LD97VZB8KxJGEDSh4bzNExBK32nOAIPnmaKUU1bl6L3nd8YnhwK/l7RZPRsz//At/+0MGjf0Pg/fxYdW7OARjQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-arm64-musl": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-arm64-musl/-/binding-linux-arm64-musl-11.8.3.tgz",
      "integrity": "sha512-K9AUdi2Fd8RL4j5j2pACUcHbOawamt7nVn7yRI5+eOEfyn7bBsFvCVdKN4aKBLQxdAOFURK+uRWrVfR2xUkjww==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-ppc64-gnu": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-ppc64-gnu/-/binding-linux-ppc64-gnu-11.8.3.tgz",
      "integrity": "sha512-Ur5+jodHcL1lHlt7zye5K709qX4hagOdKequxrQYLaOC9zFJtpu+967PYw6bmedtnQERhyaGSfPzZ8u/TUgqWw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-riscv64-gnu": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-riscv64-gnu/-/binding-linux-riscv64-gnu-11.8.3.tgz",
      "integrity": "sha512-RgJHdrTTONup/55Y/eqyrIw2R3hG/1vBMI7+WGLjiF5zxJmVO8tLYcQklV92MKDxrLL7O36GZTZ6mPk57TVf9w==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-riscv64-musl": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-riscv64-musl/-/binding-linux-riscv64-musl-11.8.3.tgz",
      "integrity": "sha512-zni4rfmy+JoR1ubY2puIgwR+3ATpmsIsZR8dzskKRuy+i4ghwo6uOQn3wXcMBiuY4yJ0XsOZBZe1OoAl1/rELw==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-s390x-gnu": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-s390x-gnu/-/binding-linux-s390x-gnu-11.8.3.tgz",
      "integrity": "sha512-7u96LbjV6cGcvfGopwDHiuhrasE+0YZPshZFDyEO4QGm8rc+R9XgSsvUUCspRTuwc/J70u7c0cxONm6TYECkyA==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-x64-gnu": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-x64-gnu/-/binding-linux-x64-gnu-11.8.3.tgz",
      "integrity": "sha512-zgOg25vdttzLz1uCP/5hyMlLgczPSct8lBI8oBhh+oTjEmDTJdqWnjXgk/ugrQGw66j8Ud9eAZL+IWkHaaLSxA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-linux-x64-musl": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-linux-x64-musl/-/binding-linux-x64-musl-11.8.3.tgz",
      "integrity": "sha512-xac1SimfZ8grHyn3V3RTptDhQ8sSVdF0j1CsGGpG6ODyku+LcNvhwy6fjxuaT3Z+Zgsi1wchXQNDA62YkDUvZQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@oxc-resolver/binding-wasm32-wasi": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-wasm32-wasi/-/binding-wasm32-wasi-11.8.3.tgz",
      "integrity": "sha512-zt2+ohZbPg0M9cADMLnImVRXXBJVd5tlOqzH9z4wdFTA1mHojIeSrHaW8c30ZzopbFIER0GTyY+YxAsf0bhIeQ==",
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@napi-rs/wasm-runtime": "^1.0.5"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@oxc-resolver/binding-wasm32-wasi/node_modules/@napi-rs/wasm-runtime": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-1.0.5.tgz",
      "integrity": "sha512-TBr9Cf9onSAS2LQ2+QHx6XcC6h9+RIzJgbqG3++9TUZSH204AwEy5jg3BTQ0VATsyoGj4ee49tN/y6rvaOOtcg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.5.0",
        "@emnapi/runtime": "^1.5.0",
        "@tybys/wasm-util": "^0.10.1"
      }
    },
    "node_modules/@oxc-resolver/binding-win32-arm64-msvc": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-win32-arm64-msvc/-/binding-win32-arm64-msvc-11.8.3.tgz",
      "integrity": "sha512-je6MDeDP9PI4TGG3mcQ1ELzA4Y1O7+Dwxnc4sCxm6MkAiCi6G5UMSKsXp1f/UlcTdQn3hOJOv7d1KK8MbvRpPw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@oxc-resolver/binding-win32-ia32-msvc": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-win32-ia32-msvc/-/binding-win32-ia32-msvc-11.8.3.tgz",
      "integrity": "sha512-9GtBrZgJw3+dP0x/FHh/viiaQ+kgnVJr5jLG0ZDEci9vFOdc/XJkNXYs84mBlZcWK1HCj80VDBqqNGm4zYYIXA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@oxc-resolver/binding-win32-x64-msvc": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/@oxc-resolver/binding-win32-x64-msvc/-/binding-win32-x64-msvc-11.8.3.tgz",
      "integrity": "sha512-MoathdI2zWifsGPsgnZjYplEm2NJ4pZxu8eSCYCe+8TToDRpQ+D8BTcr8Fox2AyNEQdT57l/0LzID4812+3f/A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@panva/hkdf": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@panva/hkdf/-/hkdf-1.2.1.tgz",
      "integrity": "sha512-6oclG6Y3PiDFcoyk8srjLfVKyMfVCKJ27JwNPViuXziFpmdz+MZnZN/aKY0JGXgYuO/VghU0jcOAZgWXZ1Dmrw==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/@pkgjs/parseargs": {
      "version": "0.11.0",
      "resolved": "https://registry.npmjs.org/@pkgjs/parseargs/-/parseargs-0.11.0.tgz",
      "integrity": "sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@playwright/test": {
      "version": "1.55.1",
      "resolved": "https://registry.npmjs.org/@playwright/test/-/test-1.55.1.tgz",
      "integrity": "sha512-IVAh/nOJaw6W9g+RJVlIQJ6gSiER+ae6mKQ5CX1bERzQgbC1VSeBlwdvczT7pxb0GWiyrxH4TGKbMfDb4Sq/ig==",
      "devOptional": true,
      "license": "Apache-2.0",
      "dependencies": {
        "playwright": "1.55.1"
      },
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@prisma/client": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/@prisma/client/-/client-5.22.0.tgz",
      "integrity": "sha512-M0SVXfyHnQREBKxCgyo7sffrKttwE6R8PMq330MIUF0pTwjUhLbW84pFDlf06B27XyCR++VtjugEnIHdr07SVA==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=16.13"
      },
      "peerDependencies": {
        "prisma": "*"
      },
      "peerDependenciesMeta": {
        "prisma": {
          "optional": true
        }
      }
    },
    "node_modules/@prisma/debug": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/@prisma/debug/-/debug-5.22.0.tgz",
      "integrity": "sha512-AUt44v3YJeggO2ZU5BkXI7M4hu9BF2zzH2iF2V5pyXT/lRTyWiElZ7It+bRH1EshoMRxHgpYg4VB6rCM+mG5jQ==",
      "devOptional": true,
      "license": "Apache-2.0"
    },
    "node_modules/@prisma/engines": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/@prisma/engines/-/engines-5.22.0.tgz",
      "integrity": "sha512-UNjfslWhAt06kVL3CjkuYpHAWSO6L4kDCVPegV6itt7nD1kSJavd3vhgAEhjglLJJKEdJ7oIqDJ+yHk6qO8gPA==",
      "devOptional": true,
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@prisma/debug": "5.22.0",
        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
        "@prisma/fetch-engine": "5.22.0",
        "@prisma/get-platform": "5.22.0"
      }
    },
    "node_modules/@prisma/engines-version": {
      "version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
      "resolved": "https://registry.npmjs.org/@prisma/engines-version/-/engines-version-5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2.tgz",
      "integrity": "sha512-2PTmxFR2yHW/eB3uqWtcgRcgAbG1rwG9ZriSvQw+nnb7c4uCr3RAcGMb6/zfE88SKlC1Nj2ziUvc96Z379mHgQ==",
      "devOptional": true,
      "license": "Apache-2.0"
    },
    "node_modules/@prisma/fetch-engine": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/@prisma/fetch-engine/-/fetch-engine-5.22.0.tgz",
      "integrity": "sha512-bkrD/Mc2fSvkQBV5EpoFcZ87AvOgDxbG99488a5cexp5Ccny+UM6MAe/UFkUC0wLYD9+9befNOqGiIJhhq+HbA==",
      "devOptional": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@prisma/debug": "5.22.0",
        "@prisma/engines-version": "5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",
        "@prisma/get-platform": "5.22.0"
      }
    },
    "node_modules/@prisma/get-platform": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/@prisma/get-platform/-/get-platform-5.22.0.tgz",
      "integrity": "sha512-pHhpQdr1UPFpt+zFfnPazhulaZYCUqeIcPpJViYoq9R+D/yw4fjE+CtnsnKzPYm0ddUbeXUzjGVGIRVgPDCk4Q==",
      "devOptional": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@prisma/debug": "5.22.0"
      }
    },
    "node_modules/@radix-ui/primitive": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/@radix-ui/primitive/-/primitive-1.1.3.tgz",
      "integrity": "sha512-JTF99U/6XIjCBo0wqkU5sK10glYe27MRRsfwoiq5zzOEZLHU3A3KCMa5X/azekYRCJ0HlwI0crAXS/5dEHTzDg==",
      "license": "MIT"
    },
    "node_modules/@radix-ui/react-collection": {
      "version": "1.1.7",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-collection/-/react-collection-1.1.7.tgz",
      "integrity": "sha512-Fh9rGN0MoI4ZFUNyfFVNU4y9LUz93u9/0K+yLgA2bwRojxM8JU1DyvvMBabnZPBgMWREAJvU2jjVzq+LrFUglw==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-context": "1.1.2",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-slot": "1.2.3"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-compose-refs": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-compose-refs/-/react-compose-refs-1.1.2.tgz",
      "integrity": "sha512-z4eqJvfiNnFMHIIvXP3CY57y2WJs5g2v3X0zm9mEJkrkNv4rDxu+sg9Jh8EkXyeqBkB7SOcboo9dMVqhyrACIg==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-context": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-context/-/react-context-1.1.2.tgz",
      "integrity": "sha512-jCi/QKUM2r1Ju5a3J64TH2A5SpKAgh0LpknyqdQ4m6DCV0xJ2HG1xARRwNGPQfi1SLdLWZ1OJz6F4OMBBNiGJA==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-dialog": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-dialog/-/react-dialog-1.1.15.tgz",
      "integrity": "sha512-TCglVRtzlffRNxRMEyR36DGBLJpeusFcgMVD9PZEzAKnUs1lKCgX5u9BmC2Yg+LL9MgZDugFFs1Vl+Jp4t/PGw==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/primitive": "1.1.3",
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-context": "1.1.2",
        "@radix-ui/react-dismissable-layer": "1.1.11",
        "@radix-ui/react-focus-guards": "1.1.3",
        "@radix-ui/react-focus-scope": "1.1.7",
        "@radix-ui/react-id": "1.1.1",
        "@radix-ui/react-portal": "1.1.9",
        "@radix-ui/react-presence": "1.1.5",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-slot": "1.2.3",
        "@radix-ui/react-use-controllable-state": "1.2.2",
        "aria-hidden": "^1.2.4",
        "react-remove-scroll": "^2.6.3"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-direction": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-direction/-/react-direction-1.1.1.tgz",
      "integrity": "sha512-1UEWRX6jnOA2y4H5WczZ44gOOjTEmlqv1uNW4GAJEO5+bauCBhv8snY65Iw5/VOS/ghKN9gr2KjnLKxrsvoMVw==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-dismissable-layer": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-dismissable-layer/-/react-dismissable-layer-1.1.11.tgz",
      "integrity": "sha512-Nqcp+t5cTB8BinFkZgXiMJniQH0PsUt2k51FUhbdfeKvc4ACcG2uQniY/8+h1Yv6Kza4Q7lD7PQV0z0oicE0Mg==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/primitive": "1.1.3",
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-use-callback-ref": "1.1.1",
        "@radix-ui/react-use-escape-keydown": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-focus-guards": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-focus-guards/-/react-focus-guards-1.1.3.tgz",
      "integrity": "sha512-0rFg/Rj2Q62NCm62jZw0QX7a3sz6QCQU0LpZdNrJX8byRGaGVTqbrW9jAoIAHyMQqsNpeZ81YgSizOt5WXq0Pw==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-focus-scope": {
      "version": "1.1.7",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-focus-scope/-/react-focus-scope-1.1.7.tgz",
      "integrity": "sha512-t2ODlkXBQyn7jkl6TNaw/MtVEVvIGelJDCG41Okq/KwUsJBwQ4XVZsHAVUkK4mBv3ewiAS3PGuUWuY2BoK4ZUw==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-use-callback-ref": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-id": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-id/-/react-id-1.1.1.tgz",
      "integrity": "sha512-kGkGegYIdQsOb4XjsfM97rXsiHaBwco+hFI66oO4s9LU+PLAC5oJ7khdOVFxkhsmlbpUqDAvXw11CluXP+jkHg==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-use-layout-effect": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-portal": {
      "version": "1.1.9",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-portal/-/react-portal-1.1.9.tgz",
      "integrity": "sha512-bpIxvq03if6UNwXZ+HTK71JLh4APvnXntDc6XOX8UVq4XQOVl7lwok0AvIl+b8zgCw3fSaVTZMpAPPagXbKmHQ==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-use-layout-effect": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-presence": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-presence/-/react-presence-1.1.5.tgz",
      "integrity": "sha512-/jfEwNDdQVBCNvjkGit4h6pMOzq8bHkopq458dPt2lMjx+eBQUohZNG9A7DtO/O5ukSbxuaNGXMjHicgwy6rQQ==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-use-layout-effect": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-primitive": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-primitive/-/react-primitive-2.1.3.tgz",
      "integrity": "sha512-m9gTwRkhy2lvCPe6QJp4d3G1TYEUHn/FzJUtq9MjH46an1wJU+GdoGC5VLof8RX8Ft/DlpshApkhswDLZzHIcQ==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-slot": "1.2.3"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-roving-focus": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-roving-focus/-/react-roving-focus-1.1.11.tgz",
      "integrity": "sha512-7A6S9jSgm/S+7MdtNDSb+IU859vQqJ/QAtcYQcfFC6W8RS4IxIZDldLR0xqCFZ6DCyrQLjLPsxtTNch5jVA4lA==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/primitive": "1.1.3",
        "@radix-ui/react-collection": "1.1.7",
        "@radix-ui/react-compose-refs": "1.1.2",
        "@radix-ui/react-context": "1.1.2",
        "@radix-ui/react-direction": "1.1.1",
        "@radix-ui/react-id": "1.1.1",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-use-callback-ref": "1.1.1",
        "@radix-ui/react-use-controllable-state": "1.2.2"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-slot": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-slot/-/react-slot-1.2.3.tgz",
      "integrity": "sha512-aeNmHnBxbi2St0au6VBVC7JXFlhLlOnvIIlePNniyUNAClzmtAUEY8/pBiK3iHjufOlwA+c20/8jngo7xcrg8A==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-compose-refs": "1.1.2"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-tabs": {
      "version": "1.1.13",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-tabs/-/react-tabs-1.1.13.tgz",
      "integrity": "sha512-7xdcatg7/U+7+Udyoj2zodtI9H/IIopqo+YOIcZOq1nJwXWBZ9p8xiu5llXlekDbZkca79a/fozEYQXIA4sW6A==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/primitive": "1.1.3",
        "@radix-ui/react-context": "1.1.2",
        "@radix-ui/react-direction": "1.1.1",
        "@radix-ui/react-id": "1.1.1",
        "@radix-ui/react-presence": "1.1.5",
        "@radix-ui/react-primitive": "2.1.3",
        "@radix-ui/react-roving-focus": "1.1.11",
        "@radix-ui/react-use-controllable-state": "1.2.2"
      },
      "peerDependencies": {
        "@types/react": "*",
        "@types/react-dom": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
        "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "@types/react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-use-callback-ref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-use-callback-ref/-/react-use-callback-ref-1.1.1.tgz",
      "integrity": "sha512-FkBMwD+qbGQeMu1cOHnuGB6x4yzPjho8ap5WtbEJ26umhgqVXbhekKUQO+hZEL1vU92a3wHwdp0HAcqAUF5iDg==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-use-controllable-state": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-use-controllable-state/-/react-use-controllable-state-1.2.2.tgz",
      "integrity": "sha512-BjasUjixPFdS+NKkypcyyN5Pmg83Olst0+c6vGov0diwTEo6mgdqVR6hxcEgFuh4QrAs7Rc+9KuGJ9TVCj0Zzg==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-use-effect-event": "0.0.2",
        "@radix-ui/react-use-layout-effect": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-use-effect-event": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-use-effect-event/-/react-use-effect-event-0.0.2.tgz",
      "integrity": "sha512-Qp8WbZOBe+blgpuUT+lw2xheLP8q0oatc9UpmiemEICxGvFLYmHm9QowVZGHtJlGbS6A6yJ3iViad/2cVjnOiA==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-use-layout-effect": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-use-escape-keydown": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-use-escape-keydown/-/react-use-escape-keydown-1.1.1.tgz",
      "integrity": "sha512-Il0+boE7w/XebUHyBjroE+DbByORGR9KKmITzbR7MyQ4akpORYP/ZmbhAr0DG7RmmBqoOnZdy2QlvajJ2QA59g==",
      "license": "MIT",
      "dependencies": {
        "@radix-ui/react-use-callback-ref": "1.1.1"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@radix-ui/react-use-layout-effect": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@radix-ui/react-use-layout-effect/-/react-use-layout-effect-1.1.1.tgz",
      "integrity": "sha512-RbJRS4UWQFkzHTTwVymMTUv8EqYhOp8dOOviLj2ugtTiXRaRQS7GLGxZTLL1jWhMeoSCf5zmcZkqTl9IiYfXcQ==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.52.3.tgz",
      "integrity": "sha512-h6cqHGZ6VdnwliFG1NXvMPTy/9PS3h8oLh7ImwR+kl+oYnQizgjxsONmmPSb2C66RksfkfIxEVtDSEcJiO0tqw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.52.3.tgz",
      "integrity": "sha512-wd+u7SLT/u6knklV/ifG7gr5Qy4GUbH2hMWcDauPFJzmCZUAJ8L2bTkVXC2niOIxp8lk3iH/QX8kSrUxVZrOVw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.52.3.tgz",
      "integrity": "sha512-lj9ViATR1SsqycwFkJCtYfQTheBdvlWJqzqxwc9f2qrcVrQaF/gCuBRTiTolkRWS6KvNxSk4KHZWG7tDktLgjg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.52.3.tgz",
      "integrity": "sha512-+Dyo7O1KUmIsbzx1l+4V4tvEVnVQqMOIYtrxK7ncLSknl1xnMHLgn7gddJVrYPNZfEB8CIi3hK8gq8bDhb3h5A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.52.3.tgz",
      "integrity": "sha512-u9Xg2FavYbD30g3DSfNhxgNrxhi6xVG4Y6i9Ur1C7xUuGDW3banRbXj+qgnIrwRN4KeJ396jchwy9bCIzbyBEQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.52.3.tgz",
      "integrity": "sha512-5M8kyi/OX96wtD5qJR89a/3x5x8x5inXBZO04JWhkQb2JWavOWfjgkdvUqibGJeNNaz1/Z1PPza5/tAPXICI6A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.52.3.tgz",
      "integrity": "sha512-IoerZJ4l1wRMopEHRKOO16e04iXRDyZFZnNZKrWeNquh5d6bucjezgd+OxG03mOMTnS1x7hilzb3uURPkJ0OfA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.52.3.tgz",
      "integrity": "sha512-ZYdtqgHTDfvrJHSh3W22TvjWxwOgc3ThK/XjgcNGP2DIwFIPeAPNsQxrJO5XqleSlgDux2VAoWQ5iJrtaC1TbA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.52.3.tgz",
      "integrity": "sha512-NcViG7A0YtuFDA6xWSgmFb6iPFzHlf5vcqb2p0lGEbT+gjrEEz8nC/EeDHvx6mnGXnGCC1SeVV+8u+smj0CeGQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.52.3.tgz",
      "integrity": "sha512-d3pY7LWno6SYNXRm6Ebsq0DJGoiLXTb83AIPCXl9fmtIQs/rXoS8SJxxUNtFbJ5MiOvs+7y34np77+9l4nfFMw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.52.3.tgz",
      "integrity": "sha512-3y5GA0JkBuirLqmjwAKwB0keDlI6JfGYduMlJD/Rl7fvb4Ni8iKdQs1eiunMZJhwDWdCvrcqXRY++VEBbvk6Eg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.52.3.tgz",
      "integrity": "sha512-AUUH65a0p3Q0Yfm5oD2KVgzTKgwPyp9DSXc3UA7DtxhEb/WSPfbG4wqXeSN62OG5gSo18em4xv6dbfcUGXcagw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.52.3.tgz",
      "integrity": "sha512-1makPhFFVBqZE+XFg3Dkq+IkQ7JvmUrwwqaYBL2CE+ZpxPaqkGaiWFEWVGyvTwZace6WLJHwjVh/+CXbKDGPmg==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.52.3.tgz",
      "integrity": "sha512-OOFJa28dxfl8kLOPMUOQBCO6z3X2SAfzIE276fwT52uXDWUS178KWq0pL7d6p1kz7pkzA0yQwtqL0dEPoVcRWg==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.52.3.tgz",
      "integrity": "sha512-jMdsML2VI5l+V7cKfZx3ak+SLlJ8fKvLJ0Eoa4b9/vCUrzXKgoKxvHqvJ/mkWhFiyp88nCkM5S2v6nIwRtPcgg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.52.3.tgz",
      "integrity": "sha512-tPgGd6bY2M2LJTA1uGq8fkSPK8ZLYjDjY+ZLK9WHncCnfIz29LIXIqUgzCR0hIefzy6Hpbe8Th5WOSwTM8E7LA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.52.3.tgz",
      "integrity": "sha512-BCFkJjgk+WFzP+tcSMXq77ymAPIxsX9lFJWs+2JzuZTLtksJ2o5hvgTdIcZ5+oKzUDMwI0PfWzRBYAydAHF2Mw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.52.3.tgz",
      "integrity": "sha512-KTD/EqjZF3yvRaWUJdD1cW+IQBk4fbQaHYJUmP8N4XoKFZilVL8cobFSTDnjTtxWJQ3JYaMgF4nObY/+nYkumA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.52.3.tgz",
      "integrity": "sha512-+zteHZdoUYLkyYKObGHieibUFLbttX2r+58l27XZauq0tcWYYuKUwY2wjeCN9oK1Um2YgH2ibd6cnX/wFD7DuA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.52.3.tgz",
      "integrity": "sha512-of1iHkTQSo3kr6dTIRX6t81uj/c/b15HXVsPcEElN5sS859qHrOepM5p9G41Hah+CTqSh2r8Bm56dL2z9UQQ7g==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.52.3.tgz",
      "integrity": "sha512-s0hybmlHb56mWVZQj8ra9048/WZTPLILKxcvcq+8awSZmyiSUZjjem1AhU3Tf4ZKpYhK4mg36HtHDOe8QJS5PQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.52.3.tgz",
      "integrity": "sha512-zGIbEVVXVtauFgl3MRwGWEN36P5ZGenHRMgNw88X5wEhEBpq0XrMEZwOn07+ICrwM17XO5xfMZqh0OldCH5VTA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rtsao/scc": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
      "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rushstack/eslint-patch": {
      "version": "1.12.0",
      "resolved": "https://registry.npmjs.org/@rushstack/eslint-patch/-/eslint-patch-1.12.0.tgz",
      "integrity": "sha512-5EwMtOqvJMMa3HbmxLlF74e+3/HhwBTMcvt3nqVJgGCozO6hzIPOBlwm8mGVNR9SN2IJpxSnlxczyDjcn7qIyw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@smithy/abort-controller": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/abort-controller/-/abort-controller-4.1.1.tgz",
      "integrity": "sha512-vkzula+IwRvPR6oKQhMYioM3A/oX/lFCZiwuxkQbRhqJS2S4YRY2k7k/SyR2jMf3607HLtbEwlRxi0ndXHMjRg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/config-resolver": {
      "version": "4.2.2",
      "resolved": "https://registry.npmjs.org/@smithy/config-resolver/-/config-resolver-4.2.2.tgz",
      "integrity": "sha512-IT6MatgBWagLybZl1xQcURXRICvqz1z3APSCAI9IqdvfCkrA7RaQIEfgC6G/KvfxnDfQUDqFV+ZlixcuFznGBQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/types": "^4.5.0",
        "@smithy/util-config-provider": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/core": {
      "version": "3.13.0",
      "resolved": "https://registry.npmjs.org/@smithy/core/-/core-3.13.0.tgz",
      "integrity": "sha512-BI6ALLPOKnPOU1Cjkc+1TPhOlP3JXSR/UH14JmnaLq41t3ma+IjuXrKfhycVjr5IQ0XxRh2NnQo3olp+eCVrGg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/middleware-serde": "^4.1.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-body-length-browser": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-stream": "^4.3.2",
        "@smithy/util-utf8": "^4.1.0",
        "@smithy/uuid": "^1.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/credential-provider-imds": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/@smithy/credential-provider-imds/-/credential-provider-imds-4.1.2.tgz",
      "integrity": "sha512-JlYNq8TShnqCLg0h+afqe2wLAwZpuoSgOyzhYvTgbiKBWRov+uUve+vrZEQO6lkdLOWPh7gK5dtb9dS+KGendg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/fetch-http-handler": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/@smithy/fetch-http-handler/-/fetch-http-handler-5.2.1.tgz",
      "integrity": "sha512-5/3wxKNtV3wO/hk1is+CZUhL8a1yy/U+9u9LKQ9kZTkMsHaQjJhc3stFfiujtMnkITjzWfndGA2f7g9Uh9vKng==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/querystring-builder": "^4.1.1",
        "@smithy/types": "^4.5.0",
        "@smithy/util-base64": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/hash-node": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/hash-node/-/hash-node-4.1.1.tgz",
      "integrity": "sha512-H9DIU9WBLhYrvPs9v4sYvnZ1PiAI0oc8CgNQUJ1rpN3pP7QADbTOUjchI2FB764Ub0DstH5xbTqcMJu1pnVqxA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/invalid-dependency": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/invalid-dependency/-/invalid-dependency-4.1.1.tgz",
      "integrity": "sha512-1AqLyFlfrrDkyES8uhINRlJXmHA2FkG+3DY8X+rmLSqmFwk3DJnvhyGzyByPyewh2jbmV+TYQBEfngQax8IFGg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/is-array-buffer": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-4.1.0.tgz",
      "integrity": "sha512-ePTYUOV54wMogio+he4pBybe8fwg4sDvEVDBU8ZlHOZXbXK3/C0XfJgUCu6qAZcawv05ZhZzODGUerFBPsPUDQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-content-length": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-content-length/-/middleware-content-length-4.1.1.tgz",
      "integrity": "sha512-9wlfBBgTsRvC2JxLJxv4xDGNBrZuio3AgSl0lSFX7fneW2cGskXTYpFxCdRYD2+5yzmsiTuaAJD1Wp7gWt9y9w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-endpoint": {
      "version": "4.2.5",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-endpoint/-/middleware-endpoint-4.2.5.tgz",
      "integrity": "sha512-DdOIpssQ5LFev7hV6GX9TMBW5ChTsQBxqgNW1ZGtJNSAi5ksd5klwPwwMY0ejejfEzwXXGqxgVO3cpaod4veiA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/core": "^3.13.0",
        "@smithy/middleware-serde": "^4.1.1",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "@smithy/url-parser": "^4.1.1",
        "@smithy/util-middleware": "^4.1.1",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-retry": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-retry/-/middleware-retry-4.3.1.tgz",
      "integrity": "sha512-aH2bD1bzb6FB04XBhXA5mgedEZPKx3tD/qBuYCAKt5iieWvWO1Y2j++J9uLqOndXb9Pf/83Xka/YjSnMbcPchA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/service-error-classification": "^4.1.2",
        "@smithy/smithy-client": "^4.6.5",
        "@smithy/types": "^4.5.0",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-retry": "^4.1.2",
        "@smithy/uuid": "^1.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-serde": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-serde/-/middleware-serde-4.1.1.tgz",
      "integrity": "sha512-lh48uQdbCoj619kRouev5XbWhCwRKLmphAif16c4J6JgJ4uXjub1PI6RL38d3BLliUvSso6klyB/LTNpWSNIyg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-stack": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-stack/-/middleware-stack-4.1.1.tgz",
      "integrity": "sha512-ygRnniqNcDhHzs6QAPIdia26M7e7z9gpkIMUe/pK0RsrQ7i5MblwxY8078/QCnGq6AmlUUWgljK2HlelsKIb/A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/node-config-provider": {
      "version": "4.2.2",
      "resolved": "https://registry.npmjs.org/@smithy/node-config-provider/-/node-config-provider-4.2.2.tgz",
      "integrity": "sha512-SYGTKyPvyCfEzIN5rD8q/bYaOPZprYUPD2f5g9M7OjaYupWOoQFYJ5ho+0wvxIRf471i2SR4GoiZ2r94Jq9h6A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/property-provider": "^4.1.1",
        "@smithy/shared-ini-file-loader": "^4.2.0",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/node-http-handler": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/@smithy/node-http-handler/-/node-http-handler-4.2.1.tgz",
      "integrity": "sha512-REyybygHlxo3TJICPF89N2pMQSf+p+tBJqpVe1+77Cfi9HBPReNjTgtZ1Vg73exq24vkqJskKDpfF74reXjxfw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/abort-controller": "^4.1.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/querystring-builder": "^4.1.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/property-provider": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/property-provider/-/property-provider-4.1.1.tgz",
      "integrity": "sha512-gm3ZS7DHxUbzC2wr8MUCsAabyiXY0gaj3ROWnhSx/9sPMc6eYLMM4rX81w1zsMaObj2Lq3PZtNCC1J6lpEY7zg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/protocol-http": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/@smithy/protocol-http/-/protocol-http-5.2.1.tgz",
      "integrity": "sha512-T8SlkLYCwfT/6m33SIU/JOVGNwoelkrvGjFKDSDtVvAXj/9gOT78JVJEas5a+ETjOu4SVvpCstKgd0PxSu/aHw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/querystring-builder": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/querystring-builder/-/querystring-builder-4.1.1.tgz",
      "integrity": "sha512-J9b55bfimP4z/Jg1gNo+AT84hr90p716/nvxDkPGCD4W70MPms0h8KF50RDRgBGZeL83/u59DWNqJv6tEP/DHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "@smithy/util-uri-escape": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/querystring-parser": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/querystring-parser/-/querystring-parser-4.1.1.tgz",
      "integrity": "sha512-63TEp92YFz0oQ7Pj9IuI3IgnprP92LrZtRAkE3c6wLWJxfy/yOPRt39IOKerVr0JS770olzl0kGafXlAXZ1vng==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/service-error-classification": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/@smithy/service-error-classification/-/service-error-classification-4.1.2.tgz",
      "integrity": "sha512-Kqd8wyfmBWHZNppZSMfrQFpc3M9Y/kjyN8n8P4DqJJtuwgK1H914R471HTw7+RL+T7+kI1f1gOnL7Vb5z9+NgQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/shared-ini-file-loader": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/shared-ini-file-loader/-/shared-ini-file-loader-4.2.0.tgz",
      "integrity": "sha512-OQTfmIEp2LLuWdxa8nEEPhZmiOREO6bcB6pjs0AySf4yiZhl6kMOfqmcwcY8BaBPX+0Tb+tG7/Ia/6mwpoZ7Pw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/signature-v4": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/@smithy/signature-v4/-/signature-v4-5.2.1.tgz",
      "integrity": "sha512-M9rZhWQLjlQVCCR37cSjHfhriGRN+FQ8UfgrYNufv66TJgk+acaggShl3KS5U/ssxivvZLlnj7QH2CUOKlxPyA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^4.1.0",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "@smithy/util-hex-encoding": "^4.1.0",
        "@smithy/util-middleware": "^4.1.1",
        "@smithy/util-uri-escape": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/smithy-client": {
      "version": "4.6.5",
      "resolved": "https://registry.npmjs.org/@smithy/smithy-client/-/smithy-client-4.6.5.tgz",
      "integrity": "sha512-6J2hhuWu7EjnvLBIGltPCqzNswL1cW/AkaZx6i56qLsQ0ix17IAhmDD9aMmL+6CN9nCJODOXpBTCQS6iKAA7/g==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/core": "^3.13.0",
        "@smithy/middleware-endpoint": "^4.2.5",
        "@smithy/middleware-stack": "^4.1.1",
        "@smithy/protocol-http": "^5.2.1",
        "@smithy/types": "^4.5.0",
        "@smithy/util-stream": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/types": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/@smithy/types/-/types-4.5.0.tgz",
      "integrity": "sha512-RkUpIOsVlAwUIZXO1dsz8Zm+N72LClFfsNqf173catVlvRZiwPy0x2u0JLEA4byreOPKDZPGjmPDylMoP8ZJRg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/url-parser": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/url-parser/-/url-parser-4.1.1.tgz",
      "integrity": "sha512-bx32FUpkhcaKlEoOMbScvc93isaSiRM75pQ5IgIBaMkT7qMlIibpPRONyx/0CvrXHzJLpOn/u6YiDX2hcvs7Dg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/querystring-parser": "^4.1.1",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-base64": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-base64/-/util-base64-4.1.0.tgz",
      "integrity": "sha512-RUGd4wNb8GeW7xk+AY5ghGnIwM96V0l2uzvs/uVHf+tIuVX2WSvynk5CxNoBCsM2rQRSZElAo9rt3G5mJ/gktQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-body-length-browser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-body-length-browser/-/util-body-length-browser-4.1.0.tgz",
      "integrity": "sha512-V2E2Iez+bo6bUMOTENPr6eEmepdY8Hbs+Uc1vkDKgKNA/brTJqOW/ai3JO1BGj9GbCeLqw90pbbH7HFQyFotGQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-body-length-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-body-length-node/-/util-body-length-node-4.1.0.tgz",
      "integrity": "sha512-BOI5dYjheZdgR9XiEM3HJcEMCXSoqbzu7CzIgYrx0UtmvtC3tC2iDGpJLsSRFffUpy8ymsg2ARMP5fR8mtuUQQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-buffer-from": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-4.1.0.tgz",
      "integrity": "sha512-N6yXcjfe/E+xKEccWEKzK6M+crMrlwaCepKja0pNnlSkm6SjAeLKKA++er5Ba0I17gvKfN/ThV+ZOx/CntKTVw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-config-provider": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-config-provider/-/util-config-provider-4.1.0.tgz",
      "integrity": "sha512-swXz2vMjrP1ZusZWVTB/ai5gK+J8U0BWvP10v9fpcFvg+Xi/87LHvHfst2IgCs1i0v4qFZfGwCmeD/KNCdJZbQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-defaults-mode-browser": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/@smithy/util-defaults-mode-browser/-/util-defaults-mode-browser-4.1.5.tgz",
      "integrity": "sha512-FGBhlmFZVSRto816l6IwrmDcQ9pUYX6ikdR1mmAhdtSS1m77FgADukbQg7F7gurXfAvloxE/pgsrb7SGja6FQA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/property-provider": "^4.1.1",
        "@smithy/smithy-client": "^4.6.5",
        "@smithy/types": "^4.5.0",
        "bowser": "^2.11.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-defaults-mode-node": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/@smithy/util-defaults-mode-node/-/util-defaults-mode-node-4.1.5.tgz",
      "integrity": "sha512-Gwj8KLgJ/+MHYjVubJF0EELEh9/Ir7z7DFqyYlwgmp4J37KE+5vz6b3pWUnSt53tIe5FjDfVjDmHGYKjwIvW0Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/config-resolver": "^4.2.2",
        "@smithy/credential-provider-imds": "^4.1.2",
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/property-provider": "^4.1.1",
        "@smithy/smithy-client": "^4.6.5",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-endpoints": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@smithy/util-endpoints/-/util-endpoints-3.1.2.tgz",
      "integrity": "sha512-+AJsaaEGb5ySvf1SKMRrPZdYHRYSzMkCoK16jWnIMpREAnflVspMIDeCVSZJuj+5muZfgGpNpijE3mUNtjv01Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.2",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-hex-encoding": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-hex-encoding/-/util-hex-encoding-4.1.0.tgz",
      "integrity": "sha512-1LcueNN5GYC4tr8mo14yVYbh/Ur8jHhWOxniZXii+1+ePiIbsLZ5fEI0QQGtbRRP5mOhmooos+rLmVASGGoq5w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-middleware": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/@smithy/util-middleware/-/util-middleware-4.1.1.tgz",
      "integrity": "sha512-CGmZ72mL29VMfESz7S6dekqzCh8ZISj3B+w0g1hZFXaOjGTVaSqfAEFAq8EGp8fUL+Q2l8aqNmt8U1tglTikeg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-retry": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/@smithy/util-retry/-/util-retry-4.1.2.tgz",
      "integrity": "sha512-NCgr1d0/EdeP6U5PSZ9Uv5SMR5XRRYoVr1kRVtKZxWL3tixEL3UatrPIMFZSKwHlCcp2zPLDvMubVDULRqeunA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/service-error-classification": "^4.1.2",
        "@smithy/types": "^4.5.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-stream": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/@smithy/util-stream/-/util-stream-4.3.2.tgz",
      "integrity": "sha512-Ka+FA2UCC/Q1dEqUanCdpqwxOFdf5Dg2VXtPtB1qxLcSGh5C1HdzklIt18xL504Wiy9nNUKwDMRTVCbKGoK69g==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/fetch-http-handler": "^5.2.1",
        "@smithy/node-http-handler": "^4.2.1",
        "@smithy/types": "^4.5.0",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-hex-encoding": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-uri-escape": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-uri-escape/-/util-uri-escape-4.1.0.tgz",
      "integrity": "sha512-b0EFQkq35K5NHUYxU72JuoheM6+pytEVUGlTwiFxWFpmddA+Bpz3LgsPRIpBk8lnPE47yT7AF2Egc3jVnKLuPg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-utf8": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-4.1.0.tgz",
      "integrity": "sha512-mEu1/UIXAdNYuBcyEPbjScKi/+MQVXNIuY/7Cm5XLIWe319kDrT5SizBE95jqtmEXoDbGoZxKLCMttdZdqTZKQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/uuid": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@smithy/uuid/-/uuid-1.0.0.tgz",
      "integrity": "sha512-OlA/yZHh0ekYFnbUkmYBDQPE6fGfdrvgz39ktp8Xf+FA6BfxLejPTMDOG0Nfk5/rDySAz1dRbFf24zaAFYVXlQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@swc/counter": {
      "version": "0.1.3",
      "resolved": "https://registry.npmjs.org/@swc/counter/-/counter-0.1.3.tgz",
      "integrity": "sha512-e2BR4lsJkkRlKZ/qCHPw9ZaSxc0MVUd7gtbtaB7aMvHeJVYe8sOB8DBZkP2DtISHGSku9sCK6T6cnY0CtXrOCQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@swc/helpers": {
      "version": "0.5.5",
      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.5.tgz",
      "integrity": "sha512-KGYxvIOXcceOAbEk4bi/dVLEK9z8sZ0uBB3Il5b1rhfClSpcX0yfRO0KmTkqR2cnQDymwLB+25ZyMzICg/cm/A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@swc/counter": "^0.1.3",
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@tsconfig/node10": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node10/-/node10-1.0.11.tgz",
      "integrity": "sha512-DcRjDCujK/kCk/cUe8Xz8ZSpm8mS3mNNpta+jGCA6USEDfktlNvm1+IuZ9eTcDbNk41BHwpHHeW+N1lKCz4zOw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node12": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node12/-/node12-1.0.11.tgz",
      "integrity": "sha512-cqefuRsh12pWyGsIoBKJA9luFu3mRxCA+ORZvA4ktLSzIuCUtWVxGIuXigEwO5/ywWFMZ2QEGKWvkZG1zDMTag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node14": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/@tsconfig/node14/-/node14-1.0.3.tgz",
      "integrity": "sha512-ysT8mhdixWK6Hw3i1V2AeRqZ5WfXg1G43mqoYlM2nc6388Fq5jcXyr5mRsqViLx/GJYdoL0bfXD8nmF+Zn/Iow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node16": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/@tsconfig/node16/-/node16-1.0.4.tgz",
      "integrity": "sha512-vxhUy4J8lyeyinH7Azl1pdd43GJhZH/tP2weN8TntQblOY+A0XbT8DJk1/oCPuOOyg/Ja757rG0CgHcWC8OfMA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tybys/wasm-util": {
      "version": "0.10.1",
      "resolved": "https://registry.npmjs.org/@tybys/wasm-util/-/wasm-util-0.10.1.tgz",
      "integrity": "sha512-9tTaPJLSiejZKx+Bmog4uSubteqTvFrVrURwkmHixBo0G4seD0zUxp98E1DzUBJxLQ3NPwXrGKDiVjwx/DpPsg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@types/chai": {
      "version": "5.2.2",
      "resolved": "https://registry.npmjs.org/@types/chai/-/chai-5.2.2.tgz",
      "integrity": "sha512-8kB30R7Hwqf40JPiKhVzodJs2Qc1ZJ5zuT3uzw5Hq/dhNCl3G3l83jfpdI1e20BP348+fV7VIL/+FxaXkqBmWg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/deep-eql": "*"
      }
    },
    "node_modules/@types/debug": {
      "version": "4.1.12",
      "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.12.tgz",
      "integrity": "sha512-vIChWdVG3LG1SMxEvI/AK+FWJthlrqlTu7fbrlywTkkaONwk/UAGaULXRlf8vkzFBLVm0zkMdCquhL5aOjhXPQ==",
      "license": "MIT",
      "dependencies": {
        "@types/ms": "*"
      }
    },
    "node_modules/@types/deep-eql": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/deep-eql/-/deep-eql-4.0.2.tgz",
      "integrity": "sha512-c9h9dVVMigMPc4bwTvC5dxqtqJZwQPePsWjPlpSOnojbor6pGqdk541lfA7AqFQr5pB1BRdq0juY9db81BwyFw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "license": "MIT"
    },
    "node_modules/@types/estree-jsx": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/@types/estree-jsx/-/estree-jsx-1.0.5.tgz",
      "integrity": "sha512-52CcUVNFyfb1A2ALocQw/Dd1BQFNmSdkuC3BkZ6iqhdMfQz7JWOFRuJFloOzjk+6WijU56m9oKXFAXc7o3Towg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree": "*"
      }
    },
    "node_modules/@types/hast": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/hast/-/hast-3.0.4.tgz",
      "integrity": "sha512-WPs+bbQw5aCj+x6laNGWLH3wviHtoCv/P3+otBhbOhJgG8qtpdAMlTCxLtsTWA7LH1Oh/bFCHsBn0TPS5m30EQ==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "*"
      }
    },
    "node_modules/@types/json5": {
      "version": "0.0.29",
      "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
      "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/mdast": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/@types/mdast/-/mdast-4.0.4.tgz",
      "integrity": "sha512-kGaNbPh1k7AFzgpud/gMdvIm5xuECykRR+JnWKQno9TAXVa6WIVCGTPvYGekIDL4uwCZQSYbUxNBSb1aUo79oA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "*"
      }
    },
    "node_modules/@types/ms": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
      "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "20.14.9",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.14.9.tgz",
      "integrity": "sha512-06OCtnTXtWOZBJlRApleWndH4JsRVs1pDCc8dLSQp+7PpUpX3ePdHyeNSFTeSe7FtKyQkrlPvHwJOW3SLd8Oyg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "undici-types": "~5.26.4"
      }
    },
    "node_modules/@types/nodemailer": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/@types/nodemailer/-/nodemailer-7.0.1.tgz",
      "integrity": "sha512-UfHAghPmGZVzaL8x9y+mKZMWyHC399+iq0MOmya5tIyenWX3lcdSb60vOmp0DocR6gCDTYTozv/ULQnREyyjkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@aws-sdk/client-sesv2": "^3.839.0",
        "@types/node": "*"
      }
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "18.3.5",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.5.tgz",
      "integrity": "sha512-WeqMfGJLGuLCqHGYRGHxnKrXcTitc6L/nBUWfWPcTarG3t9PsquqUMuVeXZeca+mglY4Vo5GZjCi0A3Or2lnxA==",
      "license": "MIT",
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.0",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.0.tgz",
      "integrity": "sha512-EhwApuTmMBmXuFOikhQLIBUn6uFg81SwLMOAUgodJF14SOBOCMdU04gDoYi0WOJJHD144TL32z4yDqCW3dnkQg==",
      "devOptional": true,
      "license": "MIT",
      "dependencies": {
        "@types/react": "*"
      }
    },
    "node_modules/@types/unist": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@types/unist/-/unist-3.0.3.tgz",
      "integrity": "sha512-ko/gIFJRv177XgZsZcBwnqJN5x/Gien8qNOn0D5bQU/zAzVf9Zt3BlcUiLqhV9y4ARk0GbT3tnUiPNgnTXzc/Q==",
      "license": "MIT"
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-7.2.0.tgz",
      "integrity": "sha512-5FKsVcHTk6TafQKQbuIVkXq58Fnbkd2wDL4LB7AURN7RUOu1utVP+G8+6u3ZhEroW3DF6hyo3ZEXxgKgp4KeCg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/scope-manager": "7.2.0",
        "@typescript-eslint/types": "7.2.0",
        "@typescript-eslint/typescript-estree": "7.2.0",
        "@typescript-eslint/visitor-keys": "7.2.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.56.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-7.2.0.tgz",
      "integrity": "sha512-Qh976RbQM/fYtjx9hs4XkayYujB/aPwglw2choHmf3zBjB4qOywWSdt9+KLRdHubGcoSwBnXUH2sR3hkyaERRg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "7.2.0",
        "@typescript-eslint/visitor-keys": "7.2.0"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-7.2.0.tgz",
      "integrity": "sha512-XFtUHPI/abFhm4cbCDc5Ykc8npOKBSJePY3a3s+lwumt7XWJuzP5cZcfZ610MIPHjQjNsOLlYK8ASPaNG8UiyA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-7.2.0.tgz",
      "integrity": "sha512-cyxS5WQQCoBwSakpMrvMXuMDEbhOo9bNHHrNcEWis6XHx6KF518tkF1wBvKIn/tpq5ZpUYK7Bdklu8qY0MsFIA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/types": "7.2.0",
        "@typescript-eslint/visitor-keys": "7.2.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "minimatch": "9.0.3",
        "semver": "^7.5.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.3",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.3.tgz",
      "integrity": "sha512-RHiac9mvaRw0x3AYRgDC1CxAP7HTcNrrECeA8YYJeWnpo+2Q5CegtZjaotWTWxDG3UeGA1coE05iH1mPjT/2mg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-7.2.0.tgz",
      "integrity": "sha512-c6EIQRHhcpl6+tO8EMR+kjkkV+ugUNXOmeASA1rlzkd8EPIriavpWoiEz1HR/VLhbVIdhqnV6E7JZm00cBDx2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "7.2.0",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "license": "ISC"
    },
    "node_modules/@unrs/resolver-binding-android-arm-eabi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm-eabi/-/resolver-binding-android-arm-eabi-1.11.1.tgz",
      "integrity": "sha512-ppLRUgHVaGRWUx0R0Ut06Mjo9gBaBkg3v/8AxusGLhsIotbBLuRk51rAzqLC8gq6NyyAojEXglNjzf6R948DNw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-android-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm64/-/resolver-binding-android-arm64-1.11.1.tgz",
      "integrity": "sha512-lCxkVtb4wp1v+EoN+HjIG9cIIzPkX5OtM03pQYkG+U5O/wL53LC4QbIeazgiKqluGeVEeBlZahHalCaBvU1a2g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-arm64/-/resolver-binding-darwin-arm64-1.11.1.tgz",
      "integrity": "sha512-gPVA1UjRu1Y/IsB/dQEsp2V1pm44Of6+LWvbLc9SDk1c2KhhDRDBUkQCYVWe6f26uJb3fOK8saWMgtX8IrMk3g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-x64/-/resolver-binding-darwin-x64-1.11.1.tgz",
      "integrity": "sha512-cFzP7rWKd3lZaCsDze07QX1SC24lO8mPty9vdP+YVa3MGdVgPmFc59317b2ioXtgCMKGiCLxJ4HQs62oz6GfRQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-freebsd-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-freebsd-x64/-/resolver-binding-freebsd-x64-1.11.1.tgz",
      "integrity": "sha512-fqtGgak3zX4DCB6PFpsH5+Kmt/8CIi4Bry4rb1ho6Av2QHTREM+47y282Uqiu3ZRF5IQioJQ5qWRV6jduA+iGw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-gnueabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-gnueabihf/-/resolver-binding-linux-arm-gnueabihf-1.11.1.tgz",
      "integrity": "sha512-u92mvlcYtp9MRKmP+ZvMmtPN34+/3lMHlyMj7wXJDeXxuM0Vgzz0+PPJNsro1m3IZPYChIkn944wW8TYgGKFHw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-musleabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-musleabihf/-/resolver-binding-linux-arm-musleabihf-1.11.1.tgz",
      "integrity": "sha512-cINaoY2z7LVCrfHkIcmvj7osTOtm6VVT16b5oQdS4beibX2SYBwgYLmqhBjA1t51CarSaBuX5YNsWLjsqfW5Cw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-gnu/-/resolver-binding-linux-arm64-gnu-1.11.1.tgz",
      "integrity": "sha512-34gw7PjDGB9JgePJEmhEqBhWvCiiWCuXsL9hYphDF7crW7UgI05gyBAi6MF58uGcMOiOqSJ2ybEeCvHcq0BCmQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-musl/-/resolver-binding-linux-arm64-musl-1.11.1.tgz",
      "integrity": "sha512-RyMIx6Uf53hhOtJDIamSbTskA99sPHS96wxVE/bJtePJJtpdKGXO1wY90oRdXuYOGOTuqjT8ACccMc4K6QmT3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-ppc64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-ppc64-gnu/-/resolver-binding-linux-ppc64-gnu-1.11.1.tgz",
      "integrity": "sha512-D8Vae74A4/a+mZH0FbOkFJL9DSK2R6TFPC9M+jCWYia/q2einCubX10pecpDiTmkJVUH+y8K3BZClycD8nCShA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-gnu/-/resolver-binding-linux-riscv64-gnu-1.11.1.tgz",
      "integrity": "sha512-frxL4OrzOWVVsOc96+V3aqTIQl1O2TjgExV4EKgRY09AJ9leZpEg8Ak9phadbuX0BA4k8U5qtvMSQQGGmaJqcQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-musl/-/resolver-binding-linux-riscv64-musl-1.11.1.tgz",
      "integrity": "sha512-mJ5vuDaIZ+l/acv01sHoXfpnyrNKOk/3aDoEdLO/Xtn9HuZlDD6jKxHlkN8ZhWyLJsRBxfv9GYM2utQ1SChKew==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-s390x-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-s390x-gnu/-/resolver-binding-linux-s390x-gnu-1.11.1.tgz",
      "integrity": "sha512-kELo8ebBVtb9sA7rMe1Cph4QHreByhaZ2QEADd9NzIQsYNQpt9UkM9iqr2lhGr5afh885d/cB5QeTXSbZHTYPg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-gnu/-/resolver-binding-linux-x64-gnu-1.11.1.tgz",
      "integrity": "sha512-C3ZAHugKgovV5YvAMsxhq0gtXuwESUKc5MhEtjBpLoHPLYM+iuwSj3lflFwK3DPm68660rZ7G8BMcwSro7hD5w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-musl/-/resolver-binding-linux-x64-musl-1.11.1.tgz",
      "integrity": "sha512-rV0YSoyhK2nZ4vEswT/QwqzqQXw5I6CjoaYMOX0TqBlWhojUf8P94mvI7nuJTeaCkkds3QE4+zS8Ko+GdXuZtA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-wasm32-wasi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-wasm32-wasi/-/resolver-binding-wasm32-wasi-1.11.1.tgz",
      "integrity": "sha512-5u4RkfxJm+Ng7IWgkzi3qrFOvLvQYnPBmjmZQ8+szTK/b31fQCnleNl1GgEt7nIsZRIf5PLhPwT0WM+q45x/UQ==",
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@napi-rs/wasm-runtime": "^0.2.11"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@unrs/resolver-binding-win32-arm64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-arm64-msvc/-/resolver-binding-win32-arm64-msvc-1.11.1.tgz",
      "integrity": "sha512-nRcz5Il4ln0kMhfL8S3hLkxI85BXs3o8EYoattsJNdsX4YUU89iOkVn7g0VHSRxFuVMdM4Q1jEpIId1Ihim/Uw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-ia32-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-ia32-msvc/-/resolver-binding-win32-ia32-msvc-1.11.1.tgz",
      "integrity": "sha512-DCEI6t5i1NmAZp6pFonpD5m7i6aFrpofcp4LA2i8IIq60Jyo28hamKBxNrZcyOwVOZkgsRp9O2sXWBWP8MnvIQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-x64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-x64-msvc/-/resolver-binding-win32-x64-msvc-1.11.1.tgz",
      "integrity": "sha512-lrW200hZdbfRtztbygyaq/6jP6AKE8qQN2KvPcJ+x7wiD038YtnYtZ82IMNJ69GJibV7bwL3y9FgK+5w/pYt6g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@vitest/expect": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-3.2.4.tgz",
      "integrity": "sha512-Io0yyORnB6sikFlt8QW5K7slY4OjqNX9jmJQ02QDda8lyM6B5oNgVWoSoKPac8/kgnCUzuHQKrSLtu/uOqqrig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/chai": "^5.2.2",
        "@vitest/spy": "3.2.4",
        "@vitest/utils": "3.2.4",
        "chai": "^5.2.0",
        "tinyrainbow": "^2.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/pretty-format": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/pretty-format/-/pretty-format-3.2.4.tgz",
      "integrity": "sha512-IVNZik8IVRJRTr9fxlitMKeJeXFFFN0JaB9PHPGQ8NKQbGpfjlTx9zO4RefN8gp7eqjNy8nyK3NZmBzOPeIxtA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tinyrainbow": "^2.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/runner": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-3.2.4.tgz",
      "integrity": "sha512-oukfKT9Mk41LreEW09vt45f8wx7DordoWUZMYdY/cyAk7w5TWkTRCNZYF7sX7n2wB7jyGAl74OxgwhPgKaqDMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/utils": "3.2.4",
        "pathe": "^2.0.3",
        "strip-literal": "^3.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/snapshot": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/snapshot/-/snapshot-3.2.4.tgz",
      "integrity": "sha512-dEYtS7qQP2CjU27QBC5oUOxLE/v5eLkGqPE0ZKEIDGMs4vKWe7IjgLOeauHsR0D5YuuycGRO5oSRXnwnmA78fQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/pretty-format": "3.2.4",
        "magic-string": "^0.30.17",
        "pathe": "^2.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/spy": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-3.2.4.tgz",
      "integrity": "sha512-vAfasCOe6AIK70iP5UD11Ac4siNUNJ9i/9PZ3NKx07sG6sUxeag1LWdNrMWeKKYBLlzuK+Gn65Yd5nyL6ds+nw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tinyspy": "^4.0.3"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/@vitest/utils": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-3.2.4.tgz",
      "integrity": "sha512-fB2V0JFrQSMsCo9HiSq3Ezpdv4iYaXRG1Sx8edX3MwxfyNn83mKiGzOcH+Fkxt4MHxr3y42fQi1oeAInqgX2QA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/pretty-format": "3.2.4",
        "loupe": "^3.1.4",
        "tinyrainbow": "^2.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.3.4",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.3.4.tgz",
      "integrity": "sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.11.0"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-regex": {
      "version": "6.2.2",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/ansi-styles": {
      "version": "6.2.3",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.3.tgz",
      "integrity": "sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/aria-hidden": {
      "version": "1.2.6",
      "resolved": "https://registry.npmjs.org/aria-hidden/-/aria-hidden-1.2.6.tgz",
      "integrity": "sha512-ik3ZgC9dY/lYVVM++OISsaYDeg1tb0VtP5uL3ouh1koGOaUMDPpbFIei4JkFimWUFPn90sbMNMXQAIVOlnYKJA==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/aria-query": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/aria-query/-/aria-query-5.3.2.tgz",
      "integrity": "sha512-COROpnaoap1E2F000S62r6A60uHZnmlvomhfyT2DlTcrY1OrBKn2UhH7qn5wTC9zMvD0AY7csdPSNwKP+7WiQw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-includes": {
      "version": "3.1.9",
      "resolved": "https://registry.npmjs.org/array-includes/-/array-includes-3.1.9.tgz",
      "integrity": "sha512-FmeCCAenzH0KH381SPT5FZmiA/TmpndpcaShhfgEN9eCVjnFBqq3l1xrI42y8+PPLI6hypzou4GXw00WHmPBLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.24.0",
        "es-object-atoms": "^1.1.1",
        "get-intrinsic": "^1.3.0",
        "is-string": "^1.1.1",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/array.prototype.findlast": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/array.prototype.findlast/-/array.prototype.findlast-1.2.5.tgz",
      "integrity": "sha512-CVvd6FHg1Z3POpBLxO6E6zr+rSKEQ9L6rZHAaY7lLfhKsWYUBBOuMs0e9o24oopj6H+geRCX0YJ+TJLBK2eHyQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.findlastindex": {
      "version": "1.2.6",
      "resolved": "https://registry.npmjs.org/array.prototype.findlastindex/-/array.prototype.findlastindex-1.2.6.tgz",
      "integrity": "sha512-F/TKATkzseUExPlfvmwQKGITM3DGTK+vkAsCZoDc5daVygbJBnjEUCbgkAvVFsgfXfX4YIqZ/27G3k3tdXrTxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-shim-unscopables": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flat": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flat/-/array.prototype.flat-1.3.3.tgz",
      "integrity": "sha512-rwG/ja1neyLqCuGZ5YYrznA62D4mZXg0i1cIskIUKSiqF3Cje9/wXAls9B9s1Wa2fomMsIv8czB8jZcPmxCXFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flatmap": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flatmap/-/array.prototype.flatmap-1.3.3.tgz",
      "integrity": "sha512-Y7Wt51eKJSyi80hFrJCePGGNo5ktJCslFuboqJsbf57CCPcm5zztluPlc4/aD8sWsKvlwatezpV4U1efk8kpjg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.tosorted": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/array.prototype.tosorted/-/array.prototype.tosorted-1.1.4.tgz",
      "integrity": "sha512-p6Fx8B7b7ZhL/gmUsAy0D15WhvDccw3mnGNbZpi3pmeJdxtWsj2jEaI4Y6oo3XiHfzuSgPwKc04MYt6KgvC/wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3",
        "es-errors": "^1.3.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/arraybuffer.prototype.slice": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
      "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.1",
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "is-array-buffer": "^3.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/assertion-error": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-2.0.1.tgz",
      "integrity": "sha512-Izi8RQcffqCeNVgFigKli1ssklIbpHnCYc6AknXGYoB6grJqyeby7jv12JUQgmTAnIDnbck1uxksT4dzN3PWBA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/ast-types-flow": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/ast-types-flow/-/ast-types-flow-0.0.8.tgz",
      "integrity": "sha512-OH/2E5Fg20h2aPrbe+QL8JZQFko0YZaF+j4mnQ7BGhfavO7OpSLa8a0y9sBwomHdSbkhTS8TQNayBfnW5DwbvQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async-function": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
      "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/autoprefixer": {
      "version": "10.4.20",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.20.tgz",
      "integrity": "sha512-XY25y5xSv/wEoqzDyXXME4AFfkZI0P23z6Fs3YgymDnKJkCGOnkL0iTxCa85UTqaSgfcqyf3UA6+c7wUvx/16g==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.23.3",
        "caniuse-lite": "^1.0.30001646",
        "fraction.js": "^4.3.7",
        "normalize-range": "^0.1.2",
        "picocolors": "^1.0.1",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/axe-core": {
      "version": "4.10.3",
      "resolved": "https://registry.npmjs.org/axe-core/-/axe-core-4.10.3.tgz",
      "integrity": "sha512-Xm7bpRXnDSX2YE2YFfBk2FnF0ep6tmG7xPh8iHee8MIcrgq762Nkce856dYtJYLkuIoYZvGfTs/PbZhideTcEg==",
      "dev": true,
      "license": "MPL-2.0",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/axobject-query": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/axobject-query/-/axobject-query-4.1.0.tgz",
      "integrity": "sha512-qIj0G9wZbMGNLjLmg1PT6v2mE9AH2zlnADJD/2tC6E00hgmhUOfEB6greHPAfLRSufHqROIUTkw6E+M3lH0PTQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/bail": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/bail/-/bail-2.0.2.tgz",
      "integrity": "sha512-0xO6mYd7JB2YesxDKplafRpsiOzPt9V02ddPCLbY1xYGPOX24NTyN50qnUxgCPcSoYMhKpAuBTjQoRZCAkUDRw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.7",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.7.tgz",
      "integrity": "sha512-bxxN2M3a4d1CRoQC//IqsR5XrLh0IJ8TCv2x6Y9N0nckNz/rTjZB3//GGscZziZOxmjP55rzxg/ze7usFI9FqQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/bowser": {
      "version": "2.12.1",
      "resolved": "https://registry.npmjs.org/bowser/-/bowser-2.12.1.tgz",
      "integrity": "sha512-z4rE2Gxh7tvshQ4hluIT7XcFrgLIQaw9X3A+kTTRdovCz5PMukm/0QC/BKSYPj3omF5Qfypn9O/c5kgpmvYUCw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.26.2",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.26.2.tgz",
      "integrity": "sha512-ECFzp6uFOSB+dcZ5BK/IBaGWssbSYBHvuMeMt3MMFyhI0Z8SqGgEkBLARgpRH3hutIgPVsALcMwbDrJqPxQ65A==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.8.3",
        "caniuse-lite": "^1.0.30001741",
        "electron-to-chromium": "^1.5.218",
        "node-releases": "^2.0.21",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/busboy": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/busboy/-/busboy-1.6.0.tgz",
      "integrity": "sha512-8SFQbg/0hQ9xy3UNTB0YEnsNBbWfhf7RtnzpL7TkBiTBRfrQ9Fxcnz7VJsleJpyp6rVLvXiuORqjlHi5q+PYuA==",
      "dependencies": {
        "streamsearch": "^1.1.0"
      },
      "engines": {
        "node": ">=10.16.0"
      }
    },
    "node_modules/cac": {
      "version": "6.7.14",
      "resolved": "https://registry.npmjs.org/cac/-/cac-6.7.14.tgz",
      "integrity": "sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001745",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001745.tgz",
      "integrity": "sha512-ywt6i8FzvdgrrrGbr1jZVObnVv6adj+0if2/omv9cmR2oiZs30zL4DIyaptKcbOrBdOIc74QTMoJvSE2QHh5UQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/ccount": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/ccount/-/ccount-2.0.1.tgz",
      "integrity": "sha512-eyrF0jiFpY+3drT6383f1qhkbGsLSifNAjA61IUjZjmLCWjItY6LB9ft9YhoDgwfmclB2zhu51Lc7+95b8NRAg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/chai": {
      "version": "5.3.3",
      "resolved": "https://registry.npmjs.org/chai/-/chai-5.3.3.tgz",
      "integrity": "sha512-4zNhdJD/iOjSH0A05ea+Ke6MU5mmpQcbQsSOkgdaUMJ9zTlDTD/GYlwohmIE2u0gaxHYiVHEn1Fw9mZ/ktJWgw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "assertion-error": "^2.0.1",
        "check-error": "^2.1.1",
        "deep-eql": "^5.0.1",
        "loupe": "^3.1.0",
        "pathval": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/chalk/node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/character-entities": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/character-entities/-/character-entities-2.0.2.tgz",
      "integrity": "sha512-shx7oQ0Awen/BRIdkjkvz54PnEEI/EjwXDSIZp86/KKdbafHh1Df/RYGBhn4hbe2+uKC9FnT5UCEdyPz3ai9hQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-entities-html4": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/character-entities-html4/-/character-entities-html4-2.1.0.tgz",
      "integrity": "sha512-1v7fgQRj6hnSwFpq1Eu0ynr/CDEw0rXo2B61qXrLNdHZmPKgb7fqS1a2JwF0rISo9q77jDI8VMEHoApn8qDoZA==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-entities-legacy": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/character-entities-legacy/-/character-entities-legacy-3.0.0.tgz",
      "integrity": "sha512-RpPp0asT/6ufRm//AJVwpViZbGM/MkjQFxJccQRHmISF/22NBtsHqAWmL+/pmkPWoIUJdWyeVleTl1wydHATVQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-reference-invalid": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/character-reference-invalid/-/character-reference-invalid-2.0.1.tgz",
      "integrity": "sha512-iBZ4F4wRbyORVsu0jPV7gXkOsGYjGHPmAyv+HiHG8gi5PtC9KI2j1+v8/tlibRvjoWX027ypmG/n0HtO5t7unw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/check-error": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/check-error/-/check-error-2.1.1.tgz",
      "integrity": "sha512-OAlb+T7V4Op9OwdkjmguYRqncdlx5JiofwOAUkmTF+jNdHwzTaTs4sRAGpzLF3oOz5xAyDGrPgeIDFQmDOTiJw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 16"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/client-only": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
      "integrity": "sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==",
      "license": "MIT"
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/comma-separated-tokens": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/comma-separated-tokens/-/comma-separated-tokens-2.0.3.tgz",
      "integrity": "sha512-Fu4hJdvzeylCfQPp9SGWidpzrMs7tTrlu6Vb8XGaRGck8QSNZJJp538Wrb60Lax4fPwR64ViY468OIUTbRlGZg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/create-require": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz",
      "integrity": "sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/damerau-levenshtein": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/damerau-levenshtein/-/damerau-levenshtein-1.0.8.tgz",
      "integrity": "sha512-sdQSFB7+llfUcQHUQO3+B8ERRj0Oa4w9POWMI/puGtuf7gFywGmkaLCElnudfTiKZV+NvHqL0ifzdrI8Ro7ESA==",
      "dev": true,
      "license": "BSD-2-Clause"
    },
    "node_modules/data-view-buffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
      "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/data-view-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
      "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/inspect-js"
      }
    },
    "node_modules/data-view-byte-offset": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
      "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decode-named-character-reference": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/decode-named-character-reference/-/decode-named-character-reference-1.2.0.tgz",
      "integrity": "sha512-c6fcElNV6ShtZXmsgNgFFV5tVX2PaV4g+MOAkb8eXHvn6sryJBrZa9r0zV6+dtTyoCKxtDy5tyQ5ZwQuidtd+Q==",
      "license": "MIT",
      "dependencies": {
        "character-entities": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/deep-eql": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/deep-eql/-/deep-eql-5.0.2.tgz",
      "integrity": "sha512-h5k/5U50IJJFpzfL6nO9jaaumfjO/f2NjK/oYB2Djzm4p9L+3T9qWpZqZ2hAbLPuuYq9wrU08WQyBTL5GbPk5Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/dequal": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/dequal/-/dequal-2.0.3.tgz",
      "integrity": "sha512-0je+qPKHEMohvfRTCEo3CrPG6cAzAYgmzKyxRiYSSDkS6eGJdyVJm7WaYA5ECaAD9wLB2T4EEeymA5aFVcYXCA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/detect-node-es": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/detect-node-es/-/detect-node-es-1.1.0.tgz",
      "integrity": "sha512-ypdmJU/TbBby2Dxibuv7ZLW3Bs1QEmM7nHjEANfohJLvE0XVujisn1qPJcZxg+qDucsr+bP6fLD1rPS3AhJ7EQ==",
      "license": "MIT"
    },
    "node_modules/devlop": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/devlop/-/devlop-1.1.0.tgz",
      "integrity": "sha512-RWmIqhcFf1lRYBvNmr7qTNuyCt/7/ns2jbpp1+PalgE/rDQcBT0fioSMUpJ93irlUhC5hrg4cYqe6U+0ImW0rA==",
      "license": "MIT",
      "dependencies": {
        "dequal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/diff": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/diff/-/diff-4.0.2.tgz",
      "integrity": "sha512-58lmxKSA4BNyLz+HHMUzlOEpg09FV+ev6ZMe3vJihgdxzgcwZ8VoEEPmALCZG9LmqfVoNMMKpttIYTVG6uDY7A==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.3.1"
      }
    },
    "node_modules/dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-type": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.223",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.223.tgz",
      "integrity": "sha512-qKm55ic6nbEmagFlTFczML33rF90aU+WtrJ9MdTCThrcvDNdUHN4p6QfVN78U06ZmguqXIyMPyYhw2TrbDUwPQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/es-abstract": {
      "version": "1.24.0",
      "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.0.tgz",
      "integrity": "sha512-WSzPgsdLtTcQwm4CROfS5ju2Wa1QQcVeT37jFjYzdFz1r9ahadC8B8/a4qxJxM+09F18iumCdRmlr96ZYkQvEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.2",
        "arraybuffer.prototype.slice": "^1.0.4",
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "data-view-buffer": "^1.0.2",
        "data-view-byte-length": "^1.0.2",
        "data-view-byte-offset": "^1.0.1",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-set-tostringtag": "^2.1.0",
        "es-to-primitive": "^1.3.0",
        "function.prototype.name": "^1.1.8",
        "get-intrinsic": "^1.3.0",
        "get-proto": "^1.0.1",
        "get-symbol-description": "^1.1.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "internal-slot": "^1.1.0",
        "is-array-buffer": "^3.0.5",
        "is-callable": "^1.2.7",
        "is-data-view": "^1.0.2",
        "is-negative-zero": "^2.0.3",
        "is-regex": "^1.2.1",
        "is-set": "^2.0.3",
        "is-shared-array-buffer": "^1.0.4",
        "is-string": "^1.1.1",
        "is-typed-array": "^1.1.15",
        "is-weakref": "^1.1.1",
        "math-intrinsics": "^1.1.0",
        "object-inspect": "^1.13.4",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.7",
        "own-keys": "^1.0.1",
        "regexp.prototype.flags": "^1.5.4",
        "safe-array-concat": "^1.1.3",
        "safe-push-apply": "^1.0.0",
        "safe-regex-test": "^1.1.0",
        "set-proto": "^1.0.0",
        "stop-iteration-iterator": "^1.1.0",
        "string.prototype.trim": "^1.2.10",
        "string.prototype.trimend": "^1.0.9",
        "string.prototype.trimstart": "^1.0.8",
        "typed-array-buffer": "^1.0.3",
        "typed-array-byte-length": "^1.0.3",
        "typed-array-byte-offset": "^1.0.4",
        "typed-array-length": "^1.0.7",
        "unbox-primitive": "^1.1.0",
        "which-typed-array": "^1.1.19"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-iterator-helpers": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/es-iterator-helpers/-/es-iterator-helpers-1.2.1.tgz",
      "integrity": "sha512-uDn+FE1yrDzyC0pCo961B2IHbdM8y/ACZsKD4dG6WqrjV53BADjwa7D+1aom2rsNVfLyDgU/eigvlJGJ08OQ4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-set-tostringtag": "^2.0.3",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.6",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "iterator.prototype": "^1.1.4",
        "safe-array-concat": "^1.1.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-module-lexer": {
      "version": "1.7.0",
      "resolved": "https://registry.npmjs.org/es-module-lexer/-/es-module-lexer-1.7.0.tgz",
      "integrity": "sha512-jEQoCwk8hyb2AZziIOLhDqpm5+2ww5uIE6lkO/6jcOCusfk6LhMHpXXfBLXTZ7Ydyt0j4VoUQv6uGNYbdW+kBA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-shim-unscopables": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/es-shim-unscopables/-/es-shim-unscopables-1.1.0.tgz",
      "integrity": "sha512-d9T8ucsEhh8Bi1woXCf+TIKDIROLG5WCkxg8geBCbvk22kzwC5G2OnXVMO6FUsvQlgUUXQ2itephWDLqDzbeCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-to-primitive": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
      "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7",
        "is-date-object": "^1.0.5",
        "is-symbol": "^1.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.10",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.10.tgz",
      "integrity": "sha512-9RiGKvCwaqxO2owP61uQ4BgNborAQskMR6QusfWzQqv7AZOg5oGehdY2pRJMTKuwxd1IDBP4rSbI5lHzU7SMsQ==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.10",
        "@esbuild/android-arm": "0.25.10",
        "@esbuild/android-arm64": "0.25.10",
        "@esbuild/android-x64": "0.25.10",
        "@esbuild/darwin-arm64": "0.25.10",
        "@esbuild/darwin-x64": "0.25.10",
        "@esbuild/freebsd-arm64": "0.25.10",
        "@esbuild/freebsd-x64": "0.25.10",
        "@esbuild/linux-arm": "0.25.10",
        "@esbuild/linux-arm64": "0.25.10",
        "@esbuild/linux-ia32": "0.25.10",
        "@esbuild/linux-loong64": "0.25.10",
        "@esbuild/linux-mips64el": "0.25.10",
        "@esbuild/linux-ppc64": "0.25.10",
        "@esbuild/linux-riscv64": "0.25.10",
        "@esbuild/linux-s390x": "0.25.10",
        "@esbuild/linux-x64": "0.25.10",
        "@esbuild/netbsd-arm64": "0.25.10",
        "@esbuild/netbsd-x64": "0.25.10",
        "@esbuild/openbsd-arm64": "0.25.10",
        "@esbuild/openbsd-x64": "0.25.10",
        "@esbuild/openharmony-arm64": "0.25.10",
        "@esbuild/sunos-x64": "0.25.10",
        "@esbuild/win32-arm64": "0.25.10",
        "@esbuild/win32-ia32": "0.25.10",
        "@esbuild/win32-x64": "0.25.10"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "8.57.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.57.0.tgz",
      "integrity": "sha512-dZ6+mexnaTIbSBZWgou51U6OmzIhYM2VcNdtiTtI7qPNZm35Akpr0f6vtw3w1Kmn5PYo+tZVfh13WrhpS6oLqQ==",
      "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.6.1",
        "@eslint/eslintrc": "^2.1.4",
        "@eslint/js": "8.57.0",
        "@humanwhocodes/config-array": "^0.11.14",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "@ungap/structured-clone": "^1.2.0",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.2.2",
        "eslint-visitor-keys": "^3.4.3",
        "espree": "^9.6.1",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3",
        "strip-ansi": "^6.0.1",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-config-next": {
      "version": "14.2.5",
      "resolved": "https://registry.npmjs.org/eslint-config-next/-/eslint-config-next-14.2.5.tgz",
      "integrity": "sha512-zogs9zlOiZ7ka+wgUnmcM0KBEDjo4Jis7kxN1jvC0N4wynQ2MIx/KBkg4mVF63J5EK4W0QMCn7xO3vNisjaAoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@next/eslint-plugin-next": "14.2.5",
        "@rushstack/eslint-patch": "^1.3.3",
        "@typescript-eslint/parser": "^5.4.2 || ^6.0.0 || 7.0.0 - 7.2.0",
        "eslint-import-resolver-node": "^0.3.6",
        "eslint-import-resolver-typescript": "^3.5.2",
        "eslint-plugin-import": "^2.28.1",
        "eslint-plugin-jsx-a11y": "^6.7.1",
        "eslint-plugin-react": "^7.33.2",
        "eslint-plugin-react-hooks": "^4.5.0 || 5.0.0-canary-7118f5dd7-20230705"
      },
      "peerDependencies": {
        "eslint": "^7.23.0 || ^8.0.0",
        "typescript": ">=3.3.1"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-config-prettier": {
      "version": "9.1.2",
      "resolved": "https://registry.npmjs.org/eslint-config-prettier/-/eslint-config-prettier-9.1.2.tgz",
      "integrity": "sha512-iI1f+D2ViGn+uvv5HuHVUamg8ll4tN+JRHGc6IJi4TP9Kl976C57fzPXgseXNs8v0iA8aSJpHsTWjDb9QJamGQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "eslint-config-prettier": "bin/cli.js"
      },
      "peerDependencies": {
        "eslint": ">=7.0.0"
      }
    },
    "node_modules/eslint-import-resolver-node": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-node/-/eslint-import-resolver-node-0.3.9.tgz",
      "integrity": "sha512-WFj2isz22JahUv+B788TlO3N6zL3nNJGU8CcZbPZvVEkBPaJdCV4vy5wyghty5ROFbCRnm132v8BScu5/1BQ8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7",
        "is-core-module": "^2.13.0",
        "resolve": "^1.22.4"
      }
    },
    "node_modules/eslint-import-resolver-node/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-import-resolver-typescript": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-typescript/-/eslint-import-resolver-typescript-3.10.1.tgz",
      "integrity": "sha512-A1rHYb06zjMGAxdLSkN2fXPBwuSaQ0iO5M/hdyS0Ajj1VBaRp0sPD3dn1FhME3c/JluGFbwSxyCfqdSbtQLAHQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@nolyfill/is-core-module": "1.0.39",
        "debug": "^4.4.0",
        "get-tsconfig": "^4.10.0",
        "is-bun-module": "^2.0.0",
        "stable-hash": "^0.0.5",
        "tinyglobby": "^0.2.13",
        "unrs-resolver": "^1.6.2"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint-import-resolver-typescript"
      },
      "peerDependencies": {
        "eslint": "*",
        "eslint-plugin-import": "*",
        "eslint-plugin-import-x": "*"
      },
      "peerDependenciesMeta": {
        "eslint-plugin-import": {
          "optional": true
        },
        "eslint-plugin-import-x": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils": {
      "version": "2.12.1",
      "resolved": "https://registry.npmjs.org/eslint-module-utils/-/eslint-module-utils-2.12.1.tgz",
      "integrity": "sha512-L8jSWTze7K2mTg0vos/RuLRS5soomksDPoJLXIslC7c8Wmut3bx7CPpJijDcBZtxQ5lrbUdM+s0OlNbz0DCDNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependenciesMeta": {
        "eslint": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-import": {
      "version": "2.32.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-import/-/eslint-plugin-import-2.32.0.tgz",
      "integrity": "sha512-whOE1HFo/qJDyX4SnXzP4N6zOWn79WhnCUY/iDR0mPfQZO8wcYE4JClzI2oZrhBnnMUCBCHZhO6VQyoBU95mZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@rtsao/scc": "^1.1.0",
        "array-includes": "^3.1.9",
        "array.prototype.findlastindex": "^1.2.6",
        "array.prototype.flat": "^1.3.3",
        "array.prototype.flatmap": "^1.3.3",
        "debug": "^3.2.7",
        "doctrine": "^2.1.0",
        "eslint-import-resolver-node": "^0.3.9",
        "eslint-module-utils": "^2.12.1",
        "hasown": "^2.0.2",
        "is-core-module": "^2.16.1",
        "is-glob": "^4.0.3",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "object.groupby": "^1.0.3",
        "object.values": "^1.2.1",
        "semver": "^6.3.1",
        "string.prototype.trimend": "^1.0.9",
        "tsconfig-paths": "^3.15.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/doctrine": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-2.1.0.tgz",
      "integrity": "sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/eslint-plugin-jsx-a11y": {
      "version": "6.10.2",
      "resolved": "https://registry.npmjs.org/eslint-plugin-jsx-a11y/-/eslint-plugin-jsx-a11y-6.10.2.tgz",
      "integrity": "sha512-scB3nz4WmG75pV8+3eRUQOHZlNSUhFNq37xnpgRkCCELU3XMvXAxLk1eqWWyE22Ki4Q01Fnsw9BA3cJHDPgn2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "aria-query": "^5.3.2",
        "array-includes": "^3.1.8",
        "array.prototype.flatmap": "^1.3.2",
        "ast-types-flow": "^0.0.8",
        "axe-core": "^4.10.0",
        "axobject-query": "^4.1.0",
        "damerau-levenshtein": "^1.0.8",
        "emoji-regex": "^9.2.2",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^3.3.5",
        "language-tags": "^1.0.9",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "safe-regex-test": "^1.0.3",
        "string.prototype.includes": "^2.0.1"
      },
      "engines": {
        "node": ">=4.0"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-jsx-a11y/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint-plugin-jsx-a11y/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/eslint-plugin-react": {
      "version": "7.37.5",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react/-/eslint-plugin-react-7.37.5.tgz",
      "integrity": "sha512-Qteup0SqU15kdocexFNAJMvCJEfa2xUKNV4CC1xsVMrIIqEy3SQ/rqyxCWNzfrd3/ldy6HMlD2e0JDVpDg2qIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.8",
        "array.prototype.findlast": "^1.2.5",
        "array.prototype.flatmap": "^1.3.3",
        "array.prototype.tosorted": "^1.1.4",
        "doctrine": "^2.1.0",
        "es-iterator-helpers": "^1.2.1",
        "estraverse": "^5.3.0",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^2.4.1 || ^3.0.0",
        "minimatch": "^3.1.2",
        "object.entries": "^1.1.9",
        "object.fromentries": "^2.0.8",
        "object.values": "^1.2.1",
        "prop-types": "^15.8.1",
        "resolve": "^2.0.0-next.5",
        "semver": "^6.3.1",
        "string.prototype.matchall": "^4.0.12",
        "string.prototype.repeat": "^1.0.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9.7"
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "5.0.0-canary-7118f5dd7-20230705",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.0.0-canary-7118f5dd7-20230705.tgz",
      "integrity": "sha512-AZYbMo/NW9chdL7vk6HQzQhT+PvTAEVqWk9ziruUoW2kAOcN5qNyelv70e0F1VNQAbvutOC9oc+xfWycI9FxDw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/doctrine": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-2.1.0.tgz",
      "integrity": "sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/resolve": {
      "version": "2.0.0-next.5",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-2.0.0-next.5.tgz",
      "integrity": "sha512-U7WjGVG9sH8tvjW5SmGbQuui75FiyjAX72HX15DwBBwF9dNiQZRQAg9nnPhYy+TUnE0+VcrttuvNI8oSxZcocA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.13.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/eslint-plugin-tailwindcss": {
      "version": "3.18.2",
      "resolved": "https://registry.npmjs.org/eslint-plugin-tailwindcss/-/eslint-plugin-tailwindcss-3.18.2.tgz",
      "integrity": "sha512-QbkMLDC/OkkjFQ1iz/5jkMdHfiMu/uwujUHLAJK5iwNHD8RTxVTlsUezE0toTZ6VhybNBsk+gYGPDq2agfeRNA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-glob": "^3.2.5",
        "postcss": "^8.4.4"
      },
      "engines": {
        "node": ">=18.12.0"
      },
      "peerDependencies": {
        "tailwindcss": "^3.4.0"
      }
    },
    "node_modules/eslint-scope": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.2.2.tgz",
      "integrity": "sha512-dOt21O7lTMhDM+X9mB4GX+DZrZtCUJPL/wlcTqxyrx5IvO0IYtILdtrQGQp+8n5S0gwSVmOf9NQrjMOgfQZlIg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/eslint/node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/espree": {
      "version": "9.6.1",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.6.1.tgz",
      "integrity": "sha512-oruZaFkjorTpF32kDSI5/75ViwGeZginGGy2NoOSg3Q9bnwlnmDm4HLnkl0RE3n+njDXR037aY1+x58Z/zFdwQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.9.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estree-util-is-identifier-name": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/estree-util-is-identifier-name/-/estree-util-is-identifier-name-3.0.0.tgz",
      "integrity": "sha512-hFtqIDZTIUZ9BXLb8y4pYGyk6+wekIivNVTcmvk8NoOh+VeRn5y6cEHzbURrWbfp1fIqdVipilzj+lfaadNZmg==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/estree-walker": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-3.0.3.tgz",
      "integrity": "sha512-7RUKfXgSMMkzt6ZuXmqapOurLGPPfgj6l9uRZ7lRGolvk0y2yocc35LdcxKC5PQZdn2DMqioAQ2NoWcrTKmm6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "^1.0.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/expect-type": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/expect-type/-/expect-type-1.2.2.tgz",
      "integrity": "sha512-JhFGDVJ7tmDJItKhYgJCGLOWjuK9vPxiXoUFLwLDc99NlmklilbiQJwoctZtt13+xMw91MCk/REan6MWHqDjyA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/extend": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
      "license": "MIT"
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-xml-parser": {
      "version": "5.2.5",
      "resolved": "https://registry.npmjs.org/fast-xml-parser/-/fast-xml-parser-5.2.5.tgz",
      "integrity": "sha512-pfX9uG9Ki0yekDHx2SiuRIyFdyAr1kMIMitPvb0YBo8SUfKvia7w7FIyd/l6av85pFYRhZscS75MwMnbvY+hcQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "strnum": "^2.1.0"
      },
      "bin": {
        "fxparser": "src/cli/cli.js"
      }
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fd-package-json": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/fd-package-json/-/fd-package-json-2.0.0.tgz",
      "integrity": "sha512-jKmm9YtsNXN789RS/0mSzOC1NUq9mkVd65vbSSVsKdjGvYXBuE4oWe2QOEoFeRmJg+lPuZxpmrfFclNhoRMneQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "walk-up-path": "^4.0.0"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.2.0.tgz",
      "integrity": "sha512-CYcENa+FtcUKLmhhqyctpclsq7QF38pKjZHsGNiSQF5r4FtoKDWabFDl3hzaEQMvT1LHEysw5twgLvpYYb4vbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.3",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/foreground-child": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/foreground-child/-/foreground-child-3.3.1.tgz",
      "integrity": "sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "cross-spawn": "^7.0.6",
        "signal-exit": "^4.0.1"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/formatly": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/formatly/-/formatly-0.3.0.tgz",
      "integrity": "sha512-9XNj/o4wrRFyhSMJOvsuyMwy8aUfBaZ1VrqHVfohyXf0Sw0e+yfKG+xZaY3arGCOMdwFsqObtzVOc1gU9KiT9w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fd-package-json": "^2.0.0"
      },
      "bin": {
        "formatly": "bin/index.mjs"
      },
      "engines": {
        "node": ">=18.3.0"
      }
    },
    "node_modules/fraction.js": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-4.3.7.tgz",
      "integrity": "sha512-ZsDfxO51wGAXREY55a7la9LScWpwv9RxIrYABrlvOFBlH/ShPnrtsXeuUIfXKKOVicNxQ+o8JTbJvjS4M89yew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "patreon",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/function.prototype.name": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
      "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "functions-have-names": "^1.2.3",
        "hasown": "^2.0.2",
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-nonce": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-nonce/-/get-nonce-1.0.1.tgz",
      "integrity": "sha512-FJhYRoDaiatfEkUK8HKlicmu/3SGFD51q3itKDGoSTysQJBnfOcxU5GxnhE1E6soB76MbT0MBtnKJuXyAx+96Q==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-symbol-description": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
      "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.10.1",
      "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.10.1.tgz",
      "integrity": "sha512-auHyJ4AgMz7vgS8Hp3N6HXSmlMdUyhSUrfBF16w153rxtLIEOE+HGqaBppczZvnHLqQJfiHotCYpNhl0lUROFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob": {
      "version": "10.4.5",
      "resolved": "https://registry.npmjs.org/glob/-/glob-10.4.5.tgz",
      "integrity": "sha512-7Bv8RF0k6xjo7d4A/PxYLbUCfb6c+Vpd2/mB2yRDlew7Jb5hEXiCD9ibfO7wpk8i4sevK6DFny9h7EYbM3/sHg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "foreground-child": "^3.1.0",
        "jackspeak": "^3.1.2",
        "minimatch": "^9.0.4",
        "minipass": "^7.1.2",
        "package-json-from-dist": "^1.0.0",
        "path-scurry": "^1.11.1"
      },
      "bin": {
        "glob": "dist/esm/bin.mjs"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "13.24.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.24.0.tgz",
      "integrity": "sha512-AhO5QUcj8llrbG09iWhPU2B204J1xnPeL8kQmVorSsy+Sjj1sk8gIyh6cUocGmH4L0UuhAJy+hJMRA4mgA4mFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
      "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.2.1",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
      "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hast-util-to-jsx-runtime": {
      "version": "2.3.6",
      "resolved": "https://registry.npmjs.org/hast-util-to-jsx-runtime/-/hast-util-to-jsx-runtime-2.3.6.tgz",
      "integrity": "sha512-zl6s8LwNyo1P9uw+XJGvZtdFF1GdAkOg8ujOw+4Pyb76874fLps4ueHXDhXWdk6YHQ6OgUtinliG7RsYvCbbBg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/unist": "^3.0.0",
        "comma-separated-tokens": "^2.0.0",
        "devlop": "^1.0.0",
        "estree-util-is-identifier-name": "^3.0.0",
        "hast-util-whitespace": "^3.0.0",
        "mdast-util-mdx-expression": "^2.0.0",
        "mdast-util-mdx-jsx": "^3.0.0",
        "mdast-util-mdxjs-esm": "^2.0.0",
        "property-information": "^7.0.0",
        "space-separated-tokens": "^2.0.0",
        "style-to-js": "^1.0.0",
        "unist-util-position": "^5.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/hast-util-whitespace": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/hast-util-whitespace/-/hast-util-whitespace-3.0.0.tgz",
      "integrity": "sha512-88JUN06ipLwsnv+dVn+OIYOvAuvBMy/Qoi6O7mQHxdPXpjy+Cd6xRkWwux7DKO+4sYILtLBRIKgsdpS2gQc7qw==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/html-url-attributes": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/html-url-attributes/-/html-url-attributes-3.0.1.tgz",
      "integrity": "sha512-ol6UPyBWqsrO6EJySPz2O7ZSr856WDrEzM5zMqp+FJJLGMW35cLYmmZnl0vztAZxRUoNZJFTCohfjuIJ8I4QBQ==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/inline-style-parser": {
      "version": "0.2.4",
      "resolved": "https://registry.npmjs.org/inline-style-parser/-/inline-style-parser-0.2.4.tgz",
      "integrity": "sha512-0aO8FkhNZlj/ZIbNi7Lxxr12obT7cL1moPfE4tg1LkX7LlLfC6DeX4l2ZEud1ukP9jNQyNnfzQVqwbwmAATY4Q==",
      "license": "MIT"
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/is-alphabetical": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-alphabetical/-/is-alphabetical-2.0.1.tgz",
      "integrity": "sha512-FWyyY60MeTNyeSRpkM2Iry0G9hpr7/9kD40mD/cGQEuilcZYS4okz8SN2Q6rLCJ8gbCt6fN+rC+6tMGS99LaxQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-alphanumerical": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-alphanumerical/-/is-alphanumerical-2.0.1.tgz",
      "integrity": "sha512-hmbYhX/9MUMF5uh7tOXyK/n0ZvWpad5caBA17GsC6vyuCqaWliRG5K1qS9inmUhEMaOBIW7/whAnSwveW/LtZw==",
      "license": "MIT",
      "dependencies": {
        "is-alphabetical": "^2.0.0",
        "is-decimal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-async-function": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
      "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "async-function": "^1.0.0",
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bun-module": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/is-bun-module/-/is-bun-module-2.0.0.tgz",
      "integrity": "sha512-gNCGbnnnnFAUGKeZ9PdbyeGYJqewpmc2aKHUEMO5nQPWU9lOmv7jcmQIv+qHD8fXW6W7qfuCwX4rY9LNRjXrkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.7.1"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-data-view": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
      "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "is-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-decimal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-decimal/-/is-decimal-2.0.1.tgz",
      "integrity": "sha512-AAB9hiomQs5DXWcRB1rqsxGUstbRroFOPPVAomNk/3XHR5JyEZChOyTWe2oayKnsSsr/kcGqF+z6yuH6HHpN0A==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-finalizationregistry": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
      "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-generator-function": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.0.tgz",
      "integrity": "sha512-nPUB5km40q9e8UfN/Zc24eLlzdSf9OfKByBw9CIdw4H1giPMeA0OIJvbchsCu4npfI2QcMVBsGEBHKZ7wLTWmQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.0",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-hexadecimal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-hexadecimal/-/is-hexadecimal-2.0.1.tgz",
      "integrity": "sha512-DgZQp241c8oO6cA1SbTEWiXeoxV42vlcJxgH+B3hi1AiqqKruZR3ZGF8In3fj4+/y/7rHvlOZLZtgJ/4ttYGZg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-negative-zero": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
      "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-plain-obj": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/is-plain-obj/-/is-plain-obj-4.1.0.tgz",
      "integrity": "sha512-+Pgi+vMuUNkJyExiMBt5IlFoMyKnr5zhJ4Uspz58WOhBF5QoIZkFyNHIbBAtHwzVAgk5RtndVNsDRN61/mmDqg==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-typed-array": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
      "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
      "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/iterator.prototype": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/iterator.prototype/-/iterator.prototype-1.1.5.tgz",
      "integrity": "sha512-H0dkQoCa3b2VEeKQBOxFph+JAbcrQdE7KC0UkqwpLmv2EC4P41QXP+rqo9wYodACiG5/WM5s9oDApTU8utwj9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "get-proto": "^1.0.0",
        "has-symbols": "^1.1.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/jackspeak": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-3.4.3.tgz",
      "integrity": "sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "@isaacs/cliui": "^8.0.2"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      },
      "optionalDependencies": {
        "@pkgjs/parseargs": "^0.11.0"
      }
    },
    "node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/jose": {
      "version": "4.15.9",
      "resolved": "https://registry.npmjs.org/jose/-/jose-4.15.9.tgz",
      "integrity": "sha512-1vUQX+IdDMVPj4k8kOxgUqlcK518yluMuGZwqlr44FS1ppZB/5GWh4rZG89erpOBOJjU/OBsnCVFfapsRz6nEA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
      "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.0"
      },
      "bin": {
        "json5": "lib/cli.js"
      }
    },
    "node_modules/jsx-ast-utils": {
      "version": "3.3.5",
      "resolved": "https://registry.npmjs.org/jsx-ast-utils/-/jsx-ast-utils-3.3.5.tgz",
      "integrity": "sha512-ZZow9HBI5O6EPgSJLUb8n2NKgmVWTwCvHGwFuJlMjvLFqlGG6pjirPhtdsseaLZjSibD8eegzmYpUZwoIlj2cQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.6",
        "array.prototype.flat": "^1.3.1",
        "object.assign": "^4.1.4",
        "object.values": "^1.1.6"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/knip": {
      "version": "5.64.1",
      "resolved": "https://registry.npmjs.org/knip/-/knip-5.64.1.tgz",
      "integrity": "sha512-80XnLsyeXuyxj1F4+NBtQFHxaRH0xWRw8EKwfQ6EkVZZ0bSz/kqqan08k/Qg8ajWsFPhFq+0S2RbLCBGIQtuOg==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/webpro"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/knip"
        }
      ],
      "license": "ISC",
      "dependencies": {
        "@nodelib/fs.walk": "^1.2.3",
        "fast-glob": "^3.3.3",
        "formatly": "^0.3.0",
        "jiti": "^2.6.0",
        "js-yaml": "^4.1.0",
        "minimist": "^1.2.8",
        "oxc-resolver": "^11.8.3",
        "picocolors": "^1.1.1",
        "picomatch": "^4.0.1",
        "smol-toml": "^1.4.1",
        "strip-json-comments": "5.0.2",
        "zod": "^4.1.11"
      },
      "bin": {
        "knip": "bin/knip.js",
        "knip-bun": "bin/knip-bun.js"
      },
      "engines": {
        "node": ">=18.18.0"
      },
      "peerDependencies": {
        "@types/node": ">=18",
        "typescript": ">=5.0.4 <7"
      }
    },
    "node_modules/knip/node_modules/jiti": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-2.6.0.tgz",
      "integrity": "sha512-VXe6RjJkBPj0ohtqaO8vSWP3ZhAKo66fKrFNCll4BTcwljPLz03pCbaNKfzGP5MbrCYcbJ7v0nOYYwUzTEIdXQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "lib/jiti-cli.mjs"
      }
    },
    "node_modules/knip/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/knip/node_modules/strip-json-comments": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-5.0.2.tgz",
      "integrity": "sha512-4X2FR3UwhNUE9G49aIsJW5hRRR3GXGTBTZRMfv568O60ojM8HcWjV/VxAxCDW3SUND33O6ZY66ZuRcdkj73q2g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/language-subtag-registry": {
      "version": "0.3.23",
      "resolved": "https://registry.npmjs.org/language-subtag-registry/-/language-subtag-registry-0.3.23.tgz",
      "integrity": "sha512-0K65Lea881pHotoGEa5gDlMxt3pctLi2RplBb7Ezh4rRdLEOtgi7n4EwK9lamnUCkKBqaeKRVebTq6BAxSkpXQ==",
      "dev": true,
      "license": "CC0-1.0"
    },
    "node_modules/language-tags": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/language-tags/-/language-tags-1.0.9.tgz",
      "integrity": "sha512-MbjN408fEndfiQXbFQ1vnd+1NoLDsnQW41410oQBXiyXDMYH5z505juWa4KUE1LqxRC7DgOgZDbKLxHIwm27hA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "language-subtag-registry": "^0.3.20"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/longest-streak": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/longest-streak/-/longest-streak-3.1.0.tgz",
      "integrity": "sha512-9Ri+o0JYgehTaVBBDoMqIl8GXtbWg711O3srftcHhZ0dqnETqLaoIK0x17fUw9rFSlK/0NlsKe0Ahhyl5pXE2g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/loupe": {
      "version": "3.2.1",
      "resolved": "https://registry.npmjs.org/loupe/-/loupe-3.2.1.tgz",
      "integrity": "sha512-CdzqowRJCeLU72bHvWqwRBBlLcMEtIvGrlvef74kMnV2AolS9Y8xUv1I0U/MNAWMhBlKIoyuEgoJ0t/bbwHbLQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lru-cache": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/lucide-react": {
      "version": "0.452.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.452.0.tgz",
      "integrity": "sha512-kNefjOUOGm+Mu3KDiryONyPba9r+nhcrz5oJs3N6JDzGboQNEXw5GB3yB8rnV9/FA4bPyggNU6CRSihZm9MvSw==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0-rc"
      }
    },
    "node_modules/magic-string": {
      "version": "0.30.19",
      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.19.tgz",
      "integrity": "sha512-2N21sPY9Ws53PZvsEpVtNuSW+ScYbQdp4b9qUaL+9QkHUrGFKo56Lg9Emg5s9V/qrtNBmiR01sYhUOwu3H+VOw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.5"
      }
    },
    "node_modules/make-error": {
      "version": "1.3.6",
      "resolved": "https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz",
      "integrity": "sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/markdown-table": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/markdown-table/-/markdown-table-3.0.4.tgz",
      "integrity": "sha512-wiYz4+JrLyb/DqW2hkFJxP7Vd7JuTDm77fvbM8VfEQdmSMqcImWeeRbHwZjBjIFki/VaMK2BhFi7oUUZeM5bqw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mdast-util-find-and-replace": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/mdast-util-find-and-replace/-/mdast-util-find-and-replace-3.0.2.tgz",
      "integrity": "sha512-Tmd1Vg/m3Xz43afeNxDIhWRtFZgM2VLyaf4vSTYwudTyeuTneoL3qtWMA5jeLyz/O1vDJmmV4QuScFCA2tBPwg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "escape-string-regexp": "^5.0.0",
        "unist-util-is": "^6.0.0",
        "unist-util-visit-parents": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-find-and-replace/node_modules/escape-string-regexp": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-5.0.0.tgz",
      "integrity": "sha512-/veY75JbMK4j1yjvuUxuVsiS/hr/4iHs9FTT6cgTexxdE0Ly/glccBAkloH/DofkjRbZU3bnoj38mOmhkZ0lHw==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mdast-util-from-markdown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/mdast-util-from-markdown/-/mdast-util-from-markdown-2.0.2.tgz",
      "integrity": "sha512-uZhTV/8NBuw0WHkPTrCqDOl0zVe1BIng5ZtHoDk49ME1qqcjYmmLmOf0gELgcRMxN4w2iuIeVso5/6QymSrgmA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "mdast-util-to-string": "^4.0.0",
        "micromark": "^4.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-decode-string": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0",
        "unist-util-stringify-position": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm/-/mdast-util-gfm-3.1.0.tgz",
      "integrity": "sha512-0ulfdQOM3ysHhCJ1p06l0b0VKlhU0wuQs3thxZQagjcjPrlFRqY215uZGHHJan9GEAXd9MbfPjFJz+qMkVR6zQ==",
      "license": "MIT",
      "dependencies": {
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-gfm-autolink-literal": "^2.0.0",
        "mdast-util-gfm-footnote": "^2.0.0",
        "mdast-util-gfm-strikethrough": "^2.0.0",
        "mdast-util-gfm-table": "^2.0.0",
        "mdast-util-gfm-task-list-item": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-autolink-literal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-autolink-literal/-/mdast-util-gfm-autolink-literal-2.0.1.tgz",
      "integrity": "sha512-5HVP2MKaP6L+G6YaxPNjuL0BPrq9orG3TsrZ9YXbA3vDw/ACI4MEsnoDpn6ZNm7GnZgtAcONJyPhOP8tNJQavQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "ccount": "^2.0.0",
        "devlop": "^1.0.0",
        "mdast-util-find-and-replace": "^3.0.0",
        "micromark-util-character": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-footnote": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-footnote/-/mdast-util-gfm-footnote-2.1.0.tgz",
      "integrity": "sha512-sqpDWlsHn7Ac9GNZQMeUzPQSMzR6Wv0WKRNvQRg0KqHh02fpTz69Qc1QSseNX29bhz1ROIyNyxExfawVKTm1GQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.1.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-strikethrough": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-strikethrough/-/mdast-util-gfm-strikethrough-2.0.0.tgz",
      "integrity": "sha512-mKKb915TF+OC5ptj5bJ7WFRPdYtuHv0yTRxK2tJvi+BDqbkiG7h7u/9SI89nRAYcmap2xHQL9D+QG/6wSrTtXg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-table": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-table/-/mdast-util-gfm-table-2.0.0.tgz",
      "integrity": "sha512-78UEvebzz/rJIxLvE7ZtDd/vIQ0RHv+3Mh5DR96p7cS7HsBhYIICDBCu8csTNWNO6tBWfqXPWekRuj2FNOGOZg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "markdown-table": "^3.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-task-list-item": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-task-list-item/-/mdast-util-gfm-task-list-item-2.0.0.tgz",
      "integrity": "sha512-IrtvNvjxC1o06taBAVJznEnkiHxLFTzgonUdy8hzFVeDun0uTjxxrRGVaNFqkU1wJR3RBPEfsxmU6jDWPofrTQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdx-expression": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-mdx-expression/-/mdast-util-mdx-expression-2.0.1.tgz",
      "integrity": "sha512-J6f+9hUp+ldTZqKRSg7Vw5V6MqjATc+3E4gf3CFNcuZNWD8XdyI6zQ8GqH7f8169MM6P7hMBRDVGnn7oHB9kXQ==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdx-jsx": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/mdast-util-mdx-jsx/-/mdast-util-mdx-jsx-3.2.0.tgz",
      "integrity": "sha512-lj/z8v0r6ZtsN/cGNNtemmmfoLAFZnjMbNyLzBafjzikOM+glrjNHPlf6lQDOTccj9n5b0PPihEBbhneMyGs1Q==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "ccount": "^2.0.0",
        "devlop": "^1.1.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "parse-entities": "^4.0.0",
        "stringify-entities": "^4.0.0",
        "unist-util-stringify-position": "^4.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdxjs-esm": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-mdxjs-esm/-/mdast-util-mdxjs-esm-2.0.1.tgz",
      "integrity": "sha512-EcmOpxsZ96CvlP03NghtH1EsLtr0n9Tm4lPUJUBccV9RwUOneqSycg19n5HGzCf+10LozMRSObtVr3ee1WoHtg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-phrasing": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-phrasing/-/mdast-util-phrasing-4.1.0.tgz",
      "integrity": "sha512-TqICwyvJJpBwvGAMZjj4J2n0X8QWp21b9l0o7eXyVJ25YNWYbJDVIyD1bZXE6WtV6RmKJVYmQAKWa0zWOABz2w==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "unist-util-is": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-hast": {
      "version": "13.2.0",
      "resolved": "https://registry.npmjs.org/mdast-util-to-hast/-/mdast-util-to-hast-13.2.0.tgz",
      "integrity": "sha512-QGYKEuUsYT9ykKBCMOEDLsU5JRObWQusAolFMeko/tYPufNkRffBAQjIE+99jbA87xv6FgmjLtwjh9wBWajwAA==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "@ungap/structured-clone": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "trim-lines": "^3.0.0",
        "unist-util-position": "^5.0.0",
        "unist-util-visit": "^5.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-markdown": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/mdast-util-to-markdown/-/mdast-util-to-markdown-2.1.2.tgz",
      "integrity": "sha512-xj68wMTvGXVOKonmog6LwyJKrYXZPvlwabaryTjLh9LuvovB/KAH+kvi8Gjj+7rJjsFi23nkUxRQv1KqSroMqA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "longest-streak": "^3.0.0",
        "mdast-util-phrasing": "^4.0.0",
        "mdast-util-to-string": "^4.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-decode-string": "^2.0.0",
        "unist-util-visit": "^5.0.0",
        "zwitch": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-string": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-to-string/-/mdast-util-to-string-4.0.0.tgz",
      "integrity": "sha512-0H44vDimn51F0YwvxSJSm0eCDOJTRlmN0R1yBh4HLj9wiV1Dn0QoXGbvFAWj2hSItVTlCmBF1hqKlIyUBVFLPg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromark": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/micromark/-/micromark-4.0.2.tgz",
      "integrity": "sha512-zpe98Q6kvavpCr1NPVSCMebCKfD7CA2NqZ+rykeNhONIJBpc1tFKt9hucLGwha3jNTNI8lHpctWJWoimVF4PfA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "@types/debug": "^4.0.0",
        "debug": "^4.0.0",
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-core-commonmark": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-combine-extensions": "^2.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-encode": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-subtokenize": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-core-commonmark": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/micromark-core-commonmark/-/micromark-core-commonmark-2.0.3.tgz",
      "integrity": "sha512-RDBrHEMSxVFLg6xvnXmb1Ayr2WzLAWjeSATAoxwKYJV94TeNavgoIdA0a9ytzDSVzBy2YKFK+emCPOEibLeCrg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-factory-destination": "^2.0.0",
        "micromark-factory-label": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-factory-title": "^2.0.0",
        "micromark-factory-whitespace": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-html-tag-name": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-subtokenize": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-extension-gfm": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm/-/micromark-extension-gfm-3.0.0.tgz",
      "integrity": "sha512-vsKArQsicm7t0z2GugkCKtZehqUm31oeGBV/KVSorWSy8ZlNAv7ytjFhvaryUiCUJYqs+NoE6AFhpQvBTM6Q4w==",
      "license": "MIT",
      "dependencies": {
        "micromark-extension-gfm-autolink-literal": "^2.0.0",
        "micromark-extension-gfm-footnote": "^2.0.0",
        "micromark-extension-gfm-strikethrough": "^2.0.0",
        "micromark-extension-gfm-table": "^2.0.0",
        "micromark-extension-gfm-tagfilter": "^2.0.0",
        "micromark-extension-gfm-task-list-item": "^2.0.0",
        "micromark-util-combine-extensions": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-autolink-literal": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-autolink-literal/-/micromark-extension-gfm-autolink-literal-2.1.0.tgz",
      "integrity": "sha512-oOg7knzhicgQ3t4QCjCWgTmfNhvQbDDnJeVu9v81r7NltNCVmhPy1fJRX27pISafdjL+SVc4d3l48Gb6pbRypw==",
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-footnote": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-footnote/-/micromark-extension-gfm-footnote-2.1.0.tgz",
      "integrity": "sha512-/yPhxI1ntnDNsiHtzLKYnE3vf9JZ6cAisqVDauhp4CEHxlb4uoOTxOCJ+9s51bIB8U1N1FJ1RXOKTIlD5B/gqw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-core-commonmark": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-strikethrough": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-strikethrough/-/micromark-extension-gfm-strikethrough-2.1.0.tgz",
      "integrity": "sha512-ADVjpOOkjz1hhkZLlBiYA9cR2Anf8F4HqZUO6e5eDcPQd0Txw5fxLzzxnEkSkfnD0wziSGiv7sYhk/ktvbf1uw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-table": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-table/-/micromark-extension-gfm-table-2.1.1.tgz",
      "integrity": "sha512-t2OU/dXXioARrC6yWfJ4hqB7rct14e8f7m0cbI5hUmDyyIlwv5vEtooptH8INkbLzOatzKuVbQmAYcbWoyz6Dg==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-tagfilter": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-tagfilter/-/micromark-extension-gfm-tagfilter-2.0.0.tgz",
      "integrity": "sha512-xHlTOmuCSotIA8TW1mDIM6X2O1SiX5P9IuDtqGonFhEK0qgRI4yeC6vMxEV2dgyr2TiD+2PQ10o+cOhdVAcwfg==",
      "license": "MIT",
      "dependencies": {
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-task-list-item": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-task-list-item/-/micromark-extension-gfm-task-list-item-2.1.0.tgz",
      "integrity": "sha512-qIBZhqxqI6fjLDYFTBIa4eivDMnP+OZqsNwmQ3xNLE4Cxwc+zfQEfbs6tzAo2Hjq+bh6q5F+Z8/cksrLFYWQQw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-factory-destination": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-destination/-/micromark-factory-destination-2.0.1.tgz",
      "integrity": "sha512-Xe6rDdJlkmbFRExpTOmRj9N3MaWmbAgdpSrBQvCFqhezUn4AHqJHbaEnfbVYYiexVSs//tqOdY/DxhjdCiJnIA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-label": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-label/-/micromark-factory-label-2.0.1.tgz",
      "integrity": "sha512-VFMekyQExqIW7xIChcXn4ok29YE3rnuyveW3wZQWWqF4Nv9Wk5rgJ99KzPvHjkmPXF93FXIbBp6YdW3t71/7Vg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-space": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-space/-/micromark-factory-space-2.0.1.tgz",
      "integrity": "sha512-zRkxjtBxxLd2Sc0d+fbnEunsTj46SWXgXciZmHq0kDYGnck/ZSGj9/wULTV95uoeYiK5hRXP2mJ98Uo4cq/LQg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-title": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-title/-/micromark-factory-title-2.0.1.tgz",
      "integrity": "sha512-5bZ+3CjhAd9eChYTHsjy6TGxpOFSKgKKJPJxr293jTbfry2KDoWkhBb6TcPVB4NmzaPhMs1Frm9AZH7OD4Cjzw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-whitespace": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-whitespace/-/micromark-factory-whitespace-2.0.1.tgz",
      "integrity": "sha512-Ob0nuZ3PKt/n0hORHyvoD9uZhr+Za8sFoP+OnMcnWK5lngSzALgQYKMr9RJVOWLqQYuyn6ulqGWSXdwf6F80lQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-character": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/micromark-util-character/-/micromark-util-character-2.1.1.tgz",
      "integrity": "sha512-wv8tdUTJ3thSFFFJKtpYKOYiGP2+v96Hvk4Tu8KpCAsTMs6yi+nVmGh1syvSCsaxz45J6Jbw+9DD6g97+NV67Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-chunked": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-chunked/-/micromark-util-chunked-2.0.1.tgz",
      "integrity": "sha512-QUNFEOPELfmvv+4xiNg2sRYeS/P84pTW0TCgP5zc9FpXetHY0ab7SxKyAQCNCc1eK0459uoLI1y5oO5Vc1dbhA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-classify-character": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-classify-character/-/micromark-util-classify-character-2.0.1.tgz",
      "integrity": "sha512-K0kHzM6afW/MbeWYWLjoHQv1sgg2Q9EccHEDzSkxiP/EaagNzCm7T/WMKZ3rjMbvIpvBiZgwR3dKMygtA4mG1Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-combine-extensions": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-combine-extensions/-/micromark-util-combine-extensions-2.0.1.tgz",
      "integrity": "sha512-OnAnH8Ujmy59JcyZw8JSbK9cGpdVY44NKgSM7E9Eh7DiLS2E9RNQf0dONaGDzEG9yjEl5hcqeIsj4hfRkLH/Bg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-decode-numeric-character-reference": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/micromark-util-decode-numeric-character-reference/-/micromark-util-decode-numeric-character-reference-2.0.2.tgz",
      "integrity": "sha512-ccUbYk6CwVdkmCQMyr64dXz42EfHGkPQlBj5p7YVGzq8I7CtjXZJrubAYezf7Rp+bjPseiROqe7G6foFd+lEuw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-decode-string": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-decode-string/-/micromark-util-decode-string-2.0.1.tgz",
      "integrity": "sha512-nDV/77Fj6eH1ynwscYTOsbK7rR//Uj0bZXBwJZRfaLEJ1iGBR6kIfNmlNqaqJf649EP0F3NWNdeJi03elllNUQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "decode-named-character-reference": "^1.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-encode": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-encode/-/micromark-util-encode-2.0.1.tgz",
      "integrity": "sha512-c3cVx2y4KqUnwopcO9b/SCdo2O67LwJJ/UyqGfbigahfegL9myoEFoDYZgkT7f36T0bLrM9hZTAaAyH+PCAXjw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-html-tag-name": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-html-tag-name/-/micromark-util-html-tag-name-2.0.1.tgz",
      "integrity": "sha512-2cNEiYDhCWKI+Gs9T0Tiysk136SnR13hhO8yW6BGNyhOC4qYFnwF1nKfD3HFAIXA5c45RrIG1ub11GiXeYd1xA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-normalize-identifier": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-normalize-identifier/-/micromark-util-normalize-identifier-2.0.1.tgz",
      "integrity": "sha512-sxPqmo70LyARJs0w2UclACPUUEqltCkJ6PhKdMIDuJ3gSf/Q+/GIe3WKl0Ijb/GyH9lOpUkRAO2wp0GVkLvS9Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-resolve-all": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-resolve-all/-/micromark-util-resolve-all-2.0.1.tgz",
      "integrity": "sha512-VdQyxFWFT2/FGJgwQnJYbe1jjQoNTS4RjglmSjTUlpUMa95Htx9NHeYW4rGDJzbjvCsl9eLjMQwGeElsqmzcHg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-sanitize-uri": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-sanitize-uri/-/micromark-util-sanitize-uri-2.0.1.tgz",
      "integrity": "sha512-9N9IomZ/YuGGZZmQec1MbgxtlgougxTodVwDzzEouPKo3qFWvymFHWcnDi2vzV1ff6kas9ucW+o3yzJK9YB1AQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-encode": "^2.0.0",
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-subtokenize": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-util-subtokenize/-/micromark-util-subtokenize-2.1.0.tgz",
      "integrity": "sha512-XQLu552iSctvnEcgXw6+Sx75GflAPNED1qx7eBJ+wydBb2KCbRZe+NwvIEEMM83uml1+2WSXpBAcp9IUCgCYWA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-symbol": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-symbol/-/micromark-util-symbol-2.0.1.tgz",
      "integrity": "sha512-vs5t8Apaud9N28kgCrRUdEed4UJ+wWNvicHLPxCa9ENlYuAY31M0ETy5y1vA33YoNPDFTghEbnh6efaE8h4x0Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-types": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/micromark-util-types/-/micromark-util-types-2.0.2.tgz",
      "integrity": "sha512-Yw0ECSpJoViF1qTU4DC6NwtC4aWGt1EkzaQB8KPPyCRR8z9TWeV0HbEFGTO+ZY1wB22zmxnJqhPyTpOVCpeHTA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/minipass": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
      "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/napi-postinstall": {
      "version": "0.3.3",
      "resolved": "https://registry.npmjs.org/napi-postinstall/-/napi-postinstall-0.3.3.tgz",
      "integrity": "sha512-uTp172LLXSxuSYHv/kou+f6KW3SMppU9ivthaVTXian9sOt3XM/zHYHpRZiLgQoxeWfYUnslNWQHF1+G71xcow==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "napi-postinstall": "lib/cli.js"
      },
      "engines": {
        "node": "^12.20.0 || ^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/napi-postinstall"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/next": {
      "version": "14.2.33",
      "resolved": "https://registry.npmjs.org/next/-/next-14.2.33.tgz",
      "integrity": "sha512-GiKHLsD00t4ACm1p00VgrI0rUFAC9cRDGReKyERlM57aeEZkOQGcZTpIbsGn0b562FTPJWmYfKwplfO9EaT6ng==",
      "license": "MIT",
      "dependencies": {
        "@next/env": "14.2.33",
        "@swc/helpers": "0.5.5",
        "busboy": "1.6.0",
        "caniuse-lite": "^1.0.30001579",
        "graceful-fs": "^4.2.11",
        "postcss": "8.4.31",
        "styled-jsx": "5.1.1"
      },
      "bin": {
        "next": "dist/bin/next"
      },
      "engines": {
        "node": ">=18.17.0"
      },
      "optionalDependencies": {
        "@next/swc-darwin-arm64": "14.2.33",
        "@next/swc-darwin-x64": "14.2.33",
        "@next/swc-linux-arm64-gnu": "14.2.33",
        "@next/swc-linux-arm64-musl": "14.2.33",
        "@next/swc-linux-x64-gnu": "14.2.33",
        "@next/swc-linux-x64-musl": "14.2.33",
        "@next/swc-win32-arm64-msvc": "14.2.33",
        "@next/swc-win32-ia32-msvc": "14.2.33",
        "@next/swc-win32-x64-msvc": "14.2.33"
      },
      "peerDependencies": {
        "@opentelemetry/api": "^1.1.0",
        "@playwright/test": "^1.41.2",
        "react": "^18.2.0",
        "react-dom": "^18.2.0",
        "sass": "^1.3.0"
      },
      "peerDependenciesMeta": {
        "@opentelemetry/api": {
          "optional": true
        },
        "@playwright/test": {
          "optional": true
        },
        "sass": {
          "optional": true
        }
      }
    },
    "node_modules/next-auth": {
      "version": "4.24.11",
      "resolved": "https://registry.npmjs.org/next-auth/-/next-auth-4.24.11.tgz",
      "integrity": "sha512-pCFXzIDQX7xmHFs4KVH4luCjaCbuPRtZ9oBUjUhOk84mZ9WVPf94n87TxYI4rSRf9HmfHEF8Yep3JrYDVOo3Cw==",
      "license": "ISC",
      "dependencies": {
        "@babel/runtime": "^7.20.13",
        "@panva/hkdf": "^1.0.2",
        "cookie": "^0.7.0",
        "jose": "^4.15.5",
        "oauth": "^0.9.15",
        "openid-client": "^5.4.0",
        "preact": "^10.6.3",
        "preact-render-to-string": "^5.1.19",
        "uuid": "^8.3.2"
      },
      "peerDependencies": {
        "@auth/core": "0.34.2",
        "next": "^12.2.5 || ^13 || ^14 || ^15",
        "nodemailer": "^6.6.5",
        "react": "^17.0.2 || ^18 || ^19",
        "react-dom": "^17.0.2 || ^18 || ^19"
      },
      "peerDependenciesMeta": {
        "@auth/core": {
          "optional": true
        },
        "nodemailer": {
          "optional": true
        }
      }
    },
    "node_modules/next/node_modules/postcss": {
      "version": "8.4.31",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
      "integrity": "sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.6",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.21",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.21.tgz",
      "integrity": "sha512-5b0pgg78U3hwXkCM8Z9b2FJdPZlr9Psr9V2gQPESdGHqbntyFJKFW4r5TeWGFzafGY3hzs1JC62VEQMbl1JFkw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nodemailer": {
      "version": "6.10.1",
      "resolved": "https://registry.npmjs.org/nodemailer/-/nodemailer-6.10.1.tgz",
      "integrity": "sha512-Z+iLaBGVaSjbIzQ4pX6XV41HrooLsQ10ZWPUehGmuantvzWoDVBnmsdUcOIDM1t+yPor5pDhVlDESgOMEGxhHA==",
      "license": "MIT-0",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/normalize-range": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/normalize-range/-/normalize-range-0.1.2.tgz",
      "integrity": "sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/oauth": {
      "version": "0.9.15",
      "resolved": "https://registry.npmjs.org/oauth/-/oauth-0.9.15.tgz",
      "integrity": "sha512-a5ERWK1kh38ExDEfoO6qUHJb32rd7aYmPHuyCu3Fta/cnICvYmgd2uhuKXvPD+PXB+gCEYYEaQdIRAjCOwAKNA==",
      "license": "MIT"
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.entries": {
      "version": "1.1.9",
      "resolved": "https://registry.npmjs.org/object.entries/-/object.entries-1.1.9.tgz",
      "integrity": "sha512-8u/hfXFRBD1O0hPUjioLhoWFHRmt6tKA4/vZPyckBr18l1KE9uHrFaFaUi8MDRTpi4uak2goyPTSNJLXX2k2Hw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.fromentries": {
      "version": "2.0.8",
      "resolved": "https://registry.npmjs.org/object.fromentries/-/object.fromentries-2.0.8.tgz",
      "integrity": "sha512-k6E21FzySsSK5a21KRADBd/NGneRegFO5pLHfdQLpRDETUNJueLXs3WCzyQ3tFRDYgbq3KHGXfTbi2bs8WQ6rQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.groupby": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/object.groupby/-/object.groupby-1.0.3.tgz",
      "integrity": "sha512-+Lhy3TQTuzXI5hevh8sBGqbmurHbbIjAi0Z4S63nthVLmLxfbj4T54a4CfZrXIrt9iP4mVAPYMo/v99taj3wjQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.values": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/object.values/-/object.values-1.2.1.tgz",
      "integrity": "sha512-gXah6aZrcUxjWg2zR2MwouP2eHlCBzdV4pygudehaKXSGW4v2AsRQUK+lwwXhii6KFZcunEnmSUoYp5CXibxtA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/oidc-token-hash": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/oidc-token-hash/-/oidc-token-hash-5.1.1.tgz",
      "integrity": "sha512-D7EmwxJV6DsEB6vOFLrBM2OzsVgQzgPWyHlV2OOAVj772n+WTXpudC9e9u5BVKQnYwaD30Ivhi9b+4UeBcGu9g==",
      "license": "MIT",
      "engines": {
        "node": "^10.13.0 || >=12.0.0"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/openid-client": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/openid-client/-/openid-client-5.7.1.tgz",
      "integrity": "sha512-jDBPgSVfTnkIh71Hg9pRvtJc6wTwqjRkN88+gCFtYWrlP4Yx2Dsrow8uPi3qLr/aeymPF3o2+dS+wOpglK04ew==",
      "license": "MIT",
      "dependencies": {
        "jose": "^4.15.9",
        "lru-cache": "^6.0.0",
        "object-hash": "^2.2.0",
        "oidc-token-hash": "^5.0.3"
      },
      "funding": {
        "url": "https://github.com/sponsors/panva"
      }
    },
    "node_modules/openid-client/node_modules/lru-cache": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-6.0.0.tgz",
      "integrity": "sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==",
      "license": "ISC",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/openid-client/node_modules/object-hash": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-2.2.0.tgz",
      "integrity": "sha512-gScRMn0bS5fH+IuwyIFgnh9zBdo4DV+6GhygmWM9HyNJSgS0hScp1f5vjtm7oIIOiT9trXrShAkLFSc2IqKNgw==",
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/own-keys": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
      "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.6",
        "object-keys": "^1.1.1",
        "safe-push-apply": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/oxc-resolver": {
      "version": "11.8.3",
      "resolved": "https://registry.npmjs.org/oxc-resolver/-/oxc-resolver-11.8.3.tgz",
      "integrity": "sha512-wPY3eiw24QOiNqArh5FWRrKYr1Yuxya8bE8CV7yBfz7jodCrg0HqBu6cvHHSicxFug7D4TN6ox1hysA9arHTqw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "dependencies": {
        "napi-postinstall": "^0.3.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/Boshen"
      },
      "optionalDependencies": {
        "@oxc-resolver/binding-android-arm-eabi": "11.8.3",
        "@oxc-resolver/binding-android-arm64": "11.8.3",
        "@oxc-resolver/binding-darwin-arm64": "11.8.3",
        "@oxc-resolver/binding-darwin-x64": "11.8.3",
        "@oxc-resolver/binding-freebsd-x64": "11.8.3",
        "@oxc-resolver/binding-linux-arm-gnueabihf": "11.8.3",
        "@oxc-resolver/binding-linux-arm-musleabihf": "11.8.3",
        "@oxc-resolver/binding-linux-arm64-gnu": "11.8.3",
        "@oxc-resolver/binding-linux-arm64-musl": "11.8.3",
        "@oxc-resolver/binding-linux-ppc64-gnu": "11.8.3",
        "@oxc-resolver/binding-linux-riscv64-gnu": "11.8.3",
        "@oxc-resolver/binding-linux-riscv64-musl": "11.8.3",
        "@oxc-resolver/binding-linux-s390x-gnu": "11.8.3",
        "@oxc-resolver/binding-linux-x64-gnu": "11.8.3",
        "@oxc-resolver/binding-linux-x64-musl": "11.8.3",
        "@oxc-resolver/binding-wasm32-wasi": "11.8.3",
        "@oxc-resolver/binding-win32-arm64-msvc": "11.8.3",
        "@oxc-resolver/binding-win32-ia32-msvc": "11.8.3",
        "@oxc-resolver/binding-win32-x64-msvc": "11.8.3"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/package-json-from-dist": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/package-json-from-dist/-/package-json-from-dist-1.0.1.tgz",
      "integrity": "sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==",
      "dev": true,
      "license": "BlueOak-1.0.0"
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-entities": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/parse-entities/-/parse-entities-4.0.2.tgz",
      "integrity": "sha512-GG2AQYWoLgL877gQIKeRPGO1xF9+eG1ujIb5soS5gPvLQ1y2o8FL90w2QWNdf9I361Mpp7726c+lj3U0qK1uGw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^2.0.0",
        "character-entities-legacy": "^3.0.0",
        "character-reference-invalid": "^2.0.0",
        "decode-named-character-reference": "^1.0.0",
        "is-alphanumerical": "^2.0.0",
        "is-decimal": "^2.0.0",
        "is-hexadecimal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/parse-entities/node_modules/@types/unist": {
      "version": "2.0.11",
      "resolved": "https://registry.npmjs.org/@types/unist/-/unist-2.0.11.tgz",
      "integrity": "sha512-CmBKiL6NNo/OqgmMn95Fk9Whlp2mtvIv+KNpQKN2F4SjvrEesubTRWGYSg+BnWZOnlCaSTU1sMpsBOzgbYhnsA==",
      "license": "MIT"
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/path-scurry": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/path-scurry/-/path-scurry-1.11.1.tgz",
      "integrity": "sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "lru-cache": "^10.2.0",
        "minipass": "^5.0.0 || ^6.0.2 || ^7.0.0"
      },
      "engines": {
        "node": ">=16 || 14 >=14.18"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pathe": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/pathe/-/pathe-2.0.3.tgz",
      "integrity": "sha512-WUjGcAqP1gQacoQe+OBJsFA7Ld4DyXuUIjZ5cc75cLHvJ7dtNsTugphxIADwspS+AraAUePCKrSVtPLFj/F88w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/pathval": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/pathval/-/pathval-2.0.1.tgz",
      "integrity": "sha512-//nshmD55c46FuFw26xV/xFAaB5HF9Xdap7HJBBnrKdAd6/GxDBaNA1870O79+9ueg61cZLSVc+OaFlfmObYVQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 14.16"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/playwright": {
      "version": "1.55.1",
      "resolved": "https://registry.npmjs.org/playwright/-/playwright-1.55.1.tgz",
      "integrity": "sha512-cJW4Xd/G3v5ovXtJJ52MAOclqeac9S/aGGgRzLabuF8TnIb6xHvMzKIa6JmrRzUkeXJgfL1MhukP0NK6l39h3A==",
      "devOptional": true,
      "license": "Apache-2.0",
      "dependencies": {
        "playwright-core": "1.55.1"
      },
      "bin": {
        "playwright": "cli.js"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "fsevents": "2.3.2"
      }
    },
    "node_modules/playwright-core": {
      "version": "1.55.1",
      "resolved": "https://registry.npmjs.org/playwright-core/-/playwright-core-1.55.1.tgz",
      "integrity": "sha512-Z6Mh9mkwX+zxSlHqdr5AOcJnfp+xUWLCt9uKV18fhzA8eyxUd8NUWzAjxUh55RZKSYwDGX0cfaySdhZJGMoJ+w==",
      "devOptional": true,
      "license": "Apache-2.0",
      "bin": {
        "playwright-core": "cli.js"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/playwright/node_modules/fsevents": {
      "version": "2.3.2",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.2.tgz",
      "integrity": "sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postcss": {
      "version": "8.4.40",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.40.tgz",
      "integrity": "sha512-YF2kKIUzAofPMpfH6hOi2cGnv/HrUlfucspc7pDyvv7kGdqXrfj8SCl/t8owkEgKEuu8ZcRjSOxFxVLqwChZ2Q==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.7",
        "picocolors": "^1.0.1",
        "source-map-js": "^1.2.0"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-load-config": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-4.0.2.tgz",
      "integrity": "sha512-bSVhyJGL00wMVoPUzAVAnbEoWyqRxkjv64tUl427SKnPrENtq6hJwUojroMz2VB+Q1edmi4IfrAPpami5VVgMQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.0.0",
        "yaml": "^2.3.4"
      },
      "engines": {
        "node": ">= 14"
      },
      "peerDependencies": {
        "postcss": ">=8.0.9",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "postcss": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/preact": {
      "version": "10.24.3",
      "resolved": "https://registry.npmjs.org/preact/-/preact-10.24.3.tgz",
      "integrity": "sha512-Z2dPnBnMUfyQfSQ+GBdsGa16hz35YmLmtTLhM169uW944hYL6xzTYkJjC07j+Wosz733pMWx0fgON3JNw1jJQA==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/preact"
      }
    },
    "node_modules/preact-render-to-string": {
      "version": "5.2.6",
      "resolved": "https://registry.npmjs.org/preact-render-to-string/-/preact-render-to-string-5.2.6.tgz",
      "integrity": "sha512-JyhErpYOvBV1hEPwIxc/fHWXPfnEGdRKxc8gFdAZ7XV4tlzyzG847XAyEZqoDnynP88akM4eaHcSOzNcLWFguw==",
      "license": "MIT",
      "dependencies": {
        "pretty-format": "^3.8.0"
      },
      "peerDependencies": {
        "preact": ">=10"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prettier": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/prettier/-/prettier-3.6.2.tgz",
      "integrity": "sha512-I7AIg5boAr5R0FFtJ6rCfD+LFsWHp81dolrFD8S79U9tb8Az2nGrJncnMSnys+bpQJfRUzqs9hnA81OAA3hCuQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "prettier": "bin/prettier.cjs"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/prettier/prettier?sponsor=1"
      }
    },
    "node_modules/prettier-plugin-tailwindcss": {
      "version": "0.5.14",
      "resolved": "https://registry.npmjs.org/prettier-plugin-tailwindcss/-/prettier-plugin-tailwindcss-0.5.14.tgz",
      "integrity": "sha512-Puaz+wPUAhFp8Lo9HuciYKM2Y2XExESjeT+9NQoVFXZsPPnc9VYss2SpxdQ6vbatmt8/4+SN0oe0I1cPDABg9Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.21.3"
      },
      "peerDependencies": {
        "@ianvs/prettier-plugin-sort-imports": "*",
        "@prettier/plugin-pug": "*",
        "@shopify/prettier-plugin-liquid": "*",
        "@trivago/prettier-plugin-sort-imports": "*",
        "@zackad/prettier-plugin-twig-melody": "*",
        "prettier": "^3.0",
        "prettier-plugin-astro": "*",
        "prettier-plugin-css-order": "*",
        "prettier-plugin-import-sort": "*",
        "prettier-plugin-jsdoc": "*",
        "prettier-plugin-marko": "*",
        "prettier-plugin-organize-attributes": "*",
        "prettier-plugin-organize-imports": "*",
        "prettier-plugin-sort-imports": "*",
        "prettier-plugin-style-order": "*",
        "prettier-plugin-svelte": "*"
      },
      "peerDependenciesMeta": {
        "@ianvs/prettier-plugin-sort-imports": {
          "optional": true
        },
        "@prettier/plugin-pug": {
          "optional": true
        },
        "@shopify/prettier-plugin-liquid": {
          "optional": true
        },
        "@trivago/prettier-plugin-sort-imports": {
          "optional": true
        },
        "@zackad/prettier-plugin-twig-melody": {
          "optional": true
        },
        "prettier-plugin-astro": {
          "optional": true
        },
        "prettier-plugin-css-order": {
          "optional": true
        },
        "prettier-plugin-import-sort": {
          "optional": true
        },
        "prettier-plugin-jsdoc": {
          "optional": true
        },
        "prettier-plugin-marko": {
          "optional": true
        },
        "prettier-plugin-organize-attributes": {
          "optional": true
        },
        "prettier-plugin-organize-imports": {
          "optional": true
        },
        "prettier-plugin-sort-imports": {
          "optional": true
        },
        "prettier-plugin-style-order": {
          "optional": true
        },
        "prettier-plugin-svelte": {
          "optional": true
        }
      }
    },
    "node_modules/pretty-format": {
      "version": "3.8.0",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-3.8.0.tgz",
      "integrity": "sha512-WuxUnVtlWL1OfZFQFuqvnvs6MiAGk9UNsBostyBOB0Is9wb5uRESevA6rnl/rkksXaGX3GzZhPup5d6Vp1nFew==",
      "license": "MIT"
    },
    "node_modules/prisma": {
      "version": "5.22.0",
      "resolved": "https://registry.npmjs.org/prisma/-/prisma-5.22.0.tgz",
      "integrity": "sha512-vtpjW3XuYCSnMsNVBjLMNkTj6OZbudcPPTPYHqX0CJfpcdWciI1dM8uHETwmDxxiqEwCIE6WvXucWUetJgfu/A==",
      "devOptional": true,
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@prisma/engines": "5.22.0"
      },
      "bin": {
        "prisma": "build/index.js"
      },
      "engines": {
        "node": ">=16.13"
      },
      "optionalDependencies": {
        "fsevents": "2.3.3"
      }
    },
    "node_modules/prop-types": {
      "version": "15.8.1",
      "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
      "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.4.0",
        "object-assign": "^4.1.1",
        "react-is": "^16.13.1"
      }
    },
    "node_modules/property-information": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/property-information/-/property-information-7.1.0.tgz",
      "integrity": "sha512-TwEZ+X+yCJmYfL7TPUOcvBZ4QfoT5YenQiJuX//0th53DE6w0xxLEtfK3iyryQFddXuvkIk51EEgrJQ0WJkOmQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "18.2.0",
      "resolved": "https://registry.npmjs.org/react/-/react-18.2.0.tgz",
      "integrity": "sha512-/3IjMdb2L9QbBdWiW5e3P2/npwMBaU9mHCSCUzNln0ZCYbcfTsGbTJrU/kGemdH2IWmB2ioZ+zkxtmq6g09fGQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.2.0",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.2.0.tgz",
      "integrity": "sha512-6IMTriUmvsjHUjNtEDudZfuDQUoWXVxKHhlEGSk81n4YFS+r/Kl99wXiwlVXtPBtJenozv2P+hxDsw9eA7Xo6g==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.0"
      },
      "peerDependencies": {
        "react": "^18.2.0"
      }
    },
    "node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/react-markdown": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/react-markdown/-/react-markdown-10.1.0.tgz",
      "integrity": "sha512-qKxVopLT/TyA6BX3Ue5NwabOsAzm0Q7kAPwq6L+wWDwisYs7R8vZ0nRXqq6rkueboxpkjvLGU9fWifiX/ZZFxQ==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "hast-util-to-jsx-runtime": "^2.0.0",
        "html-url-attributes": "^3.0.0",
        "mdast-util-to-hast": "^13.0.0",
        "remark-parse": "^11.0.0",
        "remark-rehype": "^11.0.0",
        "unified": "^11.0.0",
        "unist-util-visit": "^5.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      },
      "peerDependencies": {
        "@types/react": ">=18",
        "react": ">=18"
      }
    },
    "node_modules/react-remove-scroll": {
      "version": "2.7.1",
      "resolved": "https://registry.npmjs.org/react-remove-scroll/-/react-remove-scroll-2.7.1.tgz",
      "integrity": "sha512-HpMh8+oahmIdOuS5aFKKY6Pyog+FNaZV/XyJOq7b4YFwsFHe5yYfdbIalI4k3vU2nSDql7YskmUseHsRrJqIPA==",
      "license": "MIT",
      "dependencies": {
        "react-remove-scroll-bar": "^2.3.7",
        "react-style-singleton": "^2.2.3",
        "tslib": "^2.1.0",
        "use-callback-ref": "^1.3.3",
        "use-sidecar": "^1.1.3"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/react-remove-scroll-bar": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/react-remove-scroll-bar/-/react-remove-scroll-bar-2.3.8.tgz",
      "integrity": "sha512-9r+yi9+mgU33AKcj6IbT9oRCO78WriSj6t/cF8DWBZJ9aOGPOTEDvdUDz1FwKim7QXWwmHqtdHnRJfhAxEG46Q==",
      "license": "MIT",
      "dependencies": {
        "react-style-singleton": "^2.2.2",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/react-style-singleton": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/react-style-singleton/-/react-style-singleton-2.2.3.tgz",
      "integrity": "sha512-b6jSvxvVnyptAiLjbkWLE/lOnR4lfTtDAl+eUC7RZy+QQWc6wRzIV2CE6xBuMmDxc2qIihtDCZD5NPOFl7fRBQ==",
      "license": "MIT",
      "dependencies": {
        "get-nonce": "^1.0.0",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/reflect.getprototypeof": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
      "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.7",
        "get-proto": "^1.0.1",
        "which-builtin-type": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/remark-gfm": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/remark-gfm/-/remark-gfm-4.0.1.tgz",
      "integrity": "sha512-1quofZ2RQ9EWdeN34S79+KExV1764+wCUGop5CPL1WGdD0ocPpu91lzPGbwWMECpEpd42kJGQwzRfyov9j4yNg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-gfm": "^3.0.0",
        "micromark-extension-gfm": "^3.0.0",
        "remark-parse": "^11.0.0",
        "remark-stringify": "^11.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-parse": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/remark-parse/-/remark-parse-11.0.0.tgz",
      "integrity": "sha512-FCxlKLNGknS5ba/1lmpYijMUzX2esxW5xQqjWxw2eHFfS2MSdaHVINFmhjo+qN1WhZhNimq0dZATN9pH0IDrpA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "micromark-util-types": "^2.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-rehype": {
      "version": "11.1.2",
      "resolved": "https://registry.npmjs.org/remark-rehype/-/remark-rehype-11.1.2.tgz",
      "integrity": "sha512-Dh7l57ianaEoIpzbp0PC9UKAdCSVklD8E5Rpw7ETfbTl3FqcOOgq5q2LVDhgGCkaBv7p24JXikPdvhhmHvKMsw==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "mdast-util-to-hast": "^13.0.0",
        "unified": "^11.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-stringify": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/remark-stringify/-/remark-stringify-11.0.0.tgz",
      "integrity": "sha512-1OSmLd3awB/t8qdoEOMazZkNsfVTeY4fTsgzcQFdXNq8ToTN4ZGwrMnlda4K6smTFKD+GRV6O48i6Z4iKgPPpw==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
      "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/rimraf/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/rimraf/node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/rimraf/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/rollup": {
      "version": "4.52.3",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.52.3.tgz",
      "integrity": "sha512-RIDh866U8agLgiIcdpB+COKnlCreHJLfIhWC3LVflku5YHfpnsIKigRZeFfMfCc4dVcqNVfQQ5gO/afOck064A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.52.3",
        "@rollup/rollup-android-arm64": "4.52.3",
        "@rollup/rollup-darwin-arm64": "4.52.3",
        "@rollup/rollup-darwin-x64": "4.52.3",
        "@rollup/rollup-freebsd-arm64": "4.52.3",
        "@rollup/rollup-freebsd-x64": "4.52.3",
        "@rollup/rollup-linux-arm-gnueabihf": "4.52.3",
        "@rollup/rollup-linux-arm-musleabihf": "4.52.3",
        "@rollup/rollup-linux-arm64-gnu": "4.52.3",
        "@rollup/rollup-linux-arm64-musl": "4.52.3",
        "@rollup/rollup-linux-loong64-gnu": "4.52.3",
        "@rollup/rollup-linux-ppc64-gnu": "4.52.3",
        "@rollup/rollup-linux-riscv64-gnu": "4.52.3",
        "@rollup/rollup-linux-riscv64-musl": "4.52.3",
        "@rollup/rollup-linux-s390x-gnu": "4.52.3",
        "@rollup/rollup-linux-x64-gnu": "4.52.3",
        "@rollup/rollup-linux-x64-musl": "4.52.3",
        "@rollup/rollup-openharmony-arm64": "4.52.3",
        "@rollup/rollup-win32-arm64-msvc": "4.52.3",
        "@rollup/rollup-win32-ia32-msvc": "4.52.3",
        "@rollup/rollup-win32-x64-gnu": "4.52.3",
        "@rollup/rollup-win32-x64-msvc": "4.52.3",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-array-concat": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
      "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "has-symbols": "^1.1.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">=0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-push-apply": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
      "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "7.7.2",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
      "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-proto": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
      "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/siginfo": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/signal-exit": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-4.1.0.tgz",
      "integrity": "sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/smol-toml": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/smol-toml/-/smol-toml-1.4.2.tgz",
      "integrity": "sha512-rInDH6lCNiEyn3+hH8KVGFdbjc099j47+OSgbMrfDYX1CmXLfdKd7qi6IfcWj2wFxvSVkuI46M+wPGYfEOEj6g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">= 18"
      },
      "funding": {
        "url": "https://github.com/sponsors/cyyynthia"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/space-separated-tokens": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/space-separated-tokens/-/space-separated-tokens-2.0.2.tgz",
      "integrity": "sha512-PEGlAwrG8yXGXRjW32fGbg66JAlOAwbObuqVoJpv/mRgoWDQfgH1wDPvtzWyUSNAXBGSk8h755YDbbcEy3SH2Q==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/stable-hash": {
      "version": "0.0.5",
      "resolved": "https://registry.npmjs.org/stable-hash/-/stable-hash-0.0.5.tgz",
      "integrity": "sha512-+L3ccpzibovGXFK+Ap/f8LOS0ahMrHTf3xu7mMLSpEGU0EO9ucaysSylKo9eRDFNhWve/y275iPmIZ4z39a9iA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stackback": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/std-env": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.9.0.tgz",
      "integrity": "sha512-UGvjygr6F6tpH7o2qyqR6QYpwraIjKSdtzyBdyytFOHmPZY917kwdwLG0RbOjWOnKmnm3PeHjaoLLMie7kPLQw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/streamsearch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/streamsearch/-/streamsearch-1.1.0.tgz",
      "integrity": "sha512-Mcc5wHehp9aXz1ax6bZUyY5afg9u2rv5cqQI3mRrYkGC8rW2hM02jWuwjtL++LS5qinSyhj2QfLyNsuc+VsExg==",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/string-width-cjs": {
      "name": "string-width",
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/string-width-cjs/node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string.prototype.includes": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/string.prototype.includes/-/string.prototype.includes-2.0.1.tgz",
      "integrity": "sha512-o7+c9bW6zpAdJHTtujeePODAhkuicdAryFsfVKwA+wGw89wJ4GTY484WTucM9hLtDEOpOvI+aHnzqnC5lHp4Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string.prototype.matchall": {
      "version": "4.0.12",
      "resolved": "https://registry.npmjs.org/string.prototype.matchall/-/string.prototype.matchall-4.0.12.tgz",
      "integrity": "sha512-6CC9uyBL+/48dYizRf7H7VAYCMCNTBeM78x/VTUe9bFEaxBepPJDa1Ow99LqI/1yF7kuy7Q3cQsYMrcjGUcskA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "regexp.prototype.flags": "^1.5.3",
        "set-function-name": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.repeat": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/string.prototype.repeat/-/string.prototype.repeat-1.0.0.tgz",
      "integrity": "sha512-0u/TldDbKD8bFCQ/4f5+mNRrXwZ8hg2w7ZR8wa16e8z9XpePWl3eGEcUD0OXpEH/VJH/2G3gjUtR3ZOiBe2S/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.1.3",
        "es-abstract": "^1.17.5"
      }
    },
    "node_modules/string.prototype.trim": {
      "version": "1.2.10",
      "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
      "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-object-atoms": "^1.0.0",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimend": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
      "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimstart": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
      "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/stringify-entities": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/stringify-entities/-/stringify-entities-4.0.4.tgz",
      "integrity": "sha512-IwfBptatlO+QCJUo19AqvrPNqlVMpW9YEL2LIVY+Rpv2qsjCGxaDLNRgeGsQWJhfItebuJhsGSLjaBbNSQ+ieg==",
      "license": "MIT",
      "dependencies": {
        "character-entities-html4": "^2.0.0",
        "character-entities-legacy": "^3.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/strip-ansi": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/strip-ansi-cjs": {
      "name": "strip-ansi",
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/strip-literal": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/strip-literal/-/strip-literal-3.1.0.tgz",
      "integrity": "sha512-8r3mkIM/2+PpjHoOtiAW8Rg3jJLHaV7xPwG+YRGrv6FP0wwk/toTpATxWYOW0BKdWwl82VT2tFYi5DlROa0Mxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^9.0.1"
      },
      "funding": {
        "url": "https://github.com/sponsors/antfu"
      }
    },
    "node_modules/strip-literal/node_modules/js-tokens": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-9.0.1.tgz",
      "integrity": "sha512-mxa9E9ITFOt0ban3j6L5MpjwegGz6lBQmM1IJkWeBZGcMxto50+eWdjC/52xDbS2vy0k7vIMK0Fe2wfL9OQSpQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/strnum": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/strnum/-/strnum-2.1.1.tgz",
      "integrity": "sha512-7ZvoFTiCnGxBtDqJ//Cu6fWtZtc7Y3x+QOirG15wztbdngGSkht27o2pyGWrVy0b4WAy3jbKmnoK6g5VlVNUUw==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT"
    },
    "node_modules/style-to-js": {
      "version": "1.1.17",
      "resolved": "https://registry.npmjs.org/style-to-js/-/style-to-js-1.1.17.tgz",
      "integrity": "sha512-xQcBGDxJb6jjFCTzvQtfiPn6YvvP2O8U1MDIPNfJQlWMYfktPy+iGsHE7cssjs7y84d9fQaK4UF3RIJaAHSoYA==",
      "license": "MIT",
      "dependencies": {
        "style-to-object": "1.0.9"
      }
    },
    "node_modules/style-to-object": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/style-to-object/-/style-to-object-1.0.9.tgz",
      "integrity": "sha512-G4qppLgKu/k6FwRpHiGiKPaPTFcG3g4wNVX/Qsfu+RqQM30E7Tyu/TEgxcL9PNLF5pdRLwQdE3YKKf+KF2Dzlw==",
      "license": "MIT",
      "dependencies": {
        "inline-style-parser": "0.2.4"
      }
    },
    "node_modules/styled-jsx": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.1.tgz",
      "integrity": "sha512-pW7uC1l4mBZ8ugbiZrcIsiIvVx1UmTfw7UkC3Um2tmfUq9Bhk8IiyEIPl6F8agHgjzku6j0xQEZbfA5uSgSaCw==",
      "license": "MIT",
      "dependencies": {
        "client-only": "0.0.1"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "peerDependencies": {
        "react": ">= 16.8.0 || 17.x.x || ^18.0.0-0"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/sucrase": {
      "version": "3.35.0",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.0.tgz",
      "integrity": "sha512-8EbVDiu9iN/nESwxeSxDKe0dunta1GOlHufmSSXxMD2z2/tMZpDMpvXQGsc+ajGo8y2uYUmixaSRUc/QPoQ0GA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "glob": "^10.3.10",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tailwindcss": {
      "version": "3.4.10",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.10.tgz",
      "integrity": "sha512-KWZkVPm7yJRhdu4SRSl9d4AK2wM3a50UsvgHZO7xY77NQr2V+fIrEuoDGQcbvswWvFGbS2f6e+jC/6WJm1Dl0w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.5.3",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.0",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.0",
        "lilconfig": "^2.1.0",
        "micromatch": "^4.0.5",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.0.0",
        "postcss": "^8.4.23",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.1",
        "postcss-nested": "^6.0.1",
        "postcss-selector-parser": "^6.0.11",
        "resolve": "^1.22.2",
        "sucrase": "^3.32.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tailwindcss/node_modules/lilconfig": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-2.1.0.tgz",
      "integrity": "sha512-utWOt/GHzuUxnLKxB6dk81RoOeoNeHgbrXiuGk4yyF5qlRz+iIVWu56E2fqGHFrXz0QNUhLB/8nKqvRH66JKGQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/tinybench": {
      "version": "2.9.0",
      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.9.0.tgz",
      "integrity": "sha512-0+DUvqWMValLmha6lr4kD8iAMK1HzV0/aKnCtWb9v9641TnP/MFb7Pc2bxoxQjTXAErryXVgUOfv2YqNllqGeg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tinyexec": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/tinyexec/-/tinyexec-0.3.2.tgz",
      "integrity": "sha512-KQQR9yN7R5+OSwaK0XQoj22pwHoTlgYqmUscPYoknOoWCWfj/5/ABTMRi69FrKU5ffPVh5QcFikpWJI/P1ocHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/tinypool": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/tinypool/-/tinypool-1.1.1.tgz",
      "integrity": "sha512-Zba82s87IFq9A9XmjiX5uZA/ARWDrB03OHlq+Vw1fSdt0I+4/Kutwy8BP4Y/y/aORMo61FQ0vIb5j44vSo5Pkg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.0.0 || >=20.0.0"
      }
    },
    "node_modules/tinyrainbow": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/tinyrainbow/-/tinyrainbow-2.0.0.tgz",
      "integrity": "sha512-op4nsTR47R6p0vMUUoYl/a+ljLFVtlfaXkLQmqfLR1qHma1h/ysYk4hEXZ880bf2CYgTskvTa/e196Vd5dDQXw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tinyspy": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/tinyspy/-/tinyspy-4.0.4.tgz",
      "integrity": "sha512-azl+t0z7pw/z958Gy9svOTuzqIk6xq+NSheJzn5MMWtWTFywIacg2wUlzKFGtt3cthx0r2SxMK0yzJOR0IES7Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/trim-lines": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/trim-lines/-/trim-lines-3.0.1.tgz",
      "integrity": "sha512-kRj8B+YHZCc9kQYdWfJB2/oUl9rA99qbowYYBtr4ui4mZyAQ2JpvVBd/6U2YloATfqBhBTSMhTpgBHtU0Mf3Rg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/trough": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/trough/-/trough-2.2.0.tgz",
      "integrity": "sha512-tmMpK00BjZiUyVyvrBK7knerNgmgvcV/KLVyuma/SC+TQN167GrMRciANTz09+k3zW8L8t60jWO1GpfkZdjTaw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-1.4.3.tgz",
      "integrity": "sha512-i3eMG77UTMD0hZhgRS562pv83RC6ukSAC2GMNWc+9dieh/+jDM5u5YG+NHX6VNDRHQcHwmsTHctP9LhbC3WxVw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=16"
      },
      "peerDependencies": {
        "typescript": ">=4.2.0"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/ts-node": {
      "version": "10.9.2",
      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.9.2.tgz",
      "integrity": "sha512-f0FFpIdcHgn8zcPSbf1dRevwt047YMnaiJM3u2w2RewrB+fob/zePZcrOyQoLMMO7aBIddLcQIEK5dYjkLnGrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@cspotcode/source-map-support": "^0.8.0",
        "@tsconfig/node10": "^1.0.7",
        "@tsconfig/node12": "^1.0.7",
        "@tsconfig/node14": "^1.0.0",
        "@tsconfig/node16": "^1.0.2",
        "acorn": "^8.4.1",
        "acorn-walk": "^8.1.1",
        "arg": "^4.1.0",
        "create-require": "^1.1.0",
        "diff": "^4.0.1",
        "make-error": "^1.1.1",
        "v8-compile-cache-lib": "^3.0.1",
        "yn": "3.1.1"
      },
      "bin": {
        "ts-node": "dist/bin.js",
        "ts-node-cwd": "dist/bin-cwd.js",
        "ts-node-esm": "dist/bin-esm.js",
        "ts-node-script": "dist/bin-script.js",
        "ts-node-transpile-only": "dist/bin-transpile.js",
        "ts-script": "dist/bin-script-deprecated.js"
      },
      "peerDependencies": {
        "@swc/core": ">=1.2.50",
        "@swc/wasm": ">=1.2.50",
        "@types/node": "*",
        "typescript": ">=2.7"
      },
      "peerDependenciesMeta": {
        "@swc/core": {
          "optional": true
        },
        "@swc/wasm": {
          "optional": true
        }
      }
    },
    "node_modules/ts-node/node_modules/arg": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/arg/-/arg-4.1.3.tgz",
      "integrity": "sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tsconfig-paths": {
      "version": "3.15.0",
      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.15.0.tgz",
      "integrity": "sha512-2Ac2RgzDe/cn48GvOe3M+o82pEFewD3UPbyoUHHdKasHwJKjds4fLXWf/Ux5kATBKN20oaFGu+jbElp1pos0mg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/json5": "^0.0.29",
        "json5": "^1.0.2",
        "minimist": "^1.2.6",
        "strip-bom": "^3.0.0"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/typed-array-buffer": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
      "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/typed-array-byte-length": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
      "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-byte-offset": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
      "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.15",
        "reflect.getprototypeof": "^1.0.9"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-length": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
      "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "for-each": "^0.3.3",
        "gopd": "^1.0.1",
        "is-typed-array": "^1.1.13",
        "possible-typed-array-names": "^1.0.0",
        "reflect.getprototypeof": "^1.0.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typescript": {
      "version": "5.4.5",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.4.5.tgz",
      "integrity": "sha512-vcI4UpRgg81oIRUFwR0WSIHKt11nJ7SAVlYNIu+QpqeyXP+gpQJy/Z4+F0aGxSE4MqwjyXvW/TzgkLAx2AGHwQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/unbox-primitive": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
      "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-bigints": "^1.0.2",
        "has-symbols": "^1.1.0",
        "which-boxed-primitive": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/undici-types": {
      "version": "5.26.5",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-5.26.5.tgz",
      "integrity": "sha512-JlCMO+ehdEIKqlFxk6IfVoAUVmgz7cU7zD/h9XZ0qzeosSHmUJVOzSQvvYSYWXkFXC+IfLKSIffhv0sVZup6pA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/unified": {
      "version": "11.0.5",
      "resolved": "https://registry.npmjs.org/unified/-/unified-11.0.5.tgz",
      "integrity": "sha512-xKvGhPWw3k84Qjh8bI3ZeJjqnyadK+GEFtazSfZv/rKeTkTjOJho6mFqh2SM96iIcZokxiOpg78GazTSg8+KHA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "bail": "^2.0.0",
        "devlop": "^1.0.0",
        "extend": "^3.0.0",
        "is-plain-obj": "^4.0.0",
        "trough": "^2.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-is": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-is/-/unist-util-is-6.0.0.tgz",
      "integrity": "sha512-2qCTHimwdxLfz+YzdGfkqNlH0tLi9xjTnHddPmJwtIG9MGsdbutfTc4P+haPD7l7Cjxf/WZj+we5qfVPvvxfYw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-position": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-position/-/unist-util-position-5.0.0.tgz",
      "integrity": "sha512-fucsC7HjXvkB5R3kTCO7kUjRdrS0BJt3M/FPxmHMBOm8JQi2BsHAHFsy27E0EolP8rp0NzXsJ+jNPyDWvOJZPA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-stringify-position": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-stringify-position/-/unist-util-stringify-position-4.0.0.tgz",
      "integrity": "sha512-0ASV06AAoKCDkS2+xw5RXJywruurpbC4JZSm7nr7MOt1ojAzvyyaO+UxZf18j8FCF6kmzCZKcAgN/yu2gm2XgQ==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-visit": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-visit/-/unist-util-visit-5.0.0.tgz",
      "integrity": "sha512-MR04uvD+07cwl/yhVuVWAtw+3GOR/knlL55Nd/wAdblk27GCVt3lqpTivy/tkJcZoNPzTwS1Y+KMojlLDhoTzg==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-is": "^6.0.0",
        "unist-util-visit-parents": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-visit-parents": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/unist-util-visit-parents/-/unist-util-visit-parents-6.0.1.tgz",
      "integrity": "sha512-L/PqWzfTP9lzzEa6CKs0k2nARxTdZduw3zyh8d2NVBnsyvHjSX4TWse388YrrQKbvI8w20fGjGlhgT96WwKykw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-is": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unrs-resolver": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/unrs-resolver/-/unrs-resolver-1.11.1.tgz",
      "integrity": "sha512-bSjt9pjaEBnNiGgc9rUiHGKv5l4/TGzDmYw3RhnkJGtLhbnnA/5qJj7x3dNDCRx/PJxu774LlH8lCOlB4hEfKg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "dependencies": {
        "napi-postinstall": "^0.3.0"
      },
      "funding": {
        "url": "https://opencollective.com/unrs-resolver"
      },
      "optionalDependencies": {
        "@unrs/resolver-binding-android-arm-eabi": "1.11.1",
        "@unrs/resolver-binding-android-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-x64": "1.11.1",
        "@unrs/resolver-binding-freebsd-x64": "1.11.1",
        "@unrs/resolver-binding-linux-arm-gnueabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm-musleabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-ppc64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-s390x-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-musl": "1.11.1",
        "@unrs/resolver-binding-wasm32-wasi": "1.11.1",
        "@unrs/resolver-binding-win32-arm64-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-ia32-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-x64-msvc": "1.11.1"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/use-callback-ref": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/use-callback-ref/-/use-callback-ref-1.3.3.tgz",
      "integrity": "sha512-jQL3lRnocaFtu3V00JToYz/4QkNWswxijDaCVNZRiRTO3HQDLsdu1ZtmIUvV4yPp+rvWm5j0y0TG/S61cuijTg==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/use-sidecar": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/use-sidecar/-/use-sidecar-1.1.3.tgz",
      "integrity": "sha512-Fedw0aZvkhynoPYlA5WXrMCAMm+nSWdZt6lzJQ7Ok8S6Q+VsHmHpRWndVRJ8Be0ZbkfPc5LRYH+5XrzXcEeLRQ==",
      "license": "MIT",
      "dependencies": {
        "detect-node-es": "^1.1.0",
        "tslib": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "@types/react": "*",
        "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/v8-compile-cache-lib": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/v8-compile-cache-lib/-/v8-compile-cache-lib-3.0.1.tgz",
      "integrity": "sha512-wa7YjyUGfNZngI/vtK0UHAN+lgDCxBPCylVXGp0zu59Fz5aiGtNXaq3DhIov063MorB+VfufLh3JlF2KdTK3xg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/vfile": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/vfile/-/vfile-6.0.3.tgz",
      "integrity": "sha512-KzIbH/9tXat2u30jf+smMwFCsno4wHVdNmzFyL+T/L3UGqqk6JKfVqOFOZEpZSHADH1k40ab6NUIXZq422ov3Q==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/vfile-message": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/vfile-message/-/vfile-message-4.0.3.tgz",
      "integrity": "sha512-QTHzsGd1EhbZs4AsQ20JX1rC3cOlt/IWJruk893DfLRr57lcnOeMaWG4K0JrRta4mIJZKth2Au3mM3u03/JWKw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-stringify-position": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/vite-node": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/vite-node/-/vite-node-3.2.4.tgz",
      "integrity": "sha512-EbKSKh+bh1E1IFxeO0pg1n4dvoOTt0UDiXMd/qn++r98+jPO1xtJilvXldeuQ8giIB5IkpjCgMleHMNEsGH6pg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cac": "^6.7.14",
        "debug": "^4.4.1",
        "es-module-lexer": "^1.7.0",
        "pathe": "^2.0.3",
        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0"
      },
      "bin": {
        "vite-node": "vite-node.mjs"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      }
    },
    "node_modules/vite-node/node_modules/@types/node": {
      "version": "24.7.0",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-24.7.0.tgz",
      "integrity": "sha512-IbKooQVqUBrlzWTi79E8Fw78l8k1RNtlDDNWsFZs7XonuQSJ8oNYfEeclhprUldXISRMLzBpILuKgPlIxm+/Yw==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "peer": true,
      "dependencies": {
        "undici-types": "~7.14.0"
      }
    },
    "node_modules/vite-node/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/vite-node/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/vite-node/node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/vite-node/node_modules/undici-types": {
      "version": "7.14.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-7.14.0.tgz",
      "integrity": "sha512-QQiYxHuyZ9gQUIrmPo3IA+hUl4KYk8uSA7cHrcKd/l3p1OTpZcM0Tbp9x7FAtXdAYhlasd60ncPpgu6ihG6TOA==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "peer": true
    },
    "node_modules/vite-node/node_modules/vite": {
      "version": "7.1.8",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.1.8.tgz",
      "integrity": "sha512-oBXvfSHEOL8jF+R9Am7h59Up07kVVGH1NrFGFoEG6bPDZP3tGpQhvkBpy5x7U6+E6wZCu9OihsWgJqDbQIm8LQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vitest": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/vitest/-/vitest-3.2.4.tgz",
      "integrity": "sha512-LUCP5ev3GURDysTWiP47wRRUpLKMOfPh+yKTx3kVIEiu5KOMeqzpnYNsKyOoVrULivR8tLcks4+lga33Whn90A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/chai": "^5.2.2",
        "@vitest/expect": "3.2.4",
        "@vitest/mocker": "3.2.4",
        "@vitest/pretty-format": "^3.2.4",
        "@vitest/runner": "3.2.4",
        "@vitest/snapshot": "3.2.4",
        "@vitest/spy": "3.2.4",
        "@vitest/utils": "3.2.4",
        "chai": "^5.2.0",
        "debug": "^4.4.1",
        "expect-type": "^1.2.1",
        "magic-string": "^0.30.17",
        "pathe": "^2.0.3",
        "picomatch": "^4.0.2",
        "std-env": "^3.9.0",
        "tinybench": "^2.9.0",
        "tinyexec": "^0.3.2",
        "tinyglobby": "^0.2.14",
        "tinypool": "^1.1.1",
        "tinyrainbow": "^2.0.0",
        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0",
        "vite-node": "3.2.4",
        "why-is-node-running": "^2.3.0"
      },
      "bin": {
        "vitest": "vitest.mjs"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      },
      "peerDependencies": {
        "@edge-runtime/vm": "*",
        "@types/debug": "^4.1.12",
        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
        "@vitest/browser": "3.2.4",
        "@vitest/ui": "3.2.4",
        "happy-dom": "*",
        "jsdom": "*"
      },
      "peerDependenciesMeta": {
        "@edge-runtime/vm": {
          "optional": true
        },
        "@types/debug": {
          "optional": true
        },
        "@types/node": {
          "optional": true
        },
        "@vitest/browser": {
          "optional": true
        },
        "@vitest/ui": {
          "optional": true
        },
        "happy-dom": {
          "optional": true
        },
        "jsdom": {
          "optional": true
        }
      }
    },
    "node_modules/vitest/node_modules/@vitest/mocker": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/@vitest/mocker/-/mocker-3.2.4.tgz",
      "integrity": "sha512-46ryTE9RZO/rfDd7pEqFl7etuyzekzEhUbTW3BvmeO/BcCMEgq59BKhek3dXDWgAj4oMK6OZi+vRr1wPW6qjEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@vitest/spy": "3.2.4",
        "estree-walker": "^3.0.3",
        "magic-string": "^0.30.17"
      },
      "funding": {
        "url": "https://opencollective.com/vitest"
      },
      "peerDependencies": {
        "msw": "^2.4.9",
        "vite": "^5.0.0 || ^6.0.0 || ^7.0.0-0"
      },
      "peerDependenciesMeta": {
        "msw": {
          "optional": true
        },
        "vite": {
          "optional": true
        }
      }
    },
    "node_modules/vitest/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/vitest/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/vitest/node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/vitest/node_modules/vite": {
      "version": "7.1.8",
      "resolved": "https://registry.npmjs.org/vite/-/vite-7.1.8.tgz",
      "integrity": "sha512-oBXvfSHEOL8jF+R9Am7h59Up07kVVGH1NrFGFoEG6bPDZP3tGpQhvkBpy5x7U6+E6wZCu9OihsWgJqDbQIm8LQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3",
        "postcss": "^8.5.6",
        "rollup": "^4.43.0",
        "tinyglobby": "^0.2.15"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^20.19.0 || >=22.12.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^20.19.0 || >=22.12.0",
        "jiti": ">=1.21.0",
        "less": "^4.0.0",
        "lightningcss": "^1.21.0",
        "sass": "^1.70.0",
        "sass-embedded": "^1.70.0",
        "stylus": ">=0.54.8",
        "sugarss": "^5.0.0",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/walk-up-path": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/walk-up-path/-/walk-up-path-4.0.0.tgz",
      "integrity": "sha512-3hu+tD8YzSLGuFYtPRb48vdhKMi0KQV5sn+uWr8+7dMEq/2G/dtLrdDinkLjqq5TIbIBjYJ4Ax/n3YiaW7QM8A==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": "20 || >=22"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
      "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "function.prototype.name": "^1.1.6",
        "has-tostringtag": "^1.0.2",
        "is-async-function": "^2.0.0",
        "is-date-object": "^1.1.0",
        "is-finalizationregistry": "^1.1.0",
        "is-generator-function": "^1.0.10",
        "is-regex": "^1.2.1",
        "is-weakref": "^1.0.2",
        "isarray": "^2.0.5",
        "which-boxed-primitive": "^1.1.0",
        "which-collection": "^1.0.2",
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/why-is-node-running": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.3.0.tgz",
      "integrity": "sha512-hUrmaWBdVDcxvYqnyh09zunKzROWjbZTiNy8dBEjkS7ehEDQibXJ7XvlmtbwuTclUiIyN+CyXQD4Vmko8fNm8w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "siginfo": "^2.0.0",
        "stackback": "0.0.2"
      },
      "bin": {
        "why-is-node-running": "cli.js"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^6.1.0",
        "string-width": "^5.0.1",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs": {
      "name": "wrap-ansi",
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/wrap-ansi-cjs/node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi-cjs/node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.1.tgz",
      "integrity": "sha512-lcYcMxX2PO9XMGvAJkJ3OsNMw+/7FKes7/hgerGUYWIoWu5j/+YQqcZr5JnPZWzOsEBgMbSbiSTn/dv/69Mkpw==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      }
    },
    "node_modules/yn": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yn/-/yn-3.1.1.tgz",
      "integrity": "sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.1.11",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.11.tgz",
      "integrity": "sha512-WPsqwxITS2tzx1bzhIKsEs19ABD5vmCVa4xBo2tq/SrV4RNZtfws1EnCWQXM6yh8bD08a1idvkB5MZSBiZsjwg==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zwitch": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/zwitch/-/zwitch-2.0.4.tgz",
      "integrity": "sha512-bXE4cR/kVZhKZX/RjPEflHaKVhUVl85noU3v6b8apfQEc1x4A+zBxjZ4lN8LqGd6WZ3dl98pY4o717VFmoPp+A==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    }
  }
}

```

---

### package.json

```json
{
  "name": "atticus",
  "version": "0.8.0",
  "private": true,
  "description": "Next.js frontend for the Atticus RAG workspace.",
  "scripts": {
    "dev": "next dev -p 3000",
    "build": "next build",
    "start": "next start -p 3000",
    "lint": "next lint",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "typecheck": "tsc --noEmit",
    "audit:ts": "knip --strict",
    "audit:icons": "node scripts/icon-audit.mjs",
    "audit:routes": "node scripts/route-audit.mjs",
    "audit:py": "python scripts/audit_unused.py --json",
    "prisma:generate": "prisma generate",
    "db:migrate": "prisma migrate deploy",
    "db:seed": "ts-node --esm prisma/seed.ts",
    "test:unit": "vitest run",
    "test:unit:watch": "vitest",
    "test:e2e": "playwright test"
  },
  "dependencies": {
    "@auth/prisma-adapter": "^2.10.0",
    "@prisma/client": "^5.18.0",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-slot": "^1.0.4",
    "@radix-ui/react-tabs": "^1.0.5",
    "clsx": "^2.1.1",
    "lucide-react": "^0.452.0",
    "next": "^14.2.33",
    "next-auth": "^4.24.7",
    "nodemailer": "^6.9.14",
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "react-markdown": "^10.1.0",
    "remark-gfm": "^4.0.1",
    "zod": "^4.1.11"
  },
  "devDependencies": {
    "@playwright/test": "^1.45.2",
    "@types/node": "20.14.9",
    "@types/nodemailer": "^7.0.1",
    "@types/react": "18.3.5",
    "@types/react-dom": "18.3.0",
    "autoprefixer": "10.4.20",
    "eslint": "8.57.0",
    "eslint-config-next": "14.2.5",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-tailwindcss": "^3.13.0",
    "knip": "^5.64.1",
    "postcss": "8.4.40",
    "prettier": "^3.3.3",
    "prettier-plugin-tailwindcss": "^0.5.14",
    "prisma": "^5.18.0",
    "tailwindcss": "3.4.10",
    "ts-node": "^10.9.2",
    "typescript": "5.4.5",
    "vitest": "^3.2.4"
  }
}

```

---

### playwright.config.ts

```ts
import { defineConfig, devices } from "@playwright/test";
import { fileURLToPath } from "node:url";
import path from "node:path";

const baseURL = process.env.PLAYWRIGHT_BASE_URL ?? "http://127.0.0.1:3000";

export default defineConfig({
  testDir: "tests/playwright",
  timeout: 30_000,
  expect: {
    timeout: 5_000,
  },
  use: {
    baseURL,
    trace: "on-first-retry",
    storageState: undefined,
  },
  reporter: [["list"], ["html", { outputFolder: "reports/playwright" }]],
  projects: [
    {
      name: "chromium",
      use: { ...devices["Desktop Chrome"] },
    },
  ],
  outputDir: path.join(
    path.dirname(fileURLToPath(import.meta.url)),
    "reports/playwright-artifacts"
  ),
});

```

---

### postcss.config.js

```js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

```

---

### prisma/migrations/20240702120000_auth_rbac/migration.sql

```sql
-- Prisma migration for Auth.js + RBAC + glossary storage
-- Phase 3 rollout. Applies tables, enums, triggers, and RLS policies.

CREATE SCHEMA IF NOT EXISTS app_private;

DO $$
DECLARE
  db_name text := current_database();
BEGIN
  EXECUTE format('ALTER DATABASE %I SET app.current_user_role = %L', db_name, 'SERVICE');
  EXECUTE format('ALTER DATABASE %I SET app.current_org_id = %L', db_name, '');
  EXECUTE format('ALTER DATABASE %I SET app.current_user_id = %L', db_name, '');
  EXECUTE format('ALTER DATABASE %I SET app.pgvector_lists = %L', db_name, '100');
  EXECUTE format('ALTER DATABASE %I SET app.pgvector_dimension = %L', db_name, '3072');
END
$$;

CREATE OR REPLACE FUNCTION app_private.update_updated_at()
RETURNS trigger AS $$
BEGIN
  NEW."updatedAt" = CURRENT_TIMESTAMP;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TYPE "Role" AS ENUM ('USER', 'REVIEWER', 'ADMIN');
CREATE TYPE "GlossaryStatus" AS ENUM ('PENDING', 'APPROVED', 'REJECTED');

CREATE TABLE "Organization" (
  "id" TEXT PRIMARY KEY,
  "name" TEXT NOT NULL,
  "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE UNIQUE INDEX "Organization_name_key" ON "Organization" ("name");

CREATE TABLE "User" (
  "id" TEXT PRIMARY KEY,
  "name" TEXT,
  "email" TEXT NOT NULL,
  "emailVerified" TIMESTAMP(3),
  "image" TEXT,
  "role" "Role" NOT NULL DEFAULT 'USER',
  "orgId" TEXT NOT NULL,
  "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT "User_email_key" UNIQUE ("email"),
  CONSTRAINT "User_orgId_fkey" FOREIGN KEY ("orgId") REFERENCES "Organization" ("id") ON DELETE CASCADE
);

CREATE TABLE "Account" (
  "id" TEXT PRIMARY KEY,
  "userId" TEXT NOT NULL,
  "type" TEXT NOT NULL,
  "provider" TEXT NOT NULL,
  "providerAccountId" TEXT NOT NULL,
  "refresh_token" TEXT,
  "access_token" TEXT,
  "expires_at" INTEGER,
  "token_type" TEXT,
  "scope" TEXT,
  "id_token" TEXT,
  "session_state" TEXT,
  "oauth_token_secret" TEXT,
  "oauth_token" TEXT,
  CONSTRAINT "Account_provider_providerAccountId_key" UNIQUE ("provider", "providerAccountId"),
  CONSTRAINT "Account_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User" ("id") ON DELETE CASCADE
);

CREATE TABLE "Session" (
  "id" TEXT PRIMARY KEY,
  "sessionToken" TEXT NOT NULL,
  "userId" TEXT NOT NULL,
  "expires" TIMESTAMP(3) NOT NULL,
  CONSTRAINT "Session_sessionToken_key" UNIQUE ("sessionToken"),
  CONSTRAINT "Session_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User" ("id") ON DELETE CASCADE
);

CREATE TABLE "VerificationToken" (
  "identifier" TEXT NOT NULL,
  "token" TEXT NOT NULL,
  "expires" TIMESTAMP(3) NOT NULL,
  CONSTRAINT "VerificationToken_token_key" UNIQUE ("token"),
  CONSTRAINT "VerificationToken_identifier_token_key" UNIQUE ("identifier", "token")
);

CREATE TABLE "GlossaryEntry" (
  "id" TEXT PRIMARY KEY,
  "term" TEXT NOT NULL,
  "definition" TEXT NOT NULL,
  "status" "GlossaryStatus" NOT NULL DEFAULT 'PENDING',
  "orgId" TEXT NOT NULL,
  "authorId" TEXT NOT NULL,
  "updatedById" TEXT,
  "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT "GlossaryEntry_orgId_term_key" UNIQUE ("orgId", "term"),
  CONSTRAINT "GlossaryEntry_orgId_fkey" FOREIGN KEY ("orgId") REFERENCES "Organization" ("id") ON DELETE CASCADE,
  CONSTRAINT "GlossaryEntry_authorId_fkey" FOREIGN KEY ("authorId") REFERENCES "User" ("id") ON DELETE RESTRICT,
  CONSTRAINT "GlossaryEntry_updatedById_fkey" FOREIGN KEY ("updatedById") REFERENCES "User" ("id") ON DELETE SET NULL
);

CREATE INDEX "GlossaryEntry_orgId_status_idx" ON "GlossaryEntry" ("orgId", "status");

CREATE TRIGGER set_updated_at_organization
BEFORE UPDATE ON "Organization"
FOR EACH ROW EXECUTE FUNCTION app_private.update_updated_at();

CREATE TRIGGER set_updated_at_user
BEFORE UPDATE ON "User"
FOR EACH ROW EXECUTE FUNCTION app_private.update_updated_at();

CREATE TRIGGER set_updated_at_glossary
BEFORE UPDATE ON "GlossaryEntry"
FOR EACH ROW EXECUTE FUNCTION app_private.update_updated_at();

ALTER TABLE "Organization" ENABLE ROW LEVEL SECURITY;
ALTER TABLE "User" ENABLE ROW LEVEL SECURITY;
ALTER TABLE "Account" ENABLE ROW LEVEL SECURITY;
ALTER TABLE "Session" ENABLE ROW LEVEL SECURITY;
ALTER TABLE "GlossaryEntry" ENABLE ROW LEVEL SECURITY;

-- Helper comment: we intentionally leave VerificationToken without RLS because it contains short-lived tokens only.

CREATE POLICY "Organization_same_org_read" ON "Organization"
  FOR SELECT USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "id" = current_setting('app.current_org_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Organization_admin_update" ON "Organization"
  FOR UPDATE USING (
    current_setting('app.current_org_id', true) IS NOT NULL
    AND "id" = current_setting('app.current_org_id')
    AND current_setting('app.current_user_role', true) = 'ADMIN'
  ) WITH CHECK (
    current_setting('app.current_org_id', true) IS NOT NULL
    AND "id" = current_setting('app.current_org_id')
  );

CREATE POLICY "User_same_org_select" ON "User"
  FOR SELECT USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "User_self_update" ON "User"
  FOR UPDATE USING (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "id" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  ) WITH CHECK (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "id" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "User_admin_update" ON "User"
  FOR UPDATE USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  ) WITH CHECK (
    (
      "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "User_admin_insert" ON "User"
  FOR INSERT WITH CHECK (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Account_same_user" ON "Account"
  USING (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "userId" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  ) WITH CHECK (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "userId" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Session_same_user" ON "Session"
  USING (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "userId" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  ) WITH CHECK (
    (
      current_setting('app.current_user_id', true) IS NOT NULL
      AND "userId" = current_setting('app.current_user_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Glossary_same_org_read" ON "GlossaryEntry"
  FOR SELECT USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Glossary_admin_write" ON "GlossaryEntry"
  FOR INSERT WITH CHECK (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Glossary_admin_update" ON "GlossaryEntry"
  FOR UPDATE USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  ) WITH CHECK (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

CREATE POLICY "Glossary_admin_delete" ON "GlossaryEntry"
  FOR DELETE USING (
    (
      current_setting('app.current_org_id', true) IS NOT NULL
      AND "orgId" = current_setting('app.current_org_id')
      AND current_setting('app.current_user_role', true) = 'ADMIN'
    )
    OR current_setting('app.current_user_role', true) = 'SERVICE'
  );

```

---

### prisma/migrations/20240708123000_pgvector_schema/migration.sql

```sql
-- Prisma migration for pgvector document + chunk storage
-- Phase 1: Data Layer First

CREATE EXTENSION IF NOT EXISTS vector;

CREATE TABLE IF NOT EXISTS atticus_documents (
    document_id TEXT PRIMARY KEY,
    source_path TEXT UNIQUE NOT NULL,
    sha256 TEXT NOT NULL,
    source_type TEXT,
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    chunk_count INTEGER NOT NULL DEFAULT 0,
    ingested_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS atticus_chunks (
    chunk_id TEXT PRIMARY KEY,
    document_id TEXT NOT NULL REFERENCES atticus_documents(document_id) ON DELETE CASCADE,
    source_path TEXT NOT NULL,
    position INTEGER NOT NULL,
    text TEXT NOT NULL,
    section TEXT,
    page_number INTEGER,
    token_count INTEGER,
    start_token INTEGER,
    end_token INTEGER,
    sha256 TEXT NOT NULL,
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    embedding vector(3072) NOT NULL,
    ingested_at TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_atticus_chunks_document ON atticus_chunks(document_id);
CREATE INDEX IF NOT EXISTS idx_atticus_chunks_source_path ON atticus_chunks(source_path);
CREATE UNIQUE INDEX IF NOT EXISTS idx_atticus_chunks_doc_sha ON atticus_chunks(document_id, sha256);

DO $$
DECLARE
    desired_lists INTEGER;
    raw_lists TEXT;
    raw_dimension TEXT;
    dimension INTEGER := 3072;
BEGIN
    raw_lists := current_setting('app.pgvector_lists', true);
    raw_dimension := current_setting('app.pgvector_dimension', true);

    IF raw_dimension IS NOT NULL AND raw_dimension <> '' THEN
        BEGIN
            dimension := raw_dimension::INTEGER;
        EXCEPTION WHEN OTHERS THEN
            dimension := 3072;
        END;
    END IF;

    IF raw_lists IS NULL OR raw_lists = '' THEN
        desired_lists := 100;
    ELSE
        BEGIN
            desired_lists := raw_lists::INTEGER;
        EXCEPTION WHEN OTHERS THEN
            desired_lists := 100;
        END;
    END IF;

    IF dimension > 2000 THEN
        RAISE NOTICE 'Skipping ANN index creation: dimension % exceeds 2000. Install a pgvector build with higher INDEX_MAX_DIMENSIONS to enable ivfflat.', dimension;
    ELSE
        EXECUTE format(
            'CREATE INDEX IF NOT EXISTS idx_atticus_chunks_embedding ON atticus_chunks USING ivfflat (embedding vector_cosine_ops) WITH (lists = %s)',
            desired_lists
        );

        BEGIN
            EXECUTE format(
                'ALTER INDEX idx_atticus_chunks_embedding SET (lists = %s)',
                desired_lists
            );
        EXCEPTION WHEN OTHERS THEN
            NULL;
        END;
    END IF;
END$$;

ALTER TABLE atticus_documents
    ALTER COLUMN metadata SET DEFAULT '{}'::jsonb,
    ALTER COLUMN chunk_count SET DEFAULT 0,
    ALTER COLUMN ingested_at SET DEFAULT CURRENT_TIMESTAMP,
    ALTER COLUMN updated_at SET DEFAULT CURRENT_TIMESTAMP;

ALTER TABLE atticus_chunks
    ALTER COLUMN metadata SET DEFAULT '{}'::jsonb,
    ALTER COLUMN ingested_at SET DEFAULT CURRENT_TIMESTAMP,
    ALTER COLUMN embedding TYPE vector(3072);

DROP TRIGGER IF EXISTS set_updated_at_atticus_documents ON atticus_documents;
CREATE TRIGGER set_updated_at_atticus_documents
BEFORE UPDATE ON atticus_documents
FOR EACH ROW EXECUTE FUNCTION app_private.update_updated_at();

DROP TRIGGER IF EXISTS set_updated_at_atticus_chunks ON atticus_chunks;
CREATE TRIGGER set_updated_at_atticus_chunks
BEFORE UPDATE ON atticus_chunks
FOR EACH ROW EXECUTE FUNCTION app_private.update_updated_at();

```

---

### prisma/migrations/20240709150000_glossary_review_workflow/migration.sql

```sql
-- Extend glossary entries with review metadata and synonym support.

ALTER TABLE "GlossaryEntry"
  ADD COLUMN "synonyms" TEXT[] NOT NULL DEFAULT ARRAY[]::TEXT[],
  ADD COLUMN "reviewNotes" TEXT,
  ADD COLUMN "reviewedAt" TIMESTAMP(3),
  ADD COLUMN "reviewerId" TEXT;

ALTER TABLE "GlossaryEntry"
  ADD CONSTRAINT "GlossaryEntry_reviewerId_fkey"
  FOREIGN KEY ("reviewerId") REFERENCES "User"("id") ON DELETE SET NULL;

CREATE INDEX IF NOT EXISTS "GlossaryEntry_status_reviewedAt_idx"
  ON "GlossaryEntry" ("status", "reviewedAt");

```

---

### prisma/migrations/20250201090000_fix_updated_at_trigger/migration.sql

```sql
-- Align update_updated_at trigger with snake_case and camelCase columns
CREATE OR REPLACE FUNCTION app_private.update_updated_at()
RETURNS trigger AS $$
DECLARE
    payload jsonb := to_jsonb(NEW);
BEGIN
    IF payload ? 'updatedAt' THEN
        NEW."updatedAt" = CURRENT_TIMESTAMP;
    ELSIF payload ? 'updated_at' THEN
        NEW.updated_at = CURRENT_TIMESTAMP;
    ELSE
        RAISE EXCEPTION 'update_updated_at() called for table % without updated timestamp column', TG_TABLE_NAME;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

```

---

### prisma/migrations/20251008090000_pgvector_bootstrap/migration.sql

```sql
-- Ensure app.pgvector_lists is set for fresh environments.
-- Idempotent: only sets a default if not already configured.
DO $$
BEGIN
  -- current_setting(..., true) returns NULL if not set
  IF current_setting('app.pgvector_lists', true) IS NULL THEN
    PERFORM set_config('app.pgvector_lists', '100', true);
    RAISE NOTICE 'Set app.pgvector_lists to 100';
  ELSE
    RAISE NOTICE 'app.pgvector_lists already set to %', current_setting('app.pgvector_lists', true);
  END IF;
END $$;

```

---

### prisma/migrations/20251018090000_admin_ops_console/migration.sql

```sql
-- Phase 6: Admin Ops Console support tables
CREATE TABLE "Chat" (
  "id" TEXT PRIMARY KEY,
  "orgId" TEXT NOT NULL,
  "userId" TEXT,
  "question" TEXT NOT NULL,
  "answer" TEXT,
  "confidence" DOUBLE PRECISION NOT NULL,
  "status" TEXT NOT NULL DEFAULT 'ok',
  "topSources" JSONB,
  "requestId" TEXT,
  "reviewedById" TEXT,
  "reviewedAt" TIMESTAMPTZ,
  "followUpPrompt" TEXT,
  "auditLog" JSONB,
  "createdAt" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE "Ticket" (
  "id" TEXT PRIMARY KEY,
  "orgId" TEXT NOT NULL,
  "key" TEXT NOT NULL,
  "status" TEXT NOT NULL,
  "assignee" TEXT,
  "lastActivity" TIMESTAMPTZ,
  "summary" TEXT,
  "chatId" TEXT,
  "auditLog" JSONB,
  "createdAt" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP,
  "updatedAt" TIMESTAMPTZ NOT NULL DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE "Chat"
  ADD CONSTRAINT "Chat_orgId_fkey" FOREIGN KEY ("orgId") REFERENCES "Organization"("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "Chat"
  ADD CONSTRAINT "Chat_userId_fkey" FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE "Chat"
  ADD CONSTRAINT "Chat_reviewedById_fkey" FOREIGN KEY ("reviewedById") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE "Ticket"
  ADD CONSTRAINT "Ticket_orgId_fkey" FOREIGN KEY ("orgId") REFERENCES "Organization"("id") ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE "Ticket"
  ADD CONSTRAINT "Ticket_chatId_fkey" FOREIGN KEY ("chatId") REFERENCES "Chat"("id") ON DELETE SET NULL ON UPDATE CASCADE;

CREATE UNIQUE INDEX "Ticket_orgId_key_key" ON "Ticket" ("orgId", "key");
CREATE INDEX "Chat_orgId_status_idx" ON "Chat" ("orgId", "status");
CREATE INDEX "Chat_status_reviewedAt_idx" ON "Chat" ("status", "reviewedAt");
CREATE INDEX "Ticket_status_assignee_idx" ON "Ticket" ("status", "assignee");

```

---

### prisma/migrations/20251019090000_pgvector_lists_guc/migration.sql

```sql
-- Ensure the app.pgvector_lists GUC is set consistently for ANN queries.
DO $$
DECLARE
  existing text;
BEGIN
  existing := current_setting('app.pgvector_lists', true);
  IF existing IS NULL OR length(trim(existing)) = 0 THEN
    existing := '100';
  END IF;
  PERFORM set_config('app.pgvector_lists', existing, true);
  EXECUTE format('ALTER DATABASE %I SET app.pgvector_lists = %L', current_database(), existing);
END $$;

```

---

### prisma/migrations/20251019090500_rag_events_audit/migration.sql

```sql
-- Capture glossary/chat audit events for administrator actions.
CREATE TABLE "RagEvent" (
    "id" TEXT NOT NULL,
    "orgId" TEXT NOT NULL,
    "actorId" TEXT,
    "actorRole" "Role",
    "action" TEXT NOT NULL,
    "entity" TEXT NOT NULL,
    "glossaryId" TEXT,
    "chatId" TEXT,
    "requestId" TEXT,
    "before" JSONB,
    "after" JSONB,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT "RagEvent_pkey" PRIMARY KEY ("id")
);

CREATE INDEX "RagEvent_orgId_action_createdAt_idx" ON "RagEvent"("orgId", "action", "createdAt");
CREATE INDEX "RagEvent_glossaryId_idx" ON "RagEvent"("glossaryId");
CREATE INDEX "RagEvent_chatId_idx" ON "RagEvent"("chatId");

ALTER TABLE "RagEvent"
  ADD CONSTRAINT "RagEvent_orgId_fkey"
  FOREIGN KEY ("orgId") REFERENCES "Organization"("id") ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE "RagEvent"
  ADD CONSTRAINT "RagEvent_actorId_fkey"
  FOREIGN KEY ("actorId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "RagEvent"
  ADD CONSTRAINT "RagEvent_glossaryId_fkey"
  FOREIGN KEY ("glossaryId") REFERENCES "GlossaryEntry"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "RagEvent"
  ADD CONSTRAINT "RagEvent_chatId_fkey"
  FOREIGN KEY ("chatId") REFERENCES "Chat"("id") ON DELETE SET NULL ON UPDATE CASCADE;

```

---

### prisma/schema.prisma

```prisma
// Prisma schema for Atticus auth + glossary RBAC
// Generated as part of Phase 3 Auth & RBAC rollout.

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  REVIEWER
  ADMIN
}

enum GlossaryStatus {
  PENDING
  APPROVED
  REJECTED
}

model Organization {
  id        String          @id @default(cuid())
  name      String
  users     User[]
  glossary  GlossaryEntry[]
  chats     Chat[]
  tickets   Ticket[]
  events    RagEvent[]
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt

  @@unique([name])
}

model User {
  id            String           @id @default(cuid())
  name          String?
  email         String           @unique
  emailVerified DateTime?
  image         String?
  role          Role             @default(USER)
  orgId         String
  org           Organization     @relation(fields: [orgId], references: [id], onDelete: Cascade)
  accounts      Account[]
  sessions      Session[]
  glossaryAuthored GlossaryEntry[] @relation("GlossaryAuthor")
  glossaryUpdated GlossaryEntry[] @relation("GlossaryUpdatedBy")
  glossaryReviewed GlossaryEntry[] @relation("GlossaryReviewer")
  chats             Chat[]           @relation("ChatAuthor")
  chatsReviewed     Chat[]           @relation("ChatReviewer")
  auditEvents      RagEvent[]
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?
  oauth_token_secret String? @db.Text
  oauth_token        String? @db.Text

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model GlossaryEntry {
  id           String          @id @default(cuid())
  term         String
  definition   String          @db.Text
  synonyms     String[]        @default([])
  status       GlossaryStatus  @default(PENDING)
  orgId        String
  org          Organization    @relation(fields: [orgId], references: [id], onDelete: Cascade)
  authorId     String
  author       User            @relation("GlossaryAuthor", fields: [authorId], references: [id])
  updatedById  String?
  updatedBy    User?           @relation("GlossaryUpdatedBy", fields: [updatedById], references: [id])
  reviewerId   String?
  reviewer     User?           @relation("GlossaryReviewer", fields: [reviewerId], references: [id])
  reviewNotes  String?         @db.Text
  reviewedAt   DateTime?
  events       RagEvent[]
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt

  @@unique([orgId, term])
  @@index([orgId, status])
  @@index([status, reviewedAt])
}

model Chat {
  id             String      @id @default(cuid())
  orgId          String
  org            Organization @relation(fields: [orgId], references: [id], onDelete: Cascade)
  userId         String?
  author         User?       @relation("ChatAuthor", fields: [userId], references: [id], onDelete: SetNull)
  question       String
  answer         String?     @db.Text
  confidence     Float
  status         String      @default("ok")
  topSources     Json?       @db.JsonB
  requestId      String?
  reviewedById   String?
  reviewer       User?       @relation("ChatReviewer", fields: [reviewedById], references: [id], onDelete: SetNull)
  reviewedAt     DateTime?
  followUpPrompt String?     @db.Text
  auditLog       Json?       @db.JsonB
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  tickets        Ticket[]
  events         RagEvent[]

  @@index([orgId, status])
  @@index([status, reviewedAt])
}

model RagEvent {
  id         String       @id @default(cuid())
  orgId      String
  org        Organization @relation(fields: [orgId], references: [id], onDelete: Cascade)
  actorId    String?
  actor      User?        @relation(fields: [actorId], references: [id], onDelete: SetNull)
  actorRole  Role?
  action     String
  entity     String
  glossaryId String?
  glossary   GlossaryEntry? @relation(fields: [glossaryId], references: [id], onDelete: SetNull)
  chatId     String?
  chat       Chat?         @relation(fields: [chatId], references: [id], onDelete: SetNull)
  requestId  String?
  before     Json?         @db.JsonB
  after      Json?         @db.JsonB
  createdAt  DateTime      @default(now())

  @@index([orgId, action, createdAt])
  @@index([glossaryId])
  @@index([chatId])
}

model Ticket {
  id             String      @id @default(cuid())
  orgId          String
  org            Organization @relation(fields: [orgId], references: [id], onDelete: Cascade)
  key            String
  status         String
  assignee       String?
  lastActivity   DateTime?
  summary        String?     @db.Text
  chatId         String?
  chat           Chat?       @relation(fields: [chatId], references: [id], onDelete: SetNull)
  auditLog       Json?       @db.JsonB
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt

  @@unique([orgId, key])
  @@index([status, assignee])
}

model AtticusDocument {
  id          String          @id @map("document_id")
  sourcePath  String          @unique @map("source_path")
  sha256      String
  sourceType  String?         @map("source_type")
  metadata    Json            @map("metadata") @db.JsonB
  chunkCount  Int             @default(0) @map("chunk_count")
  ingestedAt  DateTime        @default(now()) @map("ingested_at") @db.Timestamptz(6)
  updatedAt   DateTime        @updatedAt @map("updated_at") @db.Timestamptz(6)

  chunks      AtticusChunk[]

  @@map("atticus_documents")
}

model AtticusChunk {
  id          String          @id @map("chunk_id")
  documentId  String          @map("document_id")
  document    AtticusDocument @relation(fields: [documentId], references: [id], onDelete: Cascade)
  sourcePath  String          @map("source_path")
  position    Int
  text        String
  section     String?
  pageNumber  Int?            @map("page_number")
  tokenCount  Int?            @map("token_count")
  startToken  Int?            @map("start_token")
  endToken    Int?            @map("end_token")
  sha256      String
  metadata    Json            @db.JsonB
  embedding   Unsupported("vector")
  ingestedAt  DateTime        @default(now()) @map("ingested_at") @db.Timestamptz(6)

  @@index([documentId], map: "idx_atticus_chunks_document")
  @@index([sourcePath], map: "idx_atticus_chunks_source_path")
  @@unique([documentId, sha256], map: "idx_atticus_chunks_doc_sha")
  @@map("atticus_chunks")
}

```

---

### prisma/seed.ts

```ts
import { GlossaryStatus, Prisma, PrismaClient, Role } from "@prisma/client";

const prisma = new PrismaClient();

type SeedUser = {
  id: string;
  email: string;
  name: string;
  role: Role;
};

type GlossarySeed = {
  id: string;
  term: string;
  definition: string;
  synonyms: string[];
  status: GlossaryStatus;
  reviewNotes?: string;
  reviewerId?: string;
  reviewedAt?: Date;
};

type ChatSeed = {
  id: string;
  question: string;
  answer?: string;
  confidence: number;
  status: string;
  requestId?: string;
  topSources: Array<{
    path: string;
    score?: number;
    page?: number;
    heading?: string;
    chunkId?: string;
  }>;
  followUpPrompt?: string;
  auditLog?: Array<Record<string, unknown>>;
  createdAt: Date;
  userId?: string;
  reviewedById?: string | null;
  reviewedAt?: Date | null;
  tickets?: TicketSeed[];
};

type TicketSeed = {
  id: string;
  key: string;
  status: string;
  assignee?: string;
  lastActivity?: Date;
  summary?: string;
  auditLog?: Array<Record<string, unknown>>;
};

const seedUsers: SeedUser[] = [
  {
    id: "user-seed-author",
    email: "glossary.author@seed.atticus",
    name: "Glossary Seed Author",
    role: Role.REVIEWER,
  },
  {
    id: "user-seed-approver",
    email: "glossary.approver@seed.atticus",
    name: "Glossary Seed Approver",
    role: Role.ADMIN,
  },
];

async function main() {
  const defaultOrgId = process.env.DEFAULT_ORG_ID ?? "org-atticus";
  const defaultOrgName = process.env.DEFAULT_ORG_NAME ?? "Atticus Default";
  const adminEmail = process.env.ADMIN_EMAIL;
  const adminName = process.env.ADMIN_NAME ?? "Atticus Admin";

  const organization = await prisma.organization.upsert({
    where: { id: defaultOrgId },
    update: { name: defaultOrgName },
    create: {
      id: defaultOrgId,
      name: defaultOrgName,
    },
  });

  if (adminEmail) {
    await prisma.user.upsert({
      where: { email: adminEmail.toLowerCase() },
      update: {
        role: Role.ADMIN,
        orgId: organization.id,
      },
      create: {
        email: adminEmail.toLowerCase(),
        name: adminName,
        role: Role.ADMIN,
        orgId: organization.id,
      },
    });
  }

  const seededUsers = await Promise.all(
    seedUsers.map((user) =>
      prisma.user.upsert({
        where: { id: user.id },
        update: {
          email: user.email,
          name: user.name,
          role: user.role,
          orgId: organization.id,
        },
        create: {
          id: user.id,
          email: user.email,
          name: user.name,
          role: user.role,
          orgId: organization.id,
        },
      })
    )
  );

  const author = seededUsers.find((user) => user.id === "user-seed-author");
  const approver = seededUsers.find((user) => user.id === "user-seed-approver");

  if (!author || !approver) {
    throw new Error("Failed to seed glossary users");
  }

  const glossarySeeds: GlossarySeed[] = [
    {
      id: "glossary-entry-managed-print-services",
      term: "Managed Print Services",
      definition:
        "End-to-end management of printers, consumables, maintenance, and support delivered as a subscription.",
      synonyms: ["MPS", "Print-as-a-service"],
      status: GlossaryStatus.APPROVED,
      reviewNotes: "Approved for launch collateral and onboarding playbooks.",
      reviewerId: approver.id,
      reviewedAt: new Date("2024-05-01T12:00:00Z"),
    },
    {
      id: "glossary-entry-proactive-maintenance",
      term: "Proactive Maintenance",
      definition:
        "Scheduled device inspections and firmware rollouts designed to prevent outages before they impact revenue teams.",
      synonyms: ["Preventative maintenance"],
      status: GlossaryStatus.PENDING,
    },
    {
      id: "glossary-entry-toner-optimization",
      term: "Toner Optimization",
      definition:
        "Adaptive print routing and toner yield tracking that reduce waste while maintaining SLA-compliant image quality.",
      synonyms: ["Smart toner", "Consumable optimisation"],
      status: GlossaryStatus.REJECTED,
      reviewNotes: "Rejected pending customer-ready evidence and usage data.",
      reviewerId: approver.id,
      reviewedAt: new Date("2024-05-15T09:30:00Z"),
    },
  ];

  await Promise.all(
    glossarySeeds.map((entry) =>
      prisma.glossaryEntry.upsert({
        where: { id: entry.id },
        update: {
          term: entry.term,
          definition: entry.definition,
          synonyms: entry.synonyms,
          status: entry.status,
          orgId: organization.id,
          authorId: author.id,
          reviewerId: entry.reviewerId ?? null,
          reviewNotes: entry.reviewNotes ?? null,
          reviewedAt: entry.reviewedAt ?? null,
        },
        create: {
          id: entry.id,
          term: entry.term,
          definition: entry.definition,
          synonyms: entry.synonyms,
          status: entry.status,
          orgId: organization.id,
          authorId: author.id,
          reviewerId: entry.reviewerId ?? null,
          reviewNotes: entry.reviewNotes ?? null,
          reviewedAt: entry.reviewedAt ?? null,
        },
      })
    )
  );

  const chatSeeds: ChatSeed[] = [
    {
      id: "chat-low-confidence-toner",
      question: "Why are toner replacement alerts firing for the West team despite new cartridges?",
      confidence: 0.38,
      status: "pending_review",
      requestId: "req-seed-001",
      topSources: [
        {
          path: "content/operations/toner-optimization.md#alerts",
          score: 0.82,
          heading: "Alert tuning guidance",
          chunkId: "chunk-toner-alerts",
        },
        {
          path: "content/playbooks/ced-toner-guide.pdf",
          score: 0.74,
          page: 3,
          heading: "Replace cartridges sequence",
          chunkId: "chunk-toner-guide-3",
        },
      ],
      createdAt: new Date("2024-07-08T10:15:00Z"),
      auditLog: [
        {
          action: "captured",
          at: "2024-07-08T10:15:10.000Z",
          confidence: 0.38,
        },
        {
          action: "followup",
          at: "2024-07-08T10:17:00.000Z",
          prompt: "Confirm the affected device serial numbers and share recent firmware updates.",
        },
      ],
      userId: author.id,
      followUpPrompt: "Confirm serial numbers and firmware applied last week.",
    },
    {
      id: "chat-escalated-calibration",
      question: "Color calibration fails with streak artifacts on the ProLine 5100 series. What should we try next?",
      confidence: 0.41,
      status: "escalated",
      requestId: "req-seed-002",
      topSources: [
        {
          path: "content/troubleshooting/calibration-checklist.md#step-4",
          score: 0.68,
          heading: "Step 4 — Inspect rollers",
          chunkId: "chunk-calibration-4",
        },
        {
          path: "content/faq/pressroom-maintenance.md#color",
          score: 0.62,
          heading: "Color drift playbook",
          chunkId: "chunk-maintenance-color",
        },
      ],
      createdAt: new Date("2024-06-18T14:45:00Z"),
      auditLog: [
        {
          action: "escalate",
          at: "2024-06-18T15:00:00.000Z",
          actorId: approver.id,
          actorRole: Role.ADMIN,
          summary: "Calibration streaks observed in pilot deployment.",
        },
      ],
      userId: author.id,
      tickets: [
        {
          id: "ticket-ae-1001",
          key: "AE-1001",
          status: "open",
          assignee: "AEX-ops",
          lastActivity: new Date("2024-06-18T15:00:00Z"),
          summary: "Investigate streak artifacts for ProLine 5100 pilot.",
          auditLog: [
            {
              action: "created",
              at: "2024-06-18T15:00:00.000Z",
              actorId: approver.id,
              actorRole: Role.ADMIN,
            },
          ],
        },
      ],
    },
  ];

  for (const chatSeed of chatSeeds) {
    const chat = await prisma.chat.upsert({
      where: { id: chatSeed.id },
      update: {
        question: chatSeed.question,
        answer: chatSeed.answer ?? null,
        confidence: chatSeed.confidence,
        status: chatSeed.status,
        requestId: chatSeed.requestId ?? null,
        topSources: chatSeed.topSources as Prisma.InputJsonValue,
        auditLog: (chatSeed.auditLog ?? []) as Prisma.InputJsonValue,
        userId: chatSeed.userId ?? author.id,
        reviewedById: chatSeed.reviewedById ?? null,
        reviewedAt: chatSeed.reviewedAt ?? null,
        followUpPrompt: chatSeed.followUpPrompt ?? null,
      },
      create: {
        id: chatSeed.id,
        orgId: organization.id,
        userId: chatSeed.userId ?? author.id,
        question: chatSeed.question,
        answer: chatSeed.answer ?? null,
        confidence: chatSeed.confidence,
        status: chatSeed.status,
        requestId: chatSeed.requestId ?? null,
        topSources: chatSeed.topSources as Prisma.InputJsonValue,
        auditLog: (chatSeed.auditLog ?? []) as Prisma.InputJsonValue,
        createdAt: chatSeed.createdAt,
        reviewedById: chatSeed.reviewedById ?? null,
        reviewedAt: chatSeed.reviewedAt ?? null,
        followUpPrompt: chatSeed.followUpPrompt ?? null,
      },
    });

    await prisma.ragEvent.upsert({
      where: { id: `${chatSeed.id}-captured` },
      update: {
        orgId: organization.id,
        actorId: chatSeed.userId ?? author.id,
        actorRole: Role.USER,
        action: "chat.captured",
        entity: "chat",
        chatId: chat.id,
        requestId: chatSeed.requestId ?? null,
        after: {
          status: chatSeed.status,
          confidence: chatSeed.confidence,
        },
      },
      create: {
        id: `${chatSeed.id}-captured`,
        orgId: organization.id,
        actorId: chatSeed.userId ?? author.id,
        actorRole: Role.USER,
        action: "chat.captured",
        entity: "chat",
        chatId: chat.id,
        requestId: chatSeed.requestId ?? null,
        after: {
          status: chatSeed.status,
          confidence: chatSeed.confidence,
        },
      },
    });

    if (chatSeed.followUpPrompt) {
      await prisma.ragEvent.upsert({
        where: { id: `${chatSeed.id}-followup` },
        update: {
          orgId: organization.id,
          actorId: approver.id,
          actorRole: Role.ADMIN,
          action: "chat.followup_recorded",
          entity: "chat",
          chatId: chat.id,
          requestId: chatSeed.requestId ?? null,
          after: {
            followUpPrompt: chatSeed.followUpPrompt,
          },
        },
        create: {
          id: `${chatSeed.id}-followup`,
          orgId: organization.id,
          actorId: approver.id,
          actorRole: Role.ADMIN,
          action: "chat.followup_recorded",
          entity: "chat",
          chatId: chat.id,
          requestId: chatSeed.requestId ?? null,
          after: {
            followUpPrompt: chatSeed.followUpPrompt,
          },
        },
      });
    }

    if (chatSeed.tickets?.length) {
      for (const ticket of chatSeed.tickets) {
        await prisma.ticket.upsert({
          where: { id: ticket.id },
          update: {
            key: ticket.key,
            status: ticket.status,
            assignee: ticket.assignee ?? null,
            lastActivity: ticket.lastActivity ?? null,
            summary: ticket.summary ?? null,
            auditLog: (ticket.auditLog ?? []) as Prisma.InputJsonValue,
            chatId: chat.id,
            orgId: organization.id,
          },
          create: {
            id: ticket.id,
            key: ticket.key,
            status: ticket.status,
            assignee: ticket.assignee ?? null,
            lastActivity: ticket.lastActivity ?? null,
            summary: ticket.summary ?? null,
            auditLog: (ticket.auditLog ?? []) as Prisma.InputJsonValue,
            chatId: chat.id,
            orgId: organization.id,
          },
        });
      }

      await prisma.ragEvent.upsert({
        where: { id: `${chatSeed.id}-escalated` },
        update: {
          orgId: organization.id,
          actorId: approver.id,
          actorRole: Role.ADMIN,
          action: "chat.escalated",
          entity: "chat",
          chatId: chat.id,
          requestId: chatSeed.requestId ?? null,
          after: {
            status: "escalated",
            ticket: chatSeed.tickets.at(0)?.key ?? null,
          },
        },
        create: {
          id: `${chatSeed.id}-escalated`,
          orgId: organization.id,
          actorId: approver.id,
          actorRole: Role.ADMIN,
          action: "chat.escalated",
          entity: "chat",
          chatId: chat.id,
          requestId: chatSeed.requestId ?? null,
          after: {
            status: "escalated",
            ticket: chatSeed.tickets.at(0)?.key ?? null,
          },
        },
      });
    }
  }
}

main()
  .then(async () => {
    await prisma.$disconnect();
  })
  .catch(async (error) => {
    console.error("Seeding failed", error);
    await prisma.$disconnect();
    process.exit(1);
  });

```

---

### pyproject.toml

```toml
[project]
name = "atticus"
dynamic = ["version"]

description = "Atticus Retrieval-Augmented Generation service"
readme = "README.md"
authors = [{ name = "Atticus Ops", email = "ops@example.com" }]
requires-python = ">=3.12"
dependencies = []

[project.optional-dependencies]
dev = [
  "pip-tools",
  "ruff>=0.5",
  "mypy>=1.10",
  "pytest>=8",
  "pytest-cov>=5",
  "pytest-sugar>=0.9.7",
  "pytest-xdist>=3.5",
  "pydantic>=2.7",
  "types-requests",
  "types-PyYAML",
  "vulture>=2.11",
  # Include psycopg wheels so `pip install -e .[dev]` matches Prisma migrations locally
  "psycopg[binary]>=3.2",
  "pre-commit>=3.7"
]

[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
packages = ["atticus", "api", "ingest", "retriever", "eval"]

[tool.setuptools.dynamic]
version = { file = "VERSION" }

[tool.ruff]
line-length = 100
target-version = "py312"

[tool.ruff.lint]
select = ["E", "F", "I", "B", "UP", "ASYNC", "RUF", "PL"]
ignore = [
  "E501",
  "E402",
  "PLR0912",
  "PLR0913",
  "PLR0915",
  "PLR2004",
  "B023",
  "E731",
  "UP035",
  "RUF012",
  "RUF046",
  "RUF100",
]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["PLR2004", "PLC0415", "PLR0913", "I001"]
"retriever/generator.py" = ["RUF001"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "lf"

[tool.mypy]
python_version = "3.12"
strict = true
packages = ["atticus", "api", "ingest", "retriever", "eval"]
plugins = ["pydantic.mypy"]
ignore_missing_imports = true
warn_unused_configs = true
warn_unused_ignores = true
warn_redundant_casts = true
warn_return_any = true
exclude = "^(scripts|tests|EXAMPLES_ONLY)/"

# Treat optional vendored helpers as 3rd-party to avoid noise
explicit_package_bases = true

[[tool.mypy.overrides]]
module = [
  "atticus.vector_db",
  "api.routes.admin",
  "api.main",
  "eval.runner",
]
ignore_errors = true

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "-ra"
testpaths = ["tests", "eval/harness"]
markers = ["eval: evaluation harness"]
filterwarnings = [
  # Safe to ignore: upstream SWIG/PyMuPDF deprecation noise
  "ignore:.*SwigPyPacked.*:DeprecationWarning",
  "ignore:.*SwigPyObject.*:DeprecationWarning",
  "ignore:.*swigvarlink.*:DeprecationWarning",
]

[tool.coverage.run]
source = ["atticus", "api", "retriever"]
omit = [
  # Temporarily exempted modules pending integration tests
  "api/routes/ask.py",
  "atticus/config.py",
  "atticus/logging.py",
  "atticus/embeddings.py",
  "atticus/vector_db.py",
  "atticus/metrics.py",
  "atticus/tokenization.py",
  "atticus/notify/mailer.py",
  "retriever/generator.py",
  "retriever/vector_store.py",
  "retriever/service.py",
  "api/routes/admin.py",
  "api/routes/eval.py",
  "api/routes/ingest.py",
  "api/routes/health.py",
  "api/dependencies.py",
  "api/middleware.py",
  "api/utils.py",
]

[tool.coverage.report]
fail_under = 90
show_missing = true

```

---

### requirements.in

```text
# Core runtime
fastapi
uvicorn
uvloop; sys_platform != 'win32'
httptools
websockets
watchfiles
pydantic
pydantic-settings
httpx
python-dotenv
# Postgres driver – binary wheels keep setup simple across macOS/Windows until we switch fully to Prisma
psycopg[binary]
pgvector
openai
numpy
scikit-learn
rapidfuzz
tiktoken

# Parsing / ingestion
pymupdf
pdfminer.six
pytesseract
Pillow
python-docx
openpyxl
beautifulsoup4
pandas
camelot-py
tabula-py

# Utilities
tenacity
structlog
pyyaml

# Testing
pytest
pytest-cov
pytest-sugar
pytest-xdist

# Tooling
ruff
mypy
types-PyYAML
pip-tools
vulture

```

---

### requirements.txt

```text
#
# This file is autogenerated by pip-compile with Python 3.12
# by the following command:
#
#    pip-compile requirements.in
#
annotated-types==0.7.0
    # via pydantic
anyio==4.11.0
    # via
    #   httpx
    #   openai
    #   starlette
    #   watchfiles
beautifulsoup4==4.14.2
    # via -r requirements.in
build==1.3.0
    # via pip-tools
camelot-py==1.0.9
    # via -r requirements.in
certifi==2025.10.5
    # via
    #   httpcore
    #   httpx
    #   requests
cffi==2.0.0
    # via cryptography
chardet==5.2.0
    # via camelot-py
charset-normalizer==3.4.3
    # via
    #   pdfminer-six
    #   requests
click==8.3.0
    # via
    #   camelot-py
    #   pip-tools
    #   uvicorn
colorama==0.4.6
    # via
    #   build
    #   click
    #   pytest
    #   tqdm
coverage[toml]==7.10.7
    # via pytest-cov
cryptography==46.0.2
    # via pdfminer-six
distro==1.9.0
    # via
    #   openai
    #   tabula-py
et-xmlfile==2.0.0
    # via openpyxl
execnet==2.1.1
    # via pytest-xdist
fastapi==0.118.0
    # via -r requirements.in
h11==0.16.0
    # via
    #   httpcore
    #   uvicorn
httpcore==1.0.9
    # via httpx
httptools==0.6.4
    # via -r requirements.in
httpx==0.28.1
    # via
    #   -r requirements.in
    #   openai
idna==3.10
    # via
    #   anyio
    #   httpx
    #   requests
iniconfig==2.1.0
    # via pytest
jiter==0.11.0
    # via openai
joblib==1.5.2
    # via scikit-learn
lxml==6.0.2
    # via python-docx
mypy==1.18.2
    # via -r requirements.in
mypy-extensions==1.1.0
    # via mypy
numpy==2.2.6
    # via
    #   -r requirements.in
    #   camelot-py
    #   opencv-python-headless
    #   pandas
    #   pgvector
    #   scikit-learn
    #   scipy
    #   tabula-py
openai==2.2.0
    # via -r requirements.in
opencv-python-headless==4.12.0.88
    # via camelot-py
openpyxl==3.1.5
    # via
    #   -r requirements.in
    #   camelot-py
packaging==25.0
    # via
    #   build
    #   pytesseract
    #   pytest
pandas==2.3.3
    # via
    #   -r requirements.in
    #   camelot-py
    #   tabula-py
pathspec==0.12.1
    # via mypy
pdfminer-six==20250506
    # via
    #   -r requirements.in
    #   camelot-py
pgvector==0.4.1
    # via -r requirements.in
pillow==11.3.0
    # via
    #   -r requirements.in
    #   camelot-py
    #   pytesseract
pip-tools==7.5.1
    # via -r requirements.in
pluggy==1.6.0
    # via
    #   pytest
    #   pytest-cov
psycopg[binary]==3.2.10
    # via -r requirements.in
psycopg-binary==3.2.10
    # via psycopg
pycparser==2.23
    # via cffi
pydantic==2.12.0
    # via
    #   -r requirements.in
    #   fastapi
    #   openai
    #   pydantic-settings
pydantic-core==2.41.1
    # via pydantic
pydantic-settings==2.11.0
    # via -r requirements.in
pygments==2.19.2
    # via pytest
pymupdf==1.26.4
    # via -r requirements.in
pypdf==5.9.0
    # via camelot-py
pypdfium2==4.30.0
    # via camelot-py
pyproject-hooks==1.2.0
    # via
    #   build
    #   pip-tools
pytesseract==0.3.13
    # via -r requirements.in
pytest==8.4.2
    # via
    #   -r requirements.in
    #   pytest-cov
    #   pytest-sugar
    #   pytest-xdist
pytest-cov==7.0.0
    # via -r requirements.in
pytest-sugar==1.1.1
    # via -r requirements.in
pytest-xdist==3.8.0
    # via -r requirements.in
python-dateutil==2.9.0.post0
    # via pandas
python-docx==1.2.0
    # via -r requirements.in
python-dotenv==1.1.1
    # via
    #   -r requirements.in
    #   pydantic-settings
pytz==2025.2
    # via pandas
pyyaml==6.0.3
    # via -r requirements.in
rapidfuzz==3.14.1
    # via -r requirements.in
regex==2025.9.18
    # via tiktoken
requests==2.32.5
    # via tiktoken
ruff==0.14.0
    # via -r requirements.in
scikit-learn==1.7.2
    # via -r requirements.in
scipy==1.16.2
    # via scikit-learn
six==1.17.0
    # via python-dateutil
sniffio==1.3.1
    # via
    #   anyio
    #   openai
soupsieve==2.8
    # via beautifulsoup4
starlette==0.48.0
    # via fastapi
structlog==25.4.0
    # via -r requirements.in
tabula-py==2.10.0
    # via -r requirements.in
tabulate==0.9.0
    # via camelot-py
tenacity==9.1.2
    # via -r requirements.in
termcolor==3.1.0
    # via pytest-sugar
threadpoolctl==3.6.0
    # via scikit-learn
tiktoken==0.12.0
    # via -r requirements.in
tqdm==4.67.1
    # via openai
types-pyyaml==6.0.12.20250915
    # via -r requirements.in
typing-extensions==4.15.0
    # via
    #   anyio
    #   beautifulsoup4
    #   fastapi
    #   mypy
    #   openai
    #   psycopg
    #   pydantic
    #   pydantic-core
    #   python-docx
    #   starlette
    #   typing-inspection
typing-inspection==0.4.2
    # via
    #   pydantic
    #   pydantic-settings
tzdata==2025.2
    # via
    #   pandas
    #   psycopg
urllib3==2.5.0
    # via requests
uvicorn==0.37.0
    # via -r requirements.in
vulture==2.14
    # via -r requirements.in
watchfiles==1.1.0
    # via -r requirements.in
websockets==15.0.1
    # via -r requirements.in
wheel==0.45.1
    # via pip-tools

# The following packages are considered to be unsafe in a requirements file:
# pip
# setuptools

```

---

### retriever/__init__.py

```python
"""Retriever package exports."""

from .models import Answer, Citation
from .service import answer_question
from .vector_store import VectorStore

__all__ = ["Answer", "Citation", "VectorStore", "answer_question"]

```

---

### retriever/answer_format.py

```python
from __future__ import annotations

import re
from pathlib import Path
from typing import Any, Iterable

_TRAILING_MD_ANCHOR = re.compile(r"\s*\(\[[^\]]+\]\(#\d+\)\)\.?\s*$")
_TRAILING_PG_PAREN = re.compile(r"\s*\(\s*p{1,2}\.?\s*[\d\-\u2013, ]+\s*\)\.?\s*$", re.IGNORECASE)
_TRAILING_SOURCEY = re.compile(
    r"\s*\([\w\s\-,&]+p{0,2}\.?\s*[\d\-\u2013, ]+\)\.?\s*$", re.IGNORECASE
)
_INLINE_BULLET = re.compile(r"\s(?P<bullet>-|\u2022|\u2013|\u2014)\s+")
_NUMBERED_ITEM_RE = re.compile(r"(?m)^\s*\d+\.\s+")
# Find " 2. " / " 3. " even mid-paragraph (avoid years by requiring a period + space)
# We will insert TWO newlines so Markdown renderers reliably break paragraphs.
# Insert a single newline before mid-paragraph numbers (ReactMarkdown handles lists fine)
_MIDPARA_NUMBERED = re.compile(r"(?<!^)\s+(\d+)\.\s+")
_SOURCES_SECTION = re.compile(r"(?is)\n+[-*_]{3,}\s*\n*[*_]*sources?[*_]*\s*\n.*\Z")
_SOURCES_LABEL = re.compile(r"(?im)^\s*sources?\s*:?\s*$")
_INLINE_SOURCES_TOKEN = re.compile(r"(?i)\*{0,2}sources\*{0,2}\s*:?\s*")
_INTRO_RE = re.compile(r"^(?P<intro>[^:\n]+:)\s*(?P<body>.+)$", re.DOTALL)


def _strip_inline_citation_tails(text: str) -> str:
    overall = _TRAILING_MD_ANCHOR.sub("", text)
    overall = _TRAILING_PG_PAREN.sub("", overall)
    overall = _TRAILING_SOURCEY.sub("", overall)

    cleaned_lines: list[str] = []
    for raw_line in overall.splitlines():
        tmp = _TRAILING_MD_ANCHOR.sub("", raw_line)
        tmp = _TRAILING_PG_PAREN.sub("", tmp)
        tmp = _TRAILING_SOURCEY.sub("", tmp)
        cleaned_lines.append(tmp.rstrip())
    return "\n".join(cleaned_lines).strip()


def _strip_existing_sources_section(text: str) -> str:
    trimmed = _SOURCES_SECTION.sub("", text)
    trimmed = _INLINE_SOURCES_TOKEN.sub("\n\n", trimmed)
    lines = [ln for ln in trimmed.splitlines() if not _SOURCES_LABEL.match(ln)]
    return "\n".join(lines).rstrip()


def _normalize_bullets(body: str) -> str:
    normalized: list[str] = []
    for line in body.splitlines():
        bullet_match = re.match(r"^\s*(?:-|\u2022|\u2013|\u2014)\s+", line)
        if bullet_match:
            bullet = bullet_match.group(0)
            text = re.sub(r"\s+", " ", line[len(bullet) :]).strip()
            normalized.append(f"{bullet}{text}")
        else:
            normalized.append(line.rstrip())
    return "\n".join(normalized).strip()


def _to_numbered_list(text: str) -> str:
    body = text.strip()

    if re.search(r"(?m)^\s*(?:-|\u2022|\u2013|\u2014)\s+", body):
        return _normalize_bullets(body)

    if _INLINE_BULLET.search(body):

        def _replace(match: re.Match[str]) -> str:
            return f"\n{match.group('bullet')} "

        return _normalize_bullets(_INLINE_BULLET.sub(_replace, body))

    body = _MIDPARA_NUMBERED.sub(r"\n\1. ", body)

    starts = [m.start() for m in _NUMBERED_ITEM_RE.finditer(body)]
    if not starts:
        body = re.sub(r"\s+(?=[2-9]\.\s)", "\n", body)
        return body
    starts.append(len(body))

    items: list[str] = []
    for idx in range(len(starts) - 1):
        segment = body[starts[idx] : starts[idx + 1]].strip()
        segment = re.sub(r"\s+", " ", segment)
        items.append(segment)
    return "\n\n".join(items)


def _fmt_source_line(item: Any) -> str:
    source_path = getattr(item, "source_path", None)
    if source_path is None and isinstance(item, dict):
        source_path = item.get("source_path", "")
    source_path = str(source_path or "")

    page_data = (
        getattr(item, "page_range", None)
        or getattr(item, "pages", None)
        or (item.get("page_range") if isinstance(item, dict) else None)
        or (item.get("pages") if isinstance(item, dict) else None)
    )

    basename = Path(source_path).name
    suffix = ""
    if isinstance(page_data, (list, tuple, set)) and page_data:
        ints = sorted({int(str(p)) for p in page_data if str(p).isdigit()})
        if ints:
            suffix = f" (p. {', '.join(str(p) for p in ints)})"

    return f"{basename}{suffix} — {source_path}"


def format_answer_markdown(answer_text: str, citations: Iterable[Any]) -> str:  # noqa: ARG001
    sans_sources = _strip_existing_sources_section(answer_text)
    cleaned = _strip_inline_citation_tails(sans_sources)

    intro: str | None = None
    match = _INTRO_RE.match(cleaned.strip())
    if match:
        intro = match.group("intro").strip()
        body_text = match.group("body").strip()
    else:
        body_text = cleaned.strip()

    body = _to_numbered_list(body_text)

    if intro:
        return f"{intro}\n\n{body}"
    return body

```

---

### retriever/citation_utils.py

```python
from __future__ import annotations

from pathlib import Path
from typing import Any, Iterable


def _getattr_or_key(obj: Any, name: str, default: Any = None) -> Any:
    """Support both attr and dict access (Citation object vs dict)."""
    if hasattr(obj, name):
        return getattr(obj, name)
    if isinstance(obj, dict):
        return obj.get(name, default)
    return default


def _norm_source_path(value: str | None) -> str:
    if not value:
        return ""
    try:
        path = Path(value)
        return path.stem.lower()
    except Exception:
        return str(value).strip().lower()


def _norm_pages(pages: Any) -> tuple[int, ...]:
    if pages is None:
        return ()
    try:
        if isinstance(pages, (list, tuple, set)):
            return tuple(sorted(int(x) for x in pages))
        if isinstance(pages, int):
            return (pages,)
        if isinstance(pages, str):
            normalized: list[int] = []
            for token in pages.replace(",", " ").split():
                if token.isdigit():
                    normalized.append(int(token))
            return tuple(sorted(normalized))
    except Exception:
        return ()
    return ()


def dedupe_citations(items: Iterable[Any] | None) -> list[Any]:
    """Return citations with unique (normalized path, normalized page range)."""
    seen: set[tuple[str, tuple[int, ...]]] = set()
    result: list[Any] = []
    if not items:
        return result
    for item in items:
        source_path = _getattr_or_key(item, "source_path")
        page_range = _getattr_or_key(item, "page_range", _getattr_or_key(item, "pages"))
        key = (_norm_source_path(source_path), _norm_pages(page_range))
        if key in seen:
            continue
        seen.add(key)
        result.append(item)
    return result

```

---

### retriever/generator.py

```python
"""LLM generation helpers."""

from __future__ import annotations

import hashlib
import importlib
import logging
import os
import re
from collections.abc import Iterable
from typing import Any, cast

from rapidfuzz import fuzz

from atticus.config import AppSettings

UNCERTAINTY_PATTERNS: tuple[str, ...] = (
    r"\b(?:i|we)\s+(?:am|are)\s+(?:not\s+sure|unsure)\b",
    r"\b(?:i|we)\s+(?:cannot|can't|am\s+unable\s+to)\s+(?:answer|determine|confirm)\b",
    r"\b(?:i|we)\s+(?:do\s+not|don't)\s+know\b",
    r"\b(?:i|we)\s+(?:do\s+not|don't)\s+have\s+enough\s+(?:info|information|context)\b",
    r"\b(?:cannot|can't|unable\s+to)\s+(?:answer|determine|confirm)\b",
    r"\binsufficient\s+(?:information|context)\b",
)


class GeneratorClient:
    """Wrapper around OpenAI responses with offline fallback."""

    def __init__(self, settings: AppSettings, logger: logging.Logger | None = None) -> None:
        self.settings = settings
        self.logger = logger or logging.getLogger("atticus")
        # Resolve API key and record source for diagnostics
        source = "none"
        api_key = None
        if getattr(settings, "openai_api_key", None):
            api_key = settings.openai_api_key
            source = "settings"
        elif os.getenv("OPENAI_API_KEY"):
            api_key = os.getenv("OPENAI_API_KEY")
            source = "os.environ"
        self._client: Any | None = None
        if api_key:  # pragma: no cover - requires network
            try:
                openai_module = importlib.import_module("openai")
                openai_class = cast(Any, openai_module).OpenAI
                # Pass the key explicitly so we don't rely on process env
                self._client = openai_class(api_key=api_key)
                # Safe fingerprint (sha256 prefix) for troubleshooting without leaking secrets
                try:
                    fp = hashlib.sha256(str(api_key).encode("utf-8")).hexdigest()[:12]
                except Exception:
                    fp = "unknown"
                self.logger.info(
                    "openai_client_initialized",
                    extra={
                        "extra_payload": {
                            "client": "generator",
                            "source": source,
                            "key_fp": fp,
                            "model": self.settings.generation_model,
                        }
                    },
                )
            except Exception as exc:  # pragma: no cover - network path
                self.logger.warning(
                    "OpenAI client unavailable; using offline summarizer",
                    extra={"extra_payload": {"error": str(exc)}},
                )
        else:
            self.logger.info("No OpenAI API key detected; using offline summarizer")

    def generate(  # noqa: PLR0912, PLR0915
        self,
        prompt: str,
        contexts: Iterable[str],
        citations: Iterable[str] | None = None,
        temperature: float = 0.2,
    ) -> str:
        context_text = "\n\n".join(contexts)
        if not context_text:
            return "I was unable to find supporting context for this question."

        if self._client is not None:  # pragma: no cover - requires network
            try:
                system_prompt = "You are Atticus, a factual assistant. Respond with concise paragraphs and cite the provided context snippets."
                user_prompt = f"Context:\n{context_text}\n\nPrompt:\n{prompt}"
                response: Any = self._client.responses.create(
                    model=self.settings.generation_model,
                    input=[
                        {"role": "system", "content": system_prompt},
                        {"role": "user", "content": user_prompt},
                    ],
                    temperature=temperature,
                )
                if getattr(response, "output", None):
                    first_output = response.output[0]
                    content = getattr(first_output, "content", None)
                    if content and getattr(content[0], "text", None):
                        return str(content[0].text).strip()
            except Exception as exc:
                self.logger.error(
                    "OpenAI generation failed; using offline summarizer",
                    extra={"extra_payload": {"error": str(exc)}},
                )

        # Offline: try Q/A matching first, then specialized heuristics, then summary
        lowered_prompt = prompt.lower()
        # Q/A pairs like: "Q: ..." followed later by "A: ..."
        try:
            QA_MATCH_THRESHOLD = 0.6
            for block in contexts:
                lines = block.splitlines()
                content_lines = lines[1:] if lines and ":" in lines[0] else lines
                for i, line in enumerate(content_lines):
                    if line.strip().lower().startswith("q:"):
                        q_text = line.split(":", 1)[1].strip()
                        score = fuzz.partial_ratio(lowered_prompt, q_text.lower()) / 100.0
                        if score >= QA_MATCH_THRESHOLD:
                            for j in range(i + 1, min(i + 5, len(content_lines))):
                                nxt = content_lines[j].strip()
                                if nxt.lower().startswith("a:"):
                                    return nxt.split(":", 1)[1].strip()
        except Exception:
            pass

        # Lightweight heuristic for common spec-style questions when offline
        lowered_prompt = prompt.lower()
        if any(key in lowered_prompt for key in ["resolution", "dpi", "print resolution"]):
            phrases: list[str] = []
            for block in contexts:
                # Search each line for DPI patterns (e.g., 1200 x 1200 dpi, 600 dpi)
                for line in block.splitlines():
                    m_iter = re.finditer(
                        r"\b(?:up to\s*)?(?:\d{2,4}\s*[x×]\s*\d{2,4}|\d{2,4})\s*dpi\b(?:\s*[A-Za-z/ ]*)?",
                        line,
                        flags=re.IGNORECASE,
                    )
                    for m in m_iter:
                        phrase = re.sub(r"\s+", " ", m.group(0)).strip()
                        if phrase.lower() not in {p.lower() for p in phrases}:
                            phrases.append(phrase)
            if phrases:
                header = "Print resolution"
                # Prefer the richest phrase (contains x)
                phrases.sort(key=lambda p: ("x" not in p.lower(), len(p)))
                body = "; ".join(phrases[:3])
                lines = [f"{header}: {body}"]
                cite_list = list(citations or [])
                if cite_list:
                    lines.append("")
                    lines.append("Citations:")
                    for idx, citation in enumerate(cite_list[:10], start=1):
                        lines.append(f"[{idx}] {citation}")
                return "\n".join(lines)

        summary_lines = ["I found the following grounded details:"]
        for idx, snippet in enumerate(contexts, start=1):
            headline = snippet.splitlines()[0][:200]
            summary_lines.append(f"- [{idx}] {headline}")
        citation_list = list(citations or [])
        if citation_list:
            summary_lines.append("")
            summary_lines.append("Citations:")
            for idx, citation in enumerate(citation_list, start=1):
                summary_lines.append(f"[{idx}] {citation}")
        return "\n".join(summary_lines)

    def heuristic_confidence(self, answer: str) -> float:
        lowered = answer.lower()
        # If we produced a clear spec with DPI, boost confidence slightly
        if "dpi" in lowered:
            if re.search(r"\b\d{2,4}\s*(?:[x×]\s*\d{2,4}\s*)?dpi\b", lowered):
                return 0.9
        if any(re.search(pattern, lowered) for pattern in UNCERTAINTY_PATTERNS):
            return 0.3
        if "confidence" in lowered and "%" in lowered:
            try:
                percent_tokens = (
                    int(token.strip("%"))
                    for token in lowered.split()
                    if token.strip("% ").isdigit()
                )
                percent = next(percent_tokens)
                return max(0.0, min(1.0, percent / 100.0))
            except Exception:
                return 0.6
        return 0.8

```

---

### retriever/models.py

```python
"""Data models for retrieval results."""

from __future__ import annotations

from dataclasses import dataclass


@dataclass(slots=True)
class Citation:
    chunk_id: str
    source_path: str
    page_number: int | None
    heading: str | None
    score: float


@dataclass(slots=True)
class Answer:
    question: str
    response: str
    citations: list[Citation]
    confidence: float
    should_escalate: bool

```

---

### retriever/service.py

```python
"""High-level question answering orchestration."""

from __future__ import annotations

import logging

from atticus.config import AppSettings, load_settings
from atticus.logging import configure_logging, log_event

from .answer_format import format_answer_markdown
from .citation_utils import dedupe_citations
from .generator import GeneratorClient
from .models import Answer, Citation
from .vector_store import SearchResult, VectorStore


def _format_contexts(results: list[SearchResult], limit: int) -> tuple[list[str], list[Citation]]:
    contexts: list[str] = []
    citations: list[Citation] = []
    seen: set[tuple[str, int | None]] = set()

    for result in results:
        page_value = result.page_number
        if isinstance(page_value, str):
            try:
                page_key = int(page_value)
            except ValueError:
                page_key = page_value.strip()
        else:
            page_key = page_value

        key = (result.source_path, page_key)
        if key in seen:
            continue

        seen.add(key)
        descriptor = result.source_path
        if page_value:
            descriptor += f" (page {page_value})"
        contexts.append(result.text)
        citations.append(
            Citation(
                chunk_id=result.chunk_id,
                source_path=result.source_path,
                page_number=page_key if isinstance(page_key, int) else result.page_number,
                heading=result.heading,
                score=round(result.score, 4),
            )
        )

        if len(contexts) >= limit:
            break

    return contexts, citations


LLM_CONF_SWITCH = 0.80


def answer_question(
    question: str,
    settings: AppSettings | None = None,
    filters: dict[str, str] | None = None,
    logger: logging.Logger | None = None,
    *,
    top_k: int | None = None,
    context_hints: list[str] | None = None,
) -> Answer:
    settings = settings or load_settings()
    logger = logger or configure_logging(settings)
    store = VectorStore(settings, logger)
    window = top_k or settings.top_k
    results = store.search(question, top_k=window, filters=filters, hybrid=True)

    if not results:
        response = "I don't have enough information in the current index to answer this."
        confidence = 0.2
        should_escalate = True
        answer = Answer(
            question=question,
            response=response,
            citations=[],
            confidence=confidence,
            should_escalate=should_escalate,
        )
        log_event(
            logger, "answer_generated", confidence=confidence, citations=0, escalate=should_escalate
        )
        return answer

    contexts, citations = _format_contexts(results, settings.max_context_chunks)
    if context_hints:
        contexts.extend(context_hints)
    generator = GeneratorClient(settings, logger)
    citation_texts = []
    for item in citations:
        descriptor = item.source_path
        if item.page_number is not None:
            descriptor += f" (page {item.page_number})"
        if item.heading:
            descriptor += f" — {item.heading}"
        citation_texts.append(descriptor)

    response = generator.generate(question, contexts, citation_texts)

    # Emphasize the head of the ranking when computing retrieval confidence
    head = min(5, settings.max_context_chunks)
    top_scores = [max(0.0, min(1.0, result.score)) for result in results[:head]]
    retrieval_conf = sum(top_scores) / len(top_scores) if top_scores else 0.0
    llm_conf = generator.heuristic_confidence(response)
    w_r, w_l = 0.6, 0.4
    if llm_conf >= LLM_CONF_SWITCH:
        w_r, w_l = 0.2, 0.8
    confidence = round(w_r * retrieval_conf + w_l * llm_conf, 2)
    should_escalate = confidence < settings.confidence_threshold

    citations = dedupe_citations(citations)
    formatted_response = format_answer_markdown(response, citations)
    answer = Answer(
        question=question,
        response=formatted_response,
        citations=citations,
        confidence=confidence,
        should_escalate=should_escalate,
    )

    log_event(
        logger,
        "answer_generated",
        confidence=confidence,
        citations=len(citations),
        escalate=should_escalate,
    )
    return answer

```

---

### retriever/vector_store.py

```python
"""Vector retrieval utilities for Atticus."""

from __future__ import annotations

import logging
import math
import re
from dataclasses import dataclass
from typing import Any

from rapidfuzz import fuzz

from atticus.config import AppSettings, Manifest, load_manifest
from atticus.embeddings import EmbeddingClient
from atticus.logging import log_event
from atticus.vector_db import PgVectorRepository, StoredChunk


@dataclass(slots=True)
class SearchResult:
    chunk_id: str
    source_path: str
    text: str
    score: float
    page_number: int | None
    heading: str | None
    metadata: dict[str, str]
    chunk_index: int
    vector_score: float
    lexical_score: float
    fuzz_score: float


class VectorStore:
    """pgvector-backed vector search with optional hybrid re-ranking."""

    def __init__(self, settings: AppSettings, logger: logging.Logger) -> None:
        self.settings = settings
        self.logger = logger

        if not settings.database_url:
            raise ValueError("DATABASE_URL must be configured before querying the vector store")

        self.repository = PgVectorRepository(settings)
        self.repository.ensure_schema()
        manifest = load_manifest(settings.manifest_path)
        if manifest is None:
            raise FileNotFoundError("Vector manifest not found. Run ingestion first.")
        self.manifest: Manifest = manifest

        self.chunks: list[StoredChunk] = self.repository.load_all_chunk_metadata()
        self.chunk_index_map: dict[str, int] = {
            chunk.chunk_id: idx for idx, chunk in enumerate(self.chunks)
        }
        self.chunk_lookup: dict[str, StoredChunk] = {chunk.chunk_id: chunk for chunk in self.chunks}
        self.embedding_client = EmbeddingClient(settings, logger=logger)

        self._lex_tokens: list[list[str]] = []
        self._lex_df: dict[str, int] = {}
        self._lex_len: list[int] = []
        self._lex_avgdl: float = 0.0
        self._lex_ready: bool = False
        self._build_lexical_index()

    def _apply_filters(self, chunk: StoredChunk, filters: dict[str, str] | None) -> bool:
        if not filters:
            return True
        manifest_entry: dict[str, Any] = self.manifest.documents.get(chunk.source_path, {})
        source_type = manifest_entry.get("source_type")
        if filters.get("source_type") and filters["source_type"] != source_type:
            return False
        prefix = filters.get("path_prefix")
        if prefix and not chunk.source_path.startswith(prefix):
            return False
        return True

    def _tokenize(self, text: str) -> list[str]:
        text = text.lower()
        tokens = re.split(r"[^a-z0-9]+", text)
        return [t for t in tokens if t and (len(t) > 1 or t.isdigit())]

    def _build_lexical_index(self) -> None:
        tokens_per_doc: list[list[str]] = []
        df: dict[str, int] = {}
        lengths: list[int] = []
        for chunk in self.chunks:
            toks = self._tokenize(chunk.text)
            tokens_per_doc.append(toks)
            lengths.append(len(toks))
            for tok in set(toks):
                df[tok] = df.get(tok, 0) + 1
        self._lex_tokens = tokens_per_doc
        self._lex_df = df
        self._lex_len = lengths
        self._lex_avgdl = (sum(lengths) / len(lengths)) if lengths else 0.0
        self._lex_ready = True

    def _bm25_scores(self, query: str) -> list[float]:
        if not self._lex_ready or not self._lex_tokens:
            return [0.0] * len(self.chunks)
        q_tokens = self._tokenize(query)
        if not q_tokens:
            return [0.0] * len(self.chunks)
        k1 = 1.5
        b = 0.75
        N = len(self._lex_tokens)
        scores = [0.0] * N
        for i, doc_tokens in enumerate(self._lex_tokens):
            if not doc_tokens:
                continue
            dl = self._lex_len[i]
            tf_counts: dict[str, int] = {}
            for t in doc_tokens:
                tf_counts[t] = tf_counts.get(t, 0) + 1
            s = 0.0
            for qt in q_tokens:
                df = self._lex_df.get(qt, 0)
                if df == 0:
                    continue
                idf = math.log((N - df + 0.5) / (df + 0.5) + 1.0)
                tf = tf_counts.get(qt, 0)
                if tf == 0:
                    continue
                denom = tf + k1 * (1 - b + b * (dl / (self._lex_avgdl or 1.0)))
                s += idf * (tf * (k1 + 1)) / denom
            scores[i] = s
        return scores

    def _rerank_results(self, results: list[SearchResult]) -> list[SearchResult]:
        if not results:
            return results
        vector_weight = 0.55
        lexical_weight = 0.25
        fuzz_weight = 0.20
        reranked = sorted(
            results,
            key=lambda item: (
                vector_weight * item.vector_score
                + lexical_weight * item.lexical_score
                + fuzz_weight * item.fuzz_score
            ),
            reverse=True,
        )
        for item in reranked:
            item.score = (
                vector_weight * item.vector_score
                + lexical_weight * item.lexical_score
                + fuzz_weight * item.fuzz_score
            )
        return reranked

    def search(
        self,
        query: str,
        top_k: int = 10,
        filters: dict[str, str] | None = None,
        hybrid: bool = True,
    ) -> list[SearchResult]:
        if not self.chunks:
            return []

        query_embedding = self.embedding_client.embed_texts([query])
        if not query_embedding:
            return []
        embedding_vector = list(query_embedding[0])

        candidate_limit = max(top_k * 4, top_k)
        vector_rows = self.repository.query_similar_chunks(
            embedding_vector,
            limit=candidate_limit,
            probes=self.settings.pgvector_probes,
        )

        bm25_all = self._bm25_scores(query)
        candidates: dict[str, dict[str, Any]] = {row["chunk_id"]: row for row in vector_rows}

        top_lexical = sorted(range(len(bm25_all)), key=lambda i: bm25_all[i], reverse=True)[
            : max(top_k * 3, 30)
        ]
        for idx in top_lexical:
            chunk_id = self.chunks[idx].chunk_id
            candidates.setdefault(chunk_id, {"chunk_id": chunk_id})

        if not candidates:
            return []

        candidate_indices = [
            self.chunk_index_map[c_id] for c_id in candidates if c_id in self.chunk_index_map
        ]
        bm25_min = min((bm25_all[i] for i in candidate_indices), default=0.0)
        bm25_max = max((bm25_all[i] for i in candidate_indices), default=0.0)

        def bm25_norm(idx: int) -> float:
            if bm25_max <= bm25_min:
                return 0.0
            return (bm25_all[idx] - bm25_min) / (bm25_max - bm25_min)

        # Weighting mirrors historical hybrid blend when reranker disabled
        alpha = 0.7 if self.embedding_client._client is not None else 0.35

        results: list[SearchResult] = []
        for chunk_id, row in candidates.items():
            chunk = self.chunk_lookup.get(chunk_id)
            if chunk is None:
                continue
            if not self._apply_filters(chunk, filters):
                continue
            manifest_entry = self.manifest.documents.get(chunk.source_path, {})
            metadata: dict[str, str] = {"source_type": str(manifest_entry.get("source_type", ""))}
            metadata.update(chunk.extra)
            if "metadata" in row:
                metadata.update(row["metadata"])

            idx = self.chunk_index_map.get(chunk_id, 0)
            lexical_score = bm25_norm(idx)
            fuzz_score = fuzz.partial_ratio(query, chunk.text) / 100.0

            distance = row.get("distance")
            if distance is None:
                vector_score = 0.0
            else:
                vector_score = max(0.0, 1.0 - float(distance))

            base_score = alpha * vector_score + (1 - alpha) * lexical_score
            if hybrid and not self.settings.enable_reranker:
                combined_score = 0.8 * base_score + 0.2 * fuzz_score
            else:
                combined_score = base_score

            results.append(
                SearchResult(
                    chunk_id=chunk.chunk_id,
                    source_path=chunk.source_path,
                    text=chunk.text,
                    score=combined_score,
                    page_number=chunk.page_number,
                    heading=chunk.section,
                    metadata=metadata,
                    chunk_index=idx,
                    vector_score=vector_score,
                    lexical_score=lexical_score,
                    fuzz_score=fuzz_score,
                )
            )

        if not results:
            return []

        if self.settings.enable_reranker:
            results = self._rerank_results(results)
        elif hybrid:
            results.sort(key=lambda result: result.score, reverse=True)
        else:
            results.sort(key=lambda result: result.vector_score, reverse=True)

        results = results[:top_k]

        log_event(
            self.logger,
            "retrieval_query",
            query=query,
            top_k=top_k,
            results=len(results),
            filters=filters or {},
        )
        return results

```

---

### scripts/atticus_cli.py

```python
#!/usr/bin/env python3
"""Unified CLI dispatcher for Atticus utilities."""

from __future__ import annotations

import argparse
import subprocess
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.logging_utils import get_logger

log = get_logger("atticus_cli")

COMMANDS = {
    "ingest": [sys.executable, str(ROOT / "scripts" / "ingest_cli.py")],
    "eval": [sys.executable, str(ROOT / "scripts" / "eval_run.py")],
    "qa": [sys.executable, str(ROOT / "scripts" / "eval_qa.py")],
    "chunk-ced": [sys.executable, str(ROOT / "scripts" / "chunk_ced.py")],
    "db-verify": [sys.executable, str(ROOT / "scripts" / "db_verify.py")],
    "openapi": [sys.executable, str(ROOT / "scripts" / "generate_api_docs.py")],
    "audit-unused": [sys.executable, str(ROOT / "scripts" / "audit_unused.py")],
    "env": [sys.executable, str(ROOT / "scripts" / "generate_env.py")],
    "e2e-smoke": [sys.executable, str(ROOT / "scripts" / "e2e_smoke.py")],
    "debug-env": [sys.executable, str(ROOT / "scripts" / "debug_env.py")],
}


def main(argv: list[str] | None = None) -> int:
    argv = list(sys.argv[1:] if argv is None else argv)

    parser = argparse.ArgumentParser(prog="atticus", description="Atticus unified CLI")
    parser.add_argument(
        "command", nargs="?", choices=sorted(COMMANDS.keys()), help="subcommand to run"
    )
    parser.add_argument(
        "args", nargs=argparse.REMAINDER, help="arguments passed to subcommand (prefix with --)"
    )
    if not argv:
        parser.print_help()
        return 0

    ns = parser.parse_args(argv)
    if ns.command is None:
        parser.print_help()
        return 0

    cmd = COMMANDS[ns.command] + ns.args
    log.info("dispatch", command=ns.command, args=ns.args)
    try:
        return subprocess.call(cmd)
    except KeyboardInterrupt:
        log.warning("interrupt")
        return 130


if __name__ == "__main__":
    raise SystemExit(main())

```

---

### scripts/audit_unused.py

```python
#!/usr/bin/env python3
"""Audit script for unused Python modules and dead code.

Runs vulture (if installed) against default project paths and prints a JSON
summary. The script degrades gracefully when optional tools are missing.
"""

from __future__ import annotations

import argparse
import json
import shutil
import subprocess
import sys
from pathlib import Path

DEFAULT_PATHS: list[str] = [
    "atticus",
    "api",
    "ingest",
    "retriever",
    "eval",
    "scripts",
    "tests",
]


def run_vulture(paths: list[str], min_confidence: int) -> dict[str, object]:
    executable = shutil.which("vulture")
    if executable is None:
        return {
            "tool": "vulture",
            "error": "vulture not installed. Install with `pip install vulture` or add to dev dependencies.",
        }

    cmd: list[str] = [executable, *paths, "--min-confidence", str(min_confidence), "--sort-by-size"]
    result = subprocess.run(cmd, capture_output=True, text=True, check=False)
    return {
        "tool": "vulture",
        "returncode": result.returncode,
        "stdout": result.stdout.strip(),
        "stderr": result.stderr.strip(),
    }


def main(argv: list[str]) -> int:
    parser = argparse.ArgumentParser(description="Audit unused Python code via vulture")
    parser.add_argument("paths", nargs="*", default=DEFAULT_PATHS, help="Paths to inspect")
    parser.add_argument(
        "--min-confidence", type=int, default=80, help="Minimum confidence threshold for vulture"
    )
    parser.add_argument("--json", action="store_true", help="Emit machine-readable JSON output")
    args = parser.parse_args(argv)

    resolved_paths: list[str] = []
    for path in args.paths:
        candidate = Path(path)
        if candidate.exists():
            resolved_paths.append(str(candidate))
    if not resolved_paths:
        resolved_paths = DEFAULT_PATHS

    report = {"vulture": run_vulture(resolved_paths, args.min_confidence)}

    if args.json:
        json.dump(report, sys.stdout, indent=2)
        sys.stdout.write("\n")
    else:
        sys.stdout.write(json.dumps(report, indent=2))
        sys.stdout.write("\n")

    return 0


if __name__ == "__main__":
    raise SystemExit(main(sys.argv[1:]))

```

---

### scripts/check_version_parity.py

```python
"""Ensure repository version metadata stays in sync across toolchains."""

from __future__ import annotations

import json
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]


def read_version_file() -> str:
    version_path = ROOT / "VERSION"
    try:
        version = version_path.read_text(encoding="utf-8").strip()
    except OSError as exc:
        raise SystemExit(f"Failed to read VERSION: {exc}") from exc
    if not version:
        raise SystemExit("VERSION file is empty.")
    return version


def read_package_version() -> str:
    package_path = ROOT / "package.json"
    try:
        package_data = json.loads(package_path.read_text(encoding="utf-8"))
    except (OSError, json.JSONDecodeError) as exc:
        raise SystemExit(f"Failed to parse package.json: {exc}") from exc
    version = package_data.get("version")
    if not isinstance(version, str) or not version:
        raise SystemExit("package.json is missing a version field")
    return version


def read_package_lock_version() -> str:
    lock_path = ROOT / "package-lock.json"
    try:
        lock_data = json.loads(lock_path.read_text(encoding="utf-8"))
    except (OSError, json.JSONDecodeError) as exc:
        raise SystemExit(f"Failed to parse package-lock.json: {exc}") from exc
    version = lock_data.get("version")
    if not isinstance(version, str) or not version:
        raise SystemExit("package-lock.json is missing a top-level version")
    return version


def main() -> int:
    repo_version = read_version_file()
    package_version = read_package_version()
    lock_version = read_package_lock_version()

    mismatches: list[str] = []
    if package_version != repo_version:
        mismatches.append(
            f"package.json version {package_version} does not match VERSION {repo_version}"
        )
    if lock_version != repo_version:
        mismatches.append(
            f"package-lock.json version {lock_version} does not match VERSION {repo_version}"
        )

    if mismatches:
        for mismatch in mismatches:
            print(f"❌ {mismatch}")
        return 1

    print(f"✅ Version parity check passed: {repo_version}")
    return 0


if __name__ == "__main__":
    sys.exit(main())

```

---

### scripts/chunk_ced.py

```python
#!/usr/bin/env python3
"""Chunk CED PDF documents into JSONL artifacts."""

from __future__ import annotations

import argparse
import json
import os
import re
import sys
from collections import Counter
from collections.abc import Iterable
from dataclasses import dataclass
from datetime import datetime
from pathlib import Path
from statistics import median

import fitz  # type: ignore[import-untyped]

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.config import load_settings  # noqa: E402
from atticus.logging_utils import get_logger  # noqa: E402
from atticus.tokenization import decode, encode, split_tokens  # noqa: E402
from atticus.utils import sha256_file, sha256_text  # noqa: E402

log = get_logger("chunk_ced")

try:  # pragma: no cover - optional dependency
    import camelot  # type: ignore[import-untyped]
except Exception:  # pragma: no cover
    camelot = None

try:  # pragma: no cover - optional dependency
    import tabula  # type: ignore[import-untyped]
except Exception:  # pragma: no cover
    tabula = None

STOPWORDS = {
    "the",
    "and",
    "for",
    "with",
    "that",
    "from",
    "this",
    "will",
    "your",
    "have",
    "into",
    "when",
    "where",
    "such",
    "each",
    "over",
    "there",
    "should",
    "their",
    "which",
    "these",
    "between",
}

HEADING_WORD_LIMIT = 12
TABLE_EMPTY_RATIO = 0.2
GARBLE_THRESHOLD = 0.05
FONT_SIZE_PADDING = 2.0


def parse_args() -> argparse.Namespace:
    parser = argparse.ArgumentParser(description="Chunk a CED PDF into JSONL outputs")
    parser.add_argument("--input", type=Path, required=True, help="Path to the source PDF")
    parser.add_argument("--output", type=Path, required=True, help="JSONL file for text chunks")
    parser.add_argument("--tables", type=Path, required=True, help="JSONL file for table chunks")
    parser.add_argument(
        "--doc-index",
        type=Path,
        required=True,
        help="Path to write document-level index metadata",
    )
    parser.add_argument("--target-tokens", type=int)
    parser.add_argument("--min-tokens", type=int)
    parser.add_argument("--overlap", type=int)
    parser.add_argument("--config", type=Path, help="Alternate config.yaml path")
    return parser.parse_args()


@dataclass(slots=True)
class Section:
    heading: str | None
    text: str
    pages: set[int]
    breadcrumbs: list[str]


@dataclass(slots=True)
class Chunk:
    text: str
    pages: set[int]
    headings: set[str]
    breadcrumbs: list[str]
    token_count: int
    is_table: bool = False
    table_headers: list[str] | None = None


def _sanitize(text: str) -> str:
    return re.sub(r"\s+", " ", text).strip()


def _extract_models(source: Path) -> list[str]:
    stem = source.stem
    match = re.search(r"CED[-_]?(\d+)", stem, flags=re.IGNORECASE)
    prefix = stem
    if match:
        prefix = stem[: match.start()].rstrip("-_ ")
    if "_" in prefix:
        prefix = prefix.split("_", 1)[1]
    models_part = re.split(r"-CED[-_]?\d+", prefix, flags=re.IGNORECASE)[0]
    raw_models = [item for item in re.split(r"[-_]", models_part) if item]
    return raw_models


def _ced_id(source: Path) -> tuple[str, str]:
    match = re.search(r"CED[-_]?(\d+)", source.stem, flags=re.IGNORECASE)
    if not match:
        return ("ced-unknown", "0")
    value = match.group(1)
    return (f"ced-{value}", value)


def _compute_font_baseline(document: fitz.Document) -> float:
    sizes: list[float] = []
    for page in document:
        content = page.get_text("dict")
        for block in content.get("blocks", []):
            for line in block.get("lines", []):
                for span in line.get("spans", []):
                    size = span.get("size")
                    if size:
                        sizes.append(float(size))
    if not sizes:
        return 11.0
    return median(sizes)


def extract_sections(document: fitz.Document, heading_threshold: float) -> list[Section]:
    sections: list[Section] = []
    buffer: list[str] = []
    pages: set[int] = set()
    current_heading: str | None = None

    def flush() -> None:
        nonlocal buffer, pages
        if not buffer:
            return
        sections.append(
            Section(
                heading=current_heading,
                text="\n".join(buffer).strip(),
                pages=pages.copy() or {1},
                breadcrumbs=[
                    breadcrumb for breadcrumb in ([current_heading] if current_heading else [])
                ],
            )
        )
        buffer.clear()
        pages.clear()

    for index, page in enumerate(document, start=1):
        page_dict = page.get_text("dict")
        for block in page_dict.get("blocks", []):
            for line in block.get("lines", []):
                spans = line.get("spans", [])
                text = _sanitize("".join(span.get("text", "") for span in spans))
                if not text:
                    continue
                max_size = max(float(span.get("size", 0.0)) for span in spans)
                if max_size >= heading_threshold and len(text.split()) <= HEADING_WORD_LIMIT:
                    flush()
                    current_heading = text
                    continue
                buffer.append(text)
                pages.add(index)

    flush()
    return sections


def extract_tables(path: Path) -> list[Chunk]:  # noqa: PLR0912
    tables: list[Chunk] = []
    if camelot is not None:  # pragma: no cover - requires camelot deps
        try:
            camelot_tables = camelot.read_pdf(str(path), pages="all")
        except Exception:
            camelot_tables = []
        for index, table in enumerate(camelot_tables, start=1):
            try:
                dataframe = table.df  # type: ignore[attr-defined]
            except Exception:
                continue
            if dataframe.empty:
                continue
            cleaned = dataframe.fillna("")
            total_cells = cleaned.size
            empty_cells = sum(1 for value in cleaned.to_numpy().flatten() if not str(value).strip())
            if total_cells and (empty_cells / total_cells) > TABLE_EMPTY_RATIO:
                continue
            header = [str(item).strip() for item in cleaned.iloc[0].tolist()]
            body = cleaned.iloc[1:]
            rows = [
                " | ".join(str(cell).strip() for cell in row.tolist()) for _, row in body.iterrows()
            ]
            text = "\n".join(rows).strip()
            if not text:
                continue
            table_breadcrumbs = [f"Table {index}"]
            tables.append(
                Chunk(
                    text=text,
                    pages={int(getattr(table, "page", 1))},
                    headings={f"Table {index}"},
                    breadcrumbs=table_breadcrumbs,
                    token_count=len(encode(text)),
                    is_table=True,
                    table_headers=header,
                )
            )
        if tables:
            return tables
    if tabula is not None:  # pragma: no cover - requires java
        try:
            dataframes = tabula.read_pdf(str(path), pages="all", multiple_tables=True)
        except Exception:
            dataframes = []
        for index, dataframe in enumerate(dataframes, start=1):
            if dataframe is None or dataframe.empty:
                continue
            cleaned = dataframe.fillna("")
            total_cells = cleaned.size
            empty_cells = sum(1 for value in cleaned.to_numpy().flatten() if not str(value).strip())
            if total_cells and (empty_cells / total_cells) > TABLE_EMPTY_RATIO:
                continue
            header = [str(col).strip() for col in cleaned.columns]
            rows = [" | ".join(str(cell).strip() for cell in row) for row in cleaned.to_numpy()]
            text = "\n".join(rows).strip()
            if not text:
                continue
            table_breadcrumbs = [f"Table {index}"]
            tables.append(
                Chunk(
                    text=text,
                    pages={1},
                    headings={f"Table {index}"},
                    breadcrumbs=table_breadcrumbs,
                    token_count=len(encode(text)),
                    is_table=True,
                    table_headers=header,
                )
            )
    return tables


def merge_small_chunks(chunks: list[Chunk], min_tokens: int) -> list[Chunk]:
    if not chunks:
        return chunks
    merged: list[Chunk] = []
    for chunk in chunks:
        if merged and chunk.token_count < min_tokens and not chunk.is_table:
            target = merged[-1]
            target.text = f"{target.text}\n{chunk.text}".strip()
            target.token_count += chunk.token_count
            target.pages.update(chunk.pages)
            target.headings.update(chunk.headings)
            target.breadcrumbs = list(dict.fromkeys(target.breadcrumbs + chunk.breadcrumbs))
        else:
            merged.append(chunk)
    return merged


def chunk_sections(
    sections: list[Section],
    target_tokens: int,
    min_tokens: int,
    overlap: int,
    base_breadcrumbs: list[str],
) -> list[Chunk]:
    all_chunks: list[Chunk] = []
    for section in sections:
        tokens = encode(section.text)
        if not tokens:
            continue
        splits = list(split_tokens(tokens, target_tokens, overlap))
        section_chunks: list[Chunk] = []
        for start, end in splits:
            piece = tokens[start:end]
            text = decode(piece).strip()
            if not text:
                continue
            section_chunks.append(
                Chunk(
                    text=text,
                    pages=section.pages.copy() or {1},
                    headings={heading for heading in [section.heading] if heading},
                    breadcrumbs=list(
                        dict.fromkeys(
                            base_breadcrumbs + (section.breadcrumbs if section.breadcrumbs else [])
                        )
                    ),
                    token_count=len(piece),
                )
            )
        section_chunks = merge_small_chunks(section_chunks, min_tokens)
        all_chunks.extend(section_chunks)
    return all_chunks


def garble_ratio(text: str) -> float:
    if not text:
        return 0.0
    garbled = sum(1 for char in text if char == "\ufffd")
    return garbled / max(1, len(text))


def summarize(text: str) -> str:
    sentences = re.split(r"(?<=[.!?])\s+", text.strip())
    return sentences[0][:240] if sentences else text[:240]


# Remove trailing markdown anchors like: ([Secondary Ethernet Limitations](#37)).
_TRAILING_ANCHOR_RE = re.compile(r"\s*\(\[[^\]]+\]\(#\d+\)\)\.?\s*$")


def clean_summary(text: str) -> str:
    """Summarize and strip dangling anchor-style citations."""
    summary = summarize(text)
    return _TRAILING_ANCHOR_RE.sub("", summary).strip()


def extract_keywords(text: str, top_n: int = 5) -> list[str]:
    words = [re.sub(r"[^a-z0-9]", "", token.lower()) for token in text.split()]
    words = [word for word in words if word and word not in STOPWORDS]
    counts = Counter(words)
    return [word for word, _ in counts.most_common(top_n)]


def write_jsonl(path: Path, entries: Iterable[dict]) -> None:
    path.parent.mkdir(parents=True, exist_ok=True)
    with path.open("w", encoding="utf-8") as handle:
        for entry in entries:
            handle.write(json.dumps(entry, ensure_ascii=False) + "\n")


def main() -> None:
    args = parse_args()
    if args.config:
        os.environ["CONFIG_PATH"] = str(args.config)

    settings = load_settings()
    source_file = args.input
    if not source_file.exists():
        raise FileNotFoundError(source_file)

    ced_id, version = _ced_id(source_file)
    models = _extract_models(source_file)
    timestamp = datetime.utcnow().isoformat(timespec="seconds") + "Z"

    log.info("open_document", path=str(source_file))
    document = fitz.open(str(source_file))
    font_baseline = _compute_font_baseline(document)
    sections = extract_sections(document, font_baseline + FONT_SIZE_PADDING)
    tables = extract_tables(source_file)
    base_breadcrumbs = [ced_id.upper(), source_file.stem]
    target_tokens = args.target_tokens or settings.chunk_target_tokens or 800
    min_tokens = args.min_tokens or settings.chunk_min_tokens or 400
    if args.overlap is not None:
        overlap = max(0, args.overlap)
    else:
        overlap = settings.chunk_overlap_tokens
    chunks = chunk_sections(sections, target_tokens, min_tokens, overlap, base_breadcrumbs)
    document.close()

    chunk_payloads: list[dict[str, object]] = []
    table_payloads: list[dict[str, object]] = []
    chunk_index = 0
    for chunk in chunks:
        ratio = garble_ratio(chunk.text)
        if ratio > GARBLE_THRESHOLD:
            log.warning(
                "skip_garbled_chunk",
                pages=sorted(chunk.pages),
                garble_ratio=ratio,
                chunk_id=f"{ced_id}::chunk_{chunk_index + 1:04d}",
            )
            continue
        chunk_index += 1
        pages = sorted(chunk.pages)
        models_present = [model for model in models if model.lower() in chunk.text.lower()]
        payload = {
            "chunk_id": f"{ced_id}::chunk_{chunk_index:04d}",
            "source_file": str(source_file),
            "doc_type": "ced",
            "ced_id": ced_id,
            "version": version,
            "page_range": pages,
            "section_titles": sorted(chunk.headings),
            "breadcrumbs": chunk.breadcrumbs or base_breadcrumbs,
            "is_table": False,
            "table_headers": [],
            "models": models,
            "models_present": models_present,
            "token_index": chunk_index - 1,
            "token_count": chunk.token_count,
            "embedding_model": settings.embed_model,
            "embedding_model_version": settings.embedding_model_version,
            "ingested_at": timestamp,
            "hash": sha256_text(chunk.text),
            "keywords": extract_keywords(chunk.text),
            "context_summary": clean_summary(chunk.text),
            "text": chunk.text,
        }
        chunk_payloads.append(payload)

    table_index = 0
    for table in tables:
        if garble_ratio(table.text) > GARBLE_THRESHOLD:
            continue
        table_index += 1
        pages = sorted(table.pages)
        models_present = [model for model in models if model.lower() in table.text.lower()]
        payload = {
            "table_id": f"{ced_id}::table_{table_index:04d}",
            "source_file": str(source_file),
            "doc_type": "ced",
            "ced_id": ced_id,
            "version": version,
            "page_range": pages,
            "section_titles": sorted(table.headings),
            "breadcrumbs": table.breadcrumbs or base_breadcrumbs,
            "is_table": True,
            "table_headers": table.table_headers or [],
            "models": models,
            "models_present": models_present,
            "token_index": chunk_index + table_index - 1,
            "token_count": table.token_count,
            "embedding_model": settings.embed_model,
            "embedding_model_version": settings.embedding_model_version,
            "ingested_at": timestamp,
            "hash": sha256_text(table.text),
            "keywords": extract_keywords(table.text),
            "context_summary": clean_summary(table.text),
            "text": table.text,
        }
        table_payloads.append(payload)

    write_jsonl(args.output, chunk_payloads)
    write_jsonl(args.tables, table_payloads)
    log.info(
        "write_chunks_complete",
        text_chunks=len(chunk_payloads),
        table_chunks=len(table_payloads),
        output=str(args.output),
        tables=str(args.tables),
    )

    doc_index = {
        "ced_id": ced_id,
        "version": version,
        "source_file": str(source_file),
        "models": models,
        "chunk_count": len(chunk_payloads),
        "table_count": len(table_payloads),
        "generated_at": timestamp,
        "embedding_model": settings.embed_model,
        "embedding_model_version": settings.embedding_model_version,
        "document_hash": sha256_file(source_file),
    }
    args.doc_index.parent.mkdir(parents=True, exist_ok=True)
    args.doc_index.write_text(json.dumps(doc_index, indent=2), encoding="utf-8")

    log.info(
        "chunk_ced_complete",
        chunks=len(chunk_payloads),
        tables=len(table_payloads),
        doc_index=str(args.doc_index),
        models=models,
        ced_id=ced_id,
    )


if __name__ == "__main__":
    main()

```

---

### scripts/db_verify.py

```python
"""Helper to invoke the pgvector verification SQL in a cross-platform way."""

from __future__ import annotations

import os
import shutil
import subprocess
import sys
from pathlib import Path
from tempfile import NamedTemporaryFile


def _load_env_from_file(env_path: Path) -> None:
    """Populate os.environ with values from `.env` if they are not already set."""
    if not env_path.exists():
        return
    for raw_line in env_path.read_text(encoding="utf-8").splitlines():
        line = raw_line.strip()
        if not line or line.startswith("#"):
            continue
        key, sep, value = line.partition("=")
        if not sep:
            continue
        key = key.strip()
        if not key or key in os.environ:
            continue
        cleaned = value.strip()
        if (cleaned.startswith('"') and cleaned.endswith('"')) or (
            cleaned.startswith("'") and cleaned.endswith("'")
        ):
            cleaned = cleaned[1:-1]
        os.environ[key] = cleaned


def main() -> int:
    _load_env_from_file(Path(".env"))

    database_url = os.environ.get("DATABASE_URL")
    if not database_url:
        print("DATABASE_URL is not set. Export it before running db.verify.", file=sys.stderr)
        return 1

    sql_path = Path("scripts/verify_pgvector.sql")
    if not sql_path.exists():
        print("scripts/verify_pgvector.sql not found.", file=sys.stderr)
        return 1

    dimension = os.environ.get("PGVECTOR_DIMENSION", "3072")
    lists = os.environ.get("PGVECTOR_LISTS", "100")
    sql_template = sql_path.read_text(encoding="utf-8")
    sql_rendered = sql_template.replace(":expected_pgvector_dimension", dimension).replace(
        ":expected_pgvector_lists", lists
    )

    with NamedTemporaryFile("w", encoding="utf-8", suffix=".sql", delete=False) as tmp_file:
        tmp_file.write(sql_rendered)
        tmp_path = Path(tmp_file.name)

    extra_cleanup: list[list[str]] = [["rm", "-f", str(tmp_path)]]

    psql_path = shutil.which("psql")
    docker_path = shutil.which("docker")
    docker_compose_path = shutil.which("docker-compose")

    compose_base: list[str] | None = None

    if psql_path:
        command_prefix: list[str] = [psql_path]
        sql_arg = str(tmp_path)
    else:
        if docker_path:
            compose_base = [docker_path, "compose"]
        elif docker_compose_path:
            compose_base = [docker_compose_path]
        else:
            print(
                "psql is required but not found on PATH, and docker compose is unavailable for fallback execution.",
                file=sys.stderr,
            )
            return 1

        command_prefix = [*compose_base, "exec", "-T", "postgres", "psql"]
        remote_path = "/tmp/verify_pgvector.sql"
        copy_cmd = [*compose_base, "cp", str(tmp_path), f"postgres:{remote_path}"]
        subprocess.run(copy_cmd, check=True)
        sql_arg = remote_path
        extra_cleanup.append([*compose_base, "exec", "-T", "postgres", "rm", "-f", remote_path])

    cmd: list[str] = [
        *command_prefix,
        "--dbname",
        database_url,
        "-v",
        f"expected_pgvector_dimension={dimension}",
        "-v",
        f"expected_pgvector_lists={lists}",
        "-f",
        sql_arg,
    ]

    try:
        subprocess.run(cmd, check=True)
    except subprocess.CalledProcessError as exc:
        return exc.returncode
    finally:
        for cleanup_cmd in extra_cleanup:
            try:
                if cleanup_cmd[0] == "rm":
                    Path(cleanup_cmd[-1]).unlink(missing_ok=True)
                else:
                    subprocess.run(cleanup_cmd, check=False)
            except Exception:
                pass

    return 0


if __name__ == "__main__":
    sys.exit(main())

```

---

### scripts/debug_env.py

```python
#!/usr/bin/env python3
"""Inspect Atticus environment configuration without leaking secrets."""

from __future__ import annotations

import json
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.config import environment_diagnostics, reset_settings_cache  # noqa: E402


def main() -> int:
    diagnostics = environment_diagnostics()
    diagnostics["repo_root"] = str(ROOT)
    print(json.dumps(diagnostics, indent=2, sort_keys=True))
    reset_settings_cache()
    return 0


if __name__ == "__main__":
    raise SystemExit(main())

```

---

### scripts/e2e_smoke.py

```python
"""E2E smoke checks for Atticus API and UI make targets."""

from __future__ import annotations

import contextlib
import os
import socket
import subprocess
import sys
import time
from pathlib import Path

import requests

HOST = os.environ.get("ATTICUS_E2E_HOST", "127.0.0.1")
API_PORT = int(os.environ.get("ATTICUS_API_PORT", "8000"))
UI_PORT = int(os.environ.get("ATTICUS_UI_PORT", "8081"))
ROOT = Path(__file__).resolve().parents[1]
WEB_DIR = ROOT / "web"


class ManagedProcess:
    """Launch a long-running command and surface logs if checks fail."""

    def __init__(self, name: str, args: list[str], cwd: Path) -> None:
        self.name = name
        self.args = args
        self.cwd = cwd
        self.proc: subprocess.Popen | None = None
        self.stdout: str = ""
        self.stderr: str = ""
        self._should_dump = False

    def __enter__(self) -> ManagedProcess:
        self.proc = subprocess.Popen(
            self.args,
            cwd=self.cwd,
            stdout=subprocess.PIPE,
            stderr=subprocess.PIPE,
            text=True,
        )
        return self

    def __exit__(self, exc_type, exc, tb) -> bool:
        self._should_dump = exc_type is not None
        if self.proc and self.proc.poll() is None:
            self.proc.terminate()
        if self.proc:
            try:
                out, err = self.proc.communicate(timeout=5)
            except subprocess.TimeoutExpired:
                self.proc.kill()
                out, err = self.proc.communicate()
            self.stdout = out or ""
            self.stderr = err or ""
            if self._should_dump:
                if self.stdout.strip():
                    print(f"[{self.name} stdout]\n{self.stdout}")
                if self.stderr.strip():
                    print(f"[{self.name} stderr]\n{self.stderr}", file=sys.stderr)
        return False


def wait_for_port(host: str, port: int, timeout: float = 20.0) -> None:
    deadline = time.time() + timeout
    while time.time() < deadline:
        with contextlib.closing(socket.socket(socket.AF_INET, socket.SOCK_STREAM)) as sock:
            sock.settimeout(1.0)
            if sock.connect_ex((host, port)) == 0:
                return
        time.sleep(0.25)
    raise RuntimeError(f"Timed out waiting for {host}:{port}")


def request_with_retry(url: str, *, attempts: int = 5, delay: float = 0.5) -> requests.Response:
    last_error: Exception | None = None
    for _ in range(attempts):
        try:
            response = requests.get(url, timeout=5)
            response.raise_for_status()
            return response
        except requests.RequestException as exc:
            last_error = exc
            time.sleep(delay)
    raise RuntimeError(f"Failed to GET {url}") from last_error


def check_api(host: str, port: int) -> None:
    base = f"http://{host}:{port}"
    health = request_with_retry(f"{base}/health")
    payload = health.json()
    if payload.get("status") != "ok":
        raise RuntimeError("API health check did not return status 'ok'")

    root_page = request_with_retry(f"{base}/")
    lower_html = root_page.text.lower()
    if "<html" not in lower_html or "atticus" not in lower_html:
        raise RuntimeError("API root did not render an Atticus UI shell")
    if "/static/" not in lower_html:
        raise RuntimeError("API root is missing static asset references")

    static_asset = request_with_retry(f"{base}/static/js/script.js")
    if not static_asset.text.strip():
        raise RuntimeError("API static assets are empty or missing")


def check_ui(host: str, port: int) -> None:
    base = f"http://{host}:{port}"
    ui_page = request_with_retry(f"{base}/templates/index.html")
    lower_html = ui_page.text.lower()
    if "<html" not in lower_html or "atticus" not in lower_html:
        raise RuntimeError("Standalone UI did not include Atticus branding")
    if "/static/" not in lower_html:
        raise RuntimeError("Standalone UI page is missing static asset references")

    ui_script = request_with_retry(f"{base}/static/js/script.js")
    if not ui_script.text.strip():
        raise RuntimeError("Standalone UI cannot serve static JavaScript")


def main() -> None:
    if not WEB_DIR.exists():
        raise RuntimeError(f"Expected UI directory at {WEB_DIR}")

    api_cmd = [
        sys.executable,
        "-m",
        "uvicorn",
        "api.main:app",
        "--port",
        str(API_PORT),
    ]
    ui_cmd = [
        sys.executable,
        "-m",
        "http.server",
        str(UI_PORT),
        "--directory",
        str(WEB_DIR),
    ]

    with ManagedProcess("api", api_cmd, ROOT):
        wait_for_port(HOST, API_PORT)
        check_api(HOST, API_PORT)
        print(f"API smoke passed on {HOST}:{API_PORT}")

        with ManagedProcess("ui", ui_cmd, ROOT):
            wait_for_port(HOST, UI_PORT)
            check_ui(HOST, UI_PORT)
            print(f"UI static smoke passed on {HOST}:{UI_PORT}")

    print("E2E API/UI checks completed.")


if __name__ == "__main__":
    main()

```

---

### scripts/eval_qa.py

```python
#!/usr/bin/env python3
"""Run simple end-to-end QA evaluation using expected answers.

For each gold example with an `expected_answer`, this script:
- calls the retrieval+generation pipeline (`answer_question`)
- computes token-level F1 between model response and expected
- computes embedding cosine similarity between response and expected

Outputs a CSV and JSON summary alongside the retrieval metrics outputs for the same day.
"""

from __future__ import annotations

import argparse
import csv
import json
import os
import sys
from collections import Counter
from collections.abc import Iterable
from pathlib import Path

import numpy as np

# Ensure repository root on sys.path for local imports
ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.config import AppSettings, load_settings  # noqa: E402
from atticus.embeddings import EmbeddingClient  # noqa: E402
from eval.runner import _default_output_dir, load_gold_set  # noqa: E402
from retriever.service import answer_question  # noqa: E402


def _tokens(text: str) -> list[str]:
    return [t for t in "".join(c.lower() if c.isalnum() else " " for c in text).split() if t]


def _f1(a: str, b: str) -> float:
    ta, tb = _tokens(a), _tokens(b)
    if not ta or not tb:
        return 0.0
    set_a = ta
    set_b = tb
    ca, cb = Counter(set_a), Counter(set_b)
    common = sum((ca & cb).values())
    if common == 0:
        return 0.0
    precision = common / max(1, sum(cb.values()))
    recall = common / max(1, sum(ca.values()))
    if precision + recall == 0:
        return 0.0
    return 2 * precision * recall / (precision + recall)


def _cosine(a: Iterable[float], b: Iterable[float]) -> float:
    va = np.array(list(a), dtype=float)
    vb = np.array(list(b), dtype=float)
    na = np.linalg.norm(va)
    nb = np.linalg.norm(vb)
    if na == 0 or nb == 0:
        return 0.0
    return float(va.dot(vb) / (na * nb))


def run_qa_eval(
    settings: AppSettings, gold_path: Path | None = None, output_dir: Path | None = None
) -> dict[str, object]:
    gold_path = gold_path or settings.gold_set_path
    output_dir = output_dir or _default_output_dir(settings)
    examples = [g for g in load_gold_set(gold_path) if g.expected_answer]

    output_dir.mkdir(parents=True, exist_ok=True)
    csv_path = output_dir / "qa_metrics.csv"
    json_path = output_dir / "qa_summary.json"

    if not examples:
        payload = {"count": 0, "avg_f1": 0.0, "avg_cosine": 0.0}
        json_path.write_text(json.dumps(payload, indent=2) + "\n", encoding="utf-8")
        return payload

    embed = EmbeddingClient(settings)
    f1_scores: list[float] = []
    cos_scores: list[float] = []
    rows: list[dict[str, object]] = []

    for ex in examples:
        ans = answer_question(ex.question, settings=settings)
        f1 = _f1(ans.response, ex.expected_answer or "")
        v_expected, v_response = embed.embed_texts([ex.expected_answer or "", ans.response])
        cos = _cosine(v_expected, v_response)
        top_doc = ans.citations[0].source_path if ans.citations else None
        f1_scores.append(f1)
        cos_scores.append(cos)
        rows.append(
            {
                "question": ex.question,
                "top_document": top_doc,
                "confidence": ans.confidence,
                "f1": round(f1, 4),
                "cosine": round(cos, 4),
            }
        )

    with csv_path.open("w", newline="", encoding="utf-8") as handle:
        writer = csv.DictWriter(
            handle, fieldnames=["question", "top_document", "confidence", "f1", "cosine"]
        )
        writer.writeheader()
        writer.writerows(rows)
        writer.writerow(
            {
                "question": "AVERAGE",
                "top_document": "",
                "confidence": round(sum(r.get("confidence", 0.0) for r in rows) / len(rows), 4),
                "f1": round(sum(f1_scores) / len(f1_scores), 4),
                "cosine": round(sum(cos_scores) / len(cos_scores), 4),
            }
        )

    payload = {
        "count": len(rows),
        "avg_f1": round(sum(f1_scores) / len(f1_scores), 4),
        "avg_cosine": round(sum(cos_scores) / len(cos_scores), 4),
        "summary_csv": str(csv_path),
        "summary_json": str(json_path),
    }
    json_path.write_text(json.dumps(payload, indent=2) + "\n", encoding="utf-8")
    return payload


def build_parser() -> argparse.ArgumentParser:
    p = argparse.ArgumentParser(description="Run QA eval using expected answers in the gold set")
    p.add_argument("--gold-set", type=Path, help="Optional path to override the default gold set")
    p.add_argument("--output-dir", type=Path, help="Directory for storing QA eval outputs")
    p.add_argument("--config", type=Path, help="Path to an alternate config.yaml file")
    p.add_argument("--json", action="store_true", help="Print results as JSON to stdout")
    return p


def main() -> None:
    args = build_parser().parse_args()
    if args.config:
        os.environ["CONFIG_PATH"] = str(args.config)

    settings = load_settings()
    result = run_qa_eval(settings, gold_path=args.gold_set, output_dir=args.output_dir)
    if args.json or not args.output_dir:
        print(json.dumps(result, indent=2))


if __name__ == "__main__":
    main()

```

---

### scripts/eval_run.py

```python
#!/usr/bin/env python3
"""Run the Atticus evaluation harness from the command line."""

from __future__ import annotations

import argparse
import json
import os
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.config import load_settings  # noqa: E402
from atticus.logging_utils import get_logger  # noqa: E402
from eval.runner import run_evaluation  # noqa: E402

log = get_logger("eval_run")


def build_parser() -> argparse.ArgumentParser:
    parser = argparse.ArgumentParser(description="Execute the retrieval evaluation harness")
    parser.add_argument(
        "--gold-set",
        type=Path,
        help="Optional path to override the default gold set",
    )
    parser.add_argument(
        "--baseline",
        type=Path,
        help="Optional path to override the baseline metrics JSON",
    )
    parser.add_argument(
        "--output-dir",
        type=Path,
        help="Directory for storing evaluation outputs",
    )
    parser.add_argument(
        "--config",
        type=Path,
        help="Path to an alternate config.yaml file",
    )
    parser.add_argument(
        "--json",
        action="store_true",
        help="Print results as JSON to stdout",
    )
    return parser


def main() -> None:
    parser = build_parser()
    args = parser.parse_args()

    if args.config:
        os.environ["CONFIG_PATH"] = str(args.config)

    settings = load_settings()
    log.info(
        "eval_start",
        gold_override=bool(args.gold_set),
        baseline_override=bool(args.baseline),
        output_dir=str(args.output_dir) if args.output_dir else None,
    )
    result = run_evaluation(
        settings=settings,
        gold_path=args.gold_set,
        baseline_path=args.baseline,
        output_dir=args.output_dir,
    )

    payload = {
        "metrics": result.metrics,
        "deltas": result.deltas,
        "summary_csv": str(result.summary_csv),
        "summary_json": str(result.summary_json),
        "summary_html": str(result.summary_html),
    }

    if args.json or not args.output_dir:
        log.info("eval_result", **payload)
    else:
        summary_path = args.output_dir / "run_summary.json"
        summary_path.write_text(json.dumps(payload, indent=2), encoding="utf-8")
        log.info("eval_summary_written", path=str(summary_path))

    threshold = settings.eval_regression_threshold / 100.0
    if any(delta < -threshold for delta in result.deltas.values()):
        log.error("eval_regression_detected", threshold=threshold, deltas=result.deltas)
        raise SystemExit(1)
    log.info("eval_ok")


if __name__ == "__main__":
    main()

```

---

### scripts/generate_api_docs.py

```python
"""CLI to export the FastAPI OpenAPI schema to disk."""

from __future__ import annotations

import argparse
import json
import sys
from pathlib import Path

import yaml

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from api.main import app  # noqa: E402


def build_parser() -> argparse.ArgumentParser:
    parser = argparse.ArgumentParser(description="Generate API documentation artifacts")
    parser.add_argument(
        "--output",
        type=Path,
        default=ROOT / "docs" / "api" / "openapi.json",
        help="Path to write the OpenAPI document (defaults to docs/api/openapi.json)",
    )
    parser.add_argument(
        "--format",
        choices=("json", "yaml"),
        default="json",
        help="Output format for the schema",
    )
    parser.add_argument(
        "--indent",
        type=int,
        default=2,
        help="Indentation for JSON output",
    )
    return parser


def export_schema(output_path: Path, output_format: str, indent: int = 2) -> None:
    schema = app.openapi()
    output_path.parent.mkdir(parents=True, exist_ok=True)

    if output_format == "json":
        payload = json.dumps(schema, indent=indent, sort_keys=True)
        output_path.write_text(payload + "\n", encoding="utf-8")
    else:
        payload = yaml.safe_dump(schema, sort_keys=False)
        output_path.write_text(payload, encoding="utf-8")


def main() -> None:
    parser = build_parser()
    args = parser.parse_args()
    export_schema(output_path=args.output, output_format=args.format, indent=args.indent)


if __name__ == "__main__":
    main()

```

---

### scripts/generate_env.py

```python
#!/usr/bin/env python3
"""Create or refresh the repository .env file.

Usage examples::

    python scripts/generate_env.py            # creates .env if missing
    python scripts/generate_env.py --force    # overwrite existing .env
    python scripts/generate_env.py --ignore-env   # ignore host env vars when writing
"""

from __future__ import annotations

import argparse
import hashlib
import os
from pathlib import Path


def _fingerprint(value: str | None) -> str | None:
    if not value:
        return None
    return hashlib.sha256(value.encode("utf-8")).hexdigest()[:12]


DEFAULTS = {
    # Core models
    "OPENAI_API_KEY": "sk-your-openai-key",
    "EMBED_MODEL": "text-embedding-3-large",
    "EMBEDDING_MODEL_VERSION": "text-embedding-3-large@2025-01-15",
    "GEN_MODEL": "gpt-4.1",
    "CONFIDENCE_THRESHOLD": "0.70",
    "CHUNK_TARGET_TOKENS": "512",
    "CHUNK_MIN_TOKENS": "256",
    "CHUNK_OVERLAP_TOKENS": "100",
    "MAX_CONTEXT_CHUNKS": "10",
    "ENABLE_RERANKER": "0",
    "TOP_K": "20",
    "EVAL_REGRESSION_THRESHOLD": "3.0",
    # Paths & storage
    "CONTENT_ROOT": "./content",
    "INDICES_DIR": "./indices",
    "LOG_PATH": "./logs/app.jsonl",
    "ERROR_LOG_PATH": "./logs/errors.jsonl",
    "DICTIONARY_PATH": "./indices/dictionary.json",
    # Database & vector search
    "DATABASE_URL": "postgresql://atticus:atticus@localhost:5432/atticus",
    "POSTGRES_DB": "atticus",
    "POSTGRES_USER": "atticus",
    "POSTGRES_PASSWORD": "atticus",
    "PGVECTOR_LISTS": "100",
    "PGVECTOR_PROBES": "4",
    # Logging & telemetry
    "LOG_LEVEL": "INFO",
    "LOG_VERBOSE": "0",
    "LOG_TRACE": "0",
    "LOG_FORMAT": "json",
    "TIMEZONE": "UTC",
    # Rate limiting
    "RATE_LIMIT_REQUESTS": "5",
    "RATE_LIMIT_WINDOW_SECONDS": "60",
    # Notifications & escalation
    "CONTACT_EMAIL": "atticus-contact@example.com",
    "SMTP_HOST": "smtp.example.com",
    "SMTP_PORT": "587",
    "SMTP_USER": "smtp-user",
    "SMTP_PASS": "change-me-smtp-password",
    "SMTP_FROM": "atticus-escalations@example.com",
    "SMTP_TO": "atticus-technical-support@example.com",
    "SMTP_DRY_RUN": "1",
    "EMAIL_SANDBOX": "true",
    "SMTP_ALLOW_LIST": "",
    # Auth & admin
    "AUTH_SECRET": "dev-secret",
    "NEXTAUTH_SECRET": "dev-secret",
    "NEXTAUTH_URL": "http://localhost:3000",
    "NEXTAUTH_URL_INTERNAL": "http://localhost:3000",
    "DEFAULT_ORG_ID": "org-atticus",
    "DEFAULT_ORG_NAME": "Atticus Default",
    "ADMIN_EMAIL": "admin@atticus.local",
    "ADMIN_NAME": "Atticus Admin",
    "ADMIN_API_TOKEN": "set-a-strong-admin-token",
    "AUTH_DEBUG_MAILBOX_DIR": "./logs/mailbox",
    # Local email sandbox
    "EMAIL_SERVER_HOST": "localhost",
    "EMAIL_SERVER_PORT": "1025",
    "EMAIL_SERVER_USER": "",
    "EMAIL_SERVER_PASSWORD": "",
    "EMAIL_FROM": "no-reply@atticus.local",
    # Frontend/API integration
    "RAG_SERVICE_URL": "http://localhost:8000",
    "ASK_SERVICE_URL": "http://localhost:8000",
}


def main() -> int:
    parser = argparse.ArgumentParser(description="Generate a .env file for Atticus")
    parser.add_argument("--force", action="store_true", help="overwrite an existing .env file")
    parser.add_argument(
        "--ignore-env",
        action="store_true",
        help="ignore host environment variables when populating values",
    )
    args = parser.parse_args()

    root = Path(__file__).resolve().parents[1]
    env_path = root / ".env"

    if env_path.exists() and not args.force:
        print(f"[generate_env] .env already exists at {env_path}. Use --force to overwrite.")
        return 0

    if args.ignore_env:
        print("[generate_env] Ignoring host environment variables; writing defaults.")

    lines = []
    used_openai_key: str | None = None
    for k, v in DEFAULTS.items():
        if args.ignore_env:
            val = v
        else:
            val = os.environ.get(k, v)
        if isinstance(val, str):
            val = val.strip()
        if k == "OPENAI_API_KEY":
            used_openai_key = val
        lines.append(f"{k}={val}")

    env_path.write_text("\n".join(lines) + "\n", encoding="utf-8")
    print(f"[generate_env] Wrote {env_path}")
    if used_openai_key:
        source = (
            "environment" if not args.ignore_env and "OPENAI_API_KEY" in os.environ else "defaults"
        )
        fingerprint = _fingerprint(used_openai_key) or "none"
        print(f"[generate_env] OPENAI_API_KEY resolved from {source} (fingerprint={fingerprint})")
    else:
        print(
            "[generate_env] Note: OPENAI_API_KEY is empty. Set it via environment before running, e.g.\n"
            "  PowerShell:  $env:OPENAI_API_KEY='sk-...' ; python scripts/generate_env.py --force\n"
            "  Bash:        OPENAI_API_KEY='sk-...' python scripts/generate_env.py --force"
        )
    if (
        not args.ignore_env
        and "OPENAI_API_KEY" in os.environ
        and os.environ.get("OPENAI_API_KEY", "").strip() != (used_openai_key or "")
    ):
        print(
            "[generate_env] Warning: host OPENAI_API_KEY differs from written value. Run with --ignore-env to bypass host overrides."
        )
    return 0


if __name__ == "__main__":
    raise SystemExit(main())

```

---

### scripts/icon-audit.mjs

```js
#!/usr/bin/env node
import { readFileSync, readdirSync, statSync } from "node:fs";
import path from "node:path";

const TARGET_DIRECTORIES = ["app", "components"];
const ICON_IMPORT_REGEX = /import\s+{([^}]+)}\s+from\s+['"]lucide-react['"]/g;
const ICON_NAME_REGEX = /^[A-Z][A-Za-z0-9]*$/;

function walk(dir) {
  const entries = readdirSync(dir, { withFileTypes: true });
  const files = [];
  for (const entry of entries) {
    if (entry.name.startsWith(".") || entry.name.startsWith("_")) continue;
    const fullPath = path.join(dir, entry.name);
    if (entry.isDirectory()) {
      files.push(...walk(fullPath));
    } else if (entry.isFile() && /\.(tsx|ts|jsx|js)$/.test(entry.name)) {
      files.push(fullPath);
    }
  }
  return files;
}

function auditFile(file) {
  const source = readFileSync(file, "utf8");
  const matches = [];
  let match;
  while ((match = ICON_IMPORT_REGEX.exec(source)) !== null) {
    matches.push({ importBlock: match[1], index: match.index });
  }
  const violations = [];
  for (const { importBlock, index } of matches) {
    const rawIcons = importBlock.split(",");
    for (const rawIcon of rawIcons) {
      const icon = rawIcon.trim();
      if (!icon) continue;
      const [name] = icon.split(/\s+as\s+/i);
      if (!ICON_NAME_REGEX.test(name)) {
        violations.push({ file, icon: name.trim(), position: index });
      }
    }
  }
  return violations;
}

const allViolations = [];
for (const dir of TARGET_DIRECTORIES) {
  if (!statSync(dir, { throwIfNoEntry: false })) {
    continue;
  }
  const files = walk(dir);
  for (const file of files) {
    allViolations.push(...auditFile(file));
  }
}

if (allViolations.length > 0) {
  console.error("Found invalid lucide-react icon imports:");
  for (const violation of allViolations) {
    console.error(`  ${violation.file}: ${violation.icon || "<empty>"}`);
  }
  process.exit(1);
}

console.log("Lucide icon imports look good.");

```

---

### scripts/ingest_cli.py

```python
#!/usr/bin/env python3
"""CLI entrypoint for the Atticus ingestion pipeline."""

from __future__ import annotations

import argparse
import json
import os
import sys
from collections.abc import Sequence
from dataclasses import asdict
from pathlib import Path

# Ensure repository root on import path when running as a script
ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from atticus.config import load_settings  # noqa: E402
from ingest.pipeline import IngestionOptions, ingest_corpus  # noqa: E402


def _paths(value: Sequence[str] | None) -> list[Path] | None:
    if not value:
        return None
    return [Path(item).expanduser().resolve() for item in value]


def build_parser() -> argparse.ArgumentParser:
    parser = argparse.ArgumentParser(description="Run the Atticus ingestion pipeline")
    parser.add_argument(
        "--paths",
        nargs="*",
        help="Optional subset of files or directories to ingest",
    )
    parser.add_argument(
        "--full-refresh",
        action="store_true",
        help="Force reprocessing of all documents even if unchanged",
    )
    parser.add_argument(
        "--config",
        type=Path,
        help="Path to an alternate config.yaml file",
    )
    parser.add_argument(
        "--output",
        type=Path,
        help="Optional path to write the ingestion summary JSON",
    )
    return parser


def main() -> None:
    parser = build_parser()
    args = parser.parse_args()

    if args.config:
        os.environ["CONFIG_PATH"] = str(args.config)

    settings = load_settings()
    options = IngestionOptions(full_refresh=bool(args.full_refresh), paths=_paths(args.paths))
    summary = ingest_corpus(settings=settings, options=options)
    payload = asdict(summary)

    if args.output:
        args.output.parent.mkdir(parents=True, exist_ok=True)
        args.output.write_text(json.dumps(payload, indent=2, default=str), encoding="utf-8")
    else:
        print(json.dumps(payload, indent=2, default=str))


if __name__ == "__main__":
    main()

```

---

### scripts/list_make_targets.py

```python
"""List unique make targets defined in provided makefiles."""

from __future__ import annotations

import pathlib
import re
import sys


def collect_targets(paths: list[str]) -> list[str]:
    pattern = re.compile(r"^[A-Za-z0-9_.-]+:")
    targets: set[str] = set()
    for raw_path in paths:
        path = pathlib.Path(raw_path)
        if not path.exists():
            continue
        for line in path.read_text().splitlines():
            if pattern.match(line):
                name = line.split(":", 1)[0]
                if name != ".PHONY":
                    targets.add(name)
    return sorted(targets)


def main(argv: list[str]) -> int:
    targets = collect_targets(argv or ["Makefile"])
    for name in targets:
        print(name)
    return 0


if __name__ == "__main__":
    raise SystemExit(main(sys.argv[1:]))

```

---

### scripts/make_seed.py

```python
"""Generate a lightweight seed manifest from the current CED corpus."""

from __future__ import annotations

import json
import sys
from pathlib import Path

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

try:  # pragma: no cover - optional dependency
    import pgvector.psycopg  # type: ignore
    import psycopg  # type: ignore
except ModuleNotFoundError:  # pragma: no cover - lightweight fallback for seed generation
    import types

    psycopg = types.ModuleType("psycopg")
    psycopg.rows = types.SimpleNamespace(dict_row=None)
    psycopg.types = types.SimpleNamespace(json=types.SimpleNamespace(Json=lambda value: value))
    psycopg.connect = lambda *args, **kwargs: (_ for _ in ()).throw(
        RuntimeError("psycopg unavailable")
    )
    sys.modules.setdefault("psycopg", psycopg)

    pgvector = types.ModuleType("pgvector")
    sys.modules.setdefault("pgvector", pgvector)

    pgvector_psycopg = types.ModuleType("pgvector.psycopg")
    pgvector_psycopg.register_vector = lambda conn: None
    pgvector_psycopg.Vector = list
    sys.modules["pgvector.psycopg"] = pgvector_psycopg

    ingest_pkg = types.ModuleType("ingest")
    ingest_pkg.__path__ = [str(ROOT / "ingest")]
    sys.modules.setdefault("ingest", ingest_pkg)

    sys.modules.setdefault("camelot", types.SimpleNamespace(read_pdf=lambda *args, **kwargs: []))
    sys.modules.setdefault("tabula", types.SimpleNamespace(read_pdf=lambda *args, **kwargs: []))

from atticus.config import load_settings
from atticus.utils import sha256_file
from ingest.chunker import chunk_document
from ingest.parsers import discover_documents, parse_document


def build_seed_manifest() -> list[dict[str, object]]:
    settings = load_settings()
    settings.ensure_directories()
    manifest: list[dict[str, object]] = []
    for index, path in enumerate(discover_documents(settings.content_dir)):
        document = parse_document(path)
        document.sha256 = sha256_file(path)
        chunks = chunk_document(document, settings)
        manifest.append(
            {
                "document": str(path),
                "sha256": document.sha256,
                "source_type": document.source_type,
                "chunk_count": len(chunks),
                "chunks": [
                    {
                        "chunk_id": chunk.chunk_id,
                        "sha256": chunk.sha256,
                        "heading": chunk.heading,
                        "chunking": chunk.extra.get("chunking"),
                        "page_number": chunk.page_number,
                    }
                    for chunk in chunks[:25]
                ],
            }
        )
        if index >= 9:  # keep seed small
            break
    return manifest


def main() -> None:
    output_path = Path("seeds/seed_manifest.json")
    output_path.parent.mkdir(parents=True, exist_ok=True)
    manifest = build_seed_manifest()
    output_path.write_text(
        json.dumps(manifest, indent=2, ensure_ascii=False) + "\n",
        encoding="utf-8",
    )
    print(f"Wrote seed manifest with {len(manifest)} documents to {output_path}")


if __name__ == "__main__":
    main()

```

---

### scripts/rollback.py

```python
"""Restore the Atticus index to a previous snapshot."""

from __future__ import annotations

import argparse
import os
import shutil
from pathlib import Path

from atticus.config import AppSettings, load_manifest, load_settings, write_manifest
from atticus.logging import configure_logging, log_event
from atticus.vector_db import PgVectorRepository, load_metadata
from eval.runner import load_gold_set
from retriever.vector_store import VectorStore

SNAPSHOT_METADATA = "index_metadata.json"
SNAPSHOT_MANIFEST = "manifest.json"


def parse_args() -> argparse.Namespace:
    parser = argparse.ArgumentParser(description="Rollback Atticus vector index")
    parser.add_argument(
        "--snapshot", type=Path, default=None, help="Specific snapshot directory to restore"
    )
    parser.add_argument("--skip-smoke", action="store_true", help="Skip smoke tests after rollback")
    parser.add_argument(
        "--limit", type=int, default=20, help="Number of gold queries for smoke testing"
    )
    parser.add_argument("--config", type=Path, help="Path to an alternate config.yaml")
    return parser.parse_args()


def _latest_snapshot_dir(directory: Path) -> Path:
    candidates = sorted([path for path in directory.iterdir() if path.is_dir()])
    if not candidates:
        raise FileNotFoundError(f"No snapshots found in {directory}")
    return candidates[-1]


def _run_smoke_tests(settings: AppSettings, logger, limit: int) -> list[str]:
    store = VectorStore(settings, logger)
    gold_examples = load_gold_set(settings.gold_set_path)[:limit]
    missing: list[str] = []
    for example in gold_examples:
        results = store.search(example.question, top_k=5)
        if not results:
            missing.append(example.question)
    return missing


def main() -> None:
    args = parse_args()
    if args.config:
        os.environ["CONFIG_PATH"] = str(args.config)
    settings = load_settings()
    logger = configure_logging(settings)

    if not settings.database_url:
        raise ValueError("DATABASE_URL must be configured before running rollback")

    snapshot_dir = args.snapshot or _latest_snapshot_dir(settings.snapshots_dir)
    metadata_path = snapshot_dir / SNAPSHOT_METADATA
    manifest_path = snapshot_dir / SNAPSHOT_MANIFEST
    if not metadata_path.exists() or not manifest_path.exists():
        raise FileNotFoundError(
            f"Snapshot {snapshot_dir} is missing {SNAPSHOT_METADATA} or {SNAPSHOT_MANIFEST}"
        )

    snapshot_manifest = load_manifest(manifest_path)
    if snapshot_manifest is None:
        raise FileNotFoundError(f"Snapshot manifest {manifest_path} is invalid or missing")

    chunks = load_metadata(metadata_path)
    repository = PgVectorRepository(settings)
    repository.ensure_schema()
    repository.truncate()

    documents = snapshot_manifest.documents
    ingest_time = snapshot_manifest.created_at

    chunks_by_document: dict[str, list] = {}
    for chunk in chunks:
        entry = chunks_by_document.setdefault(chunk.document_id, [])
        entry.append(chunk)

    for document_id, doc_chunks in chunks_by_document.items():
        if not doc_chunks:
            continue
        source_path = doc_chunks[0].source_path
        metadata = documents.get(source_path, {})
        repository.replace_document(
            document_id=document_id,
            source_path=source_path,
            sha256=str(metadata.get("sha256", "")),
            source_type=metadata.get("source_type"),
            chunks=doc_chunks,
            ingest_time=ingest_time,
        )

    shutil.copy2(metadata_path, settings.metadata_path)
    shutil.copy2(manifest_path, settings.manifest_path)

    restored_manifest = load_manifest(settings.manifest_path)
    if restored_manifest is None:
        write_manifest(settings.manifest_path, snapshot_manifest)
        restored_manifest = snapshot_manifest

    log_event(
        logger,
        "rollback_restored",
        snapshot=str(snapshot_dir),
        chunk_count=len(chunks),
        document_count=len(restored_manifest.documents),
    )

    if args.skip_smoke:
        print("Rollback complete. Smoke tests skipped.")
        return

    missing = _run_smoke_tests(settings, logger, args.limit)
    if missing:
        print("Rollback completed, but some queries returned no results:")
        for query in missing:
            print(f"  - {query}")
        print("Investigate the restored index before releasing.")
    else:
        print("Rollback validated successfully. All smoke tests returned results.")
    print("Tag the rollback commit and update CHANGELOG.md with details.")


if __name__ == "__main__":
    main()

```

---

### scripts/route-audit.mjs

```js
#!/usr/bin/env node
import { readdirSync, statSync } from "node:fs";
import path from "node:path";

const appDir = path.resolve("app");

function walkRoutes(current, prefix = "") {
  const entries = readdirSync(current, { withFileTypes: true });
  const result = [];
  for (const entry of entries) {
    if (entry.name.startsWith("_") || entry.name.startsWith(".")) continue;
    const fullPath = path.join(current, entry.name);
    const routePath = path.join(prefix, entry.name);
    if (entry.isDirectory()) {
      const isRouteSegment = ["page.tsx", "route.ts", "layout.tsx"].some((file) => {
        try {
          return statSync(path.join(fullPath, file)).isFile();
        } catch (error) {
          return false;
        }
      });
      if (isRouteSegment) {
        result.push({ segment: routePath.replace(/\\/g, "/"), files: readdirSync(fullPath) });
      }
      result.push(...walkRoutes(fullPath, routePath));
    }
  }
  return result;
}

const routes = walkRoutes(appDir);
console.log(JSON.stringify({ routes }, null, 2));

```

---

### scripts/run_ingestion.py

```python
#!/usr/bin/env python3
"""Legacy wrapper for the Atticus ingestion CLI."""

from __future__ import annotations

import runpy
from pathlib import Path


def main() -> None:
    target = Path(__file__).with_name("ingest_cli.py")
    runpy.run_path(str(target), run_name="__main__")


if __name__ == "__main__":
    main()

```

---

### scripts/smtp_test.py

```python
"""Manual SMTP smoke test used by `make smtp-test`."""

from __future__ import annotations

import sys

try:
    from atticus.notify.mailer import send_escalation
except Exception as exc:  # pragma: no cover - import is optional for devs
    IMPORT_ERROR = exc
    send_escalation = None
else:
    IMPORT_ERROR = None


def main() -> None:
    if send_escalation is None:
        print("SMTP mailer is unavailable: atticus.notify.mailer could not be imported.")
        if IMPORT_ERROR:
            print(f"Reason: {IMPORT_ERROR}")
        sys.exit(1)

    send_escalation("Atticus SMTP test", "This is a test from make smtp-test")
    print("smtp ok")


if __name__ == "__main__":
    main()

```

---

### scripts/test_health.py

```python
from __future__ import annotations

import sys
from pathlib import Path

from fastapi.testclient import TestClient

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

from api.main import app  # noqa: E402


def main() -> None:
    with TestClient(app) as client:
        res = client.get("/health")
        print("status:", res.status_code)
        print("json:", res.json())


if __name__ == "__main__":
    main()

```

---

### scripts/verify_pgvector.sql

```sql
-- Accept overrides via `psql -v expected_pgvector_dimension=1536 -v expected_pgvector_lists=50 ...`
\set ON_ERROR_STOP on

\if :{?expected_pgvector_dimension}
\else
  \set expected_pgvector_dimension 3072
\endif

\if :{?expected_pgvector_lists}
\else
  \set expected_pgvector_lists 100
\endif

DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM pg_extension WHERE extname = 'vector') THEN
    RAISE EXCEPTION 'pgvector extension not installed';
  END IF;
END$$;

DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'atticus_documents') THEN
    RAISE EXCEPTION 'atticus_documents table missing';
  END IF;

  IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'atticus_chunks') THEN
    RAISE EXCEPTION 'atticus_chunks table missing';
  END IF;
END$$;

-- Validate embedding dimension matches expected setting (defaults to 3072).
DO $$
DECLARE
  dimension integer;
  expected integer := :expected_pgvector_dimension;
BEGIN
  SELECT atttypmod INTO dimension
  FROM pg_attribute
  WHERE attrelid = 'atticus_chunks'::regclass
    AND attname = 'embedding'
    AND NOT attisdropped;

  IF dimension IS NULL THEN
    RAISE EXCEPTION 'atticus_chunks.embedding column missing';
  END IF;

  IF dimension <> expected THEN
    RAISE EXCEPTION 'atticus_chunks.embedding dimension is %, expected %', dimension, expected;
  END IF;
END$$;

-- Confirm IVFFlat index exists for cosine search.
DO $$
DECLARE
  idx_record TEXT;
  expected_lists INTEGER := :expected_pgvector_lists;
  dimension INTEGER;
BEGIN
  SELECT atttypmod INTO dimension
  FROM pg_attribute
  WHERE attrelid = 'atticus_chunks'::regclass
    AND attname = 'embedding'
    AND NOT attisdropped;

  IF dimension IS NULL THEN
    RAISE EXCEPTION 'atticus_chunks.embedding column missing';
  END IF;

  IF dimension > 2000 THEN
    RAISE NOTICE 'Skipping IVFFlat verification because dimension % exceeds 2000. Install a pgvector build with higher INDEX_MAX_DIMENSIONS to enable ANN indexing.', dimension;
    RETURN;
  END IF;

  SELECT indexdef INTO idx_record
  FROM pg_indexes
  WHERE tablename = 'atticus_chunks'
    AND indexname = 'idx_atticus_chunks_embedding';

  IF idx_record IS NULL THEN
    RAISE EXCEPTION 'IVFFlat index missing on atticus_chunks';
  END IF;

  IF position(lower(format('lists = %s', expected_lists)) IN lower(idx_record)) = 0 THEN
    RAISE EXCEPTION 'idx_atticus_chunks_embedding lists mismatch. Expected lists=% with index definition: %', expected_lists, idx_record;
  END IF;
END$$;

-- Confirm the ANN GUC matches the configured value for deterministic planner behaviour.
DO $$
DECLARE
  configured TEXT;
  expected TEXT := :expected_pgvector_lists::TEXT;
BEGIN
  configured := current_setting('app.pgvector_lists', true);
  IF configured IS NULL THEN
    RAISE EXCEPTION 'app.pgvector_lists GUC not configured';
  END IF;
  IF trim(configured) <> trim(expected) THEN
    RAISE EXCEPTION 'app.pgvector_lists is %, expected %', configured, expected;
  END IF;
END$$;

-- Confirm metadata defaults are applied so ingestion can omit the column explicitly.
DO $$
DECLARE
  doc_default TEXT;
  chunk_default TEXT;
BEGIN
  SELECT column_default INTO doc_default
  FROM information_schema.columns
  WHERE table_name = 'atticus_documents' AND column_name = 'metadata';

  IF doc_default IS DISTINCT FROM '\''{}\''::jsonb' THEN
    RAISE NOTICE 'atticus_documents.metadata default is %, expected {}::jsonb', doc_default;
  END IF;

  SELECT column_default INTO chunk_default
  FROM information_schema.columns
  WHERE table_name = 'atticus_chunks' AND column_name = 'metadata';

  IF chunk_default IS DISTINCT FROM '\''{}\''::jsonb' THEN
    RAISE NOTICE 'atticus_chunks.metadata default is %, expected {}::jsonb', chunk_default;
  END IF;
END$$;

SELECT 'pgvector verification completed successfully.' AS status;

```

---

### seeds/seed_manifest.json

```json
[
  {
    "document": "content\\model\\Shobu\\ac7070_qna.xlsx",
    "sha256": "c0d72ca9f382f0db017f06097edfe13b226545e3ba5d73a33f35743f783a6757",
    "source_type": "xlsx",
    "chunk_count": 117,
    "chunks": [
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_0",
        "sha256": "7cf1bb6de7dfdac7fd3feaffc0cabe2f01baa98c63bb3307b096de18f4c62ec2",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_1",
        "sha256": "13880f3151b3e9bb27ac2bcdb16f61ca09eaf7c66e9ad0cb0b5e5b88d69f1a0f",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_2",
        "sha256": "8891e8fd10e804ae4fd8c66d719c748feb6266b03aa64f1a7fce25f1fe0cb598",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_3",
        "sha256": "033dfaafb450dd183a7af2576eaf2aa64a7208f36bd9f56bf9ab723f61e81bb1",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_4",
        "sha256": "e59f1029a9a28737d392365fb6343010ce063229f62810a686e286012417cd4a",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_5",
        "sha256": "7e0edafdbdac79915500593e60bab47703d42e57dd3dbccc05fc7486dfde1818",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_6",
        "sha256": "f7b4ceb80336e8cb95adcdfb91942f274e268aa34341355247d0231c6473df51",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_7",
        "sha256": "2e3c4654bd6a62007f692ba01febd7390949334f233c4c09787c8b3af5704e0b",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_8",
        "sha256": "f5af0f5d11dfbd0854a596a78596213b14ea25209a3a1c8eb5b5848a13e24537",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_9",
        "sha256": "0b594d90e887f0a45e7c208355e13ba9801cfe7f2e825270207636c05584c6a2",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_10",
        "sha256": "b1c0de67769ec1e36d138e293dab62ddcd6eea183438eea309b94e5bbaf64447",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_11",
        "sha256": "7b7f838c2d7b06eb289c7beab16b16cd24ac02017c392f884370d0bc5e1135d7",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_12",
        "sha256": "1c0e08f27e471791b9a649f32309620da01019b3135edd1ec653223e6b805206",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_13",
        "sha256": "090c2b714aa864189ad8eab9b966fa90a69842cac8c26d1f4430ed1d860d1de0",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_14",
        "sha256": "e7601bd65121f2b0940afeea5d60038500d4112fd338a45341ff69f9e0a4c5e9",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_15",
        "sha256": "d66c7161231589a82aa6b304f74df91ebd24538223af500cb729fbaf74ed32bd",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_16",
        "sha256": "7631fb86a4a2d76e6031f7117264288b1f95441b94cdd9b30115ee4e2d411255",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_17",
        "sha256": "2fb2f537236479e75b2a3d12560d577d97cabdc52064f04637ac3f58c3024b05",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_18",
        "sha256": "6ec0ac148c6135d91b6ec010b45b8d9cead7b5a4511d7018125ee3af7e7a69dc",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_19",
        "sha256": "a81468d242651084980bad6e8e0afbd320c1bcadf96d6e278576ca83501d6c39",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_20",
        "sha256": "7f7601647f55e29fabfa923c7e06f73bac9a239a933446963ff84f8e3a4b2ef3",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_21",
        "sha256": "f4033694c3a1c6e17a405f0746fd36325f3323da9708b2cb7c42350ab8e98761",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_22",
        "sha256": "be18eba8f66690d0a714f97a181a9868f4afe9caeec7883255d978844cf4e845",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_23",
        "sha256": "e52d17359179a6df4f480519af365886580f0fce1087900857ba38abfd60611d",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      },
      {
        "chunk_id": "content\\model\\Shobu\\ac7070_qna.xlsx::chunk_24",
        "sha256": "bfbd0662fac6ec006bbbc1c5c13fb79e05561aa602dd3e0162a39db9dbce2cec",
        "heading": null,
        "chunking": "prose",
        "page_number": null
      }
    ]
  },
  {
    "document": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf",
    "sha256": "aed11959541cc0aec6b9777ce48adbb9d23cfc76ba8e909176aef049502bccbe",
    "source_type": "pdf",
    "chunk_count": 1018,
    "chunks": [
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_0",
        "sha256": "e1ae4325e5a5f62e098114ecd9a010edf0ffb33e52e133dd40229c8d6e8a73d3",
        "heading": null,
        "chunking": "prose",
        "page_number": 1
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_1",
        "sha256": "677b8e7035ee0a9481a32b318b2a6f6e73985da7985803bb1d88bfe5058eb7db",
        "heading": null,
        "chunking": "prose",
        "page_number": 2
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_2",
        "sha256": "7ca4171fbcef1751f7ba6c9341b227d2a5b9f66940b9253a5a11f32082a68044",
        "heading": null,
        "chunking": "prose",
        "page_number": 3
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_3",
        "sha256": "d8606c71852624995bc2654d504e9231892af9fde44bc3eeea2a5aec34b33571",
        "heading": null,
        "chunking": "prose",
        "page_number": 4
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_4",
        "sha256": "4ec2a87a6d6ac6d12db51db9258196297bd51bf8b7fe020705ecabec781fd7f3",
        "heading": null,
        "chunking": "prose",
        "page_number": 5
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_6",
        "sha256": "d18a9a3bba2a200a4e0f3d05a30b77e1982840240f7a05b6223161d255a53ef8",
        "heading": null,
        "chunking": "prose",
        "page_number": 6
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_7",
        "sha256": "9f527220321be5baf56fbb9664207cd82f2c7c2ef743f8c5ac389529cd415bc9",
        "heading": null,
        "chunking": "prose",
        "page_number": 7
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_8",
        "sha256": "6f03a1ccff7c66d9235a57cde8296388f78edadac6faa59bcf2bee07d42eb074",
        "heading": null,
        "chunking": "prose",
        "page_number": 8
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_9",
        "sha256": "7c465e81afe8d6a46dfc688b2ebb4333d5be8582fad5dd63c065867688eba6f9",
        "heading": null,
        "chunking": "prose",
        "page_number": 9
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_10",
        "sha256": "a0d8f44c5937321003c47544b7ab6c149e2e615b2da1b99b2d520c7526a5b388",
        "heading": null,
        "chunking": "prose",
        "page_number": 9
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_11",
        "sha256": "fdd673f3cf1d47c867f173452d063adaa909986b471ad17c2792ebe0ca281fc1",
        "heading": null,
        "chunking": "prose",
        "page_number": 10
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_12",
        "sha256": "532629cf28325702cbdc8effaed77c89b50de06ee3d4a3c652f8b7642dc49685",
        "heading": null,
        "chunking": "prose",
        "page_number": 11
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_14",
        "sha256": "c358d0570d4704f9c8980fa49ce529496b524b81ef35e558bdadee608d736022",
        "heading": null,
        "chunking": "prose",
        "page_number": 12
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_16",
        "sha256": "6e6662c4142ac769db3cd83a03a7b87978565e1ed821adf9244ad80c557e3573",
        "heading": null,
        "chunking": "prose",
        "page_number": 13
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_18",
        "sha256": "464e043cfe590d6f0391ceff7ce1dfb030fc8e0fe29c590b23834bc2f587c7a2",
        "heading": null,
        "chunking": "prose",
        "page_number": 14
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_19",
        "sha256": "820d02a6b4cdb132e6e65b5c6c4f6092eabda2538583f1f640f3d23b0ad5db64",
        "heading": null,
        "chunking": "prose",
        "page_number": 15
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_20",
        "sha256": "a4c30064241e986b345c94db76daa736b58bd77a5482eff9642056ac530639f8",
        "heading": null,
        "chunking": "prose",
        "page_number": 16
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_21",
        "sha256": "aaa8cee91d8c8662181a3a2010281e7a7ed10faf84bcc9922cb5c7f25d428f25",
        "heading": null,
        "chunking": "prose",
        "page_number": 17
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_22",
        "sha256": "4fc259f07f8c7a0773b1e12ab35cc4d5b233c5086180e78c533e0346862cf803",
        "heading": null,
        "chunking": "prose",
        "page_number": 17
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_23",
        "sha256": "701cc17a4f825d44930c05416759ac6dfe4cd42c3437220b490011f4f72e7b0d",
        "heading": null,
        "chunking": "prose",
        "page_number": 18
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_24",
        "sha256": "428925a7037eee62b2c6053c2763b7789e1b67589928e5723d480b9520adf962",
        "heading": null,
        "chunking": "prose",
        "page_number": 18
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_26",
        "sha256": "e856ec5af26db3a59c545299d886c9e004e70f2d8ca0f9121c786590055c05a3",
        "heading": null,
        "chunking": "prose",
        "page_number": 19
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_28",
        "sha256": "dd3c9a91aef4a3cd392d1af3da70f0206975d415a7dad3ab4df2f731cf96d31a",
        "heading": null,
        "chunking": "prose",
        "page_number": 20
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_29",
        "sha256": "8d865f64fa5def85560098a7b3d73a4705ef94520ad0e832428d2d0776358fec",
        "heading": null,
        "chunking": "prose",
        "page_number": 21
      },
      {
        "chunk_id": "content\\model\\Shobu\\Apeos C7070-C6570-C5570-C4570-C3570-C3070-C2570-CSO-FN-CED-362.pdf::chunk_30",
        "sha256": "3cf0186f601d22363a1e8bad8268c58e12199c5bbfc7d01296c4986b89291ef3",
        "heading": null,
        "chunking": "prose",
        "page_number": 22
      }
    ]
  }
]

```

---

### tailwind.config.js

```js
/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: "class",
  content: [
    "app/**/*.{ts,tsx,mdx}",
    "components/**/*.{ts,tsx}",
    "lib/**/*.{ts,tsx}",
    "content/**/*.{md,mdx}",
    "docs/**/*.{md,mdx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ["var(--font-inter)", "Inter", "ui-sans-serif", "system-ui"],
      },
      boxShadow: {
        subtle: "0 10px 30px -15px rgba(15, 23, 42, 0.25)",
      },
    },
  },
  plugins: [],
};

```

---

### tests/playwright/rbac.spec.ts

```ts
import { expect, test } from "@playwright/test";
import type { Page } from "@playwright/test";
import path from "node:path";
import fs from "node:fs/promises";

const mailboxDir = process.env.AUTH_DEBUG_MAILBOX_DIR ?? "./logs/mailbox";
const adminEmail = process.env.PLAYWRIGHT_ADMIN_EMAIL ?? "admin@atticus.local";
const reviewerEmail =
  process.env.PLAYWRIGHT_REVIEWER_EMAIL ?? "glossary.author@seed.atticus";

async function waitForMagicLink(email: string, timeoutMs = 15_000): Promise<string> {
  const deadline = Date.now() + timeoutMs;
  const filePath = path.resolve(mailboxDir, `${email.toLowerCase()}.txt`);
  while (Date.now() < deadline) {
    try {
      const contents = await fs.readFile(filePath, "utf-8");
      const lines = contents
        .split("\n")
        .map((line) => line.trim())
        .filter(Boolean);
      const last = lines.at(-1);
      if (last && last.startsWith("http")) {
        return last;
      }
    } catch (error) {
      // file might not exist yet
    }
    await new Promise((resolve) => setTimeout(resolve, 500));
  }
  throw new Error(`Magic link for ${email} not found in ${mailboxDir}`);
}

test.describe.configure({ mode: "serial" });

test.beforeEach(async ({ context }) => {
  await context.clearCookies();
});

async function signInWithMagicLink(page: Page, email: string) {
  await page.goto("/signin");
  await page.getByLabel("Work email").fill(email);
  await page.getByRole("button", { name: /magic link/i }).click();
  const magicLink = await waitForMagicLink(email);
  await page.goto(magicLink);
  await page.waitForLoadState("networkidle");
}

test("redirects unauthenticated users away from admin dashboard", async ({ page }) => {
  const response = await page.goto("/admin");
  expect(response?.status()).toBeLessThan(500);
  await expect(page).toHaveURL(/\/signin/);
  await expect(page.getByRole("heading", { name: "Sign in to Atticus" })).toBeVisible();
});

test("restricts reviewer capabilities on the admin console", async ({ page }) => {
  await signInWithMagicLink(page, reviewerEmail);
  await page.goto("/admin");
  await expect(page).toHaveURL(/\/admin$/);

  await expect(page.getByRole("tab", { name: /uncertain/i })).toBeVisible();
  await page.getByRole("tab", { name: /glossary/i }).click();
  await expect(page.getByText("Reviewer access is read-only")).toBeVisible();
  await expect(page.getByRole("button", { name: /save entry/i })).toBeDisabled();

  const escalateResponse = await page.request.post("/api/admin/uncertain/example/escalate");
  expect(escalateResponse.status()).toBe(403);
});

test("allows admins to load the glossary panel after magic link sign-in", async ({ page }) => {
  await signInWithMagicLink(page, adminEmail);
  await page.waitForURL("**/admin");
  await expect(page.getByRole("heading", { name: "Operations console" })).toBeVisible();

  const pendingRow = page.getByRole("cell", { name: /toner replacement alerts/i }).first();
  await expect(pendingRow).toBeVisible();
  await page.getByRole("button", { name: "Review" }).first().click();
  await page.getByPlaceholder("What would you ask next?").fill("Confirm toner serial numbers.");
  await page.getByRole("button", { name: "Save follow-up" }).click();
  await expect(page.getByText("Follow-up prompt saved.")).toBeVisible();
  await page.getByRole("button", { name: "Approve" }).click();
  await expect(page.getByText("Chat approved and removed from the uncertain queue.")).toBeVisible();
  await expect(page.getByRole("cell", { name: /All caught up/i })).toBeVisible();

  await page.getByRole("tab", { name: /glossary/i }).click();
  await expect(page.getByText("Add glossary entry")).toBeVisible();

  const newTerm = `Playwright QA ${Date.now()}`;
  await page.getByLabel("Term").fill(newTerm);
  await page.getByLabel("Definition").fill("Confidence gate coverage from Playwright");
  await page.getByLabel("Synonyms").fill("qa-term, reviewer-check");
  await page.getByLabel("Status").selectOption({ value: "PENDING" });
  await page.getByRole("button", { name: "Save entry" }).click();

  await expect(page.getByText("Entry created successfully.")).toBeVisible();
  const createdRow = page.locator("tr", { hasText: newTerm }).first();
  await expect(createdRow).toBeVisible();

  await createdRow.getByRole("button", { name: "Delete" }).click();
  await expect(page.getByText("Entry deleted.")).toBeVisible();
  await expect(page.locator("tr", { hasText: newTerm })).toHaveCount(0);
});

```

---

### tests/test_admin_route.py

```python
from __future__ import annotations

import json
from pathlib import Path

import pytest


def test_admin_dictionary_round_trip(tmp_path: Path, monkeypatch: pytest.MonkeyPatch) -> None:
    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()
    dictionary_path = tmp_path / "dictionary.json"
    monkeypatch.setenv("DICTIONARY_PATH", str(dictionary_path))
    monkeypatch.setenv("ADMIN_API_TOKEN", "test-admin-token")
    settings = config_module.load_settings()
    assert settings.dictionary_path == dictionary_path

    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    with TestClient(api_main.app) as client:
        payload = {
            "entries": [{"term": "Managed print", "synonyms": ["MPS", "Print-as-a-service"]}]
        }
        response = client.post(
            "/admin/dictionary", json=payload, headers={"X-Admin-Token": "test-admin-token"}
        )
        assert response.status_code == 200
        assert response.json()["entries"][0]["term"] == "Managed print"

        retrieved = client.get("/admin/dictionary", headers={"X-Admin-Token": "test-admin-token"})
        assert retrieved.status_code == 200
        data = retrieved.json()
        assert data["entries"]
        entry = data["entries"][0]
        assert entry["term"] == "Managed print"
        assert entry["synonyms"] == ["MPS", "Print-as-a-service"]

    raw_file = json.loads(dictionary_path.read_text(encoding="utf-8"))
    assert raw_file[0]["synonyms"] == ["MPS", "Print-as-a-service"]


def test_admin_dictionary_requires_token(tmp_path: Path, monkeypatch: pytest.MonkeyPatch) -> None:
    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()
    dictionary_path = tmp_path / "dictionary.json"
    monkeypatch.setenv("DICTIONARY_PATH", str(dictionary_path))
    monkeypatch.setenv("ADMIN_API_TOKEN", "test-admin-token")
    settings = config_module.load_settings()
    assert settings.dictionary_path == dictionary_path

    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    with TestClient(api_main.app) as client:
        response = client.get("/admin/dictionary")
        assert response.status_code == 401
        data = response.json()
        assert data["error"] == "unauthorized"
        assert data["request_id"]


def test_admin_dictionary_rejects_invalid_token(
    tmp_path: Path, monkeypatch: pytest.MonkeyPatch
) -> None:
    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()
    dictionary_path = tmp_path / "dictionary.json"
    monkeypatch.setenv("DICTIONARY_PATH", str(dictionary_path))
    monkeypatch.setenv("ADMIN_API_TOKEN", "test-admin-token")
    settings = config_module.load_settings()
    assert settings.dictionary_path == dictionary_path

    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    with TestClient(api_main.app) as client:
        response = client.get("/admin/dictionary", headers={"X-Admin-Token": "wrong-token"})
        assert response.status_code == 403
        data = response.json()
        assert data == {"detail": "Invalid admin token."}

```

---

### tests/test_api_version.py

```python
"""Ensure API metadata stays aligned with the repository VERSION file."""

from __future__ import annotations

from pathlib import Path

from api.main import app


def test_api_version_matches_repo_version() -> None:
    version_path = Path(__file__).resolve().parents[1] / "VERSION"
    expected = version_path.read_text(encoding="utf-8").strip()
    assert app.version == expected

```

---

### tests/test_chat_route.py

```python
import pytest
from typing import Any


def test_chat_route_or_skip() -> None:
    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    client = TestClient(api_main.app)
    try:
        r = client.post("/ask", json={"question": "ping"})
    except FileNotFoundError as exc:
        pytest.skip(f"index not built: {exc}")
        return
    except ValueError as exc:
        pytest.skip(f"vector store unavailable: {exc}")
        return

    assert r.status_code == 200
    data: dict[str, Any] = r.json()
    assert data["request_id"]
    assert r.headers.get("X-Request-ID") == data["request_id"]
    assert "answer" in data
    assert "sources" in data
    assert isinstance(data["sources"], list)
    if data["sources"]:
        first = data["sources"][0]
        assert {"path"}.issubset(first)
        assert "chunkId" in first
    assert isinstance(data["confidence"], (float, int))
    assert isinstance(data["should_escalate"], bool)


def test_chat_route_rejects_placeholder_or_skip() -> None:
    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    client = TestClient(api_main.app)
    try:
        r = client.post("/ask", json={"question": "string"})
    except FileNotFoundError as exc:
        pytest.skip(f"index not built: {exc}")
        return
    except ValueError as exc:
        pytest.skip(f"vector store unavailable: {exc}")
        return

    assert r.status_code == 400
    data = r.json()
    assert data["error"] == "bad_request"
    assert "Provide a real question" in data["detail"]
    assert data["request_id"]
    assert r.headers.get("X-Request-ID") == data["request_id"]


def test_chat_route_rate_limit(monkeypatch) -> None:
    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()
    monkeypatch.setenv("RATE_LIMIT_REQUESTS", "1")
    monkeypatch.setenv("RATE_LIMIT_WINDOW_SECONDS", "60")

    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient

    client = TestClient(api_main.app)
    try:
        first = client.post("/ask", json={"question": "ping"})
    except FileNotFoundError as exc:
        pytest.skip(f"index not built: {exc}")
        return
    except ValueError as exc:
        pytest.skip(f"vector store unavailable: {exc}")
        return

    if first.status_code != 200:
        pytest.skip("first request did not succeed; skipping rate limit assertion")
        return

    second = client.post("/ask", json={"question": "another"})
    assert second.status_code == 429
    data = second.json()
    assert data["error"] == "rate_limited"
    assert "request_id" in data

```

---

### tests/test_chunker.py

```python
from pathlib import Path

import sys
import types

from atticus.config import AppSettings

psycopg_stub = types.ModuleType("psycopg")
psycopg_stub.rows = types.SimpleNamespace(dict_row=None)
psycopg_stub.types = types.SimpleNamespace(json=types.SimpleNamespace(Json=lambda value: value))
psycopg_stub.connect = lambda *args, **kwargs: (_ for _ in ()).throw(
    RuntimeError("psycopg stubbed")
)
sys.modules.setdefault("psycopg", psycopg_stub)

pgvector_stub = types.ModuleType("pgvector")
pgvector_psycopg_stub = types.ModuleType("pgvector.psycopg")


class _Vector(list):
    def __init__(self, values):
        super().__init__(values)


pgvector_psycopg_stub.register_vector = lambda conn: None
pgvector_psycopg_stub.Vector = _Vector
sys.modules.setdefault("pgvector", pgvector_stub)
sys.modules["pgvector.psycopg"] = pgvector_psycopg_stub

ingest_pkg = types.ModuleType("ingest")
ingest_pkg.__path__ = [str(Path("ingest"))]
sys.modules.setdefault("ingest", ingest_pkg)


from ingest.chunker import chunk_document
from ingest.models import ParsedDocument, ParsedSection


def test_ced_chunker_deduplicates_and_labels() -> None:
    settings = AppSettings()
    sections = [
        ParsedSection(text="Paragraph alpha beta.", heading="Intro"),
        ParsedSection(text="Paragraph alpha beta.", heading="Intro"),
        ParsedSection(
            text="A | B\nC | D",
            heading="Table 1",
            extra={"is_table": "true", "table_headers": "col1 | col2"},
        ),
        ParsedSection(text="See warranty schedule.", heading="Footnote 1"),
    ]
    document = ParsedDocument(
        source_path=Path("/tmp/doc.txt"),
        source_type="text",
        sections=sections,
    )

    chunks = chunk_document(document, settings)

    # Duplicate prose section should be deduped by SHA-256 hash
    prose_chunks = [chunk for chunk in chunks if chunk.extra.get("chunking") == "prose"]
    assert len(prose_chunks) == 1

    # Table chunk should serialise rows and include metadata
    table_chunks = [chunk for chunk in chunks if chunk.extra.get("chunking") == "table_row"]
    assert table_chunks, "expected table row chunks"
    first_table = table_chunks[0]
    assert first_table.extra["table_headers"] == "col1 | col2"
    assert first_table.extra["chunk_sha"] == first_table.sha256

    # Footnote chunk retains chunking label and SHA metadata
    footnote = next(chunk for chunk in chunks if chunk.extra.get("chunking") == "footnote")
    assert footnote.extra["chunk_sha"] == footnote.sha256


def test_chunker_assigns_traceable_metadata() -> None:
    settings = AppSettings(chunk_target_tokens=64, chunk_min_tokens=0)
    sections = [
        ParsedSection(
            text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod.",
            heading="Overview",
            breadcrumbs=["Section 1"],
        ),
    ]
    document = ParsedDocument(
        source_path=Path("/tmp/manual.txt"),
        source_type="manual",
        sections=sections,
    )

    chunks = chunk_document(document, settings)
    assert len(chunks) >= 1
    for chunk in chunks:
        assert chunk.extra["chunk_sha"] == chunk.sha256
        assert "breadcrumbs" in chunk.extra
        assert chunk.extra.get("source_type") == "manual"

```

---

### tests/test_citation_dedupe.py

```python
from __future__ import annotations

from retriever.citation_utils import dedupe_citations


def test_dedupe_by_path_and_pages_simple_dicts() -> None:
    items = [
        {"source_path": "docs/Guide-A.pdf", "page_range": [10, 11]},
        {"source_path": "docs/Guide-A.pdf", "page_range": [10, 11]},
        {"source_path": "docs/Guide-A.pdf", "page_range": [12]},
        {"source_path": "docs/Guide-B.pdf", "page_range": [1]},
        {"source_path": "docs/guide-a.PDF", "page_range": [12]},
    ]
    out = dedupe_citations(items)
    assert len(out) == 3
    assert out[0]["page_range"] == [10, 11]
    assert out[1]["page_range"] == [12]
    assert out[2]["source_path"].endswith("Guide-B.pdf")


class Obj:
    def __init__(self, source_path: str, page_range: object) -> None:
        self.source_path = source_path
        self.page_range = page_range


def test_dedupe_supports_objects_and_sets_pages() -> None:
    items = [
        Obj("docs/Ref.pdf", {2, 3}),
        Obj("docs/Ref.pdf", [3, 2]),
        Obj("docs/Ref.pdf", (4,)),
    ]
    out = dedupe_citations(items)
    assert len(out) == 2
    assert isinstance(out[0], Obj)

```

---

### tests/test_config_reload.py

```python
from pathlib import Path
import importlib
import os
import sys
import time

ROOT = Path(__file__).resolve().parents[1]
if str(ROOT) not in sys.path:
    sys.path.insert(0, str(ROOT))

config_module = importlib.import_module("atticus.config")


def test_load_settings_refreshes_env(tmp_path, monkeypatch):
    # Prepare isolated temp repo
    env_path = tmp_path / ".env"
    env_path.write_text("OPENAI_API_KEY=first-key\n", encoding="utf-8")
    (tmp_path / "config.yaml").write_text("{}\n", encoding="utf-8")

    # Make sure no ambient OS key can override our .env
    monkeypatch.delenv("OPENAI_API_KEY", raising=False)
    # Tell the app we want .env to win
    monkeypatch.setenv("ATTICUS_ENV_PRIORITY", "env")

    # Optional: if your loader supports a DOTENV_PATH override, pin it
    monkeypatch.setenv("DOTENV_PATH", str(env_path))

    old_cwd = os.getcwd()
    try:
        os.chdir(tmp_path)
        # Reload module so it (re)reads env with our settings
        cfg = importlib.reload(config_module)
        cfg.reset_settings_cache()

        first = cfg.load_settings()
        assert first.openai_api_key == "first-key"

        # Update .env and ensure mtime changes
        time.sleep(1.1)
        env_path.write_text("OPENAI_API_KEY=second-key\n", encoding="utf-8")
        os.utime(env_path, None)

        # Either reset cache or reload to force re-read
        cfg.reset_settings_cache()
        second = cfg.load_settings()
        assert second.openai_api_key == "second-key"

    finally:
        os.chdir(old_cwd)
        importlib.reload(config_module)
        config_module.reset_settings_cache()

```

---

### tests/test_contact_route.py

```python
# tests/test_contact_route.py
import pytest


# Fixture lives in THIS file (no conftest.py needed)
@pytest.fixture
def patch_smtp(monkeypatch):
    class FakeSMTP:
        def __init__(self, *a, **k):
            pass

        def __enter__(self):
            return self

        def __exit__(self, *a):
            return False

        def connect(self, *a, **k):
            pass

        def ehlo(self, *a, **k):
            pass

        def starttls(self, *a, **k):
            pass

        def login(self, *a, **k):
            pass

        def sendmail(self, *a, **k):
            pass

        def send_message(self, *a, **k):
            pass

        def quit(self, *a, **k):
            pass

        def close(self, *a, **k):
            pass

    # Patch both import styles used by mailer
    for t in [
        "atticus.notify.mailer.smtplib.SMTP",
        "atticus.notify.mailer.SMTP",
        "atticus.notify.mailer.smtplib.SMTP_SSL",
        "atticus.notify.mailer.SMTP_SSL",
    ]:
        try:
            monkeypatch.setattr(t, FakeSMTP, raising=True)
        except Exception:
            pass


def _mk_client():
    api_main = pytest.importorskip("api.main")
    TestClient = pytest.importorskip("fastapi.testclient").TestClient
    return TestClient(api_main.app), api_main.app


def test_contact_route_smoke_or_skip(monkeypatch, patch_smtp):
    client = app = None
    # Minimal env so startup doesn't bail
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "1025")
    monkeypatch.setenv("SMTP_USER", "user")
    monkeypatch.setenv("SMTP_PASS", "pass")
    monkeypatch.setenv("SMTP_FROM", "atticus-escalations@agentk.fyi")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    try:
        client, app = _mk_client()
    except Exception as e:
        pytest.skip(f"api not importable yet: {e}")
        return

    known = {r.path for r in app.routes}
    for path in ("/contact", "/api/contact"):
        if path not in known:
            continue
        r = client.post(path, json={"reason": "test"})
        if r.status_code in (200, 202):
            try:
                data = r.json()
            except Exception:
                data = {}
            assert data.get("status") in {None, "accepted", "ok", "queued", "success"}
            return

    pytest.fail(f"No working contact endpoint. routes={sorted(known)}")


def test_contact_route_with_transcript_or_skip(monkeypatch, patch_smtp):
    client = app = None
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "1025")
    monkeypatch.setenv("SMTP_USER", "user")
    monkeypatch.setenv("SMTP_PASS", "pass")
    monkeypatch.setenv("SMTP_FROM", "atticus-escalations@agentk.fyi")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    try:
        client, app = _mk_client()
    except Exception as e:
        pytest.skip(f"api not importable yet: {e}")
        return

    payload = {"reason": "test_with_transcript", "transcript": ["Q: hi", "A: hello"]}
    known = {r.path for r in app.routes}
    for path in ("/contact", "/api/contact"):
        if path not in known:
            continue
        r = client.post(path, json=payload)
        if r.status_code in (200, 202):
            try:
                data = r.json()
            except Exception:
                data = {}
            assert data.get("status") in {"accepted", "ok", "queued", "success", None}
            return

    pytest.fail("No contact endpoint accepted the request.")


def test_contact_route_handles_mailer_failure(monkeypatch, patch_smtp):
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "1025")
    monkeypatch.setenv("SMTP_FROM", "atticus-escalations@agentk.fyi")
    monkeypatch.setenv("CONTACT_EMAIL", "support@example.com")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    try:
        client, _app = _mk_client()
    except Exception as e:
        pytest.skip(f"api not importable yet: {e}")
        return

    notify_module = pytest.importorskip("atticus.notify")

    def boom(*_args, **_kwargs):
        raise notify_module.EscalationDeliveryError("boom", reason="connection_error")

    monkeypatch.setattr("api.routes.contact.send_escalation", boom, raising=True)

    response = client.post("/contact", json={"reason": "failing"})

    assert response.status_code == 502
    data = response.json()
    assert data["error"] == "internal_error"
    assert "Unable to deliver" in data["detail"]
    assert data["request_id"]

```

---

### tests/test_environment_diagnostics.py

```python
"""Tests for environment diagnostics helper."""

from __future__ import annotations

import hashlib
from pathlib import Path

import pytest

from atticus import config as config_module


@pytest.fixture(autouse=True)
def reset_settings_cache():
    config_module.reset_settings_cache()
    yield
    config_module.reset_settings_cache()


def test_environment_diagnostics_reports_sources(
    tmp_path: Path, monkeypatch: pytest.MonkeyPatch
) -> None:
    env_file = tmp_path / ".env"
    env_file.write_text(
        """
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/atticus
OPENAI_API_KEY=sk-debug
PGVECTOR_LISTS=256
""".strip()
        + "\n",
        encoding="utf-8",
    )

    config_path = tmp_path / "config.yaml"
    config_path.write_text("pgvector_lists: 128\n", encoding="utf-8")

    monkeypatch.chdir(tmp_path)
    monkeypatch.delenv("DATABASE_URL", raising=False)
    monkeypatch.delenv("OPENAI_API_KEY", raising=False)
    monkeypatch.setenv("SMTP_USER", "smtp-user")

    diagnostics = config_module.environment_diagnostics()

    assert diagnostics["env_file"]["path"] == str(env_file)
    assert diagnostics["env_file"]["exists"] is True
    assert diagnostics["config_file"]["path"] == str(config_path)
    assert diagnostics["config_file"]["exists"] is True

    secrets = diagnostics["secrets"]
    db_secret = secrets["database_url"]
    assert db_secret["source"] == ".env:DATABASE_URL"
    expected_fp = hashlib.sha256(
        b"postgresql://postgres:postgres@localhost:5432/atticus"
    ).hexdigest()[:12]
    assert db_secret["fingerprint"] == expected_fp
    assert secrets["openai_api_key"]["source"] == ".env:OPENAI_API_KEY"
    assert secrets["smtp_user"]["source"] == "os.environ:SMTP_USER"
    assert secrets["smtp_user"]["defined"] is True

    settings_snapshot = diagnostics["settings"]
    assert settings_snapshot["pgvector_lists"]["value"] == 256
    assert settings_snapshot["pgvector_lists"]["source"] == ".env:PGVECTOR_LISTS"

    # Ensure secrets are excluded from the public settings snapshot.
    assert "database_url" not in settings_snapshot
    assert "openai_api_key" not in settings_snapshot

    overrides = diagnostics["overrides"]
    assert "SMTP_USER" in overrides["environment"]
    assert "DATABASE_URL" in overrides[".env"]

```

---

### tests/test_error_schema.py

```python
import pytest


@pytest.fixture
def app_with_settings(monkeypatch):
    api_main = pytest.importorskip("api.main")

    # Provide minimal SMTP configuration so startup validations succeed consistently.
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "1025")
    monkeypatch.setenv("SMTP_FROM", "atticus-escalations@agentk.fyi")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    return api_main.app


def test_validation_error_schema(app_with_settings):
    TestClient = pytest.importorskip("fastapi.testclient").TestClient
    with TestClient(app_with_settings) as client:
        response = client.post("/contact", json={})

    assert response.status_code == 422
    payload = response.json()
    assert payload["error"] == "validation_error"
    assert "reason" in payload.get("fields", {})
    assert payload["request_id"]
    assert response.headers.get("X-Request-ID") == payload["request_id"]


def test_unauthorized_error_schema(app_with_settings):
    fastapi = pytest.importorskip("fastapi")
    app = app_with_settings

    async def raise_unauthorized():
        raise fastapi.HTTPException(status_code=401, detail="Auth required")

    if not any(getattr(route, "path", None) == "/__unauthorized" for route in app.routes):
        app.add_api_route("/__unauthorized", raise_unauthorized)

    TestClient = pytest.importorskip("fastapi.testclient").TestClient
    with TestClient(app) as client:
        response = client.get("/__unauthorized")
    assert response.status_code == 401
    payload = response.json()
    assert payload["error"] == "unauthorized"
    assert payload["detail"] == "Auth required"
    assert payload["request_id"]

```

---

### tests/test_eval_runner.py

```python
"""Tests for evaluation runner artifact generation."""

from __future__ import annotations


from eval.runner import _write_outputs


def test_write_outputs_creates_csv_json_and_html(tmp_path):
    rows = [
        {
            "query": "What is the toner yield?",
            "nDCG@10": 0.8123,
            "Recall@50": 0.9,
            "MRR": 0.75,
            "top_document": "/docs/ced/toner.pdf",
        }
    ]
    metrics = {"nDCG@10": 0.8123, "Recall@50": 0.9, "MRR": 0.75}

    csv_path, json_path, html_path = _write_outputs(tmp_path, rows, metrics)

    assert csv_path.exists()
    assert json_path.exists()
    assert html_path.exists()

    html = html_path.read_text(encoding="utf-8")
    assert "Atticus Evaluation Summary" in html
    assert "What is the toner yield?" in html
    assert "metrics" in html.lower()
    assert "0.8123" in html
    assert "0.9" in html

```

---

### tests/test_hashing.py

```python
from pathlib import Path


def test_sha256_text_and_file(tmp_path: Path):
    from atticus.utils.hashing import sha256_text, sha256_file

    text = "hello world"
    expected = "b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9"
    assert sha256_text(text) == expected

    f = tmp_path / "sample.txt"
    f.write_text(text, encoding="utf-8")
    assert sha256_file(f) == expected

```

---

### tests/test_ingestion_retrieval_integration.py

```python
"""Integration coverage for pgvector-backed ingestion and retrieval."""

from __future__ import annotations

import copy
import json
import logging
from pathlib import Path
from typing import Any
from collections.abc import Iterable, Sequence

import pytest

from atticus.config import AppSettings, load_manifest, reset_settings_cache
from atticus.vector_db import StoredChunk
from ingest.pipeline import IngestionOptions, ingest_corpus
from retriever.service import answer_question
from retriever.vector_store import VectorStore


class InMemoryPgVectorRepository:
    """In-memory substitute for PgVectorRepository used in tests."""

    _state: dict[str, dict[str, Any]] = {}

    def __init__(self, settings: AppSettings) -> None:
        self.settings = settings
        key = settings.database_url or "default"
        bucket = self._state.setdefault(
            key,
            {
                "documents": {},
                "chunks": {},
            },
        )
        self._documents: dict[str, dict[str, Any]] = bucket["documents"]
        self._chunks: dict[str, StoredChunk] = bucket["chunks"]

    @classmethod
    def reset(cls) -> None:
        cls._state.clear()

    def ensure_schema(self) -> None:  # pragma: no cover - behaviour is implicit in memory
        return

    def fetch_document(self, source_path: str) -> dict[str, Any] | None:
        document = self._documents.get(source_path)
        if not document:
            return None
        return {
            "document_id": document["document_id"],
            "sha256": document["sha256"],
            "source_type": document.get("source_type"),
            "chunk_count": len(document.get("chunks", ())),
        }

    def fetch_chunks_for_source(self, source_path: str) -> list[StoredChunk]:
        document = self._documents.get(source_path)
        if not document:
            return []
        return [copy.deepcopy(chunk) for chunk in document.get("chunks", [])]

    def load_all_chunk_metadata(self) -> list[StoredChunk]:
        return [copy.deepcopy(chunk) for chunk in self._chunks.values()]

    def replace_document(
        self,
        *,
        document_id: str,
        source_path: str,
        sha256: str,
        source_type: str | None,
        chunks: Sequence[StoredChunk],
        ingest_time: str,
    ) -> None:
        stored_chunks = [copy.deepcopy(chunk) for chunk in chunks]
        for chunk in stored_chunks:
            if chunk.embedding is None:
                raise ValueError(f"Chunk {chunk.chunk_id} missing embedding")
        self._documents[source_path] = {
            "document_id": document_id,
            "sha256": sha256,
            "source_type": source_type,
            "ingested_at": ingest_time,
            "chunks": stored_chunks,
        }
        for chunk in stored_chunks:
            self._chunks[chunk.chunk_id] = chunk

    def query_similar_chunks(
        self,
        embedding: Sequence[float],
        *,
        limit: int,
        probes: int | None = None,
    ) -> list[dict[str, Any]]:
        def dot_product(lhs: Iterable[float], rhs: Iterable[float]) -> float:
            return sum(float(a) * float(b) for a, b in zip(lhs, rhs, strict=False))

        results: list[dict[str, Any]] = []
        for chunk in self._chunks.values():
            if chunk.embedding is None:
                continue
            similarity = dot_product(chunk.embedding, embedding)
            distance = max(0.0, 1.0 - similarity)
            results.append(
                {
                    "chunk_id": chunk.chunk_id,
                    "document_id": chunk.document_id,
                    "source_path": chunk.source_path,
                    "text": chunk.text,
                    "metadata": dict(chunk.extra),
                    "page_number": chunk.page_number,
                    "section": chunk.section,
                    "distance": distance,
                }
            )
        results.sort(key=lambda row: row.get("distance", 1.0))
        return results[:limit]

    def truncate(self) -> None:
        self._documents.clear()
        self._chunks.clear()


@pytest.fixture(autouse=True)
def _patch_pgvector(monkeypatch: pytest.MonkeyPatch) -> None:
    InMemoryPgVectorRepository.reset()
    monkeypatch.setattr(
        "ingest.pipeline.PgVectorRepository", InMemoryPgVectorRepository, raising=False
    )
    monkeypatch.setattr(
        "atticus.vector_db.PgVectorRepository", InMemoryPgVectorRepository, raising=False
    )
    monkeypatch.setattr(
        "retriever.vector_store.PgVectorRepository", InMemoryPgVectorRepository, raising=False
    )
    yield
    InMemoryPgVectorRepository.reset()


@pytest.fixture
def test_settings(tmp_path: Path, monkeypatch: pytest.MonkeyPatch) -> AppSettings:
    reset_settings_cache()
    base = tmp_path
    monkeypatch.setenv(
        "DATABASE_URL", "postgresql://postgres:postgres@localhost:5432/test_ingestion"
    )
    settings = AppSettings(
        content_dir=base / "content",
        indices_dir=base / "indices",
        snapshots_dir=base / "indices" / "snapshots",
        manifest_path=base / "indices" / "manifest.json",
        metadata_path=base / "indices" / "index_metadata.json",
        logs_path=base / "logs" / "app.jsonl",
        errors_path=base / "logs" / "errors.jsonl",
        evaluation_runs_dir=base / "eval",
        embed_dimensions=128,
        chunk_target_tokens=48,
        chunk_min_tokens=0,
        chunk_overlap_tokens_setting=8,
        top_k=5,
        confidence_threshold=0.4,
    )
    monkeypatch.setattr(AppSettings, "timestamp", lambda self: "2025-02-01T12:00:00")
    yield settings
    reset_settings_cache()


def _write_sample_document(path: Path) -> None:
    path.parent.mkdir(parents=True, exist_ok=True)
    path.write_text(
        "Atticus printers support up to 1200 x 1200 dpi resolution.\n"
        "Recommended duty cycle is 5,000 pages per month.",
        encoding="utf-8",
    )


def test_ingest_corpus_creates_manifest_and_metadata(test_settings: AppSettings) -> None:
    document_path = test_settings.content_dir / "catalog" / "spec.txt"
    _write_sample_document(document_path)

    summary = ingest_corpus(settings=test_settings, options=IngestionOptions(paths=[document_path]))

    assert summary.documents_processed == 1
    assert summary.chunks_indexed > 0
    assert Path(summary.manifest_path).exists()
    assert Path(summary.snapshot_path).exists()

    manifest = load_manifest(test_settings.manifest_path)
    assert manifest is not None
    record = manifest.documents.get(str(document_path))
    assert record is not None
    assert int(record.get("chunk_count", 0)) == summary.chunks_indexed

    metadata_payload = json.loads(test_settings.metadata_path.read_text(encoding="utf-8"))
    assert metadata_payload, "metadata snapshot should contain chunks"
    first_chunk = metadata_payload[0]
    assert first_chunk["extra"]["chunk_sha"] == first_chunk["sha256"]
    assert first_chunk["extra"]["source_type"] == "text"


def test_retrieval_pipeline_answers_question(test_settings: AppSettings) -> None:
    document_path = test_settings.content_dir / "catalog" / "capabilities.txt"
    _write_sample_document(document_path)

    ingest_corpus(settings=test_settings, options=IngestionOptions(paths=[document_path]))

    store = VectorStore(test_settings, logging.getLogger("atticus.test"))
    results = store.search("What resolution do printers support?", top_k=3, hybrid=True)
    assert results
    top_result = results[0]
    assert top_result.source_path == str(document_path)
    assert top_result.metadata.get("chunking") == "prose"

    answer = answer_question(
        "Summarise the supported print resolution.",
        settings=test_settings,
        logger=logging.getLogger("atticus.test"),
    )
    assert answer.citations, "expected citations in answer"
    assert any(
        "resolution" in cite.source_path or "capabilities" in cite.source_path
        for cite in answer.citations
    )
    assert answer.response
    assert answer.confidence >= 0.4
    assert answer.should_escalate is False

```

---

### tests/test_mailer.py

```python
from __future__ import annotations

import pytest


def test_mailer_import_or_skip():
    try:
        from atticus.notify.mailer import send_escalation  # noqa: F401
    except Exception as e:
        pytest.skip(f"mailer not implemented yet: {e}")


def test_send_escalation_smoke(monkeypatch):
    # Arrange: set minimal SMTP env so code paths that read env won't bail
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "1025")
    monkeypatch.setenv("SMTP_USER", "user")
    monkeypatch.setenv("SMTP_PASS", "pass")
    monkeypatch.setenv("SMTP_FROM", "atticus-escalations@agentk.fyi")
    monkeypatch.setenv("CONTACT_EMAIL", "support@example.com")
    monkeypatch.setenv("SMTP_ALLOW_LIST", "support@example.com,atticus-escalations@agentk.fyi")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    mailer = pytest.importorskip("atticus.notify.mailer")

    created: list[FakeSMTP] = []

    class FakeSMTP:
        def __init__(self, host, port, timeout=None):
            # Assert the code is wiring host/port correctly
            assert host == "smtp.test.local"
            assert str(port) in ("1025", 1025)
            self.started_tls = False
            self.logged_in = False
            self.sent = False
            self.timeout = timeout
            self.message = None
            created.append(self)

        # If your code uses context manager: with smtplib.SMTP(...) as s:
        def __enter__(self):
            return self

        def __exit__(self, exc_type, exc, tb):
            return False

        def ehlo(self):
            pass

        # Real code often passes an ssl context
        def starttls(self, context=None):
            self.started_tls = True

        def login(self, u, p):
            # Should be called if SMTP_USER is set
            assert u == "user" and p == "pass"
            self.logged_in = True

        # Some code uses send_message; some uses sendmail
        def send_message(self, msg):
            assert msg["From"]
            assert msg["To"]
            assert msg["Subject"] is not None
            self.sent = True
            self.message = msg.get_content()

        def sendmail(self, a, b, c):
            # Accept either API
            self.sent = True

        def quit(self):
            pass

    # Patch the exact lookup site: atticus.notify.mailer.smtplib.SMTP
    monkeypatch.setattr("atticus.notify.mailer.smtplib.SMTP", FakeSMTP, raising=True)

    # Act: call your function
    trace = {
        "user_id": "user-123",
        "request_id": "req-abc",
        "top_documents": [{"chunk_id": "chunk-1", "score": 0.8, "source_path": "doc.pdf"}],
        "question": "Explain toner yield",
    }
    result = mailer.send_escalation("Unit Test", "body", trace=trace)

    # Assert: whatever your mailer returns; at least it shouldn't raise
    # If your function returns None, just assert True
    assert (
        result is None
        or result is True
        or (isinstance(result, dict) and result.get("status") in ("ok", "dry-run"))
    )
    assert created, "SMTP client should be instantiated"
    sent_client = created[-1]
    assert sent_client.sent
    assert sent_client.message is not None
    assert "Trace Payload" in sent_client.message
    assert "chunk-1" in sent_client.message


def test_send_escalation_dry_run(monkeypatch):
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "2525")
    monkeypatch.setenv("SMTP_FROM", "atticus-dry-run@example.com")
    monkeypatch.setenv("CONTACT_EMAIL", "sales@example.com")
    monkeypatch.setenv("SMTP_DRY_RUN", "1")
    monkeypatch.setenv("SMTP_ALLOW_LIST", "sales@example.com,atticus-dry-run@example.com")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    mailer = pytest.importorskip("atticus.notify.mailer")

    def fail_connect(*_args, **_kwargs):
        raise AssertionError("SMTP connection should not be attempted in dry-run mode")

    monkeypatch.setattr("atticus.notify.mailer.smtplib.SMTP", fail_connect, raising=True)

    result = mailer.send_escalation("Dry Run", "body", trace={"request_id": "req-1"})

    assert isinstance(result, dict)
    assert result.get("status") == "dry-run"
    assert result.get("host") == "smtp.test.local"
    assert str(result.get("port")) == "2525"


def test_send_escalation_raises_on_connection_error(monkeypatch):
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "2525")
    monkeypatch.setenv("CONTACT_EMAIL", "sales@example.com")
    monkeypatch.setenv("SMTP_FROM", "atticus@example.com")
    monkeypatch.setenv("SMTP_ALLOW_LIST", "sales@example.com,atticus@example.com")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    mailer = pytest.importorskip("atticus.notify.mailer")

    class BrokenSMTP:
        def __init__(self, *args, **kwargs):
            raise OSError("connection refused")

    monkeypatch.setattr("atticus.notify.mailer.smtplib.SMTP", BrokenSMTP, raising=True)

    with pytest.raises(mailer.EscalationDeliveryError) as excinfo:
        mailer.send_escalation("Fail", "body")

    assert excinfo.value.reason == "connection_error"


def test_send_escalation_rejects_recipient(monkeypatch):
    monkeypatch.setenv("SMTP_HOST", "smtp.test.local")
    monkeypatch.setenv("SMTP_PORT", "2525")
    monkeypatch.setenv("CONTACT_EMAIL", "blocked@example.com")
    monkeypatch.setenv("SMTP_FROM", "atticus@example.com")
    monkeypatch.setenv("SMTP_ALLOW_LIST", "atticus@example.com")

    config_module = pytest.importorskip("atticus.config")
    config_module.reset_settings_cache()

    mailer = pytest.importorskip("atticus.notify.mailer")

    with pytest.raises(mailer.EscalationDeliveryError) as excinfo:
        mailer.send_escalation("Blocked", "body")

    assert excinfo.value.reason == "recipient_not_allowed"

```

---

### tests/test_seed_manifest.py

```python
"""Tests for the seed manifest generation workflow."""

from __future__ import annotations

import os
import shutil
import subprocess
from pathlib import Path

import pytest

config_module = pytest.importorskip("atticus.config")
utils_module = pytest.importorskip("atticus.utils")
chunker_module = pytest.importorskip("ingest.chunker")
parsers_module = pytest.importorskip("ingest.parsers")
seed_module = pytest.importorskip("scripts.make_seed")

load_settings = config_module.load_settings
reset_settings_cache = config_module.reset_settings_cache
sha256_file = utils_module.sha256_file
chunk_document = chunker_module.chunk_document
parse_document = parsers_module.parse_document
build_seed_manifest = seed_module.build_seed_manifest


@pytest.fixture(autouse=True)
def _reset_settings():
    try:
        yield
    finally:
        reset_settings_cache()


def test_build_seed_manifest_includes_chunk_metadata(tmp_path, monkeypatch):
    content_dir = tmp_path / "content"
    content_dir.mkdir()

    document_path = content_dir / "sample.txt"
    document_path.write_text(
        "Heading\n" * 2
        + "Atticus seeds capture deterministic chunk metadata for CI verification." * 3,
        encoding="utf-8",
    )

    monkeypatch.setenv("CONTENT_ROOT", str(content_dir))
    indices_dir = tmp_path / "indices"
    monkeypatch.setenv("INDICES_DIR", str(indices_dir))
    monkeypatch.setenv("SNAPSHOTS_DIR", str(indices_dir / "snapshots"))
    monkeypatch.setenv("LOG_PATH", str(tmp_path / "logs" / "app.jsonl"))
    monkeypatch.setenv("ERROR_LOG_PATH", str(tmp_path / "logs" / "errors.jsonl"))
    monkeypatch.setenv("EVALUATION_RUNS_DIR", str(tmp_path / "eval_runs"))

    manifest = build_seed_manifest()
    assert len(manifest) == 1

    entry = manifest[0]
    assert entry["document"].endswith("sample.txt")
    assert entry["sha256"] == sha256_file(document_path)

    chunk_count = entry["chunk_count"]
    assert isinstance(chunk_count, int) and chunk_count > 0

    chunks = entry["chunks"]
    assert isinstance(chunks, list) and chunks
    assert chunk_count >= len(chunks)

    hashes = {chunk["sha256"] for chunk in chunks}
    assert len(hashes) == len(chunks)

    # Cross-check against the chunker directly for metadata consistency.
    settings = load_settings()
    parsed = parse_document(Path(entry["document"]))
    parsed.sha256 = entry["sha256"]
    actual_chunks = chunk_document(parsed, settings)
    assert chunk_count == len(actual_chunks)

    for chunk in chunks:
        assert chunk["chunk_id"]
        assert chunk["chunking"] in {"prose", "table", "footnote"}
        assert chunk["sha256"]


def test_glossary_seed_entries_round_trip() -> None:
    database_url = os.environ.get("DATABASE_URL")
    if not database_url:
        pytest.skip("DATABASE_URL must be set to verify glossary seeds.")

    if shutil.which("npm") is None:
        pytest.skip("npm is required to execute make db.seed")

    psycopg = pytest.importorskip("psycopg")

    env = os.environ.copy()
    env.setdefault("DEFAULT_ORG_ID", "org-atticus")
    env.setdefault("DEFAULT_ORG_NAME", "Atticus Default")
    env.setdefault("ADMIN_NAME", "Seed Admin")
    env.setdefault("ADMIN_EMAIL", "seed-admin@example.com")

    subprocess.run(["npm", "run", "db:seed"], check=True, env=env)

    expected = {
        "glossary-entry-managed-print-services": {
            "term": "Managed Print Services",
            "status": "APPROVED",
            "synonyms": ["MPS", "Print-as-a-service"],
            "requires_reviewer": True,
        },
        "glossary-entry-proactive-maintenance": {
            "term": "Proactive Maintenance",
            "status": "PENDING",
            "synonyms": ["Preventative maintenance"],
            "requires_reviewer": False,
        },
        "glossary-entry-toner-optimization": {
            "term": "Toner Optimization",
            "status": "REJECTED",
            "synonyms": ["Smart toner", "Consumable optimisation"],
            "requires_reviewer": True,
        },
    }

    with psycopg.connect(database_url) as connection:  # type: ignore[attr-defined]
        with connection.cursor() as cursor:
            cursor.execute(
                'SELECT "id", "term", "status", "synonyms", "authorId", "reviewerId", "reviewNotes", "reviewedAt" '
                'FROM "GlossaryEntry" WHERE "id" = ANY(%s)',
                (list(expected.keys()),),
            )
            rows = {
                row[0]: {
                    "term": row[1],
                    "status": row[2],
                    "synonyms": list(row[3] or ()),
                    "authorId": row[4],
                    "reviewerId": row[5],
                    "reviewNotes": row[6],
                    "reviewedAt": row[7],
                }
                for row in cursor.fetchall()
            }

            cursor.execute(
                'SELECT "id", "status", "topSources", "auditLog" FROM "Chat" WHERE "id" = ANY(%s)',
                (["chat-low-confidence-toner", "chat-escalated-calibration"],),
            )
            chats = {
                row[0]: {"status": row[1], "topSources": row[2], "auditLog": row[3]}
                for row in cursor.fetchall()
            }

            cursor.execute(
                'SELECT "id", "key", "status", "assignee", "summary" FROM "Ticket" WHERE "id" = %s',
                ("ticket-ae-1001",),
            )
            ticket = cursor.fetchone()

    for entry_id, expectations in expected.items():
        assert entry_id in rows, f"Missing glossary seed {entry_id}"
        record = rows[entry_id]
        assert record["term"] == expectations["term"]
        assert record["status"] == expectations["status"]
        assert record["synonyms"] == expectations["synonyms"]
        assert record["authorId"], "Seed glossary entries must have an author"

        if expectations["requires_reviewer"]:
            assert record["reviewerId"], "Reviewer metadata should be present"
            assert record["reviewNotes"], "Reviewer notes should be populated"
            assert record["reviewedAt"], "Reviewed timestamp should be stored"
        else:
            assert record["reviewerId"] is None
            assert record["reviewNotes"] in (None, "")

    assert chats["chat-low-confidence-toner"]["status"] == "pending_review"
    assert isinstance(chats["chat-low-confidence-toner"]["topSources"], list)
    assert chats["chat-escalated-calibration"]["status"] == "escalated"
    assert chats["chat-escalated-calibration"]["auditLog"], (
        "Escalated chat should have audit history"
    )

    assert ticket is not None, "Expected AE escalation ticket to be seeded"
    assert ticket[1] == "AE-1001"
    assert ticket[2] == "open"

```

---

### tests/test_ui_route.py

```python
import pytest


def test_ui_route_or_skip():
    try:
        from api.main import app
    except Exception as e:
        pytest.skip(f"api not implemented yet: {e}")
        return

    try:
        from fastapi.testclient import TestClient
    except Exception as e:
        pytest.skip(f"fastapi not installed: {e}")
        return

    client = TestClient(app)
    r = client.get("/")
    assert r.status_code == 404
    payload = r.json()
    assert payload["error"] == "not_found"
    assert payload["request_id"]

```

---

### tests/unit/admin-uncertain-route.test.ts

```ts
import { afterEach, beforeEach, describe, expect, it, vi } from "vitest";
import { Role } from "@prisma/client";
import type { Session } from "next-auth";

const mockGetServerAuthSession = vi.hoisted(() => vi.fn<[], Promise<Session | null>>());
const mockWithRlsContext = vi.hoisted(() => vi.fn());

vi.mock("@/lib/auth", () => ({
  getServerAuthSession: mockGetServerAuthSession,
}));

vi.mock("@/lib/rls", () => ({
  withRlsContext: mockWithRlsContext,
}));

function buildSession(role: Role): Session {
  return {
    user: {
      id: `user-${role.toLowerCase()}`,
      email: `${role.toLowerCase()}@atticus.dev`,
      name: `${role} Test`,
      role,
      orgId: "org-atticus",
    },
    expires: new Date(Date.now() + 60_000).toISOString(),
  };
}

beforeEach(() => {
  vi.resetModules();
  mockGetServerAuthSession.mockReset();
  mockWithRlsContext.mockReset();
});

afterEach(() => {
  vi.clearAllMocks();
});

describe("/api/admin/uncertain GET", () => {
  it("returns 401 when no session is present", async () => {
    mockGetServerAuthSession.mockResolvedValue(null);

    const { GET } = await import("@/app/api/admin/uncertain/route");
    const response = await GET();

    expect(response.status).toBe(401);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "unauthorized" });
  });

  it("rejects standard users", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.USER));

    const { GET } = await import("@/app/api/admin/uncertain/route");
    const response = await GET();

    expect(response.status).toBe(403);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "forbidden" });
  });

  it("lists pending chats for reviewers", async () => {
    const session = buildSession(Role.REVIEWER);
    mockGetServerAuthSession.mockResolvedValue(session);
    const findMany = vi.fn().mockResolvedValue([
      {
        id: "chat-1",
        question: "Why are alerts firing?",
        answer: "Alerts fire when toner usage spikes.",
        confidence: 0.42,
        status: "pending_review",
        requestId: "req-123",
        createdAt: new Date("2024-07-10T10:00:00Z"),
        topSources: [
          { path: "content/doc-1.pdf#3", score: 0.81, page: 3, heading: "Doc" },
          { path: "content/runbook.md#alerts", heading: "Alerts" },
        ],
        author: { id: "user-author", email: "author@atticus.dev", name: "Author" },
        reviewer: null,
        tickets: [],
        followUpPrompt: null,
        auditLog: [],
      },
    ]);
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        chat: { findMany },
      } as never)
    );

    const { GET } = await import("@/app/api/admin/uncertain/route");
    const response = await GET();

    expect(response.status).toBe(200);
    const payload = (await response.json()) as Array<Record<string, unknown>>;
    expect(findMany).toHaveBeenCalledTimes(1);
    expect(payload).toEqual([
      expect.objectContaining({
        id: "chat-1",
        confidence: 0.42,
        requestId: "req-123",
        answer: "Alerts fire when toner usage spikes.",
        topSources: [
          expect.objectContaining({ path: "content/doc-1.pdf#3", page: 3 }),
          expect.objectContaining({ path: "content/runbook.md#alerts" }),
        ],
      }),
    ]);
  });
});

describe("/api/admin/uncertain/:id/approve POST", () => {
  it("prevents standard users from approving chats", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.USER));

    const { POST } = await import("@/app/api/admin/uncertain/[id]/approve/route");
    const response = await POST(new Request("http://localhost"), { params: { id: "chat-1" } });

    expect(response.status).toBe(403);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "forbidden" });
  });

  it("approves pending chats for reviewers", async () => {
    const session = buildSession(Role.REVIEWER);
    mockGetServerAuthSession.mockResolvedValue(session);
    const findUnique = vi.fn().mockResolvedValue({
      status: "pending_review",
      auditLog: [],
      orgId: session.user.orgId,
      requestId: "req-123",
    });
    const update = vi.fn().mockResolvedValue({
      id: "chat-1",
      status: "reviewed",
      reviewedAt: new Date("2024-07-10T12:00:00Z"),
      reviewer: { id: session.user.id, email: session.user.email, name: session.user.name },
      auditLog: [
        {
          action: "approve",
          actorId: session.user.id,
        },
      ],
      orgId: session.user.orgId,
      requestId: "req-123",
    });
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        chat: {
          findUnique,
          update,
        },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { POST } = await import("@/app/api/admin/uncertain/[id]/approve/route");
    const response = await POST(new Request("http://localhost"), { params: { id: "chat-1" } });

    expect(response.status).toBe(200);
    const payload = await response.json();
    expect(findUnique).toHaveBeenCalledWith({
      where: { id: "chat-1" },
      select: { auditLog: true, status: true, orgId: true, requestId: true },
    });
    expect(update).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
    expect(payload).toMatchObject({ status: "reviewed" });
  });
});

describe("/api/admin/uncertain/:id/escalate POST", () => {
  it("requires admin role", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.REVIEWER));

    const { POST } = await import("@/app/api/admin/uncertain/[id]/escalate/route");
    const response = await POST(new Request("http://localhost"), { params: { id: "chat-1" } });

    expect(response.status).toBe(403);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "forbidden" });
  });

  it("creates a ticket when escalation succeeds", async () => {
    const session = buildSession(Role.ADMIN);
    mockGetServerAuthSession.mockResolvedValue(session);
    const findUnique = vi.fn().mockResolvedValue({
      id: "chat-2",
      orgId: session.user.orgId,
      status: "pending_review",
      question: "Example question",
      auditLog: [],
      requestId: "req-456",
    });
    const ticketCreate = vi.fn().mockResolvedValue({
      id: "ticket-1",
      key: "AE-202410-01",
      status: "open",
      assignee: "Ops",
      lastActivity: new Date("2024-10-01T12:00:00Z"),
    });
    const chatUpdate = vi.fn().mockResolvedValue({});
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        chat: {
          findUnique,
          update: chatUpdate,
        },
        ticket: {
          create: ticketCreate,
        },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { POST } = await import("@/app/api/admin/uncertain/[id]/escalate/route");
    const response = await POST(new Request("http://localhost", { method: "POST" }), {
      params: { id: "chat-2" },
    });

    expect(response.status).toBe(200);
    const payload = await response.json();
    expect(findUnique).toHaveBeenCalledTimes(1);
    expect(ticketCreate).toHaveBeenCalledTimes(1);
    expect(chatUpdate).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
    expect(payload).toMatchObject({ key: "AE-202410-01" });
  });
});

describe("/api/admin/uncertain/:id/ask-followup POST", () => {
  it("requires a reviewer or admin", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.USER));

    const { POST } = await import("@/app/api/admin/uncertain/[id]/ask-followup/route");
    const request = new Request("http://localhost", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: "Ask for firmware details." }),
    });
    const response = await POST(request, { params: { id: "chat-1" } });

    expect(response.status).toBe(403);
  });

  it("validates prompt content", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.REVIEWER));
    const { POST } = await import("@/app/api/admin/uncertain/[id]/ask-followup/route");
    const request = new Request("http://localhost", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: " " }),
    });
    const response = await POST(request, { params: { id: "chat-1" } });
    expect(response.status).toBe(400);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "invalid_request" });
  });

  it("stores follow-up prompts and records audit events", async () => {
    const session = buildSession(Role.REVIEWER);
    mockGetServerAuthSession.mockResolvedValue(session);
    const findUnique = vi.fn().mockResolvedValue({
      id: "chat-3",
      status: "pending_review",
      auditLog: [],
      orgId: session.user.orgId,
    });
    const update = vi.fn().mockResolvedValue({
      id: "chat-3",
      followUpPrompt: "Share the firmware revision.",
      auditLog: [
        {
          action: "followup",
          prompt: "Share the firmware revision.",
        },
      ],
      status: "pending_review",
      requestId: "req-789",
    });
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        chat: {
          findUnique,
          update,
        },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { POST } = await import("@/app/api/admin/uncertain/[id]/ask-followup/route");
    const request = new Request("http://localhost", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ prompt: "Share the firmware revision." }),
    });
    const response = await POST(request, { params: { id: "chat-3" } });

    expect(response.status).toBe(200);
    const payload = await response.json();
    expect(payload).toMatchObject({ followUpPrompt: "Share the firmware revision." });
    expect(findUnique).toHaveBeenCalledTimes(1);
    expect(update).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
  });
});

```

---

### tests/unit/ask-client.test.ts

```ts
import { afterEach, describe, expect, it, vi } from "vitest";
import { askRequestSchema, askResponseSchema } from "@/lib/ask-contract";
import { streamAsk } from "@/lib/ask-client";

const encoder = new TextEncoder();

function createSseResponse(payload: unknown, requestId = "req-123") {
  const stream = new ReadableStream<Uint8Array>({
    start(controller) {
      controller.enqueue(encoder.encode(`event: start\ndata: {"request_id":"${requestId}"}\n\n`));
      controller.enqueue(encoder.encode(`event: answer\ndata: ${JSON.stringify(payload)}\n\n`));
      controller.enqueue(encoder.encode(`event: end\ndata: {"request_id":"${requestId}"}\n\n`));
      controller.close();
    },
  });
  return new Response(stream, {
    status: 200,
    headers: { "Content-Type": "text/event-stream" },
  });
}

afterEach(() => {
  vi.restoreAllMocks();
});

describe("askRequestSchema", () => {
  it("normalises optional fields", () => {
    const parsed = askRequestSchema.parse({
      question: "  hello  ",
      filters: null,
      contextHints: ["  product A  "],
      topK: null,
    });
    expect(parsed.question).toBe("hello");
    expect(parsed.filters).toBeUndefined();
    expect(parsed.contextHints).toEqual(["  product A  "]);
    expect(parsed.topK).toBeUndefined();
  });
});

describe("streamAsk", () => {
  it("parses SSE payloads and resolves with AskResponse", async () => {
    const payload = askResponseSchema.parse({
      answer: "Yes, the pilot is four weeks.",
      confidence: 0.82,
      should_escalate: false,
      request_id: "req-123",
      sources: [
        {
          path: "content/pilot.pdf",
          page: 3,
          heading: "Implementation timeline",
          chunkId: "chunk-1",
        },
      ],
    });
    vi.spyOn(globalThis, "fetch").mockResolvedValue(createSseResponse(payload));

    const response = await streamAsk({
      question: "timeline?",
      filters: undefined,
      contextHints: undefined,
      topK: undefined,
    });
    expect(response).toEqual(payload);
  });

  it("falls back to JSON responses when streaming is unavailable", async () => {
    const payload = {
      answer: "Fallback response",
      confidence: 0.66,
      should_escalate: true,
      request_id: "req-456",
      sources: [],
    };
    vi.spyOn(globalThis, "fetch").mockResolvedValue(
      new Response(JSON.stringify(payload), {
        status: 200,
        headers: { "Content-Type": "application/json" },
      })
    );

    const response = await streamAsk({
      question: "fallback?",
      filters: undefined,
      contextHints: undefined,
      topK: undefined,
    });
    expect(response).toEqual(askResponseSchema.parse(payload));
  });
});

```

---

### tests/unit/glossary-route.test.ts

```ts
import { afterEach, beforeEach, describe, expect, it, vi } from "vitest";
import { GlossaryStatus, Role } from "@prisma/client";
import type { Session } from "next-auth";

const mockGetServerAuthSession = vi.hoisted(() => vi.fn<[], Promise<Session | null>>());
const mockWithRlsContext = vi.hoisted(() => vi.fn());

vi.mock("@/lib/auth", () => ({
  getServerAuthSession: mockGetServerAuthSession,
}));

vi.mock("@/lib/rls", () => ({
  withRlsContext: mockWithRlsContext,
}));

function buildSession(role: Role): Session {
  return {
    user: {
      id: `user-${role.toLowerCase()}`,
      email: `${role.toLowerCase()}@atticus.dev`,
      name: `${role} Test`,
      role,
      orgId: "org-atticus",
    },
    expires: new Date(Date.now() + 60_000).toISOString(),
  };
}

beforeEach(() => {
  vi.resetModules();
  mockGetServerAuthSession.mockReset();
  mockWithRlsContext.mockReset();
});

afterEach(() => {
  vi.clearAllMocks();
});

describe("/api/glossary route RBAC", () => {
  it("allows reviewers to list glossary entries", async () => {
    const session = buildSession(Role.REVIEWER);
    mockGetServerAuthSession.mockResolvedValue(session);
    const now = new Date("2024-06-01T12:00:00Z");
    const findMany = vi.fn().mockResolvedValue([
      {
        id: "entry-1",
        term: "Managed Print Services",
        definition: "Full printer fleet management.",
        synonyms: ["MPS"],
        status: GlossaryStatus.APPROVED,
        createdAt: now,
        updatedAt: now,
        reviewedAt: now,
        reviewNotes: "Cleared for launch",
        author: { id: "user-author", email: "author@atticus.dev", name: "Author" },
        updatedBy: { id: "user-admin", email: "admin@atticus.dev", name: "Admin" },
        reviewer: { id: "user-admin", email: "admin@atticus.dev", name: "Admin" },
      },
    ]);
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        glossaryEntry: {
          findMany,
        },
      } as never)
    );

    const { GET } = await import("@/app/api/glossary/route");
    const response = await GET();
    expect(response.status).toBe(200);
    const payload = (await response.json()) as Array<Record<string, unknown>>;
    expect(findMany).toHaveBeenCalledTimes(1);
    expect(payload).toEqual([
      expect.objectContaining({
        term: "Managed Print Services",
        status: GlossaryStatus.APPROVED,
        reviewedAt: now.toISOString(),
        author: expect.objectContaining({ email: "author@atticus.dev" }),
      }),
    ]);
  });

  it("returns 401 when no session is available", async () => {
    mockGetServerAuthSession.mockResolvedValue(null);

    const { GET } = await import("@/app/api/glossary/route");
    const response = await GET();
    expect(response.status).toBe(401);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "unauthorized" });
    expect(mockWithRlsContext).not.toHaveBeenCalled();
  });

  it("prevents reviewers from creating glossary entries", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.REVIEWER));

    const { POST } = await import("@/app/api/glossary/route");
    const request = new Request("http://localhost/api/glossary", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ term: "New", definition: "Example" }),
    });

    const response = await POST(request);
    expect(response.status).toBe(403);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "forbidden" });
    expect(mockWithRlsContext).not.toHaveBeenCalled();
  });

  it("allows admins to create glossary entries", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.ADMIN));
    const createdAt = new Date("2024-07-01T08:30:00Z");
    const findFirst = vi.fn().mockResolvedValue(null);
    const upsert = vi.fn().mockResolvedValue({
      id: "entry-2",
      term: "Proactive Maintenance",
      definition: "Predictive device upkeep",
      synonyms: ["Preventative maintenance"],
      status: GlossaryStatus.PENDING,
      createdAt,
      updatedAt: createdAt,
      reviewedAt: null,
      reviewNotes: null,
      author: { id: "user-admin", email: "admin@atticus.dev", name: "Admin" },
      updatedBy: { id: "user-admin", email: "admin@atticus.dev", name: "Admin" },
      reviewer: null,
    });
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        glossaryEntry: {
          findFirst,
          upsert,
        },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { POST } = await import("@/app/api/glossary/route");
    const request = new Request("http://localhost/api/glossary", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        term: "Proactive Maintenance",
        definition: "Predictive device upkeep",
        synonyms: ["Preventative maintenance"],
        status: "pending",
      }),
    });

    const response = await POST(request);
    expect(response.status).toBe(201);
    const payload = await response.json();
    expect(payload).toMatchObject({ term: "Proactive Maintenance", status: GlossaryStatus.PENDING });
    expect(findFirst).toHaveBeenCalledWith({ where: { orgId: "org-atticus", term: "Proactive Maintenance" } });
    expect(upsert).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
  });

  it("upserts existing terms when POST is reused", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.ADMIN));
    const existing = {
      id: "entry-2",
      term: "Proactive Maintenance",
      definition: "Predictive device upkeep",
      synonyms: ["Preventative maintenance"],
      status: GlossaryStatus.PENDING,
      reviewNotes: null,
      createdAt: new Date("2024-07-01T08:30:00Z"),
      updatedAt: new Date("2024-07-01T08:30:00Z"),
    };
    const findFirst = vi.fn().mockResolvedValue(existing);
    const upsert = vi.fn().mockResolvedValue({
      ...existing,
      definition: "Predictive device upkeep for fleets",
      updatedAt: new Date("2024-07-02T08:00:00Z"),
      author: null,
      updatedBy: null,
      reviewer: null,
    });
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        glossaryEntry: { findFirst, upsert },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { POST } = await import("@/app/api/glossary/route");
    const request = new Request("http://localhost/api/glossary", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        term: "Proactive Maintenance",
        definition: "Predictive device upkeep for fleets",
        synonyms: ["Preventative maintenance"],
        status: "pending",
      }),
    });

    const response = await POST(request);
    expect(response.status).toBe(200);
    expect(upsert).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
  });
});

describe("/api/glossary/[id] route RBAC", () => {
  it("prevents reviewers from updating glossary entries", async () => {
    mockGetServerAuthSession.mockResolvedValue(buildSession(Role.REVIEWER));

    const { PUT } = await import("@/app/api/glossary/[id]/route");
    const request = new Request("http://localhost/api/glossary/entry-1", {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ status: "approved", definition: "Updated" }),
    });

    const response = await PUT(request, { params: { id: "entry-1" } });
    expect(response.status).toBe(403);
    const payload = await response.json();
    expect(payload).toMatchObject({ error: "forbidden" });
    expect(mockWithRlsContext).not.toHaveBeenCalled();
  });

  it("allows admins to approve entries and stamps reviewer metadata", async () => {
    const session = buildSession(Role.ADMIN);
    mockGetServerAuthSession.mockResolvedValue(session);
    const findUnique = vi.fn().mockResolvedValue({
      id: "entry-1",
      term: "Managed Print Services",
      definition: "Full printer fleet management.",
      synonyms: ["MPS"],
      status: GlossaryStatus.PENDING,
      reviewNotes: null,
    });
    const updatedAt = new Date("2024-07-02T09:00:00Z");
    const update = vi.fn().mockResolvedValue({
      id: "entry-1",
      term: "Managed Print Services",
      definition: "Full printer fleet management.",
      synonyms: ["MPS"],
      status: GlossaryStatus.APPROVED,
      createdAt: updatedAt,
      updatedAt,
      reviewedAt: updatedAt,
      reviewNotes: "Cleared",
      author: { id: "user-author", email: "author@atticus.dev", name: "Author" },
      updatedBy: { id: session.user.id, email: session.user.email, name: session.user.name },
      reviewer: { id: session.user.id, email: session.user.email, name: session.user.name },
    });
    const ragEventCreate = vi.fn();
    mockWithRlsContext.mockImplementation(async (_session, callback) =>
      callback({
        glossaryEntry: {
          findUnique,
          update,
        },
        ragEvent: { create: ragEventCreate },
      } as never)
    );

    const { PUT } = await import("@/app/api/glossary/[id]/route");
    const request = new Request("http://localhost/api/glossary/entry-1", {
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ status: "approved", reviewNotes: "Cleared", definition: "Full printer fleet management." }),
    });

    const response = await PUT(request, { params: { id: "entry-1" } });
    expect(response.status).toBe(200);
    const payload = await response.json();
    expect(payload).toMatchObject({
      status: GlossaryStatus.APPROVED,
      reviewer: expect.objectContaining({ email: session.user.email }),
      reviewNotes: "Cleared",
    });
    expect(update).toHaveBeenCalledTimes(1);
    expect(findUnique).toHaveBeenCalledTimes(1);
    expect(ragEventCreate).toHaveBeenCalledTimes(1);
  });
});

```

---

### tests/unit/rbac.test.ts

```ts
import { describe, expect, it } from "vitest";
import type { Session } from "next-auth";
import { Role } from "@prisma/client";
import {
  canEditGlossary,
  canReviewGlossary,
  ensureRole,
  requireSession,
  ForbiddenError,
  UnauthorizedError,
} from "@/lib/rbac";

const baseSession: Session = {
  user: {
    id: "user-1",
    role: Role.ADMIN,
    orgId: "org-1",
    email: "admin@example.com",
    name: "Admin",
  },
  expires: new Date(Date.now() + 60_000).toISOString(),
};

describe("RBAC helpers", () => {
  it("requires a session", () => {
    expect(() => requireSession(null)).toThrow(UnauthorizedError);
    expect(requireSession(baseSession)).toBe(baseSession);
  });

  it("checks allowed roles", () => {
    expect(ensureRole(baseSession, [Role.ADMIN, Role.REVIEWER])).toBe(baseSession);
    const userSession: Session = {
      ...baseSession,
      user: { ...baseSession.user, role: Role.USER },
    };
    expect(() => ensureRole(userSession, [Role.ADMIN])).toThrow(ForbiddenError);
  });

  it("allows reviewers to view glossary but not edit", () => {
    const reviewerSession: Session = {
      ...baseSession,
      user: { ...baseSession.user, role: Role.REVIEWER },
    };
    expect(canReviewGlossary(reviewerSession)).toBe(reviewerSession);
    expect(() => canEditGlossary(reviewerSession)).toThrow(ForbiddenError);
  });

  it("allows admins to edit glossary", () => {
    expect(canEditGlossary(baseSession)).toBe(baseSession);
  });
});

```

---

### tsconfig.json

```json
{
  "compilerOptions": {
    "target": "es2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": false,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"],
      "@/components/*": ["components/*"],
      "@/app/*": ["app/*"]
    },
    "types": ["node", "vitest"],
    "plugins": [
      {
        "name": "next"
      }
    ]
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    "**/*.cjs",
    "**/*.mjs",
    ".next/types/**/*.ts"
  ],
  "exclude": ["node_modules"]
}

```

---

### vitest.config.ts

```ts
import { defineConfig } from "vitest/config";
import path from "node:path";

export default defineConfig({
  test: {
    include: ["tests/unit/**/*.test.ts"],
    environment: "node",
    globals: true,
    coverage: {
      provider: "v8",
      reporter: ["text", "html"],
      reportsDirectory: "reports/vitest",
    },
  },
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "."),
    },
  },
});

```