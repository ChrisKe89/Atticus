/* GENERATED FILE: update via scripts/generate_api_docs.py */
{
  "components": {
    "schemas": {
      "AskAnswer": {
        "properties": {
          "answer": {
            "title": "Answer",
            "type": "string"
          },
          "confidence": {
            "title": "Confidence",
            "type": "number"
          },
          "family": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family"
          },
          "family_label": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Family Label"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "should_escalate": {
            "title": "Should Escalate",
            "type": "boolean"
          },
          "sources": {
            "items": {
              "$ref": "#/components/schemas/AskSource"
            },
            "title": "Sources",
            "type": "array"
          }
        },
        "required": [
          "answer",
          "confidence",
          "should_escalate",
          "sources"
        ],
        "title": "AskAnswer",
        "type": "object"
      },
      "AskRequest": {
        "description": "Canonical ask request contract shared across services.",
        "properties": {
          "contextHints": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional hints supplied by the UI to bias retrieval",
            "title": "Contexthints"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "description": "Metadata filters such as path_prefix or source_type",
            "title": "Filters"
          },
          "models": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional explicit models or families selected by the user",
            "title": "Models"
          },
          "query": {
            "title": "Query",
            "type": "string"
          },
          "topK": {
            "anyOf": [
              {
                "maximum": 32.0,
                "minimum": 1.0,
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "description": "Override for the retrieval top-k window",
            "title": "Topk"
          }
        },
        "required": [
          "query"
        ],
        "title": "AskRequest",
        "type": "object"
      },
      "AskResponse": {
        "properties": {
          "answer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer"
          },
          "answers": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/AskAnswer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answers"
          },
          "clarification": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ClarificationPayload"
              },
              {
                "type": "null"
              }
            ]
          },
          "confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence"
          },
          "request_id": {
            "title": "Request Id",
            "type": "string"
          },
          "should_escalate": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Should Escalate"
          },
          "sources": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/AskSource"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sources"
          }
        },
        "required": [
          "request_id"
        ],
        "title": "AskResponse",
        "type": "object"
      },
      "AskSource": {
        "description": "Structured citation returned to the UI.",
        "properties": {
          "chunkId": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunkid"
          },
          "heading": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading"
          },
          "page": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page"
          },
          "path": {
            "title": "Path",
            "type": "string"
          },
          "score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Score"
          }
        },
        "required": [
          "path"
        ],
        "title": "AskSource",
        "type": "object"
      },
      "ClarificationOption": {
        "properties": {
          "id": {
            "title": "Id",
            "type": "string"
          },
          "label": {
            "title": "Label",
            "type": "string"
          }
        },
        "required": [
          "id",
          "label"
        ],
        "title": "ClarificationOption",
        "type": "object"
      },
      "ClarificationPayload": {
        "properties": {
          "message": {
            "title": "Message",
            "type": "string"
          },
          "options": {
            "items": {
              "$ref": "#/components/schemas/ClarificationOption"
            },
            "title": "Options",
            "type": "array"
          }
        },
        "required": [
          "message",
          "options"
        ],
        "title": "ClarificationPayload",
        "type": "object"
      },
      "ContactRequest": {
        "properties": {
          "reason": {
            "description": "Reason for contacting support/escalation",
            "title": "Reason",
            "type": "string"
          },
          "trace": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/EscalationTrace"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional trace payload including user/chat/document context"
          },
          "transcript": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "Optional chat transcript (list of lines) or a single string",
            "title": "Transcript"
          }
        },
        "required": [
          "reason"
        ],
        "title": "ContactRequest",
        "type": "object"
      },
      "DictionaryEntry": {
        "properties": {
          "synonyms": {
            "items": {
              "type": "string"
            },
            "title": "Synonyms",
            "type": "array"
          },
          "term": {
            "title": "Term",
            "type": "string"
          }
        },
        "required": [
          "term",
          "synonyms"
        ],
        "title": "DictionaryEntry",
        "type": "object"
      },
      "DictionaryPayload": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/DictionaryEntry"
            },
            "title": "Entries",
            "type": "array"
          }
        },
        "required": [
          "entries"
        ],
        "title": "DictionaryPayload",
        "type": "object"
      },
      "ErrorLogEntry": {
        "properties": {
          "details": {
            "additionalProperties": {
              "type": "string"
            },
            "title": "Details",
            "type": "object"
          },
          "message": {
            "title": "Message",
            "type": "string"
          },
          "time": {
            "title": "Time",
            "type": "string"
          }
        },
        "required": [
          "time",
          "message"
        ],
        "title": "ErrorLogEntry",
        "type": "object"
      },
      "EscalationTrace": {
        "properties": {
          "chat_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Id"
          },
          "message_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message Id"
          },
          "question": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Question"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id"
          },
          "top_documents": {
            "description": "Top retrieved documents and scores",
            "items": {
              "$ref": "#/components/schemas/TraceDocument"
            },
            "title": "Top Documents",
            "type": "array"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          }
        },
        "title": "EscalationTrace",
        "type": "object"
      },
      "EvalResponse": {
        "properties": {
          "deltas": {
            "additionalProperties": {
              "type": "number"
            },
            "title": "Deltas",
            "type": "object"
          },
          "metrics": {
            "additionalProperties": {
              "type": "number"
            },
            "title": "Metrics",
            "type": "object"
          },
          "summary_csv": {
            "title": "Summary Csv",
            "type": "string"
          },
          "summary_html": {
            "title": "Summary Html",
            "type": "string"
          },
          "summary_json": {
            "title": "Summary Json",
            "type": "string"
          }
        },
        "required": [
          "metrics",
          "deltas",
          "summary_csv",
          "summary_json",
          "summary_html"
        ],
        "title": "EvalResponse",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "HealthResponse": {
        "properties": {
          "chunk_count": {
            "title": "Chunk Count",
            "type": "integer"
          },
          "document_count": {
            "title": "Document Count",
            "type": "integer"
          },
          "embedding_model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Embedding Model"
          },
          "embedding_model_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Embedding Model Version"
          },
          "manifest_present": {
            "title": "Manifest Present",
            "type": "boolean"
          },
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status",
          "manifest_present",
          "document_count",
          "chunk_count"
        ],
        "title": "HealthResponse",
        "type": "object"
      },
      "IngestRequest": {
        "properties": {
          "full_refresh": {
            "default": false,
            "title": "Full Refresh",
            "type": "boolean"
          },
          "paths": {
            "anyOf": [
              {
                "items": {
                  "format": "path",
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Paths"
          }
        },
        "title": "IngestRequest",
        "type": "object"
      },
      "IngestResponse": {
        "properties": {
          "chunks_indexed": {
            "title": "Chunks Indexed",
            "type": "integer"
          },
          "documents_processed": {
            "title": "Documents Processed",
            "type": "integer"
          },
          "documents_skipped": {
            "title": "Documents Skipped",
            "type": "integer"
          },
          "elapsed_seconds": {
            "title": "Elapsed Seconds",
            "type": "number"
          },
          "embedding_model": {
            "title": "Embedding Model",
            "type": "string"
          },
          "embedding_model_version": {
            "title": "Embedding Model Version",
            "type": "string"
          },
          "index_path": {
            "title": "Index Path",
            "type": "string"
          },
          "ingested_at": {
            "title": "Ingested At",
            "type": "string"
          },
          "manifest_path": {
            "title": "Manifest Path",
            "type": "string"
          },
          "snapshot_path": {
            "title": "Snapshot Path",
            "type": "string"
          }
        },
        "required": [
          "documents_processed",
          "documents_skipped",
          "chunks_indexed",
          "elapsed_seconds",
          "manifest_path",
          "index_path",
          "snapshot_path",
          "ingested_at",
          "embedding_model",
          "embedding_model_version"
        ],
        "title": "IngestResponse",
        "type": "object"
      },
      "MetricsDashboard": {
        "properties": {
          "avg_confidence": {
            "title": "Avg Confidence",
            "type": "number"
          },
          "avg_latency_ms": {
            "title": "Avg Latency Ms",
            "type": "number"
          },
          "escalations": {
            "title": "Escalations",
            "type": "integer"
          },
          "histogram": {
            "items": {
              "$ref": "#/components/schemas/MetricsHistogram"
            },
            "title": "Histogram",
            "type": "array"
          },
          "p95_latency_ms": {
            "title": "P95 Latency Ms",
            "type": "number"
          },
          "queries": {
            "title": "Queries",
            "type": "integer"
          },
          "rate_limit": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Limit"
          },
          "recent_trace_ids": {
            "items": {
              "type": "string"
            },
            "title": "Recent Trace Ids",
            "type": "array"
          }
        },
        "required": [
          "queries",
          "avg_confidence",
          "escalations",
          "avg_latency_ms",
          "p95_latency_ms",
          "histogram",
          "recent_trace_ids"
        ],
        "title": "MetricsDashboard",
        "type": "object"
      },
      "MetricsHistogram": {
        "properties": {
          "bucket": {
            "title": "Bucket",
            "type": "string"
          },
          "count": {
            "title": "Count",
            "type": "integer"
          }
        },
        "required": [
          "bucket",
          "count"
        ],
        "title": "MetricsHistogram",
        "type": "object"
      },
      "SessionLogEntry": {
        "properties": {
          "confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence"
          },
          "escalate": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Escalate"
          },
          "filters": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Filters"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms"
          },
          "method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Method"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "request_id": {
            "title": "Request Id",
            "type": "string"
          },
          "status": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "time": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Time"
          }
        },
        "required": [
          "request_id"
        ],
        "title": "SessionLogEntry",
        "type": "object"
      },
      "SessionLogResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionLogEntry"
            },
            "title": "Sessions",
            "type": "array"
          }
        },
        "required": [
          "sessions"
        ],
        "title": "SessionLogResponse",
        "type": "object"
      },
      "TraceDocument": {
        "properties": {
          "chunk_id": {
            "title": "Chunk Id",
            "type": "string"
          },
          "heading": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heading"
          },
          "page_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page Number"
          },
          "score": {
            "title": "Score",
            "type": "number"
          },
          "source_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Path"
          }
        },
        "required": [
          "chunk_id",
          "score"
        ],
        "title": "TraceDocument",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError",
        "type": "object"
      }
    }
  },
  "info": {
    "title": "Atticus RAG API",
    "version": "0.8.1"
  },
  "openapi": "3.1.0",
  "paths": {
    "/admin/dictionary": {
      "get": {
        "operationId": "read_dictionary_admin_dictionary_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DictionaryPayload"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Read Dictionary"
      },
      "post": {
        "operationId": "write_dictionary_admin_dictionary_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DictionaryPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DictionaryPayload"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Write Dictionary"
      }
    },
    "/admin/errors": {
      "get": {
        "operationId": "get_errors_admin_errors_get",
        "parameters": [
          {
            "description": "Return errors since ISO timestamp",
            "in": "query",
            "name": "since",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Return errors since ISO timestamp",
              "title": "Since"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ErrorLogEntry"
                  },
                  "title": "Response Get Errors Admin Errors Get",
                  "type": "array"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Errors"
      }
    },
    "/admin/metrics": {
      "get": {
        "operationId": "get_metrics_dashboard_admin_metrics_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MetricsDashboard"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Metrics Dashboard"
      }
    },
    "/admin/sessions": {
      "get": {
        "operationId": "get_sessions_admin_sessions_get",
        "parameters": [
          {
            "description": "Return JSON or HTML",
            "in": "query",
            "name": "format",
            "required": false,
            "schema": {
              "default": "json",
              "description": "Return JSON or HTML",
              "pattern": "^(json|html)$",
              "title": "Format",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 200,
              "minimum": 1,
              "title": "Limit",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionLogResponse"
                }
              },
              "text/html": {}
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Sessions"
      }
    },
    "/ask": {
      "post": {
        "operationId": "ask_endpoint_ask_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AskRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AskResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Ask Endpoint"
      }
    },
    "/contact": {
      "post": {
        "operationId": "contact_contact_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Contact Contact Post",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Contact"
      }
    },
    "/eval/run": {
      "post": {
        "operationId": "run_eval_eval_run_post",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EvalResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Run Eval"
      }
    },
    "/health": {
      "get": {
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Health"
      }
    },
    "/ingest": {
      "post": {
        "operationId": "trigger_ingestion_ingest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Trigger Ingestion"
      }
    }
  }
}
